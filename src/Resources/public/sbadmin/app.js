/*! For license information please see app.js.LICENSE.txt */
(()=>{var t={988:(t,e,i)=>{"use strict";!function(e,n){t.exports=e(i(243)),void 0!==n&&n.L&&e(n.L)}((function(t){t.Editable=t.Evented.extend({statics:{FORWARD:1,BACKWARD:-1},options:{zIndex:1e3,polygonClass:t.Polygon,polylineClass:t.Polyline,markerClass:t.Marker,rectangleClass:t.Rectangle,circleClass:t.Circle,drawingCSSClass:"leaflet-editable-drawing",drawingCursor:"crosshair",editLayer:void 0,featuresLayer:void 0,polylineEditorClass:void 0,polygonEditorClass:void 0,markerEditorClass:void 0,rectangleEditorClass:void 0,circleEditorClass:void 0,lineGuideOptions:{},skipMiddleMarkers:!1},initialize:function(e,i){t.setOptions(this,i),this._lastZIndex=this.options.zIndex,this.map=e,this.editLayer=this.createEditLayer(),this.featuresLayer=this.createFeaturesLayer(),this.forwardLineGuide=this.createLineGuide(),this.backwardLineGuide=this.createLineGuide()},fireAndForward:function(t,e){(e=e||{}).editTools=this,this.fire(t,e),this.map.fire(t,e)},createLineGuide:function(){var e=t.extend({dashArray:"5,10",weight:1,interactive:!1},this.options.lineGuideOptions);return t.polyline([],e)},createVertexIcon:function(e){return t.Browser.mobile&&t.Browser.touch?new t.Editable.TouchVertexIcon(e):new t.Editable.VertexIcon(e)},createEditLayer:function(){return this.options.editLayer||(new t.LayerGroup).addTo(this.map)},createFeaturesLayer:function(){return this.options.featuresLayer||(new t.LayerGroup).addTo(this.map)},moveForwardLineGuide:function(t){this.forwardLineGuide._latlngs.length&&(this.forwardLineGuide._latlngs[1]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw())},moveBackwardLineGuide:function(t){this.backwardLineGuide._latlngs.length&&(this.backwardLineGuide._latlngs[1]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw())},anchorForwardLineGuide:function(t){this.forwardLineGuide._latlngs[0]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw()},anchorBackwardLineGuide:function(t){this.backwardLineGuide._latlngs[0]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw()},attachForwardLineGuide:function(){this.editLayer.addLayer(this.forwardLineGuide)},attachBackwardLineGuide:function(){this.editLayer.addLayer(this.backwardLineGuide)},detachForwardLineGuide:function(){this.forwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.forwardLineGuide)},detachBackwardLineGuide:function(){this.backwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.backwardLineGuide)},blockEvents:function(){this._oldTargets||(this._oldTargets=this.map._targets,this.map._targets={})},unblockEvents:function(){this._oldTargets&&(this.map._targets=t.extend(this.map._targets,this._oldTargets),delete this._oldTargets)},registerForDrawing:function(e){this._drawingEditor&&this.unregisterForDrawing(this._drawingEditor),this.blockEvents(),e.reset(),this._drawingEditor=e,this.map.on("mousemove touchmove",e.onDrawingMouseMove,e),this.map.on("mousedown",this.onMousedown,this),this.map.on("mouseup",this.onMouseup,this),t.DomUtil.addClass(this.map._container,this.options.drawingCSSClass),this.defaultMapCursor=this.map._container.style.cursor,this.map._container.style.cursor=this.options.drawingCursor},unregisterForDrawing:function(e){this.unblockEvents(),t.DomUtil.removeClass(this.map._container,this.options.drawingCSSClass),this.map._container.style.cursor=this.defaultMapCursor,(e=e||this._drawingEditor)&&(this.map.off("mousemove touchmove",e.onDrawingMouseMove,e),this.map.off("mousedown",this.onMousedown,this),this.map.off("mouseup",this.onMouseup,this),e===this._drawingEditor&&(delete this._drawingEditor,e._drawing&&e.cancelDrawing()))},onMousedown:function(t){1==t.originalEvent.which&&(this._mouseDown=t,this._drawingEditor.onDrawingMouseDown(t))},onMouseup:function(e){if(this._mouseDown){var i=this._drawingEditor,n=this._mouseDown;if(this._mouseDown=null,i.onDrawingMouseUp(e),this._drawingEditor!==i)return;var o=t.point(n.originalEvent.clientX,n.originalEvent.clientY),s=t.point(e.originalEvent.clientX,e.originalEvent.clientY).distanceTo(o);Math.abs(s)<9*(window.devicePixelRatio||1)&&this._drawingEditor.onDrawingClick(e)}},drawing:function(){return this._drawingEditor&&this._drawingEditor.drawing()},stopDrawing:function(){this.unregisterForDrawing()},commitDrawing:function(t){this._drawingEditor&&this._drawingEditor.commitDrawing(t)},connectCreatedToMap:function(t){return this.featuresLayer.addLayer(t)},startPolyline:function(t,e){var i=this.createPolyline([],e);return i.enableEdit(this.map).newShape(t),i},startPolygon:function(t,e){var i=this.createPolygon([],e);return i.enableEdit(this.map).newShape(t),i},startMarker:function(t,e){t=t||this.map.getCenter().clone();var i=this.createMarker(t,e);return i.enableEdit(this.map).startDrawing(),i},startRectangle:function(e,i){var n=e||t.latLng([0,0]),o=new t.LatLngBounds(n,n),s=this.createRectangle(o,i);return s.enableEdit(this.map).startDrawing(),s},startCircle:function(t,e){t=t||this.map.getCenter().clone();var i=this.createCircle(t,e);return i.enableEdit(this.map).startDrawing(),i},startHole:function(t,e){t.newHole(e)},createLayer:function(e,i,n){var o=new e(i,n=t.Util.extend({editOptions:{editTools:this}},n));return this.fireAndForward("editable:created",{layer:o}),o},createPolyline:function(t,e){return this.createLayer(e&&e.polylineClass||this.options.polylineClass,t,e)},createPolygon:function(t,e){return this.createLayer(e&&e.polygonClass||this.options.polygonClass,t,e)},createMarker:function(t,e){return this.createLayer(e&&e.markerClass||this.options.markerClass,t,e)},createRectangle:function(t,e){return this.createLayer(e&&e.rectangleClass||this.options.rectangleClass,t,e)},createCircle:function(t,e){return this.createLayer(e&&e.circleClass||this.options.circleClass,t,e)}}),t.extend(t.Editable,{makeCancellable:function(t){t.cancel=function(){t._cancelled=!0}}}),t.Map.mergeOptions({editToolsClass:t.Editable,editable:!1,editOptions:{}}),t.Map.addInitHook((function(){this.whenReady((function(){this.options.editable&&(this.editTools=new this.options.editToolsClass(this,this.options.editOptions))}))})),t.Editable.VertexIcon=t.DivIcon.extend({options:{iconSize:new t.Point(8,8)}}),t.Editable.TouchVertexIcon=t.Editable.VertexIcon.extend({options:{iconSize:new t.Point(20,20)}}),t.Editable.VertexMarker=t.Marker.extend({options:{draggable:!0,className:"leaflet-div-icon leaflet-vertex-icon"},initialize:function(e,i,n,o){this.latlng=e,this.latlngs=i,this.editor=n,t.Marker.prototype.initialize.call(this,e,o),this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.latlng.__vertex=this,this.editor.editLayer.addLayer(this),this.setZIndexOffset(n.tools._lastZIndex+1)},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),this.on("drag",this.onDrag),this.on("dragstart",this.onDragStart),this.on("dragend",this.onDragEnd),this.on("mouseup",this.onMouseup),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu),this.on("mousedown touchstart",this.onMouseDown),this.on("mouseover",this.onMouseOver),this.on("mouseout",this.onMouseOut),this.addMiddleMarkers()},onRemove:function(e){this.middleMarker&&this.middleMarker.delete(),delete this.latlng.__vertex,this.off("drag",this.onDrag),this.off("dragstart",this.onDragStart),this.off("dragend",this.onDragEnd),this.off("mouseup",this.onMouseup),this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),this.off("mousedown touchstart",this.onMouseDown),this.off("mouseover",this.onMouseOver),this.off("mouseout",this.onMouseOut),t.Marker.prototype.onRemove.call(this,e)},onDrag:function(e){e.vertex=this,this.editor.onVertexMarkerDrag(e);var i=t.DomUtil.getPosition(this._icon),n=this._map.layerPointToLatLng(i);this.latlng.update(n),this._latlng=this.latlng,this.editor.refresh(),this.middleMarker&&this.middleMarker.updateLatLng();var o=this.getNext();o&&o.middleMarker&&o.middleMarker.updateLatLng()},onDragStart:function(t){t.vertex=this,this.editor.onVertexMarkerDragStart(t)},onDragEnd:function(t){t.vertex=this,this.editor.onVertexMarkerDragEnd(t)},onClick:function(t){t.vertex=this,this.editor.onVertexMarkerClick(t)},onMouseup:function(e){t.DomEvent.stop(e),e.vertex=this,this.editor.map.fire("mouseup",e)},onContextMenu:function(t){t.vertex=this,this.editor.onVertexMarkerContextMenu(t)},onMouseDown:function(t){t.vertex=this,this.editor.onVertexMarkerMouseDown(t)},onMouseOver:function(t){t.vertex=this,this.editor.onVertexMarkerMouseOver(t)},onMouseOut:function(t){t.vertex=this,this.editor.onVertexMarkerMouseOut(t)},delete:function(){var t=this.getNext();this.latlngs.splice(this.getIndex(),1),this.editor.editLayer.removeLayer(this),this.editor.onVertexDeleted({latlng:this.latlng,vertex:this}),this.latlngs.length||this.editor.deleteShape(this.latlngs),t&&t.resetMiddleMarker(),this.editor.refresh()},getIndex:function(){return this.latlngs.indexOf(this.latlng)},getLastIndex:function(){return this.latlngs.length-1},getPrevious:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t-1;0===t&&this.editor.CLOSED&&(e=this.getLastIndex());var i=this.latlngs[e];return i?i.__vertex:void 0}},getNext:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t+1;t===this.getLastIndex()&&this.editor.CLOSED&&(e=0);var i=this.latlngs[e];return i?i.__vertex:void 0}},addMiddleMarker:function(t){this.editor.hasMiddleMarkers()&&(t=t||this.getPrevious())&&!this.middleMarker&&(this.middleMarker=this.editor.addMiddleMarker(t,this,this.latlngs,this.editor))},addMiddleMarkers:function(){if(this.editor.hasMiddleMarkers()){var t=this.getPrevious();t&&this.addMiddleMarker(t);var e=this.getNext();e&&e.resetMiddleMarker()}},resetMiddleMarker:function(){this.middleMarker&&this.middleMarker.delete(),this.addMiddleMarker()},split:function(){this.editor.splitShape&&this.editor.splitShape(this.latlngs,this.getIndex())},continue:function(){if(this.editor.continueBackward){var t=this.getIndex();0===t?this.editor.continueBackward(this.latlngs):t===this.getLastIndex()&&this.editor.continueForward(this.latlngs)}}}),t.Editable.mergeOptions({vertexMarkerClass:t.Editable.VertexMarker}),t.Editable.MiddleMarker=t.Marker.extend({options:{opacity:.5,className:"leaflet-div-icon leaflet-middle-icon",draggable:!0},initialize:function(e,i,n,o,s){this.left=e,this.right=i,this.editor=o,this.latlngs=n,t.Marker.prototype.initialize.call(this,this.computeLatLng(),s),this._opacity=this.options.opacity,this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.editor.editLayer.addLayer(this),this.setVisibility()},setVisibility:function(){var e=this._map.latLngToContainerPoint(this.left.latlng),i=this._map.latLngToContainerPoint(this.right.latlng),n=t.point(this.options.icon.options.iconSize);e.distanceTo(i)<3*n.x?this.hide():this.show()},show:function(){this.setOpacity(this._opacity)},hide:function(){this.setOpacity(0)},updateLatLng:function(){this.setLatLng(this.computeLatLng()),this.setVisibility()},computeLatLng:function(){var t=this.editor.map.latLngToContainerPoint(this.left.latlng),e=this.editor.map.latLngToContainerPoint(this.right.latlng),i=(t.y+e.y)/2,n=(t.x+e.x)/2;return this.editor.map.containerPointToLatLng([n,i])},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),t.DomEvent.on(this._icon,"mousedown touchstart",this.onMouseDown,this),e.on("zoomend",this.setVisibility,this)},onRemove:function(e){delete this.right.middleMarker,t.DomEvent.off(this._icon,"mousedown touchstart",this.onMouseDown,this),e.off("zoomend",this.setVisibility,this),t.Marker.prototype.onRemove.call(this,e)},onMouseDown:function(e){var i=t.DomUtil.getPosition(this._icon);if(e={originalEvent:e,latlng:this.editor.map.layerPointToLatLng(i)},0!==this.options.opacity&&(t.Editable.makeCancellable(e),this.editor.onMiddleMarkerMouseDown(e),!e._cancelled)){this.latlngs.splice(this.index(),0,e.latlng),this.editor.refresh();var n=this._icon,o=this.editor.addVertexMarker(e.latlng,this.latlngs);this.editor.onNewVertex(o);var s=o._icon.parentNode;s.removeChild(o._icon),o._icon=n,s.appendChild(o._icon),o._initIcon(),o._initInteraction(),o.setOpacity(1),t.Draggable._dragging=!1,o.dragging._draggable._onDown(e.originalEvent),this.delete()}},delete:function(){this.editor.editLayer.removeLayer(this)},index:function(){return this.latlngs.indexOf(this.right.latlng)}}),t.Editable.mergeOptions({middleMarkerClass:t.Editable.MiddleMarker}),t.Editable.BaseEditor=t.Handler.extend({initialize:function(e,i,n){t.setOptions(this,n),this.map=e,this.feature=i,this.feature.editor=this,this.editLayer=new t.LayerGroup,this.tools=this.options.editTools||e.editTools},addHooks:function(){this.isConnected()?this.onFeatureAdd():this.feature.once("add",this.onFeatureAdd,this),this.onEnable(),this.feature.on(this._getEvents(),this)},removeHooks:function(){this.feature.off(this._getEvents(),this),this.feature.dragging&&this.feature.dragging.disable(),this.editLayer.clearLayers(),this.tools.editLayer.removeLayer(this.editLayer),this.onDisable(),this._drawing&&this.cancelDrawing()},drawing:function(){return!!this._drawing},reset:function(){},onFeatureAdd:function(){this.tools.editLayer.addLayer(this.editLayer),this.feature.dragging&&this.feature.dragging.enable()},hasMiddleMarkers:function(){return!this.options.skipMiddleMarkers&&!this.tools.options.skipMiddleMarkers},fireAndForward:function(t,e){(e=e||{}).layer=this.feature,this.feature.fire(t,e),this.tools.fireAndForward(t,e)},onEnable:function(){this.fireAndForward("editable:enable")},onDisable:function(){this.fireAndForward("editable:disable")},onEditing:function(){this.fireAndForward("editable:editing")},onStartDrawing:function(){this.fireAndForward("editable:drawing:start")},onEndDrawing:function(){this.fireAndForward("editable:drawing:end")},onCancelDrawing:function(){this.fireAndForward("editable:drawing:cancel")},onCommitDrawing:function(t){this.fireAndForward("editable:drawing:commit",t)},onDrawingMouseDown:function(t){this.fireAndForward("editable:drawing:mousedown",t)},onDrawingMouseUp:function(t){this.fireAndForward("editable:drawing:mouseup",t)},startDrawing:function(){this._drawing||(this._drawing=t.Editable.FORWARD),this.tools.registerForDrawing(this),this.onStartDrawing()},commitDrawing:function(t){this.onCommitDrawing(t),this.endDrawing()},cancelDrawing:function(){t.Draggable._dragging=!1,this.onCancelDrawing(),this.endDrawing()},endDrawing:function(){this._drawing=!1,this.tools.unregisterForDrawing(this),this.onEndDrawing()},onDrawingClick:function(e){this.drawing()&&(t.Editable.makeCancellable(e),this.fireAndForward("editable:drawing:click",e),e._cancelled||(this.isConnected()||this.connect(e),this.processDrawingClick(e)))},isConnected:function(){return this.map.hasLayer(this.feature)},connect:function(){this.tools.connectCreatedToMap(this.feature),this.tools.editLayer.addLayer(this.editLayer)},onMove:function(t){this.fireAndForward("editable:drawing:move",t)},onDrawingMouseMove:function(t){this.onMove(t)},_getEvents:function(){return{dragstart:this.onDragStart,drag:this.onDrag,dragend:this.onDragEnd,remove:this.disable}},onDragStart:function(t){this.onEditing(),this.fireAndForward("editable:dragstart",t)},onDrag:function(t){this.onMove(t),this.fireAndForward("editable:drag",t)},onDragEnd:function(t){this.fireAndForward("editable:dragend",t)}}),t.Editable.MarkerEditor=t.Editable.BaseEditor.extend({onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&this.feature.setLatLng(e.latlng)},processDrawingClick:function(t){this.fireAndForward("editable:drawing:clicked",t),this.commitDrawing(t)},connect:function(e){e&&(this.feature._latlng=e.latlng),t.Editable.BaseEditor.prototype.connect.call(this,e)}}),t.Editable.PathEditor=t.Editable.BaseEditor.extend({CLOSED:!1,MIN_VERTEX:2,addHooks:function(){return t.Editable.BaseEditor.prototype.addHooks.call(this),this.feature&&this.initVertexMarkers(),this},initVertexMarkers:function(t){if(this.enabled())if(t=t||this.getLatLngs(),l(t))this.addVertexMarkers(t);else for(var e=0;e<t.length;e++)this.initVertexMarkers(t[e])},getLatLngs:function(){return this.feature.getLatLngs()},reset:function(){this.editLayer.clearLayers(),this.initVertexMarkers()},addVertexMarker:function(t,e){return new this.tools.options.vertexMarkerClass(t,e,this)},onNewVertex:function(t){this.fireAndForward("editable:vertex:new",{latlng:t.latlng,vertex:t})},addVertexMarkers:function(t){for(var e=0;e<t.length;e++)this.addVertexMarker(t[e],t)},refreshVertexMarkers:function(t){t=t||this.getDefaultLatLngs();for(var e=0;e<t.length;e++)t[e].__vertex.update()},addMiddleMarker:function(t,e,i){return new this.tools.options.middleMarkerClass(t,e,i,this)},onVertexMarkerClick:function(e){if(t.Editable.makeCancellable(e),this.fireAndForward("editable:vertex:click",e),!(e._cancelled||this.tools.drawing()&&this.tools._drawingEditor!==this)){var i,n=e.vertex.getIndex();e.originalEvent.ctrlKey?this.onVertexMarkerCtrlClick(e):e.originalEvent.altKey?this.onVertexMarkerAltClick(e):e.originalEvent.shiftKey?this.onVertexMarkerShiftClick(e):e.originalEvent.metaKey?this.onVertexMarkerMetaKeyClick(e):n===e.vertex.getLastIndex()&&this._drawing===t.Editable.FORWARD?n>=this.MIN_VERTEX-1&&(i=!0):0===n&&this._drawing===t.Editable.BACKWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX||0===n&&this._drawing===t.Editable.FORWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX&&this.CLOSED?i=!0:this.onVertexRawMarkerClick(e),this.fireAndForward("editable:vertex:clicked",e),i&&this.commitDrawing(e)}},onVertexRawMarkerClick:function(t){this.fireAndForward("editable:vertex:rawclick",t),t._cancelled||this.vertexCanBeDeleted(t.vertex)&&t.vertex.delete()},vertexCanBeDeleted:function(t){return t.latlngs.length>this.MIN_VERTEX},onVertexDeleted:function(t){this.fireAndForward("editable:vertex:deleted",t)},onVertexMarkerCtrlClick:function(t){this.fireAndForward("editable:vertex:ctrlclick",t)},onVertexMarkerShiftClick:function(t){this.fireAndForward("editable:vertex:shiftclick",t)},onVertexMarkerMetaKeyClick:function(t){this.fireAndForward("editable:vertex:metakeyclick",t)},onVertexMarkerAltClick:function(t){this.fireAndForward("editable:vertex:altclick",t)},onVertexMarkerContextMenu:function(t){this.fireAndForward("editable:vertex:contextmenu",t)},onVertexMarkerMouseDown:function(t){this.fireAndForward("editable:vertex:mousedown",t)},onVertexMarkerMouseOver:function(t){this.fireAndForward("editable:vertex:mouseover",t)},onVertexMarkerMouseOut:function(t){this.fireAndForward("editable:vertex:mouseout",t)},onMiddleMarkerMouseDown:function(t){this.fireAndForward("editable:middlemarker:mousedown",t)},onVertexMarkerDrag:function(t){this.onMove(t),this.feature._bounds&&this.extendBounds(t),this.fireAndForward("editable:vertex:drag",t)},onVertexMarkerDragStart:function(t){this.fireAndForward("editable:vertex:dragstart",t)},onVertexMarkerDragEnd:function(t){this.fireAndForward("editable:vertex:dragend",t)},setDrawnLatLngs:function(t){this._drawnLatLngs=t||this.getDefaultLatLngs()},startDrawing:function(){this._drawnLatLngs||this.setDrawnLatLngs(),t.Editable.BaseEditor.prototype.startDrawing.call(this)},startDrawingForward:function(){this.startDrawing()},endDrawing:function(){this.tools.detachForwardLineGuide(),this.tools.detachBackwardLineGuide(),this._drawnLatLngs&&this._drawnLatLngs.length<this.MIN_VERTEX&&this.deleteShape(this._drawnLatLngs),t.Editable.BaseEditor.prototype.endDrawing.call(this),delete this._drawnLatLngs},addLatLng:function(e){this._drawing===t.Editable.FORWARD?this._drawnLatLngs.push(e):this._drawnLatLngs.unshift(e),this.feature._bounds.extend(e);var i=this.addVertexMarker(e,this._drawnLatLngs);this.onNewVertex(i),this.refresh()},newPointForward:function(t){this.addLatLng(t),this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t)},newPointBackward:function(t){this.addLatLng(t),this.tools.anchorBackwardLineGuide(t)},push:function(e){if(!e)return console.error("L.Editable.PathEditor.push expect a valid latlng as parameter");this._drawing===t.Editable.FORWARD?this.newPointForward(e):this.newPointBackward(e)},removeLatLng:function(t){t.__vertex.delete(),this.refresh()},pop:function(){var e;if(!(this._drawnLatLngs.length<=1))return e=this._drawing===t.Editable.FORWARD?this._drawnLatLngs[this._drawnLatLngs.length-1]:this._drawnLatLngs[0],this.removeLatLng(e),this._drawing===t.Editable.FORWARD?this.tools.anchorForwardLineGuide(this._drawnLatLngs[this._drawnLatLngs.length-1]):this.tools.anchorForwardLineGuide(this._drawnLatLngs[0]),e},processDrawingClick:function(e){e.vertex&&e.vertex.editor===this||(this._drawing===t.Editable.FORWARD?this.newPointForward(e.latlng):this.newPointBackward(e.latlng),this.fireAndForward("editable:drawing:clicked",e))},onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&(this.tools.moveForwardLineGuide(e.latlng),this.tools.moveBackwardLineGuide(e.latlng))},refresh:function(){this.feature.redraw(),this.onEditing()},newShape:function(t){var e=this.addNewEmptyShape();e&&(this.setDrawnLatLngs(e[0]||e),this.startDrawingForward(),this.fireAndForward("editable:shape:new",{shape:e}),t&&this.newPointForward(t))},deleteShape:function(e,i){var n={shape:e};if(t.Editable.makeCancellable(n),this.fireAndForward("editable:shape:delete",n),!n._cancelled)return e=this._deleteShape(e,i),this.ensureNotFlat&&this.ensureNotFlat(),this.feature.setLatLngs(this.getLatLngs()),this.refresh(),this.reset(),this.fireAndForward("editable:shape:deleted",{shape:e}),e},_deleteShape:function(t,e){if((e=e||this.getLatLngs()).length){var i=this,n=function(t,e){return t.splice(t.indexOf(e),1),t.length||i._deleteShape(t),e};if(e===t)return function(t,e){return t.splice(0,Number.MAX_VALUE)}(e);for(var o=0;o<e.length;o++){if(e[o]===t)return n(e,t);if(-1!==e[o].indexOf(t))return n(e[o],t)}}},deleteShapeAt:function(t){var e=this.feature.shapeAt(t);if(e)return this.deleteShape(e)},appendShape:function(t){this.insertShape(t)},prependShape:function(t){this.insertShape(t,0)},insertShape:function(t,e){this.ensureMulti(),t=this.formatShape(t),void 0===e&&(e=this.feature._latlngs.length),this.feature._latlngs.splice(e,0,t),this.feature.redraw(),this._enabled&&this.reset()},extendBounds:function(t){this.feature._bounds.extend(t.vertex.latlng)},onDragStart:function(e){this.editLayer.clearLayers(),t.Editable.BaseEditor.prototype.onDragStart.call(this,e)},onDragEnd:function(e){this.initVertexMarkers(),t.Editable.BaseEditor.prototype.onDragEnd.call(this,e)}}),t.Editable.PolylineEditor=t.Editable.PathEditor.extend({startDrawingBackward:function(){this._drawing=t.Editable.BACKWARD,this.startDrawing()},continueBackward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachBackwardLineGuide(),this.tools.anchorBackwardLineGuide(t[0])),this.startDrawingBackward())},continueForward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t[t.length-1])),this.startDrawingForward())},getDefaultLatLngs:function(e){return!(e=e||this.feature._latlngs).length||e[0]instanceof t.LatLng?e:this.getDefaultLatLngs(e[0])},ensureMulti:function(){this.feature._latlngs.length&&l(this.feature._latlngs)&&(this.feature._latlngs=[this.feature._latlngs])},addNewEmptyShape:function(){if(this.feature._latlngs.length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},formatShape:function(t){return l(t)?t:t[0]?this.formatShape(t[0]):void 0},splitShape:function(e,i){if(i&&!(i>=e.length-1)){this.ensureMulti();var n=this.feature._latlngs.indexOf(e);if(-1!==n){var o=e.slice(0,i+1),s=e.slice(i);s[0]=t.latLng(s[0].lat,s[0].lng,s[0].alt),this.feature._latlngs.splice(n,1,o,s),this.refresh(),this.reset()}}}}),t.Editable.PolygonEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:3,newPointForward:function(e){t.Editable.PathEditor.prototype.newPointForward.call(this,e),this.tools.backwardLineGuide._latlngs.length||this.tools.anchorBackwardLineGuide(e),2===this._drawnLatLngs.length&&this.tools.attachBackwardLineGuide()},addNewEmptyHole:function(t){this.ensureNotFlat();var e=this.feature.shapeAt(t);if(e){var i=[];return e.push(i),i}},newHole:function(t){var e=this.addNewEmptyHole(t);e&&(this.setDrawnLatLngs(e),this.startDrawingForward(),t&&this.newPointForward(t))},addNewEmptyShape:function(){if(this.feature._latlngs.length&&this.feature._latlngs[0].length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},ensureMulti:function(){this.feature._latlngs.length&&l(this.feature._latlngs[0])&&(this.feature._latlngs=[this.feature._latlngs])},ensureNotFlat:function(){this.feature._latlngs.length&&!l(this.feature._latlngs)||(this.feature._latlngs=[this.feature._latlngs])},vertexCanBeDeleted:function(e){var i=this.feature.parentShape(e.latlngs);return t.Util.indexOf(i,e.latlngs)>0||t.Editable.PathEditor.prototype.vertexCanBeDeleted.call(this,e)},getDefaultLatLngs:function(){return this.feature._latlngs.length||this.feature._latlngs.push([]),this.feature._latlngs[0]},formatShape:function(t){return!l(t)||t[0]&&0===t[0].length?t:[t]}}),t.Editable.RectangleEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:4,options:{skipMiddleMarkers:!0},extendBounds:function(e){var i=e.vertex.getIndex(),n=e.vertex.getNext(),o=e.vertex.getPrevious(),s=(i+2)%4,r=e.vertex.latlngs[s],a=new t.LatLngBounds(e.latlng,r);o.latlng.update([e.latlng.lat,r.lng]),n.latlng.update([r.lat,e.latlng.lng]),this.updateBounds(a),this.refreshVertexMarkers()},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this.connect();var i=this.getDefaultLatLngs();3===i.length&&i.push(e.latlng);var n=new t.LatLngBounds(e.latlng,e.latlng);this.updateBounds(n),this.updateLatLngs(n),this.refresh(),this.reset(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),i[3].__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},getDefaultLatLngs:function(t){return t||this.feature._latlngs[0]},updateBounds:function(t){this.feature._bounds=t},updateLatLngs:function(t){for(var e=this.getDefaultLatLngs(),i=this.feature._boundsToLatLngs(t),n=0;n<e.length;n++)e[n].update(i[n])}}),t.Editable.CircleEditor=t.Editable.PathEditor.extend({MIN_VERTEX:2,options:{skipMiddleMarkers:!0},initialize:function(e,i,n){t.Editable.PathEditor.prototype.initialize.call(this,e,i,n),this._resizeLatLng=this.computeResizeLatLng()},computeResizeLatLng:function(){var t=(this.feature._radius||this.feature._mRadius)*Math.cos(Math.PI/4),e=this.map.project(this.feature._latlng);return this.map.unproject([e.x+t,e.y-t])},updateResizeLatLng:function(){this._resizeLatLng.update(this.computeResizeLatLng()),this._resizeLatLng.__vertex.update()},getLatLngs:function(){return[this.feature._latlng,this._resizeLatLng]},getDefaultLatLngs:function(){return this.getLatLngs()},onVertexMarkerDrag:function(e){1===e.vertex.getIndex()?this.resize(e):this.updateResizeLatLng(e),t.Editable.PathEditor.prototype.onVertexMarkerDrag.call(this,e)},resize:function(t){var e=this.feature._latlng.distanceTo(t.latlng);this.feature.setRadius(e)},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this._resizeLatLng.update(e.latlng),this.feature._latlng.update(e.latlng),this.connect(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),this._resizeLatLng.__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},onDrag:function(e){t.Editable.PathEditor.prototype.onDrag.call(this,e),this.feature.dragging.updateLatLng(this._resizeLatLng)}});var e={createEditor:function(t){t=t||this._map;var e=(this.options.editOptions||{}).editTools||t.editTools;if(!e)throw Error("Unable to detect Editable instance.");return new(this.options.editorClass||this.getEditorClass(e))(t,this,this.options.editOptions)},enableEdit:function(t){return this.editor||this.createEditor(t),this.editor.enable(),this.editor},editEnabled:function(){return this.editor&&this.editor.enabled()},disableEdit:function(){this.editor&&(this.editor.disable(),delete this.editor)},toggleEdit:function(){this.editEnabled()?this.disableEdit():this.enableEdit()},_onEditableAdd:function(){this.editor&&this.enableEdit()}},i={getEditorClass:function(e){return e&&e.options.polylineEditorClass?e.options.polylineEditorClass:t.Editable.PolylineEditor},shapeAt:function(t,e){var i=null;if(!(e=e||this._latlngs).length)return i;if(l(e)&&this.isInLatLngs(t,e))i=e;else for(var n=0;n<e.length;n++)if(this.isInLatLngs(t,e[n]))return e[n];return i},isInLatLngs:function(e,i){if(!i)return!1;var n,o,s,r,a=[],l=this._clickTolerance();if(this._projectLatlngs(i,a,this._pxBounds),a=a[0],r=this._map.latLngToLayerPoint(e),!this._pxBounds.contains(r))return!1;for(n=1,s=a.length,o=0;n<s;o=n++)if(t.LineUtil.pointToSegmentDistance(r,a[o],a[n])<=l)return!0;return!1}},n={getEditorClass:function(e){return e&&e.options.polygonEditorClass?e.options.polygonEditorClass:t.Editable.PolygonEditor},shapeAt:function(t,e){var i=null;if(!(e=e||this._latlngs).length)return i;if(l(e)&&this.isInLatLngs(t,e))i=e;else if(l(e[0])&&this.isInLatLngs(t,e[0]))i=e;else for(var n=0;n<e.length;n++)if(this.isInLatLngs(t,e[n][0]))return e[n];return i},isInLatLngs:function(t,e){var i,n,o,s,r,a=!1;for(o=0,s=(r=e.length)-1;o<r;s=o++)i=e[o],n=e[s],i.lat>t.lat!=n.lat>t.lat&&t.lng<(n.lng-i.lng)*(t.lat-i.lat)/(n.lat-i.lat)+i.lng&&(a=!a);return a},parentShape:function(e,i){if(i=i||this._latlngs){var n=t.Util.indexOf(i,e);if(-1!==n)return i;for(var o=0;o<i.length;o++)if(-1!==(n=t.Util.indexOf(i[o],e)))return i[o]}}},o={getEditorClass:function(e){return e&&e.options.markerEditorClass?e.options.markerEditorClass:t.Editable.MarkerEditor}},s={getEditorClass:function(e){return e&&e.options.rectangleEditorClass?e.options.rectangleEditorClass:t.Editable.RectangleEditor}},r={getEditorClass:function(e){return e&&e.options.circleEditorClass?e.options.circleEditorClass:t.Editable.CircleEditor}},a=function(){this.on("add",this._onEditableAdd)},l=t.LineUtil.isFlat||t.LineUtil._flat||t.Polyline._flat;t.Polyline&&(t.Polyline.include(e),t.Polyline.include(i),t.Polyline.addInitHook(a)),t.Polygon&&(t.Polygon.include(e),t.Polygon.include(n)),t.Marker&&(t.Marker.include(e),t.Marker.include(o),t.Marker.addInitHook(a)),t.Rectangle&&(t.Rectangle.include(e),t.Rectangle.include(s)),t.Circle&&(t.Circle.include(e),t.Circle.include(r)),t.LatLng.prototype.update=function(e){e=t.latLng(e),this.lat=e.lat,this.lng=e.lng}}),window)},869:(t,e,i)=>{"use strict";var n={};i.r(n),i.d(n,{afterMain:()=>x,afterRead:()=>E,afterWrite:()=>P,applyStyles:()=>R,arrow:()=>J,auto:()=>l,basePlacements:()=>c,beforeMain:()=>w,beforeRead:()=>v,beforeWrite:()=>L,bottom:()=>s,clippingParents:()=>d,computeStyles:()=>tt,createPopper:()=>It,createPopperBase:()=>At,createPopperLite:()=>kt,detectOverflow:()=>_t,end:()=>u,eventListeners:()=>it,flip:()=>vt,hide:()=>wt,left:()=>a,main:()=>b,modifierPhases:()=>S,offset:()=>bt,placements:()=>_,popper:()=>f,popperGenerator:()=>Tt,popperOffsets:()=>xt,preventOverflow:()=>Lt,read:()=>y,reference:()=>m,right:()=>r,start:()=>h,top:()=>o,variationPlacements:()=>g,viewport:()=>p,write:()=>C});var o="top",s="bottom",r="right",a="left",l="auto",c=[o,s,r,a],h="start",u="end",d="clippingParents",p="viewport",f="popper",m="reference",g=c.reduce((function(t,e){return t.concat([e+"-"+h,e+"-"+u])}),[]),_=[].concat(c,[l]).reduce((function(t,e){return t.concat([e,e+"-"+h,e+"-"+u])}),[]),v="beforeRead",y="read",E="afterRead",w="beforeMain",b="main",x="afterMain",L="beforeWrite",C="write",P="afterWrite",S=[v,y,E,w,b,x,L,C,P];function M(t){return t?(t.nodeName||"").toLowerCase():null}function T(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function A(t){return t instanceof T(t).Element||t instanceof Element}function I(t){return t instanceof T(t).HTMLElement||t instanceof HTMLElement}function k(t){return"undefined"!=typeof ShadowRoot&&(t instanceof T(t).ShadowRoot||t instanceof ShadowRoot)}const R={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},o=e.elements[t];I(o)&&M(o)&&(Object.assign(o.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?o.removeAttribute(t):o.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],o=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});I(n)&&M(n)&&(Object.assign(n.style,s),Object.keys(o).forEach((function(t){n.removeAttribute(t)})))}))}},requires:["computeStyles"]};function D(t){return t.split("-")[0]}function O(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function G(t){var e=O(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function N(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&k(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function U(t){return T(t).getComputedStyle(t)}function j(t){return["table","td","th"].indexOf(M(t))>=0}function F(t){return((A(t)?t.ownerDocument:t.document)||window.document).documentElement}function z(t){return"html"===M(t)?t:t.assignedSlot||t.parentNode||(k(t)?t.host:null)||F(t)}function B(t){return I(t)&&"fixed"!==U(t).position?t.offsetParent:null}function q(t){for(var e=T(t),i=B(t);i&&j(i)&&"static"===U(i).position;)i=B(i);return i&&("html"===M(i)||"body"===M(i)&&"static"===U(i).position)?e:i||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&I(t)&&"fixed"===U(t).position)return null;for(var i=z(t);I(i)&&["html","body"].indexOf(M(i))<0;){var n=U(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||e&&"filter"===n.willChange||e&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(t)||e}function H(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}var W=Math.max,V=Math.min,Z=Math.round;function Y(t,e,i){return W(t,V(e,i))}function X(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function K(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}const J={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,n=t.name,l=t.options,h=i.elements.arrow,u=i.modifiersData.popperOffsets,d=D(i.placement),p=H(d),f=[a,r].indexOf(d)>=0?"height":"width";if(h&&u){var m=function(t,e){return X("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:K(t,c))}(l.padding,i),g=G(h),_="y"===p?o:a,v="y"===p?s:r,y=i.rects.reference[f]+i.rects.reference[p]-u[p]-i.rects.popper[f],E=u[p]-i.rects.reference[p],w=q(h),b=w?"y"===p?w.clientHeight||0:w.clientWidth||0:0,x=y/2-E/2,L=m[_],C=b-g[f]-m[v],P=b/2-g[f]/2+x,S=Y(L,P,C),M=p;i.modifiersData[n]=((e={})[M]=S,e.centerOffset=S-P,e)}},effect:function(t){var e=t.state,i=t.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=e.elements.popper.querySelector(n)))&&N(e.elements.popper,n)&&(e.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var Q={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $(t){var e,i=t.popper,n=t.popperRect,l=t.placement,c=t.offsets,h=t.position,u=t.gpuAcceleration,d=t.adaptive,p=t.roundOffsets,f=!0===p?function(t){var e=t.x,i=t.y,n=window.devicePixelRatio||1;return{x:Z(Z(e*n)/n)||0,y:Z(Z(i*n)/n)||0}}(c):"function"==typeof p?p(c):c,m=f.x,g=void 0===m?0:m,_=f.y,v=void 0===_?0:_,y=c.hasOwnProperty("x"),E=c.hasOwnProperty("y"),w=a,b=o,x=window;if(d){var L=q(i),C="clientHeight",P="clientWidth";L===T(i)&&"static"!==U(L=F(i)).position&&(C="scrollHeight",P="scrollWidth"),L=L,l===o&&(b=s,v-=L[C]-n.height,v*=u?1:-1),l===a&&(w=r,g-=L[P]-n.width,g*=u?1:-1)}var S,M=Object.assign({position:h},d&&Q);return u?Object.assign({},M,((S={})[b]=E?"0":"",S[w]=y?"0":"",S.transform=(x.devicePixelRatio||1)<2?"translate("+g+"px, "+v+"px)":"translate3d("+g+"px, "+v+"px, 0)",S)):Object.assign({},M,((e={})[b]=E?v+"px":"",e[w]=y?g+"px":"",e.transform="",e))}const tt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,o=void 0===n||n,s=i.adaptive,r=void 0===s||s,a=i.roundOffsets,l=void 0===a||a,c={placement:D(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,$(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,$(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var et={passive:!0};const it={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,o=n.scroll,s=void 0===o||o,r=n.resize,a=void 0===r||r,l=T(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach((function(t){t.addEventListener("scroll",i.update,et)})),a&&l.addEventListener("resize",i.update,et),function(){s&&c.forEach((function(t){t.removeEventListener("scroll",i.update,et)})),a&&l.removeEventListener("resize",i.update,et)}},data:{}};var nt={left:"right",right:"left",bottom:"top",top:"bottom"};function ot(t){return t.replace(/left|right|bottom|top/g,(function(t){return nt[t]}))}var st={start:"end",end:"start"};function rt(t){return t.replace(/start|end/g,(function(t){return st[t]}))}function at(t){var e=T(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function lt(t){return O(F(t)).left+at(t).scrollLeft}function ct(t){var e=U(t),i=e.overflow,n=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+o+n)}function ht(t){return["html","body","#document"].indexOf(M(t))>=0?t.ownerDocument.body:I(t)&&ct(t)?t:ht(z(t))}function ut(t,e){var i;void 0===e&&(e=[]);var n=ht(t),o=n===(null==(i=t.ownerDocument)?void 0:i.body),s=T(n),r=o?[s].concat(s.visualViewport||[],ct(n)?n:[]):n,a=e.concat(r);return o?a:a.concat(ut(z(r)))}function dt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function pt(t,e){return e===p?dt(function(t){var e=T(t),i=F(t),n=e.visualViewport,o=i.clientWidth,s=i.clientHeight,r=0,a=0;return n&&(o=n.width,s=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(r=n.offsetLeft,a=n.offsetTop)),{width:o,height:s,x:r+lt(t),y:a}}(t)):I(e)?function(t){var e=O(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):dt(function(t){var e,i=F(t),n=at(t),o=null==(e=t.ownerDocument)?void 0:e.body,s=W(i.scrollWidth,i.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),r=W(i.scrollHeight,i.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-n.scrollLeft+lt(t),l=-n.scrollTop;return"rtl"===U(o||i).direction&&(a+=W(i.clientWidth,o?o.clientWidth:0)-s),{width:s,height:r,x:a,y:l}}(F(t)))}function ft(t,e,i){var n="clippingParents"===e?function(t){var e=ut(z(t)),i=["absolute","fixed"].indexOf(U(t).position)>=0&&I(t)?q(t):t;return A(i)?e.filter((function(t){return A(t)&&N(t,i)&&"body"!==M(t)})):[]}(t):[].concat(e),o=[].concat(n,[i]),s=o[0],r=o.reduce((function(e,i){var n=pt(t,i);return e.top=W(n.top,e.top),e.right=V(n.right,e.right),e.bottom=V(n.bottom,e.bottom),e.left=W(n.left,e.left),e}),pt(t,s));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function mt(t){return t.split("-")[1]}function gt(t){var e,i=t.reference,n=t.element,l=t.placement,c=l?D(l):null,d=l?mt(l):null,p=i.x+i.width/2-n.width/2,f=i.y+i.height/2-n.height/2;switch(c){case o:e={x:p,y:i.y-n.height};break;case s:e={x:p,y:i.y+i.height};break;case r:e={x:i.x+i.width,y:f};break;case a:e={x:i.x-n.width,y:f};break;default:e={x:i.x,y:i.y}}var m=c?H(c):null;if(null!=m){var g="y"===m?"height":"width";switch(d){case h:e[m]=e[m]-(i[g]/2-n[g]/2);break;case u:e[m]=e[m]+(i[g]/2-n[g]/2)}}return e}function _t(t,e){void 0===e&&(e={});var i=e,n=i.placement,a=void 0===n?t.placement:n,l=i.boundary,h=void 0===l?d:l,u=i.rootBoundary,g=void 0===u?p:u,_=i.elementContext,v=void 0===_?f:_,y=i.altBoundary,E=void 0!==y&&y,w=i.padding,b=void 0===w?0:w,x=X("number"!=typeof b?b:K(b,c)),L=v===f?m:f,C=t.elements.reference,P=t.rects.popper,S=t.elements[E?L:v],M=ft(A(S)?S:S.contextElement||F(t.elements.popper),h,g),T=O(C),I=gt({reference:T,element:P,strategy:"absolute",placement:a}),k=dt(Object.assign({},P,I)),R=v===f?k:T,D={top:M.top-R.top+x.top,bottom:R.bottom-M.bottom+x.bottom,left:M.left-R.left+x.left,right:R.right-M.right+x.right},G=t.modifiersData.offset;if(v===f&&G){var N=G[a];Object.keys(D).forEach((function(t){var e=[r,s].indexOf(t)>=0?1:-1,i=[o,s].indexOf(t)>=0?"y":"x";D[t]+=N[i]*e}))}return D}const vt={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var u=i.mainAxis,d=void 0===u||u,p=i.altAxis,f=void 0===p||p,m=i.fallbackPlacements,v=i.padding,y=i.boundary,E=i.rootBoundary,w=i.altBoundary,b=i.flipVariations,x=void 0===b||b,L=i.allowedAutoPlacements,C=e.options.placement,P=D(C),S=m||(P===C||!x?[ot(C)]:function(t){if(D(t)===l)return[];var e=ot(t);return[rt(t),e,rt(e)]}(C)),M=[C].concat(S).reduce((function(t,i){return t.concat(D(i)===l?function(t,e){void 0===e&&(e={});var i=e,n=i.placement,o=i.boundary,s=i.rootBoundary,r=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,h=void 0===l?_:l,u=mt(n),d=u?a?g:g.filter((function(t){return mt(t)===u})):c,p=d.filter((function(t){return h.indexOf(t)>=0}));0===p.length&&(p=d);var f=p.reduce((function(e,i){return e[i]=_t(t,{placement:i,boundary:o,rootBoundary:s,padding:r})[D(i)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:i,boundary:y,rootBoundary:E,padding:v,flipVariations:x,allowedAutoPlacements:L}):i)}),[]),T=e.rects.reference,A=e.rects.popper,I=new Map,k=!0,R=M[0],O=0;O<M.length;O++){var G=M[O],N=D(G),U=mt(G)===h,j=[o,s].indexOf(N)>=0,F=j?"width":"height",z=_t(e,{placement:G,boundary:y,rootBoundary:E,altBoundary:w,padding:v}),B=j?U?r:a:U?s:o;T[F]>A[F]&&(B=ot(B));var q=ot(B),H=[];if(d&&H.push(z[N]<=0),f&&H.push(z[B]<=0,z[q]<=0),H.every((function(t){return t}))){R=G,k=!1;break}I.set(G,H)}if(k)for(var W=function(t){var e=M.find((function(e){var i=I.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return R=e,"break"},V=x?3:1;V>0;V--){if("break"===W(V))break}e.placement!==R&&(e.modifiersData[n]._skip=!0,e.placement=R,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function yt(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Et(t){return[o,r,s,a].some((function(e){return t[e]>=0}))}const wt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,r=_t(e,{elementContext:"reference"}),a=_t(e,{altBoundary:!0}),l=yt(r,n),c=yt(a,o,s),h=Et(l),u=Et(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}};const bt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.offset,l=void 0===s?[0,0]:s,c=_.reduce((function(t,i){return t[i]=function(t,e,i){var n=D(t),s=[a,o].indexOf(n)>=0?-1:1,l="function"==typeof i?i(Object.assign({},e,{placement:t})):i,c=l[0],h=l[1];return c=c||0,h=(h||0)*s,[a,r].indexOf(n)>=0?{x:h,y:c}:{x:c,y:h}}(i,e.rects,l),t}),{}),h=c[e.placement],u=h.x,d=h.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=d),e.modifiersData[n]=c}};const xt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=gt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};const Lt={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name,l=i.mainAxis,c=void 0===l||l,u=i.altAxis,d=void 0!==u&&u,p=i.boundary,f=i.rootBoundary,m=i.altBoundary,g=i.padding,_=i.tether,v=void 0===_||_,y=i.tetherOffset,E=void 0===y?0:y,w=_t(e,{boundary:p,rootBoundary:f,padding:g,altBoundary:m}),b=D(e.placement),x=mt(e.placement),L=!x,C=H(b),P="x"===C?"y":"x",S=e.modifiersData.popperOffsets,M=e.rects.reference,T=e.rects.popper,A="function"==typeof E?E(Object.assign({},e.rects,{placement:e.placement})):E,I={x:0,y:0};if(S){if(c||d){var k="y"===C?o:a,R="y"===C?s:r,O="y"===C?"height":"width",N=S[C],U=S[C]+w[k],j=S[C]-w[R],F=v?-T[O]/2:0,z=x===h?M[O]:T[O],B=x===h?-T[O]:-M[O],Z=e.elements.arrow,X=v&&Z?G(Z):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},J=K[k],Q=K[R],$=Y(0,M[O],X[O]),tt=L?M[O]/2-F-$-J-A:z-$-J-A,et=L?-M[O]/2+F+$+Q+A:B+$+Q+A,it=e.elements.arrow&&q(e.elements.arrow),nt=it?"y"===C?it.clientTop||0:it.clientLeft||0:0,ot=e.modifiersData.offset?e.modifiersData.offset[e.placement][C]:0,st=S[C]+tt-ot-nt,rt=S[C]+et-ot;if(c){var at=Y(v?V(U,st):U,N,v?W(j,rt):j);S[C]=at,I[C]=at-N}if(d){var lt="x"===C?o:a,ct="x"===C?s:r,ht=S[P],ut=ht+w[lt],dt=ht-w[ct],pt=Y(v?V(ut,st):ut,ht,v?W(dt,rt):dt);S[P]=pt,I[P]=pt-ht}}e.modifiersData[n]=I}},requiresIfExists:["offset"]};function Ct(t,e,i){void 0===i&&(i=!1);var n,o,s=F(e),r=O(t),a=I(e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!i)&&(("body"!==M(e)||ct(s))&&(l=(n=e)!==T(n)&&I(n)?{scrollLeft:(o=n).scrollLeft,scrollTop:o.scrollTop}:at(n)),I(e)?((c=O(e)).x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=lt(s))),{x:r.left+l.scrollLeft-c.x,y:r.top+l.scrollTop-c.y,width:r.width,height:r.height}}function Pt(t){var e=new Map,i=new Set,n=[];function o(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&o(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||o(t)})),n}var St={placement:"bottom",modifiers:[],strategy:"absolute"};function Mt(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Tt(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,o=e.defaultOptions,s=void 0===o?St:o;return function(t,e,i){void 0===i&&(i=s);var o,r,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},St,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,h={state:a,setOptions:function(i){u(),a.options=Object.assign({},s,a.options,i),a.scrollParents={reference:A(t)?ut(t):t.contextElement?ut(t.contextElement):[],popper:ut(e)};var o=function(t){var e=Pt(t);return S.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}(function(t){var e=t.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(n,a.options.modifiers)));return a.orderedModifiers=o.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,o=t.effect;if("function"==typeof o){var s=o({state:a,name:e,instance:h,options:n}),r=function(){};l.push(s||r)}})),h.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,i=t.popper;if(Mt(e,i)){a.rects={reference:Ct(e,q(i),"fixed"===a.options.strategy),popper:G(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var o=a.orderedModifiers[n],s=o.fn,r=o.options,l=void 0===r?{}:r,u=o.name;"function"==typeof s&&(a=s({state:a,options:l,name:u,instance:h})||a)}else a.reset=!1,n=-1}}},update:(o=function(){return new Promise((function(t){h.forceUpdate(),t(a)}))},function(){return r||(r=new Promise((function(t){Promise.resolve().then((function(){r=void 0,t(o())}))}))),r}),destroy:function(){u(),c=!0}};if(!Mt(t,e))return h;function u(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(i).then((function(t){!c&&i.onFirstUpdate&&i.onFirstUpdate(t)})),h}}var At=Tt(),It=Tt({defaultModifiers:[it,xt,tt,R,bt,vt,Lt,J,wt]}),kt=Tt({defaultModifiers:[it,xt,tt,R]});const Rt={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const i=[];let n=t.parentNode;for(;n&&n.nodeType===Node.ELEMENT_NODE&&3!==n.nodeType;)n.matches(e)&&i.push(n),n=n.parentNode;return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]}},Dt="transitionend",Ot=t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t},Gt=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&"#"!==i?i.trim():null}return e},Nt=t=>{const e=Gt(t);return e&&document.querySelector(e)?e:null},Ut=t=>{const e=Gt(t);return e?document.querySelector(e):null},jt=t=>{t.dispatchEvent(new Event(Dt))},Ft=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),zt=t=>Ft(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?Rt.findOne(t):null,Bt=(t,e,i)=>{Object.keys(i).forEach((n=>{const o=i[n],s=e[n],r=s&&Ft(s)?"element":null==(a=s)?`${a}`:{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();var a;if(!new RegExp(o).test(r))throw new TypeError(`${t.toUpperCase()}: Option "${n}" provided type "${r}" but expected type "${o}".`)}))},qt=t=>!(!Ft(t)||0===t.getClientRects().length)&&"visible"===getComputedStyle(t).getPropertyValue("visibility"),Ht=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),Wt=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Wt(t.parentNode):null},Vt=()=>{},Zt=t=>t.offsetHeight,Yt=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},Xt=[],Kt=()=>"rtl"===document.documentElement.dir,Jt=t=>{var e;e=()=>{const e=Yt();if(e){const i=t.NAME,n=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=n,t.jQueryInterface)}},"loading"===document.readyState?(Xt.length||document.addEventListener("DOMContentLoaded",(()=>{Xt.forEach((t=>t()))})),Xt.push(e)):e()},Qt=t=>{"function"==typeof t&&t()},$t=(t,e,i=!0)=>{if(!i)return void Qt(t);const n=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const n=Number.parseFloat(e),o=Number.parseFloat(i);return n||o?(e=e.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(e)+5;let o=!1;const s=({target:i})=>{i===e&&(o=!0,e.removeEventListener(Dt,s),Qt(t))};e.addEventListener(Dt,s),setTimeout((()=>{o||jt(e)}),n)},te=(t,e,i,n)=>{let o=t.indexOf(e);if(-1===o)return t[!i&&n?t.length-1:0];const s=t.length;return o+=i?1:-1,n&&(o=(o+s)%s),t[Math.max(0,Math.min(o,s-1))]},ee=/[^.]*(?=\..*)\.|.*/,ie=/\..*/,ne=/::\d+$/,oe={};let se=1;const re={mouseenter:"mouseover",mouseleave:"mouseout"},ae=/^(mouseenter|mouseleave)/i,le=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ce(t,e){return e&&`${e}::${se++}`||t.uidEvent||se++}function he(t){const e=ce(t);return t.uidEvent=e,oe[e]=oe[e]||{},oe[e]}function ue(t,e,i=null){const n=Object.keys(t);for(let o=0,s=n.length;o<s;o++){const s=t[n[o]];if(s.originalHandler===e&&s.delegationSelector===i)return s}return null}function de(t,e,i){const n="string"==typeof e,o=n?i:e;let s=me(t);return le.has(s)||(s=t),[n,o,s]}function pe(t,e,i,n,o){if("string"!=typeof e||!t)return;if(i||(i=n,n=null),ae.test(e)){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};n?n=t(n):i=t(i)}const[s,r,a]=de(e,i,n),l=he(t),c=l[a]||(l[a]={}),h=ue(c,r,s?i:null);if(h)return void(h.oneOff=h.oneOff&&o);const u=ce(r,e.replace(ee,"")),d=s?function(t,e,i){return function n(o){const s=t.querySelectorAll(e);for(let{target:r}=o;r&&r!==this;r=r.parentNode)for(let a=s.length;a--;)if(s[a]===r)return o.delegateTarget=r,n.oneOff&&ge.off(t,o.type,e,i),i.apply(r,[o]);return null}}(t,i,n):function(t,e){return function i(n){return n.delegateTarget=t,i.oneOff&&ge.off(t,n.type,e),e.apply(t,[n])}}(t,i);d.delegationSelector=s?i:null,d.originalHandler=r,d.oneOff=o,d.uidEvent=u,c[u]=d,t.addEventListener(a,d,s)}function fe(t,e,i,n,o){const s=ue(e[i],n,o);s&&(t.removeEventListener(i,s,Boolean(o)),delete e[i][s.uidEvent])}function me(t){return t=t.replace(ie,""),re[t]||t}const ge={on(t,e,i,n){pe(t,e,i,n,!1)},one(t,e,i,n){pe(t,e,i,n,!0)},off(t,e,i,n){if("string"!=typeof e||!t)return;const[o,s,r]=de(e,i,n),a=r!==e,l=he(t),c=e.startsWith(".");if(void 0!==s){if(!l||!l[r])return;return void fe(t,l,r,s,o?i:null)}c&&Object.keys(l).forEach((i=>{!function(t,e,i,n){const o=e[i]||{};Object.keys(o).forEach((s=>{if(s.includes(n)){const n=o[s];fe(t,e,i,n.originalHandler,n.delegationSelector)}}))}(t,l,i,e.slice(1))}));const h=l[r]||{};Object.keys(h).forEach((i=>{const n=i.replace(ne,"");if(!a||e.includes(n)){const e=h[i];fe(t,l,r,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,i){if("string"!=typeof e||!t)return null;const n=Yt(),o=me(e),s=e!==o,r=le.has(o);let a,l=!0,c=!0,h=!1,u=null;return s&&n&&(a=n.Event(e,i),n(t).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented()),r?(u=document.createEvent("HTMLEvents"),u.initEvent(o,l,!0)):u=new CustomEvent(e,{bubbles:l,cancelable:!0}),void 0!==i&&Object.keys(i).forEach((t=>{Object.defineProperty(u,t,{get:()=>i[t]})})),h&&u.preventDefault(),c&&t.dispatchEvent(u),u.defaultPrevented&&void 0!==a&&a.preventDefault(),u}},_e=new Map;var ve={set(t,e,i){_e.has(t)||_e.set(t,new Map);const n=_e.get(t);n.has(e)||0===n.size?n.set(e,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},get:(t,e)=>_e.has(t)&&_e.get(t).get(e)||null,remove(t,e){if(!_e.has(t))return;const i=_e.get(t);i.delete(e),0===i.size&&_e.delete(t)}};class ye{constructor(t){(t=zt(t))&&(this._element=t,ve.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ve.remove(this._element,this.constructor.DATA_KEY),ge.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((t=>{this[t]=null}))}_queueCallback(t,e,i=!0){$t(t,e,i)}static getInstance(t){return ve.get(t,this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.0.2"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}class Ee extends ye{static get NAME(){return"alert"}close(t){const e=t?this._getRootElement(t):this._element,i=this._triggerCloseEvent(e);null===i||i.defaultPrevented||this._removeElement(e)}_getRootElement(t){return Ut(t)||t.closest(".alert")}_triggerCloseEvent(t){return ge.trigger(t,"close.bs.alert")}_removeElement(t){t.classList.remove("show");const e=t.classList.contains("fade");this._queueCallback((()=>this._destroyElement(t)),t,e)}_destroyElement(t){t.remove(),ge.trigger(t,"closed.bs.alert")}static jQueryInterface(t){return this.each((function(){const e=Ee.getOrCreateInstance(this);"close"===t&&e[t](this)}))}static handleDismiss(t){return function(e){e&&e.preventDefault(),t.close(this)}}}ge.on(document,"click.bs.alert.data-api",'[data-bs-dismiss="alert"]',Ee.handleDismiss(new Ee)),Jt(Ee);const we='[data-bs-toggle="button"]';class be extends ye{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=be.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}function xe(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function Le(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}ge.on(document,"click.bs.button.data-api",we,(t=>{t.preventDefault();const e=t.target.closest(we);be.getOrCreateInstance(e).toggle()})),Jt(be);const Ce={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${Le(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Le(e)}`)},getDataAttributes(t){if(!t)return{};const e={};return Object.keys(t.dataset).filter((t=>t.startsWith("bs"))).forEach((i=>{let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=xe(t.dataset[i])})),e},getDataAttribute:(t,e)=>xe(t.getAttribute(`data-bs-${Le(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},position:t=>({top:t.offsetTop,left:t.offsetLeft})},Pe="carousel",Se={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Me={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Te="next",Ae="prev",Ie="left",ke="right",Re={ArrowLeft:ke,ArrowRight:Ie},De="slid.bs.carousel",Oe="active",Ge=".active.carousel-item",Ne="touch";class Ue extends ye{constructor(t,e){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=Rt.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return Se}static get NAME(){return Pe}next(){this._slide(Te)}nextWhenVisible(){!document.hidden&&qt(this._element)&&this.next()}prev(){this._slide(Ae)}pause(t){t||(this._isPaused=!0),Rt.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(jt(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=Rt.findOne(Ge,this._element);const e=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding)return void ge.one(this._element,De,(()=>this.to(t)));if(e===t)return this.pause(),void this.cycle();const i=t>e?Te:Ae;this._slide(i,this._items[t])}_getConfig(t){return t={...Se,...Ce.getDataAttributes(this._element),..."object"==typeof t?t:{}},Bt(Pe,t,Me),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(t<=40)return;const e=t/this.touchDeltaX;this.touchDeltaX=0,e&&this._slide(e>0?ke:Ie)}_addEventListeners(){this._config.keyboard&&ge.on(this._element,"keydown.bs.carousel",(t=>this._keydown(t))),"hover"===this._config.pause&&(ge.on(this._element,"mouseenter.bs.carousel",(t=>this.pause(t))),ge.on(this._element,"mouseleave.bs.carousel",(t=>this.cycle(t)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=t=>{!this._pointerEvent||"pen"!==t.pointerType&&t.pointerType!==Ne?this._pointerEvent||(this.touchStartX=t.touches[0].clientX):this.touchStartX=t.clientX},e=t=>{this.touchDeltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this.touchStartX},i=t=>{!this._pointerEvent||"pen"!==t.pointerType&&t.pointerType!==Ne||(this.touchDeltaX=t.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((t=>this.cycle(t)),500+this._config.interval))};Rt.find(".carousel-item img",this._element).forEach((t=>{ge.on(t,"dragstart.bs.carousel",(t=>t.preventDefault()))})),this._pointerEvent?(ge.on(this._element,"pointerdown.bs.carousel",(e=>t(e))),ge.on(this._element,"pointerup.bs.carousel",(t=>i(t))),this._element.classList.add("pointer-event")):(ge.on(this._element,"touchstart.bs.carousel",(e=>t(e))),ge.on(this._element,"touchmove.bs.carousel",(t=>e(t))),ge.on(this._element,"touchend.bs.carousel",(t=>i(t))))}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Re[t.key];e&&(t.preventDefault(),this._slide(e))}_getItemIndex(t){return this._items=t&&t.parentNode?Rt.find(".carousel-item",t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,e){const i=t===Te;return te(this._items,e,i,this._config.wrap)}_triggerSlideEvent(t,e){const i=this._getItemIndex(t),n=this._getItemIndex(Rt.findOne(Ge,this._element));return ge.trigger(this._element,"slide.bs.carousel",{relatedTarget:t,direction:e,from:n,to:i})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=Rt.findOne(".active",this._indicatorsElement);e.classList.remove(Oe),e.removeAttribute("aria-current");const i=Rt.find("[data-bs-target]",this._indicatorsElement);for(let e=0;e<i.length;e++)if(Number.parseInt(i[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){i[e].classList.add(Oe),i[e].setAttribute("aria-current","true");break}}}_updateInterval(){const t=this._activeElement||Rt.findOne(Ge,this._element);if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(t,e){const i=this._directionToOrder(t),n=Rt.findOne(Ge,this._element),o=this._getItemIndex(n),s=e||this._getItemByOrder(i,n),r=this._getItemIndex(s),a=Boolean(this._interval),l=i===Te,c=l?"carousel-item-start":"carousel-item-end",h=l?"carousel-item-next":"carousel-item-prev",u=this._orderToDirection(i);if(s&&s.classList.contains(Oe))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(s,u).defaultPrevented)return;if(!n||!s)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(s),this._activeElement=s;const d=()=>{ge.trigger(this._element,De,{relatedTarget:s,direction:u,from:o,to:r})};if(this._element.classList.contains("slide")){s.classList.add(h),Zt(s),n.classList.add(c),s.classList.add(c);const t=()=>{s.classList.remove(c,h),s.classList.add(Oe),n.classList.remove(Oe,h,c),this._isSliding=!1,setTimeout(d,0)};this._queueCallback(t,n,!0)}else n.classList.remove(Oe),s.classList.add(Oe),this._isSliding=!1,d();a&&this.cycle()}_directionToOrder(t){return[ke,Ie].includes(t)?Kt()?t===Ie?Ae:Te:t===Ie?Te:Ae:t}_orderToDirection(t){return[Te,Ae].includes(t)?Kt()?t===Ae?Ie:ke:t===Ae?ke:Ie:t}static carouselInterface(t,e){const i=Ue.getOrCreateInstance(t,e);let{_config:n}=i;"object"==typeof e&&(n={...n,...e});const o="string"==typeof e?e:n.slide;if("number"==typeof e)i.to(e);else if("string"==typeof o){if(void 0===i[o])throw new TypeError(`No method named "${o}"`);i[o]()}else n.interval&&n.ride&&(i.pause(),i.cycle())}static jQueryInterface(t){return this.each((function(){Ue.carouselInterface(this,t)}))}static dataApiClickHandler(t){const e=Ut(this);if(!e||!e.classList.contains("carousel"))return;const i={...Ce.getDataAttributes(e),...Ce.getDataAttributes(this)},n=this.getAttribute("data-bs-slide-to");n&&(i.interval=!1),Ue.carouselInterface(e,i),n&&Ue.getInstance(e).to(n),t.preventDefault()}}ge.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",Ue.dataApiClickHandler),ge.on(window,"load.bs.carousel.data-api",(()=>{const t=Rt.find('[data-bs-ride="carousel"]');for(let e=0,i=t.length;e<i;e++)Ue.carouselInterface(t[e],Ue.getInstance(t[e]))})),Jt(Ue);const je="collapse",Fe="bs.collapse",ze={toggle:!0,parent:""},Be={toggle:"boolean",parent:"(string|element)"},qe="show",He="collapse",We="collapsing",Ve="collapsed",Ze="width",Ye='[data-bs-toggle="collapse"]';class Xe extends ye{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=Rt.find(`${Ye}[href="#${this._element.id}"],${Ye}[data-bs-target="#${this._element.id}"]`);const i=Rt.find(Ye);for(let t=0,e=i.length;t<e;t++){const e=i[t],n=Nt(e),o=Rt.find(n).filter((t=>t===this._element));null!==n&&o.length&&(this._selector=n,this._triggerArray.push(e))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get Default(){return ze}static get NAME(){return je}toggle(){this._element.classList.contains(qe)?this.hide():this.show()}show(){if(this._isTransitioning||this._element.classList.contains(qe))return;let t,e;this._parent&&(t=Rt.find(".show, .collapsing",this._parent).filter((t=>"string"==typeof this._config.parent?t.getAttribute("data-bs-parent")===this._config.parent:t.classList.contains(He))),0===t.length&&(t=null));const i=Rt.findOne(this._selector);if(t){const n=t.find((t=>i!==t));if(e=n?Xe.getInstance(n):null,e&&e._isTransitioning)return}if(ge.trigger(this._element,"show.bs.collapse").defaultPrevented)return;t&&t.forEach((t=>{i!==t&&Xe.collapseInterface(t,"hide"),e||ve.set(t,Fe,null)}));const n=this._getDimension();this._element.classList.remove(He),this._element.classList.add(We),this._element.style[n]=0,this._triggerArray.length&&this._triggerArray.forEach((t=>{t.classList.remove(Ve),t.setAttribute("aria-expanded",!0)})),this.setTransitioning(!0);const o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback((()=>{this._element.classList.remove(We),this._element.classList.add(He,qe),this._element.style[n]="",this.setTransitioning(!1),ge.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._element.classList.contains(qe))return;if(ge.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Zt(this._element),this._element.classList.add(We),this._element.classList.remove(He,qe);const e=this._triggerArray.length;if(e>0)for(let t=0;t<e;t++){const e=this._triggerArray[t],i=Ut(e);i&&!i.classList.contains(qe)&&(e.classList.add(Ve),e.setAttribute("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[t]="",this._queueCallback((()=>{this.setTransitioning(!1),this._element.classList.remove(We),this._element.classList.add(He),ge.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}setTransitioning(t){this._isTransitioning=t}_getConfig(t){return(t={...ze,...t}).toggle=Boolean(t.toggle),Bt(je,t,Be),t}_getDimension(){return this._element.classList.contains(Ze)?Ze:"height"}_getParent(){let{parent:t}=this._config;t=zt(t);const e=`${Ye}[data-bs-parent="${t}"]`;return Rt.find(e,t).forEach((t=>{const e=Ut(t);this._addAriaAndCollapsedClass(e,[t])})),t}_addAriaAndCollapsedClass(t,e){if(!t||!e.length)return;const i=t.classList.contains(qe);e.forEach((t=>{i?t.classList.remove(Ve):t.classList.add(Ve),t.setAttribute("aria-expanded",i)}))}static collapseInterface(t,e){let i=Xe.getInstance(t);const n={...ze,...Ce.getDataAttributes(t),..."object"==typeof e&&e?e:{}};if(!i&&n.toggle&&"string"==typeof e&&/show|hide/.test(e)&&(n.toggle=!1),i||(i=new Xe(t,n)),"string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}static jQueryInterface(t){return this.each((function(){Xe.collapseInterface(this,t)}))}}ge.on(document,"click.bs.collapse.data-api",Ye,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=Ce.getDataAttributes(this),i=Nt(this);Rt.find(i).forEach((t=>{const i=Xe.getInstance(t);let n;i?(null===i._parent&&"string"==typeof e.parent&&(i._config.parent=e.parent,i._parent=i._getParent()),n="toggle"):n=e,Xe.collapseInterface(t,n)}))})),Jt(Xe);const Ke="dropdown",Je="Escape",Qe="Space",$e="ArrowUp",ti="ArrowDown",ei=new RegExp("ArrowUp|ArrowDown|Escape"),ii="click.bs.dropdown.data-api",ni="keydown.bs.dropdown.data-api",oi="show",si='[data-bs-toggle="dropdown"]',ri=".dropdown-menu",ai=Kt()?"top-end":"top-start",li=Kt()?"top-start":"top-end",ci=Kt()?"bottom-end":"bottom-start",hi=Kt()?"bottom-start":"bottom-end",ui=Kt()?"left-start":"right-start",di=Kt()?"right-start":"left-start",pi={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},fi={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class mi extends ye{constructor(t,e){super(t),this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}static get Default(){return pi}static get DefaultType(){return fi}static get NAME(){return Ke}toggle(){if(Ht(this._element))return;this._element.classList.contains(oi)?this.hide():this.show()}show(){if(Ht(this._element)||this._menu.classList.contains(oi))return;const t=mi.getParentFromElement(this._element),e={relatedTarget:this._element};if(!ge.trigger(this._element,"show.bs.dropdown",e).defaultPrevented){if(this._inNavbar)Ce.setDataAttribute(this._menu,"popper","none");else{if(void 0===n)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=t:Ft(this._config.reference)?e=zt(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const i=this._getPopperConfig(),o=i.modifiers.find((t=>"applyStyles"===t.name&&!1===t.enabled));this._popper=It(e,this._menu,i),o&&Ce.setDataAttribute(this._menu,"popper","static")}"ontouchstart"in document.documentElement&&!t.closest(".navbar-nav")&&[].concat(...document.body.children).forEach((t=>ge.on(t,"mouseover",Vt))),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.toggle(oi),this._element.classList.toggle(oi),ge.trigger(this._element,"shown.bs.dropdown",e)}}hide(){if(Ht(this._element)||!this._menu.classList.contains(oi))return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_addEventListeners(){ge.on(this._element,"click.bs.dropdown",(t=>{t.preventDefault(),this.toggle()}))}_completeHide(t){ge.trigger(this._element,"hide.bs.dropdown",t).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>ge.off(t,"mouseover",Vt))),this._popper&&this._popper.destroy(),this._menu.classList.remove(oi),this._element.classList.remove(oi),this._element.setAttribute("aria-expanded","false"),Ce.removeDataAttribute(this._menu,"popper"),ge.trigger(this._element,"hidden.bs.dropdown",t))}_getConfig(t){if(t={...this.constructor.Default,...Ce.getDataAttributes(this._element),...t},Bt(Ke,t,this.constructor.DefaultType),"object"==typeof t.reference&&!Ft(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ke.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_getMenuElement(){return Rt.next(this._element,ri)[0]}_getPlacement(){const t=this._element.parentNode;if(t.classList.contains("dropend"))return ui;if(t.classList.contains("dropstart"))return di;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?li:ai:e?hi:ci}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const i=Rt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(qt);i.length&&te(i,e,t===ti,!i.includes(e)).focus()}static dropdownInterface(t,e){const i=mi.getOrCreateInstance(t,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}static jQueryInterface(t){return this.each((function(){mi.dropdownInterface(this,t)}))}static clearMenus(t){if(t&&(2===t.button||"keyup"===t.type&&"Tab"!==t.key))return;const e=Rt.find(si);for(let i=0,n=e.length;i<n;i++){const n=mi.getInstance(e[i]);if(!n||!1===n._config.autoClose)continue;if(!n._element.classList.contains(oi))continue;const o={relatedTarget:n._element};if(t){const e=t.composedPath(),i=e.includes(n._menu);if(e.includes(n._element)||"inside"===n._config.autoClose&&!i||"outside"===n._config.autoClose&&i)continue;if(n._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;"click"===t.type&&(o.clickEvent=t)}n._completeHide(o)}}static getParentFromElement(t){return Ut(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?t.key===Qe||t.key!==Je&&(t.key!==ti&&t.key!==$e||t.target.closest(ri)):!ei.test(t.key))return;const e=this.classList.contains(oi);if(!e&&t.key===Je)return;if(t.preventDefault(),t.stopPropagation(),Ht(this))return;const i=()=>this.matches(si)?this:Rt.prev(this,si)[0];return t.key===Je?(i().focus(),void mi.clearMenus()):t.key===$e||t.key===ti?(e||i().click(),void mi.getInstance(i())._selectMenuItem(t)):void(e&&t.key!==Qe||mi.clearMenus())}}ge.on(document,ni,si,mi.dataApiKeydownHandler),ge.on(document,ni,ri,mi.dataApiKeydownHandler),ge.on(document,ii,mi.clearMenus),ge.on(document,"keyup.bs.dropdown.data-api",mi.clearMenus),ge.on(document,ii,si,(function(t){t.preventDefault(),mi.dropdownInterface(this)})),Jt(mi);const gi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",_i=".sticky-top";class vi{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",(e=>e+t)),this._setElementAttributes(gi,"paddingRight",(e=>e+t)),this._setElementAttributes(_i,"marginRight",(e=>e-t))}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const n=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+n)return;this._saveInitialAttribute(t,e);const o=window.getComputedStyle(t)[e];t.style[e]=`${i(Number.parseFloat(o))}px`}))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(gi,"paddingRight"),this._resetElementAttributes(_i,"marginRight")}_saveInitialAttribute(t,e){const i=t.style[e];i&&Ce.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const i=Ce.getDataAttribute(t,e);void 0===i?t.style.removeProperty(e):(Ce.removeDataAttribute(t,e),t.style[e]=i)}))}_applyManipulationCallback(t,e){Ft(t)?e(t):Rt.find(t,this._element).forEach(e)}isOverflowing(){return this.getWidth()>0}}const yi={isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Ei={isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},wi="backdrop",bi="show",xi="mousedown.bs.backdrop";class Li{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){this._config.isVisible?(this._append(),this._config.isAnimated&&Zt(this._getElement()),this._getElement().classList.add(bi),this._emulateAnimation((()=>{Qt(t)}))):Qt(t)}hide(t){this._config.isVisible?(this._getElement().classList.remove(bi),this._emulateAnimation((()=>{this.dispose(),Qt(t)}))):Qt(t)}_getElement(){if(!this._element){const t=document.createElement("div");t.className="modal-backdrop",this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_getConfig(t){return(t={...yi,..."object"==typeof t?t:{}}).rootElement=zt(t.rootElement),Bt(wi,t,Ei),t}_append(){this._isAppended||(this._config.rootElement.appendChild(this._getElement()),ge.on(this._getElement(),xi,(()=>{Qt(this._config.clickCallback)})),this._isAppended=!0)}dispose(){this._isAppended&&(ge.off(this._element,xi),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){$t(t,this._getElement(),this._config.isAnimated)}}const Ci="modal",Pi=".bs.modal",Si="Escape",Mi={backdrop:!0,keyboard:!0,focus:!0},Ti={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Ai="hidden.bs.modal",Ii="show.bs.modal",ki="focusin.bs.modal",Ri="resize.bs.modal",Di="click.dismiss.bs.modal",Oi="keydown.dismiss.bs.modal",Gi="mousedown.dismiss.bs.modal",Ni="modal-open",Ui="show",ji="modal-static";class Fi extends ye{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=Rt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new vi}static get Default(){return Mi}static get NAME(){return Ci}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;ge.trigger(this._element,Ii,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(Ni),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),ge.on(this._element,Di,'[data-bs-dismiss="modal"]',(t=>this.hide(t))),ge.on(this._dialog,Gi,(()=>{ge.one(this._element,"mouseup.dismiss.bs.modal",(t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)}))})),this._showBackdrop((()=>this._showElement(t))))}hide(t){if(t&&["A","AREA"].includes(t.target.tagName)&&t.preventDefault(),!this._isShown||this._isTransitioning)return;if(ge.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const e=this._isAnimated();e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),ge.off(document,ki),this._element.classList.remove(Ui),ge.off(this._element,Di),ge.off(this._dialog,Gi),this._queueCallback((()=>this._hideModal()),this._element,e)}dispose(){[window,this._dialog].forEach((t=>ge.off(t,Pi))),this._backdrop.dispose(),super.dispose(),ge.off(document,ki)}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Li({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_getConfig(t){return t={...Mi,...Ce.getDataAttributes(this._element),..."object"==typeof t?t:{}},Bt(Ci,t,Ti),t}_showElement(t){const e=this._isAnimated(),i=Rt.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,i&&(i.scrollTop=0),e&&Zt(this._element),this._element.classList.add(Ui),this._config.focus&&this._enforceFocus();this._queueCallback((()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,ge.trigger(this._element,"shown.bs.modal",{relatedTarget:t})}),this._dialog,e)}_enforceFocus(){ge.off(document,ki),ge.on(document,ki,(t=>{document===t.target||this._element===t.target||this._element.contains(t.target)||this._element.focus()}))}_setEscapeEvent(){this._isShown?ge.on(this._element,Oi,(t=>{this._config.keyboard&&t.key===Si?(t.preventDefault(),this.hide()):this._config.keyboard||t.key!==Si||this._triggerBackdropTransition()})):ge.off(this._element,Oi)}_setResizeEvent(){this._isShown?ge.on(window,Ri,(()=>this._adjustDialog())):ge.off(window,Ri)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Ni),this._resetAdjustments(),this._scrollBar.reset(),ge.trigger(this._element,Ai)}))}_showBackdrop(t){ge.on(this._element,Di,(t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())})),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ge.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:t,scrollHeight:e,style:i}=this._element,n=e>document.documentElement.clientHeight;!n&&"hidden"===i.overflowY||t.contains(ji)||(n||(i.overflowY="hidden"),t.add(ji),this._queueCallback((()=>{t.remove(ji),n||this._queueCallback((()=>{i.overflowY=""}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;(!i&&t&&!Kt()||i&&!t&&Kt())&&(this._element.style.paddingLeft=`${e}px`),(i&&!t&&!Kt()||!i&&t&&Kt())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=Fi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}ge.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(t){const e=Ut(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),ge.one(e,Ii,(t=>{t.defaultPrevented||ge.one(e,Ai,(()=>{qt(this)&&this.focus()}))}));Fi.getOrCreateInstance(e).toggle(this)})),Jt(Fi);const zi="offcanvas",Bi={backdrop:!0,keyboard:!0,scroll:!1},qi={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},Hi="show",Wi=".offcanvas.show",Vi="hidden.bs.offcanvas",Zi="focusin.bs.offcanvas";class Yi extends ye{constructor(t,e){super(t),this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._addEventListeners()}static get NAME(){return zi}static get Default(){return Bi}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;if(ge.trigger(this._element,"show.bs.offcanvas",{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||((new vi).hide(),this._enforceFocusOnElement(this._element)),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Hi);this._queueCallback((()=>{ge.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:t})}),this._element,!0)}hide(){if(!this._isShown)return;if(ge.trigger(this._element,"hide.bs.offcanvas").defaultPrevented)return;ge.off(document,Zi),this._element.blur(),this._isShown=!1,this._element.classList.remove(Hi),this._backdrop.hide();this._queueCallback((()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new vi).reset(),ge.trigger(this._element,Vi)}),this._element,!0)}dispose(){this._backdrop.dispose(),super.dispose(),ge.off(document,Zi)}_getConfig(t){return t={...Bi,...Ce.getDataAttributes(this._element),..."object"==typeof t?t:{}},Bt(zi,t,qi),t}_initializeBackDrop(){return new Li({isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_enforceFocusOnElement(t){ge.off(document,Zi),ge.on(document,Zi,(e=>{document===e.target||t===e.target||t.contains(e.target)||t.focus()})),t.focus()}_addEventListeners(){ge.on(this._element,"click.dismiss.bs.offcanvas",'[data-bs-dismiss="offcanvas"]',(()=>this.hide())),ge.on(this._element,"keydown.dismiss.bs.offcanvas",(t=>{this._config.keyboard&&"Escape"===t.key&&this.hide()}))}static jQueryInterface(t){return this.each((function(){const e=Yi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ge.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(t){const e=Ut(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Ht(this))return;ge.one(e,Vi,(()=>{qt(this)&&this.focus()}));const i=Rt.findOne(Wi);i&&i!==e&&Yi.getInstance(i).hide();Yi.getOrCreateInstance(e).toggle(this)})),ge.on(window,"load.bs.offcanvas.data-api",(()=>Rt.find(Wi).forEach((t=>Yi.getOrCreateInstance(t).show())))),Jt(Yi);const Xi=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ki=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i,Ji=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Qi=(t,e)=>{const i=t.nodeName.toLowerCase();if(e.includes(i))return!Xi.has(i)||Boolean(Ki.test(t.nodeValue)||Ji.test(t.nodeValue));const n=e.filter((t=>t instanceof RegExp));for(let t=0,e=n.length;t<e;t++)if(n[t].test(i))return!0;return!1},$i={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function tn(t,e,i){if(!t.length)return t;if(i&&"function"==typeof i)return i(t);const n=(new window.DOMParser).parseFromString(t,"text/html"),o=Object.keys(e),s=[].concat(...n.body.querySelectorAll("*"));for(let t=0,i=s.length;t<i;t++){const i=s[t],n=i.nodeName.toLowerCase();if(!o.includes(n)){i.remove();continue}const r=[].concat(...i.attributes),a=[].concat(e["*"]||[],e[n]||[]);r.forEach((t=>{Qi(t,a)||i.removeAttribute(t.nodeName)}))}return n.body.innerHTML}const en="tooltip",nn=new RegExp("(^|\\s)bs-tooltip\\S+","g"),on=new Set(["sanitize","allowList","sanitizeFn"]),sn={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},rn={AUTO:"auto",TOP:"top",RIGHT:Kt()?"left":"right",BOTTOM:"bottom",LEFT:Kt()?"right":"left"},an={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:$i,popperConfig:null},ln={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},cn="fade",hn="show",un="show",dn="out",pn="hover",fn="focus";class mn extends ye{constructor(t,e){if(void 0===n)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(e),this.tip=null,this._setListeners()}static get Default(){return an}static get NAME(){return en}static get Event(){return ln}static get DefaultType(){return sn}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this._initializeOnDelegatedTarget(t);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else{if(this.getTipElement().classList.contains(hn))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),ge.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._popper&&this._popper.destroy(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const t=ge.trigger(this._element,this.constructor.Event.SHOW),e=Wt(this._element),i=null===e?this._element.ownerDocument.documentElement.contains(this._element):e.contains(this._element);if(t.defaultPrevented||!i)return;const n=this.getTipElement(),o=Ot(this.constructor.NAME);n.setAttribute("id",o),this._element.setAttribute("aria-describedby",o),this.setContent(),this._config.animation&&n.classList.add(cn);const s="function"==typeof this._config.placement?this._config.placement.call(this,n,this._element):this._config.placement,r=this._getAttachment(s);this._addAttachmentClass(r);const{container:a}=this._config;ve.set(n,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.appendChild(n),ge.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=It(this._element,n,this._getPopperConfig(r)),n.classList.add(hn);const l="function"==typeof this._config.customClass?this._config.customClass():this._config.customClass;l&&n.classList.add(...l.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>{ge.on(t,"mouseover",Vt)}));const c=this.tip.classList.contains(cn);this._queueCallback((()=>{const t=this._hoverState;this._hoverState=null,ge.trigger(this._element,this.constructor.Event.SHOWN),t===dn&&this._leave(null,this)}),this.tip,c)}hide(){if(!this._popper)return;const t=this.getTipElement();if(ge.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;t.classList.remove(hn),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>ge.off(t,"mouseover",Vt))),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const e=this.tip.classList.contains(cn);this._queueCallback((()=>{this._isWithActiveTrigger()||(this._hoverState!==un&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),ge.trigger(this._element,this.constructor.Event.HIDDEN),this._popper&&(this._popper.destroy(),this._popper=null))}),this.tip,e),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement("div");return t.innerHTML=this._config.template,this.tip=t.children[0],this.tip}setContent(){const t=this.getTipElement();this.setElementContent(Rt.findOne(".tooltip-inner",t),this.getTitle()),t.classList.remove(cn,hn)}setElementContent(t,e){if(null!==t)return Ft(e)?(e=zt(e),void(this._config.html?e.parentNode!==t&&(t.innerHTML="",t.appendChild(e)):t.textContent=e.textContent)):void(this._config.html?(this._config.sanitize&&(e=tn(e,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=e):t.textContent=e)}getTitle(){let t=this._element.getAttribute("data-bs-original-title");return t||(t="function"==typeof this._config.title?this._config.title.call(this._element):this._config.title),t}updateAttachment(t){return"right"===t?"end":"left"===t?"start":t}_initializeOnDelegatedTarget(t,e){const i=this.constructor.DATA_KEY;return(e=e||ve.get(t.delegateTarget,i))||(e=new this.constructor(t.delegateTarget,this._getDelegateConfig()),ve.set(t.delegateTarget,i,e)),e}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:t=>this._handlePopperPlacementChange(t)}],onFirstUpdate:t=>{t.options.placement!==t.placement&&this._handlePopperPlacementChange(t)}};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`bs-tooltip-${this.updateAttachment(t)}`)}_getAttachment(t){return rn[t.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach((t=>{if("click"===t)ge.on(this._element,this.constructor.Event.CLICK,this._config.selector,(t=>this.toggle(t)));else if("manual"!==t){const e=t===pn?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,i=t===pn?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;ge.on(this._element,e,this._config.selector,(t=>this._enter(t))),ge.on(this._element,i,this._config.selector,(t=>this._leave(t)))}})),this._hideModalHandler=()=>{this._element&&this.hide()},ge.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");(t||"string"!==e)&&(this._element.setAttribute("data-bs-original-title",t||""),!t||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))}_enter(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusin"===t.type?fn:pn]=!0),e.getTipElement().classList.contains(hn)||e._hoverState===un?e._hoverState=un:(clearTimeout(e._timeout),e._hoverState=un,e._config.delay&&e._config.delay.show?e._timeout=setTimeout((()=>{e._hoverState===un&&e.show()}),e._config.delay.show):e.show())}_leave(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusout"===t.type?fn:pn]=e._element.contains(t.relatedTarget)),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=dn,e._config.delay&&e._config.delay.hide?e._timeout=setTimeout((()=>{e._hoverState===dn&&e.hide()}),e._config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=Ce.getDataAttributes(this._element);return Object.keys(e).forEach((t=>{on.has(t)&&delete e[t]})),(t={...this.constructor.Default,...e,..."object"==typeof t&&t?t:{}}).container=!1===t.container?document.body:zt(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),Bt(en,t,this.constructor.DefaultType),t.sanitize&&(t.template=tn(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};if(this._config)for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_cleanTipClass(){const t=this.getTipElement(),e=t.getAttribute("class").match(nn);null!==e&&e.length>0&&e.map((t=>t.trim())).forEach((e=>t.classList.remove(e)))}_handlePopperPlacementChange(t){const{state:e}=t;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}static jQueryInterface(t){return this.each((function(){const e=mn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Jt(mn);const gn=new RegExp("(^|\\s)bs-popover\\S+","g"),_n={...mn.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},vn={...mn.DefaultType,content:"(string|element|function)"},yn={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"},En=".popover-header",wn=".popover-body";class bn extends mn{static get Default(){return _n}static get NAME(){return"popover"}static get Event(){return yn}static get DefaultType(){return vn}isWithContent(){return this.getTitle()||this._getContent()}getTipElement(){return this.tip||(this.tip=super.getTipElement(),this.getTitle()||Rt.findOne(En,this.tip).remove(),this._getContent()||Rt.findOne(wn,this.tip).remove()),this.tip}setContent(){const t=this.getTipElement();this.setElementContent(Rt.findOne(En,t),this.getTitle());let e=this._getContent();"function"==typeof e&&(e=e.call(this._element)),this.setElementContent(Rt.findOne(wn,t),e),t.classList.remove("fade","show")}_addAttachmentClass(t){this.getTipElement().classList.add(`bs-popover-${this.updateAttachment(t)}`)}_getContent(){return this._element.getAttribute("data-bs-content")||this._config.content}_cleanTipClass(){const t=this.getTipElement(),e=t.getAttribute("class").match(gn);null!==e&&e.length>0&&e.map((t=>t.trim())).forEach((e=>t.classList.remove(e)))}static jQueryInterface(t){return this.each((function(){const e=bn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Jt(bn);const xn="scrollspy",Ln=".bs.scrollspy",Cn={offset:10,method:"auto",target:""},Pn={offset:"number",method:"string",target:"(string|element)"},Sn="dropdown-item",Mn="active",Tn=".nav-link",An="position";class In extends ye{constructor(t,e){super(t),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(e),this._selector=`${this._config.target} .nav-link, ${this._config.target} .list-group-item, ${this._config.target} .dropdown-item`,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,ge.on(this._scrollElement,"scroll.bs.scrollspy",(()=>this._process())),this.refresh(),this._process()}static get Default(){return Cn}static get NAME(){return xn}refresh(){const t=this._scrollElement===this._scrollElement.window?"offset":An,e="auto"===this._config.method?t:this._config.method,i=e===An?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();Rt.find(this._selector).map((t=>{const n=Nt(t),o=n?Rt.findOne(n):null;if(o){const t=o.getBoundingClientRect();if(t.width||t.height)return[Ce[e](o).top+i,n]}return null})).filter((t=>t)).sort(((t,e)=>t[0]-e[0])).forEach((t=>{this._offsets.push(t[0]),this._targets.push(t[1])}))}dispose(){ge.off(this._scrollElement,Ln),super.dispose()}_getConfig(t){if("string"!=typeof(t={...Cn,...Ce.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}}).target&&Ft(t.target)){let{id:e}=t.target;e||(e=Ot(xn),t.target.id=e),t.target=`#${e}`}return Bt(xn,t,Pn),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){const t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;){this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}}_activate(t){this._activeTarget=t,this._clear();const e=this._selector.split(",").map((e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`)),i=Rt.findOne(e.join(","));i.classList.contains(Sn)?(Rt.findOne(".dropdown-toggle",i.closest(".dropdown")).classList.add(Mn),i.classList.add(Mn)):(i.classList.add(Mn),Rt.parents(i,".nav, .list-group").forEach((t=>{Rt.prev(t,".nav-link, .list-group-item").forEach((t=>t.classList.add(Mn))),Rt.prev(t,".nav-item").forEach((t=>{Rt.children(t,Tn).forEach((t=>t.classList.add(Mn)))}))}))),ge.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})}_clear(){Rt.find(this._selector).filter((t=>t.classList.contains(Mn))).forEach((t=>t.classList.remove(Mn)))}static jQueryInterface(t){return this.each((function(){const e=In.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}ge.on(window,"load.bs.scrollspy.data-api",(()=>{Rt.find('[data-bs-spy="scroll"]').forEach((t=>new In(t)))})),Jt(In);const kn="active",Rn="fade",Dn="show",On=".active",Gn=":scope > li > .active";class Nn extends ye{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(kn))return;let t;const e=Ut(this._element),i=this._element.closest(".nav, .list-group");if(i){const e="UL"===i.nodeName||"OL"===i.nodeName?Gn:On;t=Rt.find(e,i),t=t[t.length-1]}const n=t?ge.trigger(t,"hide.bs.tab",{relatedTarget:this._element}):null;if(ge.trigger(this._element,"show.bs.tab",{relatedTarget:t}).defaultPrevented||null!==n&&n.defaultPrevented)return;this._activate(this._element,i);const o=()=>{ge.trigger(t,"hidden.bs.tab",{relatedTarget:this._element}),ge.trigger(this._element,"shown.bs.tab",{relatedTarget:t})};e?this._activate(e,e.parentNode,o):o()}_activate(t,e,i){const n=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?Rt.children(e,On):Rt.find(Gn,e))[0],o=i&&n&&n.classList.contains(Rn),s=()=>this._transitionComplete(t,n,i);n&&o?(n.classList.remove(Dn),this._queueCallback(s,t,!0)):s()}_transitionComplete(t,e,i){if(e){e.classList.remove(kn);const t=Rt.findOne(":scope > .dropdown-menu .active",e.parentNode);t&&t.classList.remove(kn),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}t.classList.add(kn),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),Zt(t),t.classList.contains(Rn)&&t.classList.add(Dn);let n=t.parentNode;if(n&&"LI"===n.nodeName&&(n=n.parentNode),n&&n.classList.contains("dropdown-menu")){const e=t.closest(".dropdown");e&&Rt.find(".dropdown-toggle",e).forEach((t=>t.classList.add(kn))),t.setAttribute("aria-expanded",!0)}i&&i()}static jQueryInterface(t){return this.each((function(){const e=Nn.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}ge.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',(function(t){if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Ht(this))return;Nn.getOrCreateInstance(this).show()})),Jt(Nn);const Un="toast",jn="hide",Fn="show",zn="showing",Bn={animation:"boolean",autohide:"boolean",delay:"number"},qn={animation:!0,autohide:!0,delay:5e3};class Hn extends ye{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Bn}static get Default(){return qn}static get NAME(){return Un}show(){if(ge.trigger(this._element,"show.bs.toast").defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(jn),Zt(this._element),this._element.classList.add(zn),this._queueCallback((()=>{this._element.classList.remove(zn),this._element.classList.add(Fn),ge.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this._element.classList.contains(Fn))return;if(ge.trigger(this._element,"hide.bs.toast").defaultPrevented)return;this._element.classList.remove(Fn),this._queueCallback((()=>{this._element.classList.add(jn),ge.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(Fn)&&this._element.classList.remove(Fn),super.dispose()}_getConfig(t){return t={...qn,...Ce.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}},Bt(Un,t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){ge.on(this._element,"click.dismiss.bs.toast",'[data-bs-dismiss="toast"]',(()=>this.hide())),ge.on(this._element,"mouseover.bs.toast",(t=>this._onInteraction(t,!0))),ge.on(this._element,"mouseout.bs.toast",(t=>this._onInteraction(t,!1))),ge.on(this._element,"focusin.bs.toast",(t=>this._onInteraction(t,!0))),ge.on(this._element,"focusout.bs.toast",(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Hn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Jt(Hn);var Wn=i(243),Vn=i.n(Wn);const Zn=JSON.parse('{"hT":"16/06/2021","i8":"2.1.10"}');var Yn=i(43);const Xn={getLogger:function(t){"__PRODUCTION__".match(/true/)?Yn.disableAll():Yn.enableAll();var e=t||"default";return Yn.getLogger(e)},disableAll:function(){var t=Yn.getLoggers();for(const e in t)if(Object.hasOwnProperty.call(t,e)){t[e].disableAll()}},enableAll:function(){var t=Yn.getLoggers();for(const e in t)if(Object.hasOwnProperty.call(t,e)){t[e].enableAll()}}};var Kn;const Jn={generate:(Kn=Math.floor(Date.now()),function(){return Kn++}),name:function(t){var e=t.lastIndexOf("-");return-1===e?t:t.substring(0,e)},index:function(t){var e=null,i=this.name(t),n=i.lastIndexOf("_");return-1!==n&&(e=i.substring(n+1)),e},uuid:function(t){var e=null,i=t.lastIndexOf("-");return-1!==i&&(e=parseInt(t.substring(i+1),10)),e}};var Qn=i(282),$n=i.n(Qn);const to={_createDraggableElement:function(t,e){$n().create(t,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(t){e._onDragAndDropLayerClick(t)}})},_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayerSwitcher"),t.className="GPwidget",t},_createMainLayersShowElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowLayersList"),t.type="checkbox",t},_createMainLayersElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayersList"),t.className="GPpanel",t},_createMainPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowLayersList"),e.title="Afficher/masquer le gestionnaire de couches";var i=document.createElement("span");i.id=this._addUID("GPshowLayersListOpen"),i.className="GPshowAdvancedToolOpen",i.addEventListener("click",(function(){if(document.getElementById(t._addUID("GPshowLayersList")).checked){for(var e=document.getElementsByClassName("GPlayerInfoOpened"),i=0;i<e.length;i++)e[i].className="GPlayerInfo";document.getElementById(t._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}})),e.appendChild(i);var n=document.createElement("span");return n.addEventListener("click",(function(){if(document.getElementById(t._addUID("GPshowLayersList")).checked){for(var e=document.getElementsByClassName("GPlayerInfoOpened"),i=0;i<e.length;i++)e[i].className="GPlayerInfo";document.getElementById(t._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}})),n.id=t._addUID("GPshowLayersListClose"),e.appendChild(n),e},_createMainInfoElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayerInfoPanel"),t.className="GPpanel GPlayerInfoPanelClosed",t},_createContainerLayerElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPlayerSwitcher_ID_"+t.id),e.className="GPlayerSwitcher_layer draggable-layer",e.appendChild(this._createBasicToolElement(t));for(var i=this._createAdvancedToolShowElement(t),n=0;n<i.length;n++)e.appendChild(i[n]);return e.appendChild(this._createAdvancedToolElement(t)),e},_createBasicToolElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPbasicTools_ID_"+t.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(t));for(var i=this._createBasicToolVisibilityElement(t),n=0;n<i.length;n++)e.appendChild(i[n]);return e},_createBasicToolNameElement:function(t){var e=document.createElement("span");return e.id=this._addUID("GPname_ID_"+t.id),e.className="GPlayerName",e.title=t.description||t.title,e.innerHTML=t.title,e},_createBasicToolVisibilityElement:function(t){var e=[],i=void 0===t.visibility||t.visibility,n=this._addUID("GPvisibility_ID_"+t.id),o=document.createElement("input");o.id=n,o.type="checkbox",o.checked=i;var s=document.createElement("label");s.htmlFor=n,s.id=this._addUID("GPvisibilityPicto_ID_"+t.id),s.className="GPlayerVisibility",s.title="Afficher/masquer la couche";var r=this;return o.addEventListener?o.addEventListener("click",(function(t){r._onVisibilityLayerClick(t)})):o.attachEvent&&o.attachEvent("onclick",(function(t){r._onVisibilityLayerClick(t)})),e.push(o),e.push(s),e},_createAdvancedToolShowElement:function(t){var e=[],i=document.createElement("label");i.id=this._addUID("GPshowAdvancedToolsPicto_ID_"+t.id),i.htmlFor=this._addUID("GPshowAdvancedTools_ID_"+t.id),i.title="Plus d'outils",i.className="GPshowMoreOptions GPshowLayerAdvancedTools";var n=document.createElement("input");return n.type="checkbox",n.id=this._addUID("GPshowAdvancedTools_ID_"+t.id),e.push(n),e.push(i),e},_createAdvancedToolElement:function(t){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+t.id),e.className="GPlayerAdvancedTools",e.appendChild(this._createAdvancedToolDeleteElement(t)),t.title&&t.description&&e.appendChild(this._createAdvancedToolInformationElement(t)),"feature"!==t.type)for(var i=this._createAdvancedToolOpacityElement(t),n=0;n<i.length;n++)e.appendChild(i[n]);return e},_createAdvancedToolDeleteElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPremove_ID_"+t.id),e.className="GPlayerRemove",e.title="Supprimer la couche",e.layerId=t.id;var i=this;return e.addEventListener?e.addEventListener("click",(function(t){i._onDropLayerClick(t)})):e.attachEvent&&e.attachEvent("onclick",(function(t){i._onDropLayerClick(t)})),e},_createAdvancedToolInformationElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPinfo_ID_"+t.id),e.className="GPlayerInfo",e.title="Informations/légende",e.layerId=t.id;var i=this;return e.addEventListener?e.addEventListener("click",(function(t){i._onOpenLayerInfoClick(t)})):e.attachEvent&&e.attachEvent("onclick",(function(t){i._onOpenLayerInfoClick(t)})),e},_createAdvancedToolOpacityElement:function(t){var e=[],i=document.createElement("div");i.id=this._addUID("GPopacity_ID_"+t.id),i.className="GPlayerOpacity",i.title="Opacité";var n=void 0!==t.opacity?t.opacity:1;n=Math.round(100*n);var o=document.createElement("input");o.id=this._addUID("GPopacityValueDiv_ID_"+t.id),o.type="range",o.value=n;var s=this;o.addEventListener?o.addEventListener("change",(function(t){s._onChangeLayerOpacity(t)})):o.attachEvent&&o.attachEvent("onchange",(function(t){s._onChangeLayerOpacity(t)})),o.addEventListener?o.addEventListener("input",(function(t){s._onChangeLayerOpacity(t)})):o.attachEvent&&o.attachEvent("oninput",(function(t){s._onChangeLayerOpacity(t)})),i.appendChild(o);var r=document.createElement("div");r.id=this._addUID("GPopacityValueDiv_ID_"+t.id),r.className="GPlayerOpacityValue";var a=document.createElement("span");return a.id=this._addUID("GPopacityValue_ID_"+t.id),a.innerHTML=n+"%",r.appendChild(a),e.push(i),e.push(r),e},_createContainerLayerInfoElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPlayerInfoContent");var i=document.createElement("div");if(i.id=this._addUID("GPlayerInfoTitle"),i.innerHTML=t.title,e.appendChild(i),t.quicklookUrl){var n=document.createElement("div");n.id=this._addUID("GPlayerInfoQuicklook"),n.title="Afficher un aperçu de la couche";var o=document.createElement("a");o.href=t.quicklookUrl,o.appendChild(n),e.appendChild(o)}var s=document.createElement("div");s.id=this._addUID("GPlayerInfoClose"),s.title="Fermer la fenêtre";var r=this,a=function(){document.getElementById(r._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed";for(var t=document.getElementsByClassName("GPlayerInfoOpened"),e=0;e<t.length;e++)t[e].className="GPlayerInfo"};s.addEventListener?s.addEventListener("click",a):s.attachEvent&&s.attachEvent("onclick",a),e.appendChild(s);var l=document.createElement("div");if(l.id=this._addUID("GPlayerInfoDescription"),l.innerHTML=t.description,e.appendChild(l),t.metadata){var c=document.createElement("div");c.id=this._addUID("GPlayerInfoMetadata");var h=document.createElement("div");h.className="GPlayerInfoSubtitle",h.innerHTML="Métadonnées",c.appendChild(h);for(var u=0;u<t.metadata.length;u++){var d=t.metadata[u].url,p=document.createElement("div");p.className="GPlayerInfoLink";var f=document.createElement("a");f.href=d,f.innerHTML=d,p.appendChild(f),c.appendChild(p)}0!==t.metadata.length&&e.appendChild(c)}if(t.legends){var m=document.createElement("div");m.id=this._addUID("GPlayerInfoLegend");var g=document.createElement("div");g.className="GPlayerInfoSubtitle",g.innerHTML="Légende",m.appendChild(g);for(var _={},v=t.maxScaleDenominator||56e7,y=0;y<t.legends.length;y++){var E=t.legends[y].minScaleDenominator;if(E){var w=E.toString();E=Math.round(parseInt(w.substring(0,3),10)/10)*Math.pow(10,w.length-2)}else E=270;_[E]=t.legends[y]}for(var b in _)if(_.hasOwnProperty(b)){var x=_[b].url;if("string"==typeof x&&-1===x.toLowerCase().indexOf("nolegend.jpg")){var L=document.createElement("div");L.className="GPlayerInfoLink",v=_[b].maxScaleDenominator||v;var C=document.createElement("a");C.href=x,C.innerHTML="Du 1/"+b+" au 1/"+v,L.appendChild(C),m.appendChild(L)}else delete _[b]}0!==Object.keys(_).length&&e.appendChild(m)}return e}};var eo=Xn.getLogger("layerswitcher");const io=Vn().Control.Layers.extend({includes:to,options:{collapsed:!0,position:"topright",autoZIndex:!0,layers:[]},initialize:function(t){if(Vn().Util.setOptions(this,t),this._uid=Jn.generate(),this._hasLayersConfig=!(!this.options.layers||0===Object.keys(this.options.layers).length),this._layersConfig=this._hasLayersConfig?this.options.layers:[],this._layers={},this._lastZIndex=0,this._hasLayersConfig)for(var e=0;e<this._layersConfig.length;e++){var i=this._layersConfig[e];this._addLayer(i.layer,null,!0)}},onAdd:function(t){var e=t._layers;if(0!==Object.keys(e).length){var i=Object.keys(e);this._lastZIndex=0;for(var n=0;n<i.length;n++){var o=i[n];this.options.autoZIndex&&e[o].setZIndex&&(this._lastZIndex++,e[o].setZIndex(this._lastZIndex)),this._hasLayersConfig&&this._layers[o]||this.addOverlay(e[o])}}if(0===Object.keys(e).length){var s=this._layersConfig;this._lastZIndex=0;for(var r=0;r<s.length;r++){var a=s[r].layer;t.hasLayer(a)||(t.addLayer(a),this.addOverlay(a,null),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)))}}for(var l in this._layers)if(this._layers.hasOwnProperty(l)){var c=this._layers[l],h=c.layer;c.visibility||this._updateVisibilityLayer(h)}return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this),t.on("layerremove",this._onLayerChange,this),t.eachLayer((function(t){t.on("visibilitychange",(function(){eo.trace("visibilitychange",t)}),this),t.on("attributionchange",(function(){eo.trace("attributionchange",t)}),this)})),this._container},_addLayer:function(t,e,i){var n=t._geoportal_id?t._geoportal_id:t._leaflet_id;if(void 0!==n){var o={};for(var s in this._layersConfig)if(this._layersConfig.hasOwnProperty(s)&&n===Vn().stamp(this._layersConfig[s].layer)){if(o=this._layersConfig[s].config,!(void 0===this._layersConfig[s].display||this._layersConfig[s].display))return;break}this._layers[n]={layer:t,id:n,overlay:i,title:t._geoportal_id&&t._title?t._title:e||n,description:t._geoportal_id&&t._description?t._description:e||n,visibility:!0,legends:t._geoportal_id?t._legends:null,metadata:t._geoportal_id?t._metadata:null,quicklookUrl:t._geoportal_id?t._quicklookUrl:null},o&&Object.keys(o).length&&Vn().Util.extend(this._layers[n],o);var r=this._layers[n].visibility;t._geoportal_id&&t.setVisible(r),r||this._updateVisibilityLayer(t)}},addTo:function(t){return Vn().Control.prototype.addTo.call(this,t),this},_initLayout:function(){var t=this._container=this._createMainContainerElement(),e=this._createMainLayersShowElement();t.appendChild(e),this.options.collapsed||(e.checked=!0);var i=this._overlaysList=this._createMainLayersElement();t.appendChild(i);var n=this._createMainPictoElement();t.appendChild(n);var o=this._createMainInfoElement();switch(t.appendChild(o),this._createDraggableElement(this._overlaysList,this),Vn().DomEvent.disableClickPropagation(t).disableScrollPropagation(t),this._map.on("moveend",this._onOutOfRangeLayerZoom,this),this.getPosition()){case"topright":t.style.position="relative",t.style.top="0",t.style.right="0";break;case"topleft":case"bottomleft":t.style.position="relative",t.style.top="0",t.style.right="initial",n.style.float="left",i.style.borderBottomRightRadius="5px",i.style.borderBottomLeftRadius="0",o.style.right="initial",o.style.left="190px";break;case"bottomright":t.style.position="relative",t.style.top="0",t.style.right="0";break;default:t.style.position="relative",t.style.top="0",t.style.right="0"}},_update:function(){if(this._container){this._overlaysList.innerHTML="";var t=[];for(var e in this._layers)this._layers.hasOwnProperty(e)&&t.push(e);for(var i=t.sort((function(t,e){return parseInt(t,10)-parseInt(e,10)})).reverse(),n=0;n<i.length;n++){var o=i[n],s=this._layers[o];this._addItem(s)}}},_addItem:function(t){eo.log("_addItem",t),t.opacity=t.layer.options.opacity;var e=this._createContainerLayerElement(t);return t.layer.options.minZoom>this._map.getZoom()||t.layer.options.maxZoom<this._map.getZoom()?Vn().DomUtil.addClass(e,"outOfRange"):Vn().DomUtil.removeClass(e,"outOfRange"),this._overlaysList.appendChild(e),e},_onLayerChange:function(t){var e=this._layers[Vn().stamp(t.layer)];e&&(this._handlingClick||this._update(),this._map.fire("layeradd"===t.type?"overlayadd":"overlayremove",e))},removeLayer:function(t){var e=Vn().stamp(t);delete this._layers[e],this._update();var i=this._map;return i&&i.hasLayer(t)&&i.removeLayer(t),this},_updateVisibilityLayer:function(t){if(this._map){this._handlingClick=!0;var e=this._layers[Vn().stamp(t)].visibility;e&&!this._map.hasLayer(t)?this._map.addLayer(t):!e&&this._map.hasLayer(t)?this._map.removeLayer(t):eo.log("Status unknown layer !?"),this._handlingClick=!1,this._refocusOnMap()}},_updateVisibilityDOMLayer:function(t){var e=Vn().stamp(t),i=Vn().DomUtil.get(this._addUID("GPvisibility_ID_"+e)),n=this._layers[e].visibility;i.checked=n},_updateOpacityDOMLayer:function(t){var e=Vn().stamp(t),i=t.options.opacity,n=Vn().DomUtil.get(this._addUID("GPopacityValue_ID_"+e));n.innerHTML=parseInt(100*i,10)+"%",n.value=parseInt(100*i,10)},_onOutOfRangeLayerZoom:function(){var t=this._map,e=this._layers;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i].layer,o=e[i].id,s=Vn().DomUtil.get(this._addUID("GPlayerSwitcher_ID_"+o));n.options.minZoom>t.getZoom()||n.options.maxZoom<t.getZoom()?Vn().DomUtil.addClass(s,"outOfRange"):Vn().DomUtil.removeClass(s,"outOfRange")}},_onVisibilityLayerClick:function(t){var e=t.target.id,i=Jn.index(e);this._layers[i].visibility=Vn().DomUtil.get(e).checked;var n=this._layers[i].layer;this._updateVisibilityLayer(n)},_onDropLayerClick:function(t){var e=t.target.id,i=Jn.index(e),n=this._layers[i].layer;this.removeLayer(n)},_onChangeLayerOpacity:function(t){var e=t.target.id,i=Jn.index(e),n=this._layers[i].layer,o=t.target.value;Vn().DomUtil.get(this._addUID("GPopacityValue_ID_"+i)).innerHTML=o+"%",this._map.hasLayer(n)&&(void 0!==n.setOpacity?n.setOpacity(o/100):n.setStyle({fillOpacity:o/100,opacity:o/100}))},_onOpenLayerInfoClick:function(t){var e=t.target.id,i=Jn.index(e),n=this._layers[i],o=Vn().DomUtil.get(t.target.id),s=null,r=null;if("GPlayerInfoOpened"===o.className)return Vn().DomUtil.removeClass(o,"GPlayerInfoOpened"),Vn().DomUtil.addClass(o,"GPlayerInfo"),s=Vn().DomUtil.get(this._addUID("GPlayerInfoPanel")),Vn().DomUtil.removeClass(s,"GPpanel"),Vn().DomUtil.removeClass(s,"GPlayerInfoPanelOpened"),Vn().DomUtil.addClass(s,"GPlayerInfoPanelClosed"),r=Vn().DomUtil.get(this._addUID("GPlayerInfoContent")),void s.removeChild(r);for(var a=document.getElementsByClassName("GPlayerInfoOpened"),l=0;l<a.length;l++)a[l].className="GPlayerInfo";Vn().DomUtil.removeClass(o,"GPlayerInfo"),Vn().DomUtil.addClass(o,"GPlayerInfoOpened"),s=Vn().DomUtil.get(this._addUID("GPlayerInfoPanel")),Vn().DomUtil.addClass(s,"GPpanel"),Vn().DomUtil.removeClass(s,"GPlayerInfoPanelClosed"),Vn().DomUtil.addClass(s,"GPlayerInfoPanelOpened"),(r=Vn().DomUtil.get(this._addUID("GPlayerInfoContent")))&&s.removeChild(r);var c=this._createContainerLayerInfoElement(n);s.appendChild(c)},_onDragAndDropLayerClick:function(t){var e=t.target.id,i=Jn.index(e),n=this._layers[i];eo.log(n);var o=document.querySelectorAll("div.GPlayerSwitcher_layer");this._lastZIndex=o.length;for(var s=0;s<o.length;s++){var r=o[s].id,a=Jn.index(r),l=this._layers[a].layer;this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex--,l.setZIndex(this._lastZIndex))}},addLayer:function(t,e){var i=this._map,n=this._layersConfig;if(t){i.hasLayer(t)||(eo.log("[WARN] LayerSwitcher:addLayer - layer has not been added on map !"),i.addLayer(t));var o=Vn().stamp(t);for(var s in n)if(n.hasOwnProperty(s)&&o===Vn().stamp(n[s].layer)){delete n[s];break}var r=e||{};Vn().Util.extend(r,{layer:t}),n.push(r),this._layers[o]||t.setZIndex(this._lastZIndex++),this.addOverlay(t),this._update()}else eo.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter !")},setOpacity:function(t,e){eo.trace(t,e),e>1||e<0||this._map.hasLayer(t)&&(void 0!==t.setOpacity?t.setOpacity(e):(t.options.opacity=e,t.setStyle({fillOpacity:e,opacity:e})),this._updateOpacityDOMLayer(t))},setVisibility:function(t,e){eo.trace(t,e),this._layers[Vn().stamp(t)].visibility=e,this._updateVisibilityDOMLayer(t),this._updateVisibilityLayer(t)}});const no={getLogger:function(t){"__PRODUCTION__".match(/true/)?Yn.disableAll():Yn.enableAll();var e=t||"default";return Yn.getLogger(e)}};const oo={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(t,e){if(0===Object.keys(arguments).length)return"Message indefined !";var i=Array.prototype.slice.call(arguments),n=i.shift(),o=i,s=this[n];try{s=Array.isArray(o)&&o.length>0?s.replace("%var%",o.join(" - ")):s.replace("%var%","%var% (not specified)")}catch(t){}return s}};function so(t){if(!(this instanceof so))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=t;"string"==typeof t||t instanceof String?(this.message=t,this.status=-1,this.type=so.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=(new Error).stack}so.TYPE_SRVERR="SERVICE_ERROR",so.TYPE_USEERR="USAGE_ERROR",so.TYPE_UNKERR="UNKNOWN_ERROR",so.prototype=Object.create(Error.prototype,{constructor:{value:so,writable:!0,configurable:!0}});const ro=so;const ao={normalyzeParameters:function(t){var e=null;if(t){var i=[];for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];o||(o=""),i.push(n+"="+o)}e=i.join("&")}return e},normalyzeUrl:function(t,e,i){var n=t;if(t){var o=t.indexOf("?");-1===o&&(n+="?"),-1!==o&&o!==t.length-1&&(n+="&")}return e&&(n+="string"==typeof e?e:this.normalyzeParameters(e)),i&&(n=encodeURIComponent(n)),n},indent:function(t,e){return new Array((t||0)+1).join("\t")+e}};var lo=i(702),co=i.n(lo);const ho={call:function(t){var e=no.getLogger("XHR");if(e.trace("[XHR::call()]"),co().polyfill(),!t.url)throw new Error("missing parameter : url is not defined !");if(!t.method)throw new Error("missing parameter : method is not defined !");t.format||(t.format="text");var i={};switch(i.url=t.url,i.data=t.data?t.data:null,i.method=t.method,i.timeOut=t.timeOut||0,i.scope=t.scope||this,i.proxy=t.proxy||null,i.content=t.content||null,i.headers=t.headers||{referer:"http://localhost"},t.method){case"DELETE":case"GET":break;case"PUT":case"POST":i.content=t.content?t.content:"application/x-www-form-urlencoded",i.headers=t.headers?t.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(t.format){case"text":this.__call(i).then((function(i){e.trace(i),t.onResponse.call(this,i)})).catch((function(e){t.onFailure.call(this,e)}));break;case"json":this.__callJSON(i).then((function(i){e.trace(i),t.onResponse.call(this,i)})).catch((function(e){t.onFailure.call(this,e)}));break;case"xml":this.__callXML(i).then((function(i){e.trace(i),t.onResponse.call(this,i)})).catch((function(e){t.onFailure.call(this,e)}));break;default:throw new Error("This output Format is not yet supported !")}},__call:function(t){var e=no.getLogger("XHR");return e.trace("[XHR::__call()]"),new Promise((function(n,o){var s="POST"===t.method||"PUT"===t.method?1:0;t.data&&("object"==typeof t.data&&Object.keys(t.data).length||"string"==typeof t.data&&t.data.length)&&!s&&(t.url=ao.normalyzeUrl(t.url,t.data)),e.trace("URL = ",t.url);var r=null;if("undefined"==typeof window){var a=i(300),l={headers:{Referer:"https://localhost"}};return t.data&&"string"==typeof t.data&&s&&(l={method:t.method,body:t.data,headers:{"Content-Type":t.content,Referer:"https://localhost"}}),a(t.url,l).then((function(t){if(t.ok)n(t.text());else{var e="Errors Occured on Http Request (status : '"+t.statusText+"' | url : '"+t.url+"')",i=t.status;o({message:e,status:i})}})).catch((function(t){o({message:t,status:-1})}))}if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),(r=new XMLHttpRequest).open(t.method,t.url,!0),r.overrideMimeType=t.content;var c=null;t.timeOut>0&&(e.trace("XHR - TimeOut actif !"),c=window.setTimeout((function(){o({message:"TimeOut Occured on Http Request with XMLHttpRequest !",status:-1})}),t.timeOut)),s&&(e.trace("data = ",t.data),r.setRequestHeader("Content-type",t.content)),r.onerror=function(t){console.log(t),o(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},r.ontimeout=function(t){console.log(t),o(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},r.onreadystatechange=function(t){if(4===r.readyState)if(200===r.status)window.clearTimeout(c),n(r.response);else{var e="Errors Occured on Http Request (status : '"+t.target.statusText+"' | url : '"+t.target.responseURL+"')",i=t.target.status;o({message:e,status:i})}};var h=t.data&&s?t.data:null;r.send(h)}else{if(!window.XDomainRequest)throw new Error("CORS not supported");e.trace("XDomainRequest"),(r=new XDomainRequest).open(t.method,t.url),r.overrideMimeType=t.content,t.timeOut>0&&(r.timeout=t.timeout,e.trace("XHR - TimeOut actif !")),s&&r.setRequestHeader("Content-type",t.content),r.onerror=function(){o(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},r.ontimeout=function(){o(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},r.onload=function(t){if(200===r.status)n(r.responseText);else{var e="Errors Occured on Http Request (status : '"+t.target.statusText+"' | url : '"+t.target.responseURL+"')",i=t.target.status;o({message:e,status:i})}};var u=t.data&&s?t.data:null;r.send(u)}}))},__callJSON:function(t){return this.__call(t).then(JSON.parse).catch((function(e){console.log("_callJSON failed on : ",t.url,e)}))},__callXML:function(t){return this.__call(t).then((function(t){var e;"undefined"==typeof window?e=(new(0,i(150).a)).parseFromString(t,"text/xml"):window.DOMParser?e=(new window.DOMParser).parseFromString(t,"text/xml"):((e=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t));return e})).catch((function(e){console.log("__callXML failed on : ",t.url,e)}))}};var uo;const po={uuid:(uo=Math.floor(Date.now()),function(){return uo++}),call:function(t){var e=no.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!t)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!t.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(t.timeOut||(e.info("setting 'options.timeOut' default value"),t.timeOut=0),!t.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var i="string"==typeof t.callbackSuffix?t.callbackSuffix:this.uuid(),n=!1,o=!1,s=t.url.indexOf("callback=");if(-1!==s){n=!0;var r=t.url.indexOf("&",s);-1===r&&(r=t.url.length);var a=t.url.substring(s+9,r);a&&(o=!0,t.callbackName=a,e.info("setting 'options.callbackName' value ("+t.callbackName+") from 'options.url' parameter"))}if(!n){var l=t.url.indexOf("?");-1===l?t.url=t.url+"?callback=":l===t.url.length?t.url=t.url+"callback=":t.url=t.url+"&callback=",e.info("setting callback default key in 'options.url' : "+t.url)}var c=!!t.callbackName||o;if(o||(t.callbackName||(e.info("setting 'options.callbackName' default value"),t.callbackName="callback",(i||""===i)&&(t.callbackName+=i)),t.url=t.url.replace("callback=","callback="+t.callbackName),e.info("setting callback function name in 'options.url' : "+t.url)),t.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),t.onTimeOut=function(){console.log("TimeOut while invoking url : "+t.url)}),!c){var h=this,u=null;t.timeOut>0&&(u=window.setTimeout((function(){window[t.callbackName]=function(){},t.onTimeOut(),h._deleteScript(i)}),t.timeOut)),window[t.callbackName]=function(e){window.clearTimeout(u),t.onResponse(e),h._deleteScript(i)}}this._createScript(i,t.url)},_createScript:function(t,e){var i,n=document.getElementById("results"+t);(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",e),i.setAttribute("charset","UTF-8"),i.setAttribute("id","results"+t),i.setAttribute("async","true");var o=document.documentElement||document.getElementsByTagName("head")[0];null===n?o.appendChild(i):o.replaceChild(i,n)},_deleteScript:function(t){var e=document.getElementById("results"+t);if(e){var i=e.parentNode||document.documentElement;if(!i)return;i.removeChild(e)}}};const fo={send:function(t){var e=t||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if("undefined"!=typeof window||"JSONP"!==t.protocol){if("XHR"===t.protocol||"json"===t.format?e.wrap=!1:"JSONP"===t.protocol&&"xml"===t.format&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var i={};i.output=e.output,i.callback=e.callback,delete i.callback,e.url=ao.normalyzeUrl(t.url,i)}switch(e.protocol){case"XHR":"GET"===t.method&&t.nocache&&(e.url=ao.normalyzeUrl(e.url,{t:(new Date).getTime()})),ho.call(e);break;case"JSONP":e.data&&(e.url=ao.normalyzeUrl(e.url,e.data)),po.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}else console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS")}};var mo={ssl:!0,url:function(t,e){return(!1===mo.ssl?"http://":"https://")+"wxs.ign.fr".concat("/",t,e)},Alti:{_key:{"elevation-json":"/alti/rest/elevation.json","elevation-xml":"/alti/rest/elevation.xml","profil-json":"/alti/rest/elevationLine.json","profil-xml":"/alti/rest/elevationLine.xml",wps:"/alti/wps"},url:function(t){return{"elevation-json":mo.url(t,this._key["elevation-json"]),"elevation-xml":mo.url(t,this._key["elevation-xml"]),"profil-json":mo.url(t,this._key["profil-json"]),"profil-xml":mo.url(t,this._key["profil-xml"]),wps:mo.url(t,this._key.wps)}}},ProcessIsoCurve:{_key:{"iso-json":"/isochrone/isochrone.json","iso-xml":"/isochrone/isochrone.xml"},url:function(t){return{"iso-json":mo.url(t,this._key["iso-json"]),"iso-xml":mo.url(t,this._key["iso-xml"])}}},AutoComplete:{_key:"/ols/apis/completion",url:function(t){return mo.url(t,this._key)}},ReverseGeocode:{_key:"/geoportail/ols",url:function(t){return mo.url(t,this._key)}},AutoConf:{_key:{apiKey:"/autoconf",apiKeys:"/autoconf?keys=%KEYS%",aggregate:"/autoconf/id/"},url:function(t){var e="";if(Array.isArray(t)&&t.length>0){e=t[0];for(var i=1;i<t.length;i++)e+=","+t[i]}return{apiKey:mo.url(t,this._key.apiKey),apiKeys:mo.url(t[0],this._key.apiKeys).replace("%KEYS%",e),aggregate:mo.url(t,this._key.aggregate)}}},Geocode:{_key:"/geoportail/ols",url:function(t){return mo.url(t,this._key)}},Route:{_key:{ols:"/itineraire/ols","route-json":"/itineraire/rest/route.json","route-xml":"/itineraire/rest/route.xml"},url:function(t){return{ols:mo.url(t,this._key.ols),"route-json":mo.url(t,this._key["route-json"]),"route-xml":mo.url(t,this._key["route-xml"])}}}};const go=mo,_o=JSON.parse('{"hT":"14/04/2021","i8":"2.1.8"}');function vo(t){if(!(this instanceof vo))throw new TypeError(oo.getMessage("CLASS_CONSTRUCTOR"));for(var e in this.logger=no.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(t){console.log("onSuccess - la reponse est la suivante : ",t)},onFailure:function(t){200!==t.status&&t.status?console.log("onFailure - Erreur (",t.status,") : ",t.message):console.log("onFailure : ",t.message)}},t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);if(!this.options.apiKey&&!this.options.serverUrl)throw new Error(oo.getMessage("PARAM_MISSING","apiKey","serverUrl"));if(this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(t){console.log("onSuccess - la réponse brute du service est la suivante : ",t)}),!!(null===this.options.onSuccess||"function"!=typeof this.options.onSuccess))throw new Error(oo.getMessage("PARAM_MISSING","onSuccess()"));if(!this.options.serverUrl){go.ssl=this.options.ssl;var i=go[this.CLASSNAME].url(this.options.apiKey);"string"==typeof i?this.options.serverUrl=i:this.logger.trace("URL par defaut à determiner au niveau du composant...")}switch(this.options.httpMethod="string"==typeof t.httpMethod?t.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(oo.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(oo.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol="string"==typeof t.protocol?t.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(oo.getMessage("PARAM_UNKNOWN","protocol"))}if("undefined"==typeof window&&"JSONP"===this.options.protocol)throw new Error(oo.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));"JSONP"===this.options.protocol&&(this.options.httpMethod="GET"),this.options.nocache=t.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}vo.prototype={constructor:vo,call:function(){this.logger.trace("CommonService::call ()");var t=this;function e(e){this.logger.trace("CommonService::onBuildRequest : ",e),this.callService.call(t,o,i)}function i(e){this.logger.trace("CommonService::onCallService : ",e),this.analyzeResponse.call(t,o,n)}function n(t){if(this.logger.trace("CommonService::onAnalyzeResponse : ",t),!t)return o.call(this,new ro("Analyse de la reponse en échec !?"));this.options.onSuccess.call(this,t)}function o(t){this.logger.trace("CommonService::onError()");var e=t;e instanceof ro||(e=new ro(t.message)),this.options.onFailure.call(this,e)}(function(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(t,o,e)}).call(t)},buildRequest:function(t,e){this.logger.error("overwritten method !"),t&&t.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(t,e){var i=null,n=this.request,o=!(!this.options.proxyURL||"XHR"!==this.options.protocol);this.options.serverUrl=ao.normalyzeUrl(this.options.serverUrl,{"gp-access-lib":_o.i8},!1),o&&("GET"===this.options.httpMethod&&(i=this.options.proxyURL+ao.normalyzeUrl(this.options.serverUrl,this.request,!0),n=null),"POST"===this.options.httpMethod&&(i=this.options.proxyURL+ao.normalyzeUrl(this.options.serverUrl,null,!0),n=this.request));var s=this,r={url:i||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:"XHR"!==this.options.protocol,callbackSuffix:this.options.callbackSuffix,data:n,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(i){s.logger.trace("callService::onResponse()");var n=null;if("XHR"===s.options.protocol&&(s.logger.trace("Response XHR",i),n=i),"JSONP"===s.options.protocol){if(s.logger.trace("Response JSON",i),!i)return void t.call(s,new ro("Le contenu de la reponse est vide !?"));if(i.http){if(200!==i.http.status)return void t.call(s,new ro({status:i.http.status,message:i.http.error,type:ro.TYPE_SRVERR}));n=i.xml,s.options.rawResponse&&(n=i)}else n=i}if("function"==typeof s.options.onBeforeParse){var o=s.options.onBeforeParse(n);"string"==typeof o&&(n=o)}s.response=n,e.call(s,n)},onFailure:function(e){s.logger.trace("callService::onFailure()"),e.type=ro.TYPE_SRVERR,t.call(s,new ro(e))},onTimeOut:function(){s.logger.trace("callService::onTimeOut()"),t.call(s,new ro("TimeOut!"))}};fo.send(r)},analyzeResponse:function(t,e){this.logger.error("overwritten method !"),t&&t.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};const yo=vo;function Eo(t){if(!(this instanceof Eo))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=no.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=t||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json"}Eo.CLASSNAME="AltiRequest",Eo.prototype={constructor:Eo,setPositions:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];n.lon&&n.lat&&e.push(n)}this.positions=e},getPositions:function(t){if(!t)return this.positions;var e=this.positions.length-1;return t>e||t<e?(this.logger.warn("index out of range !"),this.positions):this.positions[t]},addPositions:function(t){for(var e=0;e<t.length;e++){var i=t[e];i.lon&&i.lat&&this.positions.push(t[e])}},getLon:function(){for(var t=[],e=0;e<this.positions.length;e++)t.push(this.positions[e].lon);return this.logger.trace(t),t.join(this.delimiter)},getLat:function(){for(var t=[],e=0;e<this.positions.length;e++)t.push(this.positions[e].lat);return this.logger.trace(t),t.join(this.delimiter)}},Eo.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"delimiter",v:this.delimiter}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"format",v:this.format}),t};const wo=Eo;function bo(t){if(!(this instanceof bo))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",wo.apply(this,arguments),this.logger=no.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}bo.prototype=Object.create(wo.prototype,{zonly:{get:function(){return this._zonly},set:function(t){this._zonly=t}}}),bo.prototype.constructor=bo,bo.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"zonly",v:this.zonly}),t.push({k:"format",v:this.format}),t};const xo=bo;function Lo(t){if(!(this instanceof Lo))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",wo.apply(this,arguments),this.logger=no.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}Lo.prototype=Object.create(wo.prototype,{sampling:{get:function(){return this._sampling},set:function(t){this._sampling=t}}}),Lo.prototype.constructor=Lo,Lo.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"sampling",v:this.sampling}),t.push({k:"format",v:this.format}),t};const Co=Lo;function Po(t){if(this.logger=no.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof Po))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=t||{},!this.options)throw new Error(oo.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(oo.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new xo(this.options.param);break;case"Profil":this.DataObject=new Co(this.options.param);break;default:throw new Error(oo.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}Po.prototype={requestString:null,constructor:Po,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:"lon=__LON__\nlat=__LAT__\nindent=__INDENT__\ncrs='__CRS__'\n",input:{point:"zonly=__ZONLY__",profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var t="";return"POST"===this.method?t=this.template.post.value:"GET"===this.method&&(t=this.template.get.value),t=(t=(t=(t=t.replace(/__LON__/g,this.DataObject.getLon())).replace(/__LAT__/g,this.DataObject.getLat())).replace(/__INDENT__/g,this.DataObject.indent)).replace(/__CRS__/g,this.DataObject.crs),t+=this.__addDataInputs(),this.logger.trace("traduction tmpl",t),this.requestString=t,this.requestString},__addDataInputs:function(){var t;if(this.logger.trace("AltiRequestREST::addDataInput ()"),"POST"===this.method)t=this.template.post;else{if("GET"!==this.method)throw new Error("No other HTTP method supported by the service !");t=this.template.get}if("AltiElevationRequest"===this.DataObject.CLASSNAME)return t.input.point.replace(/__ZONLY__/g,this.DataObject.zonly);if("AltiProfilRequest"===this.DataObject.CLASSNAME)return t.input.profil.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};const So=Po;function Mo(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof Mo))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=t||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}Mo.prototype={requestString:null,constructor:Mo,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=\x3c!-- __DATAINPUTS__ --\x3e",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs>\x3c!-- __DATAINPUTS__ --\x3e</wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var t="";if("POST"===this.method)t=this.template.post.value;else{if("GET"!==this.method)return this.logger.error("No other method supported by the service !"),!1;t=this.template.get.value}return t=(t=(t=(t=(t=t.replace(/__SERVICE__/g,this.paramservice)).replace(/__VERSION__/g,this.paramversion)).replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput)).replace(/__IDENTIFIER__/g,this.paramidentifier)).replace(/__REQUEST__/g,this.paramrequest),"POST"===this.method&&(t=(t=t.replace(/__NAMESPACE__/g,this.namespaceByDefault)).replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),(t=t.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()))?(this.requestString=t,this.logger.trace("traduction tmpl",t),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var t,e="GET"===this.method?this.template.get.input:this.template.post.input,i="GET"===this.method?";":"",n="",o=this,s=this.DataObject.getData(),r=0;r<s.length;r++)t=r,i&&(i=t===s.length-1?"":";"),n=n.concat(o.__addDataInput(e,s[t].k,s[t].v),i);return n},__addDataInput:function(t,e,i){var n=t;return n=(n=n.replace(/__KEY__/g,e)).replace(/__DATA__/g,i)},setMethod:function(t){"GET"===t||"POST"===t?this.method=t:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};const To=Mo;const Ao={build:function(t){if(no.getLogger("AltiRequestWPS").trace(["AltiRequestWPS::build()"]),!t)throw new Error(oo.getMessage("PARAM_EMPTY","options"));if(!t.type)throw new Error(oo.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var e=null;switch(t.type){case"Elevation":t.wps.identifier="gs:WPSElevation",e=new xo(t.param);break;case"Profil":t.wps.identifier="gs:WPSLineElevation",e=new Co(t.param);break;default:throw new Error(oo.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var i={data:e,method:t.method,param:t.wps},n=new To(i);if(!n.processRequestString())throw new Error("Enable to process request !");return n.requestString}};const Io={build:function(t){no.getLogger("AltiRequestFactory").trace(["AltiRequestFactory::build()"]);var e=null,i={type:t.sampling?"Profil":"Elevation",method:t.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null}};i.param.positions=t.positions,i.param.format=t.outputFormat,i.param.sampling=t.sampling,i.param.zonly=t.zonly;var n=!(null===t.onError||"function"!=typeof t.onError),o=!(null===t.onSuccess||"function"!=typeof t.onSuccess),s=null;switch(t.api){case"REST":var r=new So(i);if(!r.processRequestString()){if(s="Error in process request (rest) !",n)return void t.onError.call(t.scope,new ro(s));throw new Error(s)}e=r.requestString;break;case"WPS":if(i.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},!(e=Ao.build(i))){if(s="Error in process request (wps) !",n)return void t.onError.call(t.scope,new ro(s));throw new Error(s)}break;default:if(s="Type of API is not supported by service (REST or WPS) !",n)return void t.onError.call(t.scope,new ro(s));throw new Error(s)}return o&&t.onSuccess.call(t.scope,e),e}};function ko(t){if(!(this instanceof ko))throw new TypeError("XML constructor cannot be called as a function.");this.logger=no.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,t&&(t.xmlString&&"string"==typeof t.xmlString&&(this.xmlString=t.xmlString,this.xmlDoc=Ro(t.xmlString)),t.reader&&this.setReader(t.reader))}function Ro(t){if("undefined"==typeof window)return(new(0,i(150).a)).parseFromString(t,"text/xml");var e,n,o="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){(n=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(t);var s=n.parseError;if(s.errorCode)throw s.line&&s.linepos&&(o+="( ligne "+s.line+", colonne "+s.linepos),s.reason&&(o+=":  "+s.reason+")"),new Error(o);return n}if(window.DOMParser){e=new window.DOMParser;try{n=e.parseFromString(t,"text/xml")}catch(t){throw"SyntaxError"===t.message?new Error(o):new Error("Erreur lors du parsing de la réponse du service : "+t.message)}if(n.getElementsByTagName("parsererror").length>0)for(var r=n.getElementsByTagName("parsererror"),a=0;a<r.length;a++){var l=r[a].innerHTML;if(-1===l.indexOf("Huge input lookup"))throw o+="("+l+")",new Error(o)}else if(!n.documentElement)throw new Error(o);return n}throw new Error("Incompatible DOM Parser pour ce navigateur !")}function Do(t){var e={};if(t.attributes.length>0){var i=function(t){if(t.attributes.length>0){for(var e={},i=t.attributes,n=0;n<i.length;n++){var o=i[n];e[o.nodeName]=o.nodeValue}return e}}(t);e.attributes=i}if(t.hasChildNodes())for(var n,o={},s=t.childNodes,r=0;r<s.length;r++)if(3===(n=s[r]).nodeType)e.textContent=n.nodeValue;else if(1===n.nodeType)if(o=Do(n),e[n.nodeName]){if(!Array.isArray(e[n.nodeName])){var a=e[n.nodeName];e[n.nodeName]=[],e[n.nodeName].push(a)}e[n.nodeName].push(o)}else e[n.nodeName]=o;return e}ko.prototype={constructor:ko,getXMLString:function(){return this.xmlString},setXMLString:function(t){t&&"string"==typeof t&&(this.xmlString=t,this.xmlDoc=Ro(t))},getReader:function(){return this.reader},setReader:function(t){t&&t.read&&"function"==typeof t.read&&(this.reader=t)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(t){this.xmlDoc=t},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=Ro(this.xmlString)),this.xmlDoc){var t,e=function(t){var e;9===t.nodeType?e=t.documentElement:1===t.nodeType&&(e=t);return e}(this.xmlDoc);return e?(this.reader&&this.reader.read?t=this.reader.read(e):(t={})[e.nodeName]=Do(e),t):{}}}};const Oo=ko;function Go(){if(!(this instanceof Go))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}Go.prototype={constructor:Go};const No=Go;function Uo(){if(!(this instanceof Uo))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Uo.prototype={constructor:Uo};const jo=Uo;var Fo={};Fo.READERS={elevations:function(t){var e=new No;if(t.hasChildNodes())for(var i,n,o=t.childNodes,s=0;s<o.length;s++)i=o[s],Fo.READERS[i.nodeName]&&(n=Fo.READERS[i.nodeName](i),e.elevations.push(n));return e},elevation:function(t){var e=new jo;if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++)i=n[o],Fo.READERS[i.nodeName]&&Fo.READERS[i.nodeName](i,e);return e},lat:function(t,e){var i=t.firstChild;if(!i||3!==i.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente");e.lat=parseFloat(i.nodeValue)},lon:function(t,e){var i=t.firstChild;if(!i||3!==i.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente");e.lon=parseFloat(i.nodeValue)},z:function(t,e){var i=t.firstChild;if(!i||3!==i.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente");if(!e)return(e=new jo).z=parseFloat(i.nodeValue),e;e.z=parseFloat(i.nodeValue)},acc:function(t,e){var i=t.firstChild;if(!i||3!==i.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente");e.acc=parseFloat(i.nodeValue)},exceptionreport:function(t){var e={};if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++)"Exception"===(i=n[o]).nodeName&&(e.exceptionReport=Fo.READERS.exception(i));return e},exception:function(t){var e={},i=t.getAttribute("exceptionCode");i&&(e.exceptionCode=i);var n=t.firstChild;return n&&3===n.nodeType&&(e.exception=n.nodeValue),e},error:function(t){var e={error:{}};if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++){var s;1===(i=n[o]).nodeType&&"code"===i.nodeName&&(s=i.firstChild)&&3===s.nodeType&&(e.error.code=s.nodeValue),1===i.nodeType&&"description"===i.nodeName&&(s=i.firstChild)&&3===s.nodeType&&(e.error.description=s.nodeValue)}return e}},Fo.read=function(t){if("elevations"===t.nodeName)return Fo.READERS.elevations(t);if("ExceptionReport"===t.nodeName)return Fo.READERS.exceptionreport(t);if("error"===t.nodeName)return Fo.READERS.error(t);throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};const zo=Fo;const Bo={build:function(t){var e=no.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var i=null;if(t.response){if(t.rawResponse)e.trace("analyze response : raw"),i=t.response;else{switch(t.outputFormat){case"xml":e.trace("analyze response : xml");try{var n=new Oo({reader:zo});if("string"==typeof t.response?n.setXMLString(t.response):n.setXMLDoc(t.response),!(i=n.parse()))throw new Error(oo.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(e){var o=e.message;return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",o),status:200,type:ro.TYPE_SRVERR}))}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof t.response);var s=null;if((s="string"==typeof t.response?JSON.parse(t.response):t.response)&&s.error)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",s.error.description),status:200,type:ro.TYPE_SRVERR}));if(s){var r,a=s.elevations,l=new No;if(Array.isArray(a)&&a.length)for(var c=0;c<a.length;c++)r=new jo,"object"==typeof a[c]?(a[c].lon&&(r.lon=a[c].lon),a[c].lat&&(r.lat=a[c].lat),a[c].z&&(r.z=a[c].z),a[c].acc&&(r.acc=a[c].acc)):"number"==typeof a[c]&&(r.z=a[c]),Array.isArray(l.elevations)&&l.elevations.push(r);i=l}if(!i)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ro.TYPE_UNKERR,status:-1}));break;default:return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ro.TYPE_UNKERR,status:-1}))}if(i.exceptionReport)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",i.exceptionReport),type:ro.TYPE_SRVERR,status:200}));if(i.error){var h=i.error.description;return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",h),type:ro.TYPE_SRVERR,status:200}))}}t.onSuccess.call(t.scope,i)}else t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))}};function qo(t){if(!(this instanceof qo))throw new TypeError(oo.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",yo.apply(this,arguments),this.logger=no.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!t.positions)throw new Error(oo.getMessage("PARAM_MISSING","positions"));if(0===t.positions.length)throw new Error(oo.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=t.positions,this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"xml",this.options.sampling=t.sampling||null,this.options.api="string"==typeof t.api?t.api.toUpperCase():"REST","REST"===this.options.api&&(this.options.httpMethod="GET"),this.options.zonly=t.zonly||!1,!this.options.serverUrl){var e=go.Alti.url(this.options.apiKey),i=null;switch(this.options.api){case"WPS":i=e.wps;break;case"REST":var n=(t.sampling?"profil":"elevation")+"-"+this.options.outputFormat;i=e[n];break;default:throw new Error(oo.getMessage("PARAM_UNKNOWN","api"))}if(!i)throw new Error("Url by default not found !");this.options.serverUrl=i,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var o=this.options.serverUrl.lastIndexOf(".");if(-1!==o){var s=this.options.serverUrl.substring(o+1);if(s&&s.length<5)switch(this.logger.trace("Server Extension URL : "+s),s.toLowerCase()){case"json":case"xml":this.options.outputFormat=s.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}qo.prototype=Object.create(yo.prototype,{}),qo.prototype.constructor=qo,qo.prototype.buildRequest=function(t,e){var i={httpMethod:this.options.httpMethod,onSuccess:function(t){this.request=t,e.call(this,this.request)},onError:t,scope:this,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly};Io.build(i)},qo.prototype.analyzeResponse=function(t,e){if(this.response){var i={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};Bo.build(i)}else t.call(this,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))};const Ho=qo;function Wo(){if(!(this instanceof Wo))throw new TypeError("AutoConfResponse constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.territories={},this.tileMatrixSets={},this.services={}}Wo.prototype={constructor:Wo,isConfLoaded:function(t){if(t)return!!this.generalOptions.apiKeys[t]},getLayersId:function(t){return this.generalOptions.apiKeys[t]},getLayersConf:function(t){var e={},i=this.getLayersId(t);if(i)for(var n=0;n<i.length;n++){var o=i[n];e[o]=this.layers[o]}return e},getLayerConf:function(t){if(this.layers)return this.layers[t]},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(t){if(this.tileMatrixSets)return this.tileMatrixSets[t]},getTerritories:function(){return this.territories},getTerritoryConf:function(t){if(this.territories)return this.territories[t]},getServices:function(){return this.services},getServiceConf:function(t){if(this.services)return this.services[t]}};const Vo=Wo;function Zo(){if(!(this instanceof Zo))throw new TypeError("Constraint constructor cannot be called as a function.");this.crs=null,this.bbox={left:null,right:null,top:null,bottom:null},this.minScaleDenominator=null,this.maxScaleDenominator=null,this.temporalExtent=[null,null]}Zo.prototype={constructor:Zo};const Yo=Zo;function Xo(){if(!(this instanceof Xo))throw new TypeError("Format constructor cannot be called as a function.");this.current=null,this.name=null}Xo.prototype={constructor:Xo};const Ko=Xo;function Jo(){if(!(this instanceof Jo))throw new TypeError("Layer constructor cannot be called as a function.")}Jo.prototype={constructor:Jo,getName:function(){return this.name},getTitle:function(){return this.title},getDescription:function(){return this.description},getLayerId:function(){return this.layerId},getQuicklookUrl:function(){return this.quicklookUrl},getDefaultProjection:function(){return this.defaultProjection},getProjections:function(){var t=[];return t.push(this.defaultProjection),t.concat(this.additionalProjections)},getBBOX:function(){if(this.globalConstraint)return this.globalConstraint.bbox},getMinScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.minScaleDenominator},getMaxScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.maxScaleDenominator},getTMSID:function(){if(this.wmtsOptions)return this.wmtsOptions.tileMatrixSetLink},getServiceParams:function(){return this.serviceParams},getServerUrl:function(t){if(t&&this.serviceParams&&this.serviceParams.serverUrl)return this.serviceParams.serverUrl[t]},getLegends:function(){return this.legends},getMetadata:function(){return this.metadata},getStyles:function(){return this.styles},getDefaultStyle:function(){if(this.styles){for(var t,e=this.styles,i=0;i<e.length;i++)if(!0===e[i].current){t=e[i].name;break}return t}},getThematics:function(){return this.thematics},getDefaultFormat:function(){if(this.formats){for(var t,e=this.formats,i=0;i<e.length;i++)if(!0===e[i].current){t=e[i].name;break}return t}},getConstraints:function(){return this.constraints},getOriginators:function(){return this.originators},getDimensions:function(){return this.dimensions},getAggregatedLayers:function(){if(this.isAggregate)return this.aggregatedLayers}};const Qo=Jo;function $o(){if(!(this instanceof $o))throw new TypeError("Legend constructor cannot be called as a function.");this.format=null,this.url=null,this.minScaleDenominator=null}$o.prototype={constructor:$o};const ts=$o;function es(){if(!(this instanceof es))throw new TypeError("Metadata constructor cannot be called as a function.");this.format=null,this.url=null}es.prototype={constructor:es};const is=es;function ns(){if(!(this instanceof ns))throw new TypeError("Originator constructor cannot be called as a function.");this.name=null,this.attribution=null,this.logo=null,this.url=null,this.constraints=[]}ns.prototype={constructor:ns};const os=ns;function ss(){if(!(this instanceof ss))throw new TypeError("Service constructor cannot be called as a function.");this.title=null,this.serverUrl=null,this.version=null}ss.prototype={constructor:ss};const rs=ss;function as(){if(!(this instanceof as))throw new TypeError("Style constructor cannot be called as a function.");this.name=null,this.title=null,this.current=null,this.url=null}as.prototype={constructor:as};const ls=as;function cs(){if(!(this instanceof cs))throw new TypeError("Territory constructor cannot be called as a function.");this.isDefault=null,this.defaultCRS=null,this.additionalCRS=[],this.geoBBOX={left:null,right:null,top:null,bottom:null},this.geoCenter={lon:null,lat:null},this.defaultOptions={resolution:null,minScaleDenominator:null,maxScaleDenominator:null},this.defaultLayers=[]}cs.prototype={constructor:cs};const hs=cs;function us(){if(!(this instanceof us))throw new TypeError("Thematic constructor cannot be called as a function.");this.inspire=null,this.name=null}us.prototype={constructor:us};const ds=us;function ps(){if(!(this instanceof ps))throw new TypeError("TileMatrixSet constructor cannot be called as a function.");this.projection=null,this.nativeResolutions=[],this.matrixIds=[],this.tileMatrices={}}ps.prototype={constructor:ps,getResolutions:function(){return this.nativeResolutions},getMatrixIds:function(){return this.matrixIds},getProjection:function(){return this.projection},getTileMatrices:function(){return this.tileMatrices},getTopLeftCorner:function(){var t,e=this.getTileMatrices();if(e)for(var i in e)if(e.hasOwnProperty(i)){t=e[i].topLeftCorner;break}return t}};const fs=ps;function ms(){if(!(this instanceof ms))throw new TypeError("TileMatrix constructor cannot be called as a function.");this.matrixId=null,this.matrixHeight=null,this.matrixWidth=null,this.scaleDenominator=null,this.tileHeight=null,this.tileWidth=null,this.topLeftCorner=null}ms.prototype={constructor:ms,getTopLeftCorner:function(){return this.topLeftCorner},getScaleDenominator:function(){return this.scaleDenominator},getTileHeight:function(){return this.tileHeight},getTileWidth:function(){return this.tileWidth},getMatrixHeight:function(){return this.matrixHeight},getMatrixWidth:function(){return this.matrixWidth}};const gs=ms;function _s(){if(!(this instanceof _s))throw new TypeError("TileMatrixLimit constructor cannot be called as a function.");this.minTileRow=null,this.maxTileRow=null,this.minTileCol=null,this.maxTileCol=null}_s.prototype={constructor:_s};const vs=_s;var ys={};function Es(t,e){if(t.hasChildNodes())for(var i,n,o,s=t.childNodes,r=0;r<s.length;r++){if(1===(i=s[r]).nodeType)if(n=i.localName||i.baseName||i.nodeName,o=i.prefix||ys.DEFAULTPREFIX,ys.READERS[o][n])(0,ys.READERS[o][n])(i,e);else Es(i,e)}}function ws(t){var e,i="";return t.hasChildNodes()&&(3!==(e=t.firstChild).nodeType&&4!==e.nodeType||(i=e.nodeValue)),i}ys.VERSION="1.1.0",ys.NAMESPACES={xmlns:"http://www.opengis.net/context",gpp:"http://api.ign.fr/geoportail",ows:"http://www.opengis.net/ows/1.1",sld:"http://www.opengis.net/sld",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},ys.SCHEMALOCATION=["http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf/autoconf.xsd","http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf.xsd"],ys.DEFAULTPREFIX="context",ys.READERS={context:{ViewContext:function(t){!function(t){if(t.attributes.length>0){var e=function(t){if(t.attributes.length>0){for(var e={},i=t.attributes,n=0;n<i.length;n++){var o=i[n];e[o.nodeName]=o.nodeValue}return e}}(t);for(var i in e)if(e.hasOwnProperty(i)){if("version"===i&&e.version!==ys.VERSION)return void console.log("[AutoConfResponseReader] autoconf version is not the expected one : there may be errors in parsing");if("xmlns"===i){if(e[i]!==ys.NAMESPACES.xmlns)return void console.log("[AutoConfResponseReader] autoconf response default namespace is not the expected one");continue}var n=i.split(":")[0],o=i.split(":")[1];if("xmlns"===n&&o&&ys.NAMESPACES[o]&&ys.NAMESPACES[o]!==e[i])return void console.log("[AutoConfResponseReader] autoconf response "+i+" namespace is not the expected one");if("schemaLocation"===o&&e[i]!==ys.SCHEMALOCATION[0]&&e[i]!==ys.SCHEMALOCATION[1])return void console.log("[AutoConfResponseReader] autoconf response schema location is not the expected one")}}}(t);var e=new Vo;return Es(t,e),e},Title:function(t,e){e&&e.generalOptions?e.generalOptions.title=ws(t):e&&e.lyr&&(e.lyr.title=ws(t))},Abstract:function(t,e){e&&e.lyr&&(e.lyr.description=ws(t))},Server:function(t,e){var i=t.getAttribute("service"),n=t.getAttribute("title"),o=t.getAttribute("version");if(i)if(e&&e.services&&"object"==typeof e.services&&!e.services[i]){var s=new rs;s.title=n,s.version=o,Es(t,s),e.services[i]=s}else e&&e.lyr&&(e.lyr.serviceParams||(e.lyr.serviceParams={}),e.lyr.serviceParams.id=i,e.lyr.serviceParams.version=o)},OnlineResource:function(t,e){e&&e.hasOwnProperty("serverUrl")&&(e.serverUrl=t.getAttribute("xlink:href"))},LayerList:function(t,e){if(Es(t,e),e&&e.layers&&e.generalOptions&&e.services)for(var i in e.layers)if(e.layers.hasOwnProperty(i)){var n=e.layers[i],o=n.apiKeys;if(o&&Array.isArray(o))for(var s=0;s<o.length;s++){var r=o[s];e.generalOptions.apiKeys&&(e.generalOptions.apiKeys[r]&&Array.isArray(e.generalOptions.apiKeys[r])||(e.generalOptions.apiKeys[r]=[]),e.generalOptions.apiKeys[r].push(i))}var a=n.serviceParams;if(a&&a.id&&!e.services[a.id]){var l=new rs;a.serverUrl&&(l.serverUrl=a.serverUrl),a.version&&(l.version=a.version),e.services[a.id]=l}if(n.wmtsOptions&&n.wmtsOptions.tileMatrixSetLink&&e.tileMatrixSets){var c=n.wmtsOptions.tileMatrixSetLink,h=e.tileMatrixSets;for(var u in h)h.hasOwnProperty(u)&&u===c&&(n.defaultProjection=h[u].projection)}}},Layer:function(t,e){if(e&&e.layers){var i={lyr:new Qo,lyrId:null},n=t.getAttribute("hidden");i.lyr.hidden="1"===n;var o=t.getAttribute("queryable");if(i.lyr.queryable="1"===o,Es(t,i),i.lyrId){if(i.lyr.serviceParams&&i.lyr.serviceParams.id){var s=i.lyr.serviceParams.id;if(-1!==s.toUpperCase().indexOf("OPENLS")||-1!==s.toUpperCase().indexOf("ELEVATION")){var r=i.lyrId.split("$")[0];i.lyrId=r+"$"+s}}i.lyr.layerId=i.lyrId,e.layers[i.lyrId]=i.lyr}}},Name:function(t,e){e&&e.lyr&&(e.lyr.name=ws(t))},SRS:function(t,e){e&&e.lyr&&(e.lyr.defaultProjection=ws(t))},Format:function(t,e){if(e&&e.lyr){var i=new Ko,n=t.getAttribute("current");i.current="1"===n,i.name=ws(t),e.lyr.formats&&Array.isArray(e.lyr.formats)||(e.lyr.formats=[]),e.lyr.formats.push(i)}},Style:function(t,e){if(e&&e.lyr){var i=new ls,n=t.getAttribute("current");if(i.current="1"===n||1===n,t.hasChildNodes)for(var o,s,r=t.childNodes,a=0;a<r.length;a++)1===(o=r[a]).nodeType&&("Name"===(s=o.localName||o.baseName||o.nodeName)?i.name=ws(o):"Title"===s?i.title=ws(o):"URL"===s&&(i.url=ws(o)));e.lyr.styles&&Array.isArray(e.lyr.styles)||(e.lyr.styles=[]),e.lyr.styles.push(i)}},Dimension:function(t,e){var i=t.getAttribute("name"),n=ws(t);e&&e.lyr&&(e.lyr.dimensions||(e.lyr.dimensions={}),"Type"===i?e.lyr.dimensions.type=n:"VisibilityRange"===i?e.lyr.dimensions.visibilityRange=n:"VisibilityMode "===i?e.lyr.dimensions.visibilityMode=n:"GeometricType"===i?e.lyr.dimensions.geometricType=n:"NoDataValue"===i&&(e.lyr.dimensions.noDataValue=n))}},gpp:{Theme:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("theme")&&(e.generalOptions.theme=ws(t))},defaultGMLGFIStyleUrl:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("defaultGMLGFIStyle")&&(e.generalOptions.defaultGMLGFIStyle=ws(t))},Territory:function(t,e){var i=t.getAttribute("id");if(i){var n=new hs,o=t.getAttribute("default");n.isDefault="1"===o,Es(t,n),e&&e.territories&&"object"==typeof e.territories&&(e.territories[i]=n)}},defaultCRS:function(t,e){e&&e.hasOwnProperty("defaultCRS")&&(e.defaultCRS=ws(t))},AdditionalCRS:function(t,e){var i=ws(t);i&&e&&(Array.isArray(e.additionalCRS)?e.additionalCRS.push(i):(e.additionalProjections&&Array.isArray(e.additionalProjections)||(e.additionalProjections=[]),e.additionalProjections.push(i)))},DefaultLayer:function(t,e){var i=t.getAttribute("layerId");i&&e&&Array.isArray(e.defaultLayers)&&e.defaultLayers.push(i)},BoundingBox:function(t,e){if(e){var i=ws(t).split(",");if(4===i.length){var n={left:parseFloat(i[0]),right:parseFloat(i[2]),top:parseFloat(i[3]),bottom:parseFloat(i[1])},o=t.getAttribute("minT"),s=t.getAttribute("maxT");if(e.hasOwnProperty("geoBBOX"))e.geoBBOX=n;else if(e.hasOwnProperty("bbox"))if(e.bbox.left||e.bbox.right||e.bbox.top||e.bbox.bottom){e.multiConstraints||(e.multiConstraints=[]);var r=new Yo;r.bbox=n,r.temporalExtent=[o,s],e.multiConstraints.push(r)}else e.bbox=n,e.temporalExtent=[o,s];else e.globalConstraint||(e.globalConstraint=new Yo),e.globalConstraint.bbox=n,e.globalConstraint.temporalExtent=[o,s]}}},Resolution:function(t,e){var i=ws(t);i&&e&&e.defaultOptions&&e.defaultOptions.hasOwnProperty("resolution")&&(e.defaultOptions.resolution=parseFloat(i))},x:function(t,e){var i=ws(t);i&&e&&e.geoCenter&&e.geoCenter.hasOwnProperty("lon")&&(e.geoCenter.lon=parseFloat(i))},y:function(t,e){var i=ws(t);i&&e&&e.geoCenter&&e.geoCenter.hasOwnProperty("lat")&&(e.geoCenter.lat=parseFloat(i))},Resolutions:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("wgs84Resolutions")&&(e.generalOptions.wgs84Resolutions=ws(t).split(","))},Layer:function(t,e){if(e&&e.hasOwnProperty("lyrId")&&e.lyr){e.lyrId=t.getAttribute("id");var i=t.getAttribute("aggregate"),n=t.getAttribute("more");(i||n)&&(e.lyr.isAggregate=!0),Es(t,e.lyr)}},Constraint:function(t,e){var i=new Yo;if(Es(t,i),e)if(e.constraints&&Array.isArray(e.constraints)||(e.constraints=[]),i.multiConstraints&&Array.isArray(i.multiConstraints)){var n=new Yo;n.crs=i.crs,n.bbox=i.bbox,n.minScaleDenominator=i.minScaleDenominator,n.maxScaleDenominator=i.maxScaleDenominator,n.temporalExtent=i.temporalExtent,e.constraints.push(n);for(var o=0;o<i.multiConstraints.length;o++)(n=new Yo).crs=i.crs,n.minScaleDenominator=i.minScaleDenominator,n.maxScaleDenominator=i.maxScaleDenominator,n.bbox=i.multiConstraints[o].bbox,n.temporalExtent=i.multiConstraints[o].temporalExtent,e.constraints.push(n)}else e.constraints.push(i)},CRS:function(t,e){e&&e.hasOwnProperty("crs")&&(e.crs=ws(t))},Thematic:function(t,e){if(e){var i=new ds;i.inspire=!1,i.name=ws(t),e.thematics&&Array.isArray(e.thematics)||(e.thematics=[]),e.thematics.push(i)}},InspireThematic:function(t,e){if(e){var i=new ds;i.inspire=!0,i.name=ws(t),e.thematics&&Array.isArray(e.thematics)||(e.thematics=[]),e.thematics.push(i)}},Originator:function(t,e){if(e){var i=new os;i.name=t.getAttribute("name"),Es(t,i),e.originators&&Array.isArray(e.originators)||(e.originators=[]),e.originators.push(i)}},Attribution:function(t,e){e&&e.hasOwnProperty("attribution")&&(e.attribution=ws(t))},Logo:function(t,e){e&&e.hasOwnProperty("logo")&&(e.logo=ws(t))},URL:function(t,e){e&&e.hasOwnProperty("url")&&(e.url=ws(t))},Legend:function(t,e){var i=new ts;Es(t,i),e&&(e.legends&&Array.isArray(e.legends)||(e.legends=[]),e.legends.push(i))},LegendURL:function(t,e){if(e&&e.hasOwnProperty("format")&&(e.format=t.getAttribute("format"),t.hasChildNodes)){var i=t.childNodes[0];"OnlineResource"===(i.localName||i.baseName||i.nodeName)&&e.hasOwnProperty("url")&&(e.url=i.getAttribute("xlink:href"))}},QuickLook:function(t,e){if(t.hasChildNodes){var i=t.childNodes[0];"OnlineResource"===(i.localName||i.baseName||i.nodeName)&&e&&(e.quicklookUrl=i.getAttribute("xlink:href"))}},MetadataURL:function(t,e){if(e){var i=new is;if(i.format=t.getAttribute("format"),t.hasChildNodes){var n=t.childNodes[0];"OnlineResource"===(n.localName||n.baseName||n.nodeName)&&(i.url=n.getAttribute("xlink:href"))}e.metadata||(e.metadata=[]),e.metadata.push(i)}},Key:function(t,e){if(e){var i=t.getAttribute("id");e.apiKeys&&Array.isArray(e.apiKeys)||(e.apiKeys=[]),e.apiKeys.push(i);var n=ws(t);e.serviceParams||(e.serviceParams={}),e.serviceParams.serverUrl||(e.serviceParams.serverUrl={}),e.serviceParams.serverUrl[i]||(e.serviceParams.serverUrl[i]=n)}}},ows:{Identifier:function(t,e){e&&e.hasOwnProperty("TMS")?e.identifier=ws(t):e&&e.hasOwnProperty("matrixId")&&(e.matrixId=ws(t))},SupportedCRS:function(t,e){e&&e.TMS&&e.TMS.hasOwnProperty("projection")&&(e.TMS.projection=ws(t))}},sld:{MinScaleDenominator:function(t,e){var i=ws(t);i&&e&&(e.hasOwnProperty("defaultOptions")?e.defaultOptions.minScaleDenominator=parseFloat(i):e.lyr?(e.lyr.globalConstraint||(e.lyr.globalConstraint=new Yo),e.lyr.globalConstraint.minScaleDenominator=parseFloat(i)):e.hasOwnProperty("minScaleDenominator")&&(e.minScaleDenominator=parseFloat(i)))},MaxScaleDenominator:function(t,e){var i=ws(t);i&&e&&(e.hasOwnProperty("defaultOptions")?e.defaultOptions.maxScaleDenominator=parseFloat(i):e.lyr?(e.lyr.globalConstraint||(e.lyr.globalConstraint=new Yo),e.lyr.globalConstraint.maxScaleDenominator=parseFloat(i)):e.hasOwnProperty("maxScaleDenominator")&&(e.maxScaleDenominator=parseFloat(i)))}},wmts:{TileMatrixSetLimits:function(t,e){if(e){var i={};Es(t,i),e.wmtsOptions||(e.wmtsOptions={}),e.wmtsOptions.tileMatrixSetLimits=i}},TileMatrixLimits:function(t,e){var i,n=new vs;if(t.hasChildNodes){for(var o=t.childNodes,s=0;s<o.length;s++){var r=o[s],a=r.localName||r.baseName||r.nodeName;"TileMatrix"===a?i=ws(r):"MinTileRow"===a?n.minTileRow=ws(r):"MaxTileRow"===a?n.maxTileRow=ws(r):"MinTileCol"===a?n.minTileCol=ws(r):"MaxTileCol"===a&&(n.maxTileCol=ws(r))}i&&e&&!e[i]&&(e[i]=n)}},TileMatrixSet:function(t,e){if(e&&e.tileMatrixSets){var i={};i.TMS=new fs,i.resolutions=[],Es(t,i);var n=i.TMS.tileMatrices;for(var o in n)n.hasOwnProperty(o)&&i.TMS.matrixIds.push(o);if(("IGNF:WGS84G"===i.TMS.getProjection()||"EPSG:4326"===i.TMS.getProjection())&&e.generalOptions&&Array.isArray(e.generalOptions.wgs84Resolutions))for(var s=e.generalOptions.wgs84Resolutions,r=0;r<s.length;r++)i.resolutions[r]=parseFloat(s[r]);Array.isArray(i.resolutions)&&void 0!==i.resolutions.sort&&i.resolutions.sort((function(t,e){return e-t})),i.TMS.nativeResolutions=i.resolutions,e.tileMatrixSets[i.identifier]=i.TMS}else e&&!e.wmtsOptions&&(e.wmtsOptions={}),e.wmtsOptions.tileMatrixSetLink=ws(t)},TileMatrix:function(t,e){if(e){var i=new gs;if(Es(t,i),e.TMS&&e.TMS.getProjection()){var n=e.TMS.getProjection();if("EPSG:3857"===n||"EPSG:2154"===n){var o=28e-5*i.scaleDenominator;e.resolutions&&Array.isArray(e.resolutions)&&e.resolutions.push(o)}}e.TMS&&e.TMS.tileMatrices&&(e.TMS.tileMatrices[i.matrixId]=i)}},ScaleDenominator:function(t,e){var i=ws(t);i&&e&&e.hasOwnProperty("scaleDenominator")&&(e.scaleDenominator=parseFloat(i))},TopLeftCorner:function(t,e){var i=ws(t).split(" ");i&&e&&(e.topLeftCorner={},e.topLeftCorner.x=parseFloat(i[0]),e.topLeftCorner.y=parseFloat(i[1]))},TileWidth:function(t,e){var i=ws(t);i&&e&&e.hasOwnProperty("tileWidth")&&(e.tileWidth=parseInt(i,10))},TileHeight:function(t,e){var i=ws(t);i&&e&&e.hasOwnProperty("tileHeight")&&(e.tileHeight=parseInt(i,10))},MatrixWidth:function(t,e){var i=ws(t);i&&e&&e.hasOwnProperty("matrixWidth")&&(e.matrixWidth=parseInt(i,10))},MatrixHeight:function(t,e){var i=ws(t);i&&e&&e.hasOwnProperty("matrixHeight")&&(e.matrixHeight=parseInt(i,10))}},serviceException:function(t){var e={};if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++)"exception"===(i=n[o]).nodeName&&(e.exceptionReport=ys.READERS.exception(i));return e},exception:function(t){var e={},i=t.getAttribute("code");i&&(e.exceptionCode=i);var n=t.firstChild;return n&&3===n.nodeType&&(e.exception=n.nodeValue),e}},ys.read=function(t){if("ViewContext"===t.nodeName){var e=t.prefix||ys.DEFAULTPREFIX;return ys.READERS[e][t.nodeName](t)}if("serviceException"===t.nodeName)return ys.READERS[t.nodeName](t);throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};const bs=ys;const xs={build:function(t){no.getLogger("AutoConfResponseFactory").trace(["AutoConfResponseFactory::build()"]);var e=null;if(t.response){if(t.rawResponse)e=t.response;else{try{var i=new Oo({reader:bs});"string"==typeof t.response?i.setXMLString(t.response):i.setXMLDoc(t.response),e=i.parse()}catch(e){var n=e.message;return"string"==typeof t.response?n+="\n (raw response service'"+t.response+"')":n+="\n (raw response service'"+t.response.documentElement.innerHTML+"')",void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",n),status:200,type:ro.TYPE_SRVERR}))}var o=!0;for(var s in e)e.hasOwnProperty(s)&&(o=!1);if(o)return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY_2")));if(e.exceptionReport)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ro.TYPE_SRVERR,status:200}))}var r="undefined"!=typeof window?window:{};r.Gp||(r.Gp={}),r.Gp.Config?this.mergeConfig(r.Gp.Config,e,t.layerId):r.Gp.Config=e,t.onSuccess.call(t.scope,r.Gp.Config)}else t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))},mergeConfig:function(t,e,i){if(e&&t){for(var n in e)if(e.hasOwnProperty(n))if("generalOptions"===n)for(var o in e[n].apiKeys)e[n].apiKeys.hasOwnProperty(o)&&!t.generalOptions.apiKeys[o]&&(t.generalOptions.apiKeys[o]=e[n].apiKeys[o]);else if(t[n])for(var s in e[n])e[n].hasOwnProperty(s)&&!t[n][s]&&(t[n][s]=e[n][s]);if(i){var r=[];for(var a in e.layers)e.layers.hasOwnProperty(a)&&r.push(a);t.layers[i]&&(t.layers[i].aggregatedLayers=r)}}}};function Ls(t){if(!(this instanceof Ls))throw new TypeError(oo.getMessage("CLASS_CONSTRUCTOR","AutoConf"));if(this.CLASSNAME="AutoConf",t||(t={}),t.protocol=t.protocol||"JSONP",yo.apply(this,arguments),this.logger=no.getLogger("Gp.Services.AutoConf"),this.logger.trace("[Constructeur AutoConf (options)]"),!this.options.serverUrl&&!this.options.serverUrl){var e=go.AutoConf.url(this.options.apiKey);this.options.layerId?this.options.serverUrl=e.aggregate+this.options.layerId:Array.isArray(this.options.apiKey)&&this.options.apiKey.length>0?this.options.serverUrl=e.apiKeys:this.options.serverUrl=e.apiKey}"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"xml"}Ls.prototype=Object.create(yo.prototype,{}),Ls.prototype.constructor=Ls,Ls.prototype.buildRequest=function(t,e){var i="undefined"!=typeof window?window:{};if(i.Gp&&i.Gp.Config&&i.Gp.Config.generalOptions&&i.Gp.Config.layers&&i.Gp.Config.generalOptions.apiKeys[this.options.apiKey]){if(!this.options.layerId)return this.logger.warn("Gp.Config existe déjà pour cette clé"),void this.options.onSuccess.call(this,i.Gp.Config);if(i.Gp.Config.layers[this.options.layerId]&&i.Gp.Config.layers[this.options.layerId].aggregatedLayers)return this.logger.warn("Gp.Config existe déjà pour cette clé et cette couche"),void this.options.onSuccess.call(this,i.Gp.Config)}this.request="",!(-1===this.options.serverUrl.indexOf("http://"))&&this.layerId&&(this.request=ao.normalyzeParameters({layerId:this.layerId})),this.request||""===this.request?e.call(this,this.request):t.call(this,new ro(oo.getMessage("SERVICE_REQUEST_BUILD")))},Ls.prototype.analyzeResponse=function(t,e){if(this.response){var i={layerId:this.options.layerId,response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:t,scope:this};xs.build(i)}else t.call(this,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))};const Cs=Ls;function Ps(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur RequestHeader ()]"),!(this instanceof Ps))throw new TypeError("RequestHeader constructor cannot be called as a function.");for(var e in this.options=t||{srsName:"EPSG:4326"},t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}Ps.prototype={requestString:null,template:'<RequestHeader srsName="__SRSNAME__"/>',constructor:Ps,toString:function(){var t=null;return t=(t=this.template).replace(/__SRSNAME__/g,this.options.srsName),this.requestString=t,this.requestString}};const Ss=Ps;function Ms(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur Request ()]"),!(this instanceof Ms))throw new TypeError("Request constructor cannot be called as a function.");for(var e in this.options=t||{maximumResponses:25,methodName:null,version:"1.2"},t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}Ms.prototype={requestString:null,template:'<Request maximumResponses="__MAXRESPONSES__" methodName="__METHODNAME__" requestID="__UUID__" version="__VERSION__">\x3c!-- __REQUESTSERVICE__ --\x3e</Request>',constructor:Ms,guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},toString:function(){var t=null;return t=(t=(t=(t=(t=this.template).replace(/__MAXRESPONSES__/g,this.options.maximumResponses)).replace(/__METHODNAME__/g,this.options.methodName)).replace(/__UUID__/g,this.guid())).replace(/__VERSION__/g,this.options.version),this.requestString=t,this.requestString}};const Ts=Ms;function As(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur AbstractService ()]"),!(this instanceof As))throw new TypeError("AbstractService constructor cannot be called as a function.");for(var e in this.options=t||{},t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}As.prototype={strRequest:null,oRequest:null,oFilter:null,constructor:As,addRequest:function(t){this.logger.error("overwritten method !")},addFilter:function(t){this.logger.error("overwritten method !")},toString:function(){this.logger.error("overwritten method !")}};const Is=As;function ks(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur XLS()]"),!(this instanceof ks))throw new TypeError("XLS constructor cannot be called as a function.");for(var e in this.options={srsName:"EPSG:4326",maximumResponses:25},t)t.hasOwnProperty(e)&&t[e]&&(this.options[e]=t[e])}ks.VERSION="1.2",ks.prototype={requestString:null,namespace:!1,oService:null,constructor:ks,template:'<?xml version="1.0" encoding="UTF-8"?>\n<XLS version="__VERSION__"\n__NAMESPACE__ \n__SCHEMALOCATION__>\n__REQUESTHEADER__\n__REQUEST__\n</XLS>\n',namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns:xls="http://www.opengis.net/xls"','xmlns:gml="http://www.opengis.net/gml"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"'},setService:function(t){t?t instanceof Is?this.oService=t:this.logger.error("L'objet n'est pas du type 'LocationUtilityService' ou 'RouteService' !?"):this.logger.trace("L'objet de type Service XSL n'est pas encore defini !?")},getService:function(){return this.oService}},ks.prototype.addNamespace=function(t,e){for(var i,n,o=t.key,s=!1,r=this.namespaceByDefault().split(" "),a=0;a<r.length;a++){if(r[a].split("=")[0]==="xmlns:"+o){s=!0;break}}return s?(i=/<(\w+[\s>])/g,n="<"+o+":$1",e=e.replace(i,n),i=/<\/(\w+[\s>])/g,n="</"+o+":$1",e=e.replace(i,n),this.logger.trace("namespace",e),e):(this.logger.warn("L'ajout d'un nouvel namespace n'est pas encore implémenté !"),e)},ks.prototype.build=function(){var t=!!this.getService(),e="";e=(e=(e=(e=this.template).replace(/__VERSION__/g,ks.VERSION)).replace(/__NAMESPACE__/g,this.namespaceByDefault)).replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault);var i=new Ss({srsName:this.options.srsName});e=e.replace(/__REQUESTHEADER__/g,i.toString());var n=new Ts({maximumResponses:this.options.maximumResponses,version:ks.VERSION,methodName:t?this.getService().CLASSTYPE:null});if(e=e.replace(/__REQUEST__/g,n.toString()),t&&(e=e.replace(/<!-- __REQUESTSERVICE__ -->/g,this.getService().toString())),e)return this.namespace&&(e=this.addNamespace({key:"xls",url:"http://www.opengis.net/xls"},e)),this.requestString=e,this.logger.trace("traduction tmpl",e),this.requestString;this.logger.warn("traduction tmpl : empty request !?")};const Rs=ks;function Ds(t){if(this.logger=no.getLogger("Address"),this.logger.trace("[Constructeur Address ()]"),!(this instanceof Ds))throw new TypeError("Address constructor cannot be called as a function.");if(this.options=t||{location:{},type:["StreetAddress"],filter:{}},!this.options.location||0===Object.keys(this.options.location).length)throw new Error("l'option 'location' n'est pas renseignée !")}Ds.prototype={constructor:Ds,requestString:null,template:{address:'<Address countryCode="__COUNTRYCODE__">__LOCATION____PLACE____POSTALCODE____ENVELOPE__</Address>',location:{freeFormAddress:"<freeFormAddress>__FREEFORMADDRESSVALUE__</freeFormAddress>",streetAddress:{container:"<StreetAddress>__STREET____BUILDING__</StreetAddress>",building:'<Building number="__BUILDINGVALUE__"/>',street:"<Street>__STREETVALUE__</Street>"}},place:'<Place type="__PLACETYPE__">__PLACEVALUE__</Place>',postalCode:"<PostalCode>__POSTALCODEVALUE__</PostalCode>",envelope:"<gml:Envelope><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>"}},Ds.prototype.toString=function(){var t=null;if(t=(t=this.template.address).replace(/__COUNTRYCODE__/g,this.options.type),"string"==typeof this.options.location){var e=this.template.location.freeFormAddress;e=e.replace(/__FREEFORMADDRESSVALUE__/g,this.options.location),t=t.replace(/__LOCATION__/g,e)}else{var i="",n="";this.options.location.number&&(i=(i=this.template.location.streetAddress.building).replace(/__BUILDINGVALUE__/g,this.options.location.number)),this.options.location.street&&(n=(n=this.template.location.streetAddress.street).replace(/__STREETVALUE__/g,this.options.location.street));var o=this.template.location.streetAddress.container;o=(o=o.replace(/__STREET__/g,n)).replace(/__BUILDING__/g,i),t=t.replace(/__LOCATION__/g,o)}var s="";this.options.location.postalCode&&(s=(s=this.template.postalCode).replace(/__POSTALCODEVALUE__/g,this.options.location.postalCode));var r="";if(this.options.filter){var a=this.options.filter.bbox;a&&(r=(r=(r=(r=(r=this.template.envelope).replace(/__LEFT__/g,a.left)).replace(/__BOTTOM__/g,a.bottom)).replace(/__RIGHT__/g,a.right)).replace(/__TOP__/g,a.top))}var l=[],c="";if(this.options.filter){var h=this.options.filter;for(var u in h)"bbox"!==u&&(c=(c=(c=this.template.place).replace(/__PLACETYPE__/g,u)).replace(/__PLACEVALUE__/g,h[u]),l.push(c))}var d="";return this.options.location.city&&(d=(d=(d=this.template.place).replace(/__PLACETYPE__/g,"Municipality")).replace(/__PLACEVALUE__/g,this.options.location.city),l.push(d)),t=(t=(t=t.replace(/__POSTALCODE__/g,s)).replace(/__PLACE__/g,l.join("\n"))).replace(/__ENVELOPE__/g,r),this.requestString=t,this.requestString};const Os=Ds;function Gs(){if(this.logger=no.getLogger("GeocodeFilterExtension"),this.logger.trace("[Constructeur GeocodeFilterExtension ()]"),!(this instanceof Gs))throw new TypeError("GeocodeFilterExtension constructor cannot be called as a function.");this.filters=[]}Gs.prototype={constructor:Gs,addFilterExtensions:function(t){t&&this.filters.push(t)},getNames:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].CLASSNAME);return this.logger.trace(t),t},getFilter:function(t){var e=null;for(var i in this.filters)this.filters[i].CLASSNAME===t&&(e=this.filters[i]);return this.logger.trace(e),e},getFilters:function(){return this.logger.trace(this.filters),this.filters},getAttributs:function(t){var e=[];for(var i in this.filters)this.filters[i].CLASSNAME===t&&(e=this.filters[i].attributesList);return this.logger.trace(e),e},setPlaceAttributs:function(t,e){var i=this.getFilter(t),n=this.getAttributs(t);for(var o in n){var s=n[o];e[s]&&(i.placeAttributes[s]=e[s])}},getPlaceAttributs:function(t){var e={};for(var i in this.filters)this.filters[i].CLASSNAME===t&&(e=this.filters[i].placeAttributes);return this.logger.trace(e),e}};const Ns=Gs;function Us(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur GeocodeRequest ()]"),!(this instanceof Us))throw new TypeError("GeocodeRequest constructor cannot be called as a function.");for(var e in this.options=t||{},t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="GeocodeRequest"}Us.prototype={strRequest:null,oAddress:null,oFilter:null,template:'<GeocodeRequest returnFreeForm="__RETURNFREEFORM__">__ADDRESS__</GeocodeRequest>',addAddress:function(t){t instanceof Os&&(this.oAddress=t)},addFilter:function(t){t instanceof Ns&&(this.oFilter=t)},constructor:Us,toString:function(){var t="";if(t=this.template,!this.oAddress){var e={};if(e.location=this.options.location,e.type=this.options.filterOptions.type||["StreetAddress"],e.filter=this.options.filterOptions,delete e.filter.type,this.oFilter)for(var i in e.filter={},e.type){var n=e.type[i],o=this.oFilter.getFilter(n);if(o){for(var s=this.options.filterOptions,r=o.attributesList,a=0;a<r.length;a++){var l=r[a];if(s[l]){var c=o.serviceAttributes[a];o.placeAttributes[c]=s[l],this.logger.trace("Selection du filtre '"+l+"' sur le type '"+n+"'.")}}var h=o.placeAttributes;for(var u in h)h.hasOwnProperty(u)&&(e.filter[u]=h[u])}else this.logger.warn("Le filtre '"+n+"' n'existe pas !?")}if(this.oAddress=new Os(e),!this.oAddress)throw new Error("La construction de l'adresse n'est pas correctement definie !?")}return t=(t=t.replace(/__ADDRESS__/g,this.oAddress.toString())).replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=t,this.strRequest}};const js=Us;function Fs(t){if(this.logger=no.getLogger("Position"),this.logger.trace("[Constructeur Position ()]"),!(this instanceof Fs))throw new TypeError("Position constructor cannot be called as a function.");if(this.options=t||{},!this.options.position)throw new Error("l'option 'position' n'est pas renseignée !")}Fs.prototype={constructor:Fs,requestString:null,template:{position:"<Position>__GMLPOINT____GMLFILTER__</Position>",gml:{point:'<gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point>',pos:null,filter:{bbox:'<gml:Envelope xmlns:gml="http://www.opengis.net/gml"><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>',circle:'<gml:CircleByCenterPoint xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos><gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>',polygon:'<gml:Polygon xmlns:gml="http://www.opengis.net/gml"><gml:exterior><gml:LinearRing><gml:posList>__XY__</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon>',multipolygon:null}}}},Fs.prototype.toString=function(){var t=this.template.position,e=this.template.gml.point;e=(e=e.replace(/__X__/g,this.options.position.x)).replace(/__Y__/g,this.options.position.y);var i="";if(this.options.filter){var n=this.options.filter;for(var o in n)switch(o){case"circle":i=(i=(i=(i=this.template.gml.filter[o]).replace(/__X__/g,n[o].x)).replace(/__Y__/g,n[o].y)).replace(/__RADIUS__/g,n[o].radius);break;case"bbox":i=(i=(i=(i=(i=this.template.gml.filter[o]).replace(/__LEFT__/g,n[o].left)).replace(/__BOTTOM__/g,n[o].bottom)).replace(/__RIGHT__/g,n[o].right)).replace(/__TOP__/g,n[o].top);break;case"polygon":i=this.template.gml.filter[o];for(var s="",r=n[o],a=0;a<r.length;a++){var l=r[a];if(Array.isArray(l)){this.logger.error("Holes are not implemented !");break}(l.x&&l.y||0===l.x||0===l.y)&&(s+=l.x+" "+l.y),r.length!==a+1&&(s+=" ")}i=i.replace(/__XY__/g,s);break;case"multipolygon":this.logger.warn("Filter '"+o+"' is not yet implemented !");break;default:this.logger.error("This filter '"+o+"' is not useful !")}}return t=(t=t.replace(/__GMLPOINT__/g,e)).replace(/__GMLFILTER__/g,i),this.requestString=t,this.requestString};const zs=Fs;function Bs(t){if(this.logger=no.getLogger("Preference"),this.logger.trace("[Constructeur Preference ()]"),!(this instanceof Bs))throw new TypeError("Preference constructor cannot be called as a function.");this.type=t}Bs.prototype={constructor:Bs,requestString:null,template:"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>"},Bs.prototype.toString=function(){for(var t=[],e="",i=0;i<this.type.length;i++)e=(e=this.template).replace(/__TYPE__/g,this.type[i]),t.push(e);return this.strRequest=t.join("\n"),this.strRequest};const qs=Bs;function Hs(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur ReverseGeocodeRequest ()]"),!(this instanceof Hs))throw new TypeError("ReverseGeocodeRequest constructor cannot be called as a function.");for(var e in this.options=t||{},t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="ReverseGeocodeRequest"}Hs.prototype={strRequest:null,oPosition:null,oPreference:null,constructor:Hs,template:'<ReverseGeocodeRequest returnFreeForm="__RETURNFREEFORM__">__POSITION____PREFERENCE__</ReverseGeocodeRequest>',addPosition:function(t){t instanceof zs&&(this.oPosition=t)},addPreferences:function(t){t instanceof qs&&(this.oPreference=t)},toString:function(){var t="";if(t=this.template,!this.oPreference&&(this.oPreference=new qs(this.options.filterOptions.type||["StreetAddress"]),!this.oPreference))throw new Error("Les preferences ne sont pas definies !?");if(t=t.replace(/__PREFERENCE__/g,this.oPreference.toString()),!this.oPosition){var e={position:this.options.position,filter:{}};if(this.options.filterOptions&&(e.filter=this.options.filterOptions,delete e.filter.type),this.oPosition=new zs(e),!this.oPosition)throw new Error("La position et ses filtres ne sont pas definis !?")}return t=(t=t.replace(/__POSITION__/g,this.oPosition.toString())).replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=t,this.strRequest}};const Ws=Hs;function Vs(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur LocationUtilityService ()]"),!(this instanceof Vs))throw new TypeError("LocationUtilityService constructor cannot be called as a function.");this.CLASSNAME="LocationUtilityService",this.CLASSTYPE=null,Is.apply(this,arguments),this.options&&(this.CLASSTYPE=this.options.location?"GeocodeRequest":this.options.position?"ReverseGeocodeRequest":null)}Vs.prototype=Object.create(Is.prototype,{}),Vs.prototype.constructor=Vs,Vs.prototype.addRequest=function(t){switch(this.CLASSTYPE=t.CLASSNAME,this.CLASSTYPE){case"GeocodeRequest":case"ReverseGeocodeRequest":this.oRequest=t;break;default:throw new Error("Ce n'est pas un objet de type 'LUS Request' !?")}},Vs.prototype.addFilter=function(t){t instanceof Ns&&(this.oFilter=t)},Vs.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseignées, impossible de construire la requête !");if("GeocodeRequest"===this.CLASSTYPE){var t={location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}};this.oRequest=new js(t),this.oFilter&&this.oRequest.addFilter(this.oFilter)}else if("ReverseGeocodeRequest"===this.CLASSTYPE){var e={position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}};this.oRequest=new Ws(e)}else this.logger.error("impossible de determiner le type de geocodage : Direct ou Inverse !?")}if(!this.oRequest)throw new Error("Type de Geocodage indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest};const Zs=Vs;function Ys(){if(!(this instanceof Ys))throw new TypeError("GeocodeLocation constructor cannot be called as a function.");this.placeAttributes={},this.attributesList=[],this.serviceAttributes=[]}Ys.prototype={constructor:Ys};const Xs=Ys;function Ks(){if(!(this instanceof Ks))throw new TypeError("StreetAddress constructor cannot be called as a function.");Xs.apply(this,arguments),this.CLASSNAME="StreetAddress",this.attributesList=["bbox","ID","IDTR","quality","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","ID","IDTR","Qualite","Territoire","Commune","Departement","INSEE","Municipality"]}Ks.prototype=Object.create(Xs.prototype),Ks.prototype.constructor=Ks;const Js=Ks;function Qs(){if(!(this instanceof Qs))throw new TypeError("PositionOfInterest constructor cannot be called as a function.");Xs.apply(this,arguments),this.CLASSNAME="PositionOfInterest",this.attributesList=["bbox","importance","nature","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","Importance","Nature","Territoire","Commune","Departement","INSEE","Municipality"]}Qs.prototype=Object.create(Xs.prototype),Qs.prototype.constructor=Qs;const $s=Qs;function tr(){if(!(this instanceof tr))throw new TypeError("CadastralParcel constructor cannot be called as a function.");Xs.apply(this,arguments),this.CLASSNAME="CadastralParcel",this.attributesList=["absorbedCity","sheet","number","section","commune","department","insee","municipality","origin"],this.serviceAttributes=["CommuneAbsorbee","Feuille","Numero","Section","Commune","Departement","INSEE","Municipality","Type"]}tr.prototype=Object.create(Xs.prototype),tr.prototype.constructor=tr;const er=tr;function ir(){if(!(this instanceof ir))throw new TypeError("Administratif constructor cannot be called as a function.");Xs.apply(this,arguments),this.CLASSNAME="Administratif",this.attributesList=["bbox","prefecture","inseeRegion","inseeDepartment","municipality"],this.serviceAttributes=["bbox","Prefecture","InseeRegion","InseeDepartement","Municipality"]}ir.prototype=Object.create(Xs.prototype),ir.prototype.constructor=ir;const nr=ir;const or={build:function(t){var e=no.getLogger("DirectGeocodeRequestFactory");e.trace(["DirectGeocodeRequestFactory::build()"]);var i=null,n=new Ns;n.addFilterExtensions(new nr),n.addFilterExtensions(new Js),n.addFilterExtensions(new $s),n.addFilterExtensions(new er);var o=new Zs({location:t.location,returnFreeForm:t.returnFreeForm,filterOptions:t.filterOptions});o.addFilter(n);var s=new Rs({srsName:t.srs,maximumResponses:t.maximumResponses});(s.namespace=!0,s.setService(o),i=s.build(),"GET"===t.httpMethod)&&(i="qxml="+encodeURIComponent(i).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"));return e.trace(i),i}};function sr(){if(!(this instanceof sr))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}sr.prototype={constructor:sr};const rr=sr;function ar(){if(!(this instanceof ar))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position={x:null,y:null},this.matchType=null,this.placeAttributes={},this.type=null}ar.prototype={constructor:ar};const lr=ar;function cr(){if(!(this instanceof cr))throw new TypeError("DirectGeocodedLocation constructor cannot be called as a function.");lr.apply(this,arguments),this.CLASSNAME="DirectGeocodedLocation",this.accuracy=null}cr.prototype=Object.create(lr.prototype),cr.prototype.constructor=cr;const hr=cr;var ur={};function dr(t,e){if(t.hasChildNodes())for(var i,n,o,s=t.childNodes,r=0;r<s.length;r++){if(1===(i=s[r]).nodeType)if(n=i.localName||i.baseName||i.nodeName,o=i.prefix||ur.DEFAULTPREFIX,ur.READERS[o][n])(0,ur.READERS[o][n])(i,e);else dr(i,e)}}function pr(t){var e,i="";return t.hasChildNodes()&&3===(e=t.firstChild).nodeType&&(i=e.nodeValue),i}ur.VERSION="1.2",ur.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},ur.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",ur.DEFAULTPREFIX="xls",ur.READERS={xls:{XLS:function(t){var e=new rr;return function(t){if(t.attributes.length>0){var e=function(t){if(t.attributes.length>0){for(var e={},i=t.attributes,n=0;n<i.length;n++){var o=i[n];e[o.nodeName]=o.nodeValue}return e}}(t);for(var i in e)if(e.hasOwnProperty(i)){if("version"===i&&e.version!==ur.VERSION)return void console.log("[DirectGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===i){if(e[i]!==ur.NAMESPACES[ur.DEFAULTPREFIX])return void console.log("[DirectGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var n=i.split(":")[0],o=i.split(":")[1];if("xmlns"===n&&o&&ur.NAMESPACES[o]&&ur.NAMESPACES[o]!==e[i])return void console.log("[DirectGeocodeResponseReader] geocode response "+i+" namespace is not the expected one");if("schemaLocation"===o&&ur.SCHEMALOCATION!==e[i])return void console.log("[DirectGeocodeResponseReader] geocode response schema location is not the expected one")}}}(t),dr(t,e),e},GeocodedAddress:function(t,e){var i=new hr;dr(t,i),e&&Array.isArray(e.locations)&&e.locations.push(i)},GeocodeMatchCode:function(t,e){var i=t.getAttribute("accuracy");i&&e&&(e.accuracy=parseFloat(i));var n=t.getAttribute("matchType");n&&e&&(e.matchType=n)},Address:function(t,e){var i=t.getAttribute("countryCode");e&&i&&(e.type=i),dr(t,e)},freeFormAddress:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.freeform=pr(t))},Building:function(t,e){var i=t.getAttribute("number");e&&e.hasOwnProperty("placeAttributes")&&(i?e.placeAttributes.number=i:t.getAttribute("buildingName")?e.placeAttributes.number=t.getAttribute("buildingName"):t.getAttribute("subdivision")&&(e.placeAttributes.number=t.getAttribute("subdivision")))},Street:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&("StreetAddress"===e.type?e.placeAttributes.street=pr(t):"CadastralParcel"===e.type&&(e.placeAttributes.cadastralParcel=pr(t)))},Place:function(t,e){var i=t.getAttribute("type"),n=pr(t);if(e&&e.hasOwnProperty("placeAttributes"))if("Municipality"===i)e.placeAttributes.municipality=n;else if("Bbox"===i){var o=n.split(";");4===o.length&&(e.placeAttributes.bbox={left:parseFloat(o[0]),right:parseFloat(o[2]),top:parseFloat(o[1]),bottom:parseFloat(o[3])})}else"Commune"===i?e.placeAttributes.commune=n:"Departement"===i?e.placeAttributes.department=n:"INSEE"===i?e.placeAttributes.insee=n:"Qualite"===i?e.placeAttributes.quality=n:"Territoire"===i?e.placeAttributes.territory=n:"ID"===i?e.placeAttributes.ID=n:"ID_TR"===i?e.placeAttributes.IDTR=n:"Importance"===i?e.placeAttributes.importance=parseInt(n,10):"Nature"===i?e.placeAttributes.nature=n:"Numero"===i?e.placeAttributes.number=n:"Feuille"===i?e.placeAttributes.sheet=n:"Section"===i?e.placeAttributes.section=n:"CommuneAbsorbee"===i?e.placeAttributes.absorbedCity=n:"Arrondissement"===i?n&&(e.placeAttributes.arrondissement=n):"Type"===i?e.placeAttributes.origin=n:"Prefecture"===i?e.placeAttributes.prefecture=n:"InseeRegion"===i?e.placeAttributes.inseeRegion=n:"InseeDepartment"===i&&(e.placeAttributes.inseeDepartment=n)},PostalCode:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.postalCode=pr(t))},Error:function(t){var e=t.getAttribute("message"),i=t.getAttribute("errorCode"),n=oo.getMessage("SERVICE_RESPONSE_EXCEPTION","("+i+") : "+e);throw new ro({message:n,type:ro.TYPE_SRVERR})}},gml:{pos:function(t,e){var i=pr(t);e&&i&&(e.position={x:parseFloat(i.split(" ")[0]),y:parseFloat(i.split(" ")[1])})}},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++)"Exception"===(i=n[o]).nodeName&&(e.exceptionReport=ur.READERS.Exception(i));return e},Exception:function(t){var e={},i=t.getAttribute("exceptionCode");i&&(e.exceptionCode=i);var n=t.firstChild;return n&&3===n.nodeType&&(e.exception=n.nodeValue),e}},ur.read=function(t){if("XLS"===t.nodeName){var e=t.prefix;return e||(e=ur.DEFAULTPREFIX),ur.READERS[e][t.nodeName](t)}if("ExceptionReport"===t.nodeName)return ur.READERS[t.nodeName](t);var i=oo.getMessage("SERVICE_RESPONSE_ANALYSE",t.nodeName);throw new ro({message:i,type:ro.TYPE_UNKERR,status:200})};const fr=ur;const mr={build:function(t){var e=null;if(t.response){if(t.rawResponse)e=t.response;else{try{var i=new Oo({reader:fr});if("string"==typeof t.response?i.setXMLString(t.response):i.setXMLDoc(t.response),!(e=i.parse()))throw new Error("L'analyse de la réponse du service !?")}catch(e){var n=e.message;return"string"==typeof t.response?n+="('"+t.response+"')":n+="('"+t.response.documentElement.innerHTML+"')",void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_ANALYSE",n),type:ro.TYPE_UNKERR,status:-1}))}if(e.exceptionReport)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ro.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,e)}else t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EMPTY"),type:ro.TYPE_SRVERR,status:-1}))}};function gr(t){if(!(this instanceof gr))throw new TypeError(oo.getMessage("CLASS_CONSTRUCTOR","Geocode"));if(this.CLASSNAME="Geocode",yo.apply(this,arguments),this.logger=no.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]"),!t.location)throw new Error(oo.getMessage("PARAM_MISSING","location"));if("object"==typeof t.location&&0===Object.keys(t.location).length)throw new Error(oo.getMessage("PARAM_EMPTY","location"));if("string"==typeof t.location&&0===t.location.length)throw new Error(oo.getMessage("PARAM_EMPTY","location"));this.options.location=t.location,t.filterOptions&&"object"==typeof t.filterOptions||(this.options.filterOptions=t.filterOptions={type:["StreetAddress"]}),0===Object.keys(t.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var e=Object.keys(t.filterOptions),i=0;i<e.length;i++){var n=e[i],o=["department","number","postalCode","insee","importance","ID","IDTR","absorbedCity","sheet","section","inseeRegion","inseeDepartment"];-1!==o.indexOf(n)&&"string"!=typeof t.filterOptions[n]&&(t.filterOptions[n]=t.filterOptions[n].toString()),t.filterOptions[n]||delete this.options.filterOptions[n]}this.options.filterOptions.type=t.filterOptions.type||["StreetAddress"],this.options.maximumResponses=t.maximumResponses||25,this.options.returnFreeForm=t.returnFreeForm||!1,this.options.srs=t.srs||"EPSG:4326",this.options.outputFormat=this.options.rawResponse?"":"xml"}gr.prototype=Object.create(yo.prototype,{}),gr.prototype.constructor=gr,gr.prototype.buildRequest=function(t,e){var i={httpMethod:this.options.httpMethod,location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:this.options.srs,maximumResponses:this.options.maximumResponses};this.request=or.build(i),this.request?e.call(this,this.request):t.call(this,new ro(oo.getMessage("SERVICE_REQUEST_BUILD")))},gr.prototype.analyzeResponse=function(t,e){if(this.response){var i={response:this.response,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};mr.build(i)}else t.call(this,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))};const _r=gr;const vr={build:function(t){var e=no.getLogger("ReverseGeocodeRequestFactory");e.trace(["ReverseGeocodeRequestFactory::build()"]);var i=t||{},n=null,o=new Zs({position:i.position,returnFreeForm:i.returnFreeForm,filterOptions:i.filterOptions}),s=new Rs({srsName:i.srs,maximumResponses:i.maximumResponses});(s.namespace=!0,s.setService(o),n=s.build(),"GET"===i.httpMethod)&&(n="qxml="+encodeURIComponent(n).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"));return e.trace(n),n}};function yr(){if(!(this instanceof yr))throw new TypeError("ReverseGeocodedLocation constructor cannot be called as a function.");lr.apply(this,arguments),this.CLASSNAME="ReverseGeocodedLocation",this.searchCenterDistance=null}yr.prototype=Object.create(lr.prototype),yr.prototype.constructor=yr;const Er=yr;var wr={};function br(t,e){if(t.hasChildNodes())for(var i,n,o,s=t.childNodes,r=0;r<s.length;r++){if(1===(i=s[r]).nodeType)if(n=i.localName||i.baseName||i.nodeName,o=i.prefix||wr.DEFAULTPREFIX,wr.READERS[o][n])(0,wr.READERS[o][n])(i,e);else br(i,e)}}function xr(t){var e,i="";return t.hasChildNodes()&&3===(e=t.firstChild).nodeType&&(i=e.nodeValue),i}wr.VERSION="1.2",wr.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},wr.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",wr.DEFAULTPREFIX="xls",wr.READERS={xls:{XLS:function(t){var e=new rr;return function(t){if(t.attributes.length>0){var e=function(t){if(t.attributes.length>0){for(var e={},i=t.attributes,n=0;n<i.length;n++){var o=i[n];e[o.nodeName]=o.nodeValue}return e}}(t);for(var i in e)if(e.hasOwnProperty(i)){if("version"===i&&e.version!==wr.VERSION)return void console.log("[ReverseGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===i){if(e[i]!==wr.NAMESPACES[wr.DEFAULTPREFIX])return void console.log("[ReverseGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var n=i.split(":")[0],o=i.split(":")[1];if("xmlns"===n&&o&&wr.NAMESPACES[o]&&wr.NAMESPACES[o]!==e[i])return void console.log("[ReverseGeocodeResponseReader] geocode response "+i+" namespace is not the expected one");if("schemaLocation"===o&&wr.SCHEMALOCATION!==e[i])return void console.log("[ReverseGeocodeResponseReader] geocode response schema location is not the expected one")}}}(t),br(t,e),e},ReverseGeocodedLocation:function(t,e){var i=new Er;br(t,i),e&&Array.isArray(e.locations)&&e.locations.push(i)},Address:function(t,e){var i=t.getAttribute("countryCode");e&&i&&(e.type=i),br(t,e)},Building:function(t,e){var i=t.getAttribute("number");e&&e.hasOwnProperty("placeAttributes")&&(i?e.placeAttributes.number=i:t.getAttribute("buildingName")?e.placeAttributes.number=t.getAttribute("buildingName"):t.getAttribute("subdivision")&&(e.placeAttributes.number=t.getAttribute("subdivision")))},Street:function(t,e){"StreetAddress"===e.type?e.placeAttributes.street=xr(t):"CadastralParcel"===e.type&&(e.placeAttributes.cadastralParcel=xr(t))},Place:function(t,e){var i=t.getAttribute("type"),n=xr(t);if(e&&e.hasOwnProperty("placeAttributes"))if("Municipality"===i)e.placeAttributes.municipality=n;else if("Bbox"===i){var o=n.split(";");4===o.length&&(e.placeAttributes.bbox={left:parseFloat(o[0]),right:parseFloat(o[2]),top:parseFloat(o[1]),bottom:parseFloat(o[3])})}else"Commune"===i?e.placeAttributes.commune=n:"Departement"===i?e.placeAttributes.department=n:"INSEE"===i?e.placeAttributes.insee=n:"Qualite"===i?e.placeAttributes.quality=n:"Territoire"===i?e.placeAttributes.territory=n:"ID"===i?e.placeAttributes.ID=n:"ID_TR"===i?e.placeAttributes.IDTR=n:"Importance"===i?e.placeAttributes.importance=parseInt(n,10):"Nature"===i?e.placeAttributes.nature=n:"Numero"===i?e.placeAttributes.number=n:"Feuille"===i?e.placeAttributes.sheet=n:"Section"===i?e.placeAttributes.section=n:"CommuneAbsorbee"===i?e.placeAttributes.absorbedCity=n:"Arrondissement"===i?n&&(e.placeAttributes.arrondissement=n):"Type"===i?e.placeAttributes.origin=n:"Prefecture"===i?e.placeAttributes.prefecture=n:"InseeRegion"===i?e.placeAttributes.inseeRegion=n:"InseeDepartment"===i&&(e.placeAttributes.inseeDepartment=n)},PostalCode:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.postalCode=xr(t))},SearchCentreDistance:function(t,e){e&&(e.searchCenterDistance=parseFloat(t.getAttribute("value")))},Error:function(t){var e=t.getAttribute("message"),i=t.getAttribute("errorCode"),n=oo.getMessage("SERVICE_RESPONSE_EXCEPTION","("+i+") : "+e);throw new ro({message:n,type:ro.TYPE_SRVERR})}},gml:{pos:function(t,e){var i=xr(t);e&&i&&(e.position={x:parseFloat(i.split(" ")[0]),y:parseFloat(i.split(" ")[1])})}},xlsext:{ExtendedGeocodeMatchCode:function(t,e){e&&(e.matchType=xr(t))}},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++)"Exception"===(i=n[o]).nodeName&&(e.exceptionReport=wr.READERS.Exception(i));return e},Exception:function(t){var e={},i=t.getAttribute("exceptionCode");i&&(e.exceptionCode=i);var n=t.firstChild;return n&&3===n.nodeType&&(e.exception=n.nodeValue),e}},wr.read=function(t){if("XLS"===t.nodeName){var e=t.prefix;return e||(e=wr.DEFAULTPREFIX),wr.READERS[e][t.nodeName](t)}if("ExceptionReport"===t.nodeName)return wr.READERS[t.nodeName](t);throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};const Lr=wr;const Cr={build:function(t){var e=null;if(t.response){if(t.rawResponse)e=t.response;else{try{var i=new Oo({reader:Lr});if("string"==typeof t.response?i.setXMLString(t.response):i.setXMLDoc(t.response),!(e=i.parse()))throw new Error("L'analyse de la réponse du service !?")}catch(e){return e.status=200,void t.onError.call(t.scope,e)}if(e.exceptionReport)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ro.TYPE_SRVERR,status:200}));var n,o;if(t.scope&&t.scope.options&&t.scope.options.srs&&"EPSG:4326"!==t.scope.options.srs)if(e.locations)for(var s=0;s<e.locations.length;s++)(n=e.locations[s])&&(o=n.position)&&(n.position={x:o.y,y:o.x})}t.onSuccess.call(t.scope,e)}else t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EMPTY"),type:ro.TYPE_SRVERR,status:-1}))}};function Pr(t){if(!(this instanceof Pr))throw new TypeError(oo.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));if(this.CLASSNAME="ReverseGeocode",yo.apply(this,arguments),this.logger=no.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]"),!t.position)throw new Error(oo.getMessage("PARAM_MISSING","position"));if(null===t.position.x)throw new Error(oo.getMessage("PARAM_MISSING","position.x"));if(null===t.position.y)throw new Error(oo.getMessage("PARAM_MISSING","position.y"));this.options.position=t.position,t.filterOptions&&"object"==typeof t.filterOptions||(this.options.filterOptions=t.filterOptions={type:["StreetAddress"]}),0===Object.keys(t.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var e=Object.keys(t.filterOptions),i=0;i<e.length;i++){var n=e[i];t.filterOptions[n]&&0!==Object.keys(t.filterOptions[n]).length||delete this.options.filterOptions[n]}if(this.options.filterOptions.type=t.filterOptions.type||["StreetAddress"],!Array.isArray(this.options.filterOptions.type))throw new Error(oo.getMessage("PARAM_TYPE","filterOptions.type"));if(this.options.maximumResponses=t.maximumResponses||25,this.options.returnFreeForm=t.returnFreeForm||!1,this.options.srs=t.srs||"CRS:84",-1===Pr.geoEPSG.indexOf(this.options.srs)){if(this.options.position={x:this.options.position.y,y:this.options.position.x},this.options.filterOptions&&this.options.filterOptions.circle){var o=this.options.filterOptions.circle;this.options.filterOptions.circle={x:o.y,y:o.x,radius:o.radius}}if(this.options.filterOptions&&this.options.filterOptions.polygon){var s=this.options.filterOptions.polygon;for(i=0;i<s.length;i++){var r=s[i];this.options.filterOptions.polygon[i]={x:r.y,y:r.x}}}}this.options.outputFormat=this.options.rawResponse?"":"xml"}Pr.prototype=Object.create(yo.prototype,{}),Pr.prototype.constructor=Pr,Pr.prototype.buildRequest=function(t,e){var i={httpMethod:this.options.httpMethod,position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:"EPSG:4326",maximumResponses:this.options.maximumResponses};this.request=vr.build(i),this.request?e.call(this,this.request):t.call(this,new ro(oo.getMessage("SERVICE_REQUEST_BUILD")))},Pr.prototype.analyzeResponse=function(t,e){if(this.response){var i={response:this.response,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};Cr.build(i)}else t.call(this,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))},Pr.geoEPSG=["EPSG:4326"];const Sr=Pr;function Mr(){if(!(this instanceof Mr))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}Mr.prototype={constructor:Mr};const Tr=Mr;function Ar(){if(!(this instanceof Ar))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}Ar.prototype={constructor:Ar};const Ir=Ar;const kr={build:function(t){var e=no.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var i=null;if(t.response){if(t.rawResponse)e.trace("analyze response : raw"),i=t.response;else{var n=null;if(n="string"==typeof t.response?JSON.parse(t.response):t.response){if(n.error)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",n.error.description),status:n.error.code,type:ro.TYPE_SRVERR}));if(i=new Tr,!n.results||!Array.isArray(n.results))return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_FORMAT_3")));for(var o=null,s=0;s<n.results.length;s++){var r=n.results[s];o=new Ir,r&&("StreetAddress"===r.country?(o.street=r.street,o.type="StreetAddress"):"PositionOfInterest"===r.country&&(o.poi=r.street,o.kind=r.kind,o.type="PositionOfInterest"),o.position&&(o.position.x=r.x,o.position.y=r.y),o.commune=r.city,o.fullText=r.fulltext,o.postalCode=r.zipcode,o.classification=r.classification),i.suggestedLocations.push(o)}if(!i.suggestedLocations.length)return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_FORMAT_3")))}if(!i)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ro.TYPE_UNKERR,status:-1}));if(i.exceptionReport)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",i.exceptionReport),type:ro.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,i)}else t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))}};function Rr(t){if(!(this instanceof Rr))throw new TypeError(oo.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));if(this.CLASSNAME="AutoComplete",yo.apply(this,arguments),this.logger=no.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]"),!t.text)throw new Error(oo.getMessage("PARAM_MISSING","text"));this.options.text=t.text,t.filterOptions&&"object"==typeof t.filterOptions||(this.options.filterOptions=t.filterOptions={territory:[],type:["StreetAddress"]}),0===Object.keys(t.filterOptions).length&&(this.options.filterOptions={territory:[],type:["StreetAddress"]}),this.options.filterOptions.type=t.filterOptions.type||["StreetAddress"],this.options.filterOptions.territory=t.filterOptions.territory||[],this.options.maximumResponses=t.maximumResponses||10,"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}Rr.prototype=Object.create(yo.prototype,{}),Rr.prototype.constructor=Rr,Rr.prototype.buildRequest=function(t,e){var i="";this.options.filterOptions.territory&&(i=this.options.filterOptions.territory.join(";"));var n="";this.options.filterOptions.type&&(n=this.options.filterOptions.type.join(",")),this.request=ao.normalyzeParameters({text:encodeURIComponent(this.options.text),type:n,terr:i,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):t.call(this,new ro(oo.getMessage("SERVICE_REQUEST_BUILD")))},Rr.prototype.analyzeResponse=function(t,e){if(this.response){var i={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:t,scope:this};kr.build(i)}else t.call(this,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))};const Dr=Rr;function Or(t){if(this.logger=no.getLogger("RoutePlan"),this.logger.trace("[Constructeur RoutePlan ()]"),!(this instanceof Or))throw new TypeError("RoutePlan constructor cannot be called as a function.");if(this.options=t||{},!this.options.startPoint)throw new Error("l'option 'startPoint' n'est pas renseignée !");if(!this.options.endPoint)throw new Error("l'option 'endPoint' n'est pas renseignée !")}Or.prototype={constructor:Or,requestString:null,template:{routePlan:"<RoutePlan>__ROUTEPREFERENCE____GRAPH____WAYPOINTLIST____AVOIDLIST__</RoutePlan>",routePreference:"<RoutePreference>__VALUEROUTEPREFERENCE__</RoutePreference>",graph:'<xlsext:graphName xmlns:xlsext="http://www.opengis.net/xlsext" name="__VALUEGRAPH__"/>',wayPointList:{container:"<WayPointList>__STARTPOINT____VIAPOINT____ENDPOINT__</WayPointList>",point:'<Position><gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point></Position>',startPoint:"<StartPoint>__POINT__</StartPoint>",endPoint:"<EndPoint>__POINT__</EndPoint>",viaPoint:"<ViaPoint>__POINT__</ViaPoint>"},avoidList:{container:"<AvoidList>__AVOIDFEATURE__</AvoidList>",avoidFeature:"<AvoidFeature>__VALUEAVOIDFEATURE__</AvoidFeature>"}},toString:function(){var t="";if(t=this.template.routePlan,this.options.routePreference){var e=this.template.routePreference;e=e.replace(/__VALUEROUTEPREFERENCE__/,this.options.routePreference),t=t.replace(/__ROUTEPREFERENCE__/g,e)}if(t=t.replace(/__ROUTEPREFERENCE__/g,""),this.options.avoidFeature){for(var i=this.template.avoidList.container,n=[],o=0;o<this.options.avoidFeature.length;o++){var s=this.template.avoidList.avoidFeature;s=s.replace(/__VALUEAVOIDFEATURE__/,this.options.avoidFeature[o]),n.push(s)}i=i.replace(/__AVOIDFEATURE__/,n.join("\n")),t=t.replace(/__AVOIDLIST__/g,i)}if(t=t.replace(/__AVOIDLIST__/g,""),this.options.graph){var r=this.template.graph;r=r.replace(/__VALUEGRAPH__/,this.options.graph),t=t.replace(/__GRAPH__/g,r)}t=t.replace(/__GRAPH__/g,"");var a=this.template.wayPointList.container,l="";if(l=(l=(l=this.template.wayPointList.point).replace(/__X__/,this.options.startPoint.x)).replace(/__Y__/,this.options.startPoint.y),a=a.replace(/__STARTPOINT__/,this.template.wayPointList.startPoint.replace(/__POINT__/,l)),l=(l=(l=this.template.wayPointList.point).replace(/__X__/,this.options.endPoint.x)).replace(/__Y__/,this.options.endPoint.y),a=a.replace(/__ENDPOINT__/,this.template.wayPointList.endPoint.replace(/__POINT__/,l)),this.options.viaPoint){for(var c=[],h=0;h<this.options.viaPoint.length;h++){var u=this.options.viaPoint[h];l=(l=(l=this.template.wayPointList.point).replace(/__X__/,u.x)).replace(/__Y__/,u.y),c.push(l)}a=a.replace(/__VIAPOINT__/,this.template.wayPointList.viaPoint.replace(/__POINT__/,c.join("\n")))}else a=a.replace(/__VIAPOINT__/,"");return t=t.replace(/__WAYPOINTLIST__/g,a),this.requestString=t,this.requestString}};const Gr=Or;function Nr(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur DetermineRouteRequest ()]"),!(this instanceof Nr))throw new TypeError("DetermineRouteRequest constructor cannot be called as a function.");for(var e in this.options=t||{},t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="DetermineRouteRequest"}Nr.prototype={strRequest:null,oRoutePlan:null,template:{determineRouteRequest:'<DetermineRouteRequest distanceUnit="__DISTANCEUNIT__">__ROUTEPLAN____ROUTEINSTRUCTIONREQUEST____ROUTEGEOMETRYREQUEST____ROUTEMAPREQUEST__</DetermineRouteRequest>',routeInstructionRequest:'<RouteInstructionsRequest provideGeometry="__PROVIDEGEOMETRY__" provideBoundingBox="__PROVIDEBBOX__" />',routeGeometryRequest:"<RouteGeometryRequest />",routeMapRequest:""},addRoute:function(t){t instanceof Gr&&(this.oRoutePlan=t)},constructor:Nr,toString:function(){var t="";if(t=(t=this.template.determineRouteRequest).replace(/__DISTANCEUNIT__/g,this.options.distanceUnit||"KM"),!this.oRoutePlan){var e=this.options.route;if(this.oRoutePlan=new Gr(e),!this.oRoutePlan)throw new Error("La construction du calcul d'initineraire n'est pas correctement definie !?")}t=t.replace(/__ROUTEPLAN__/g,this.oRoutePlan.toString());var i=this.template.routeInstructionRequest;i=(i=i.replace(/__PROVIDEGEOMETRY__/g,this.options.provideGeometry||!1)).replace(/__PROVIDEBBOX__/g,this.options.provideBoundingBox||!1),t=t.replace(/__ROUTEINSTRUCTIONREQUEST__/g,i);var n=this.template.routeGeometryRequest;t=t.replace(/__ROUTEGEOMETRYREQUEST__/g,n);var o=this.template.routeMapRequest;return t=t.replace(/__ROUTEMAPREQUEST__/g,o),this.strRequest=t,this.strRequest}};const Ur=Nr;var jr=i(706),Fr=i.n(jr);function zr(t){if(this.logger=no.getLogger(),this.logger.trace("[Constructeur RouteService ()]"),!(this instanceof zr))throw new TypeError("RouteService constructor cannot be called as a function.");this.CLASSNAME="RouteService",this.CLASSTYPE="RouteRequest",Is.apply(this,arguments)}zr.prototype=Object.create(Is.prototype,{}),zr.prototype.constructor=zr,zr.prototype.addRequest=function(t){if("DetermineRouteRequest"!==t.CLASSNAME)throw new Error("Ce n'est pas un objet de type 'Route Request' !?");this.oRequest=t},zr.prototype.addFilter=function(t){t instanceof Fr()&&(this.oFilter=t)},zr.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseignées, impossible de construire la requête !");if("RouteRequest"===this.CLASSTYPE){var t={distanceUnit:this.options.distanceUnit||null,provideGeometry:this.options.provideGeometry||null,provideBoundingBox:this.options.provideBoundingBox||null,route:{routePreference:this.options.routePreference||null,startPoint:this.options.startPoint,viaPoint:this.options.viaPoint||null,endPoint:this.options.endPoint,avoidFeature:this.options.avoidFeature||null,graph:this.options.graph||null,expectedStartTime:this.options.expectedStartTime||null}};this.oRequest=new Ur(t),this.oFilter&&this.oRequest.addFilter(this.oFilter)}}if(!this.oRequest)throw new Error("Type de requête indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest};const Br=zr;const qr={build:function(t){no.getLogger("RouteRequestOLS").trace(["RouteRequestOLS::build()"]);var e=null,i={startPoint:t.startPoint,endPoint:t.endPoint,viaPoint:t.viaPoints,provideBoundingBox:t.provideBbox,avoidFeature:t.exclusions,expectedStartTime:t.expectedStartTime,distanceUnit:t.distanceUnit,graph:t.graph,provideGeometry:t.geometryInInstructions,routePreference:t.routePreference},n=new Br(i),o=new Rs({srsName:t.srs,maximumResponses:t.maximumResponses});(o.namespace=!0,o.setService(n),e=o.build(),"GET"===t.httpMethod)&&(e="qxml="+encodeURIComponent(e).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"));return e}};function Hr(t){if(!(this instanceof Hr))throw new TypeError("RouteParamREST constructor cannot be called as a function.");if(this.logger=no.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=t||{},this.origin=this.options.startPoint.x+","+this.options.startPoint.y,this.destination=this.options.endPoint.x+","+this.options.endPoint.y,this.waypoints=this.options.viaPoints||null,this.startDateTime=this.options.expectedStartTime||null,this.graphName=this.options.graph,this.srs=this.options.srs,this.exclusions=this.options.exclusions,this.method="TIME",this.options.routePreference)switch(this.options.routePreference){case"fastest":this.method="TIME";break;case"shortest":this.method="DISTANCE";break;default:this.logger.warn("Par defaut, on prend l'itinéraire le plus rapide !"),this.method="TIME"}this.format=this.options.geometryInInstructions?"STANDARDEXT":"STANDARD",this.tolerance=10,this.profileId=null,this.profileName=null}Hr.CLASSNAME="RouteParamREST",Hr.prototype={constructor:Hr,getWaypoints:function(){if(this.waypoints){for(var t=[],e=0;e<this.waypoints.length;e++){var i=this.waypoints[e];t.push(i.x+","+i.y)}return t.join(";")}},getExclusions:function(){return this.exclusions.join(";")}},Hr.prototype.getParams=function(){var t=[];return t.push({k:"origin",v:this.origin}),t.push({k:"destination",v:this.destination}),t.push({k:"method",v:this.method}),this.waypoints&&t.push({k:"waypoints",v:this.getWaypoints()}),this.startDateTime&&t.push({k:"startDateTime",v:this.startDateTime}),this.graphName&&t.push({k:"graphName",v:this.graphName}),this.exclusions&&t.push({k:"exclusions",v:this.getExclusions()}),this.srs&&t.push({k:"srs",v:this.srs}),this.format&&t.push({k:"format",v:this.format}),t};const Wr=Hr;function Vr(t){if(this.logger=no.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof Vr))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!t)throw new Error(oo.getMessage("PARAM_EMPTY","options"));this.settings=t}Vr.prototype={requestString:null,constructor:Vr,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var t=new Wr(this.settings).getParams(),e="",i=0;i<t.length;i++){var n=t[i];e&&(e+="&"),e+=n.k+"="+n.v}return this.logger.trace(e),this.requestString=e,this.requestString}};const Zr=Vr;const Yr={build:function(t){no.getLogger("RouteRequestFactory").trace(["RouteRequestFactory::build()"]);var e=null,i=t||{},n=!(null===t.onError||"function"!=typeof t.onError),o=null;switch(t.api){case"REST":var s=new Zr(i);if(!s.processRequestString()){if(o="Error process request (rest) !",n)return void t.onError.call(t.scope,new ro(o));throw new Error(o)}e=s.requestString;break;case"OLS":if(!(e=qr.build(i))){if(o="Error process request (ols) !",n)return void t.onError.call(t.scope,new ro(o));throw new Error(o)}break;default:if(o="Type of API is not supported by service (REST or OLS) !",n)return void t.onError.call(t.scope,new ro(o));throw new Error(o)}return e}};const Xr={toJson:function(t,e,i){var n=no.getLogger(),o=null;try{if(!t)throw new Error("La chaine WKT n'est pas renseignée !");var s,r;if(e||(e=function(t){console.log(t)}),i||(i=function(t){console.log(t)}),s=/(-?\d+\.?[0-9]*)\s(-?\d+\.?[0-9]+)/g,r="[$1,$2]",t=t.replace(s,r),(s=/^(\w+)/).exec(t),"POLYGON"===RegExp.$1?(r='{"type" : "Polygon",',t=t.replace(RegExp.$1,r),s=/(\({2}?)/,r='"coordinates" : [[',t=t.replace(s,r),s=/(\){2}?)/,r="]]}",t=t.replace(s,r),s=/(\()/g,r="[",t=t.replace(s,r),s=/(\))/g,r="]",t=t.replace(s,r)):"LINESTRING"===RegExp.$1&&(r='{"type" : "LineString",',t=t.replace(RegExp.$1,r),s=/(\(\(?)/,r='"coordinates" : [',t=t.replace(s,r),s=/(\)\)?)/,r="]}",t=t.replace(s,r)),n.trace(t),!(o=JSON.parse(t)))throw new Error("Le JSON est vide !");if(!o.type)throw new Error("Le type de geometrie n'est pas connu !");if(!o.coordinates)throw new Error("La liste des points est vide !");e.call(this,o)}catch(t){if("SyntaxError"===t.name)return void i.call(this,"Erreur de parsing JSON !");i.call(this,t)}}};function Kr(){if(!(this instanceof Kr))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}Kr.prototype={constructor:Kr};const Jr=Kr;function Qr(){if(!(this instanceof Qr))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}Qr.prototype={constructor:Qr};const $r=Qr;var ta={};function ea(t){var e,i="";return t.hasChildNodes()&&(e=t.firstChild)&&3===e.nodeType&&(i=e.nodeValue),i}function ia(t,e){if(t.hasChildNodes())for(var i,n,o=t.childNodes,s=0;s<o.length;s++){if(1===(i=o[s]).nodeType)if(n=i.localName||i.baseName||i.nodeName,ta.READERS[n])(0,ta.READERS[n])(i,e);else ia(i,e)}}ta.READERS={routeResult:function(t){var e=new Jr;if(ia(t,e),"error"===e.status){var i=oo.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new ro({message:i,type:ro.TYPE_SRVERR})}return e},status:function(t,e){var i=ea(t);"ERROR"!==i&&"error"!==i||e&&(e.status="error")},message:function(t,e){e&&(e.message=ea(t))},distance:function(t,e){e&&(e.totalDistance=ea(t))},durationSeconds:function(t,e){e&&(e.totalTime=parseFloat(ea(t)))},bounds:function(t,e){if(e&&e.bbox){var i=ea(t).split(/[,;]/);e.bbox.left=parseFloat(i[0]),e.bbox.bottom=parseFloat(i[1]),e.bbox.right=parseFloat(i[2]),e.bbox.top=parseFloat(i[3])}},geometryWkt:function(t,e){if(e){var i=t.innerHTML;Xr.toJson(i,(function(t){e.routeGeometry=t}),(function(){var t=oo.getMessage("PARAM_FORMAT",["geometryWkt"]);throw new Error(t)}))}},step:function(t,e){var i,n=new $r;if(t.hasChildNodes)for(var o,s,r=t.childNodes,a=0;a<r.length;a++)1===(o=r[a]).nodeType&&("durationSeconds"===(s=o.localName||o.baseName||o.nodeName)?n.duration=ea(o):"distance"===s?n.distance=ea(o):"navInstruction"===s?n.code=ea(o):"name"===s&&(i=ea(o)));if(n.code)switch(n.code){case"F":n.instruction="Valeur non renseignée"!==i?"Tout droit "+i:"Continuer tout droit ";break;case"B":n.instruction="Demi-tour "+i;break;case"L":n.instruction="Tourner à gauche "+i;break;case"R":n.instruction="Tourner à droite "+i;break;case"BL":n.instruction="Tourner très à gauche "+i;break;case"BR":n.instruction="Tourner très à droite "+i;break;case"FL":n.instruction="Tourner légèrement à gauche "+i;break;case"FR":n.instruction="Tourner légèrement à droite "+i;break;case"round_about_entry":n.instruction="Entrée rond-point "+i;break;case"round_about_exit":n.instruction="Sortie rond-point "+i;break;case null:n.instruction="Prendre "+i;break;default:n.instruction="?"+n.code+"? "+i}Array.isArray(e.routeInstructions)&&e.routeInstructions.push(n)}},ta.read=function(t){if("routeResult"===t.nodeName)return ta.READERS.routeResult(t);throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};const na=ta;var oa={READERS:{},read:function(t){no.getLogger("RouteResponseOLSReader").error("not yet implemented !")}};const sa=oa;const ra={build:function(t){var e=no.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var i=null;if(t.response){if(t.rawResponse)e.trace("analyze response : raw"),i=t.response;else{switch(t.outputFormat){case"xml":e.trace("analyze response : xml");var n="REST"===t.api?na:sa;try{var o=new Oo({reader:n});if("string"==typeof t.response?o.setXMLString(t.response):o.setXMLDoc(t.response),!(i=o.parse()))throw new ro(oo.getMessage("SERVICE_RESPONSE_FORMAT","xml"))}catch(e){return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_ANALYSE",t.response)))}break;case"json":e.trace("analyze response : json");var s=null;if((s="string"==typeof t.response?JSON.parse(t.response):t.response)&&s.message)return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EXCEPTION",s.message)));if(s){var r=[],a=[],l=[];if((i=new Jr).hasOwnProperty("totalTime")&&(i.totalTime=parseFloat(s.durationSeconds)),i.hasOwnProperty("totalDistance")&&(i.totalDistance="m"===t.distanceUnit?s.distanceMeters:s.distance),i.hasOwnProperty("bbox")){var c=s.bounds.split(/[,;]/);i.bbox.left=parseFloat(c[0]),i.bbox.bottom=parseFloat(c[1]),i.bbox.right=parseFloat(c[2]),i.bbox.top=parseFloat(c[3])}if(i.hasOwnProperty("routeGeometry")){var h=s.geometryWkt||s.simplifiedWkt;if(h&&(Xr.toJson(h,(function(t){i.routeGeometry=t}),(function(e){console.log(e),t.onError.call(t.scope,new ro(oo.getMessage("PARAM_FORMAT",["geometryWkt"])))})),!i.routeGeometry))return}if(i.hasOwnProperty("routeInstructions")){var u,d=s.legs;if(Array.isArray(d)&&d.length)for(u=0;u<d.length;u++)r.push(d[u]);if(r.length)for(u=0;u<r.length;u++)a.push(r[u].steps);if(a.length)for(u=0;u<a.length;u++)l=l.concat(a[u]);l.forEach((function(e){i.routeInstructions.push(new $r),i.routeInstructions[i.routeInstructions.length-1].duration=e.durationSeconds,i.routeInstructions[i.routeInstructions.length-1].distance="m"===t.distanceUnit?e.distanceMeters:e.distance,i.routeInstructions[i.routeInstructions.length-1].code=e.navInstruction;for(var n=[],o=0;o<e.points.length;o++){var s=e.points[o].split(",");s&&n.push(s)}switch(0!==n.length?i.routeInstructions[i.routeInstructions.length-1].geometry={coordinates:n,type:"LineString"}:i.routeInstructions[i.routeInstructions.length-1].geometry=null,"Valeur non renseignée"===e.name&&(e.name=""),e.navInstruction){case"F":e.name?i.routeInstructions[i.routeInstructions.length-1].instruction="Tout droit "+e.name:i.routeInstructions[i.routeInstructions.length-1].instruction="Continuer tout droit ";break;case"B":i.routeInstructions[i.routeInstructions.length-1].instruction="Demi-tour "+e.name;break;case"L":i.routeInstructions[i.routeInstructions.length-1].instruction="Tourner à gauche "+e.name;break;case"R":i.routeInstructions[i.routeInstructions.length-1].instruction="Tourner à droite "+e.name;break;case"BL":i.routeInstructions[i.routeInstructions.length-1].instruction="Tourner très à gauche "+e.name;break;case"BR":i.routeInstructions[i.routeInstructions.length-1].instruction="Tourner très à droite "+e.name;break;case"FL":i.routeInstructions[i.routeInstructions.length-1].instruction="Tourner légèrement à gauche "+e.name;break;case"FR":i.routeInstructions[i.routeInstructions.length-1].instruction="Tourner légèrement à droite "+e.name;break;case"round_about_entry":i.routeInstructions[i.routeInstructions.length-1].instruction="Entrée rond-point "+e.name;break;case"round_about_exit":i.routeInstructions[i.routeInstructions.length-1].instruction="Sortie rond-point "+e.name;break;case null:i.routeInstructions[i.routeInstructions.length-1].instruction="Prendre tout droit "+e.name;break;default:i.routeInstructions[i.routeInstructions.length-1].instruction="?"+e.navInstruction+"? "+e.name}}))}}if(!i)return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_ANALYSE","json")));break;default:return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(i&&i.exceptionReport)return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EXCEPTION_2")))}t.onSuccess.call(t.scope,i)}else t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))}};function aa(t){if(!(this instanceof aa))throw new TypeError(oo.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",yo.apply(this,arguments),this.logger=no.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!t.startPoint)throw new Error(oo.getMessage("PARAM_MISSING","startPoint"));if(null===t.startPoint.x)throw new Error(oo.getMessage("PARAM_MISSING","startPoint.x"));if(null===t.startPoint.y)throw new Error(oo.getMessage("PARAM_MISSING","startPoint.y"));if(!t.endPoint)throw new Error(oo.getMessage("PARAM_MISSING","endPoint"));if(null===t.endPoint.x)throw new Error(oo.getMessage("PARAM_MISSING","endPoint.x"));if(null===t.endPoint.y)throw new Error(oo.getMessage("PARAM_MISSING","endPoint.y"));if(this.options.api="string"==typeof t.api?t.api.toUpperCase():"REST",this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"json",this.options.startPoint=t.startPoint,this.options.endPoint=t.endPoint,this.options.viaPoints=t.viaPoints||null,this.options.exclusions=t.exclusions||null,this.options.routePreference=t.routePreference||"fastest",this.options.graph=t.graph||"Voiture",this.options.geometryInInstructions=t.geometryInInstructions||!1,this.options.provideBbox=t.provideBbox||!0,this.options.distanceUnit=t.distanceUnit||"km",this.options.expectedStartTime=null,this.options.srs=t.srs||"EPSG:4326",this.options.api="REST",this.logger.warn("Surcharge option 'api' : REST (readers OLS non implémentés)"),"XHR"===this.options.protocol&&(this.options.httpMethod="GET",this.logger.trace("Surcharge option 'HttpMethod' : "+this.options.httpMethod)),!this.options.serverUrl){var e=go.Route.url(this.options.apiKey),i=null;switch(this.options.api){case"OLS":i=e.ols;break;case"REST":var n="route-"+this.options.outputFormat;i=e[n];break;default:throw new Error(oo.getMessage("PARAM_UNKNOWN","api"))}if(!i)throw new Error("Url by default not found !");this.options.serverUrl=i,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}var o=this.options.serverUrl.lastIndexOf(".");if(-1!==o){var s=this.options.serverUrl.substring(o+1);if(s&&s.length<5)switch(this.logger.trace("Serveur Extension URL : "+s),s.toLowerCase()){case"json":case"xml":this.options.outputFormat=s.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}aa.prototype=Object.create(yo.prototype,{}),aa.prototype.constructor=aa,aa.prototype.buildRequest=function(t,e){var i={api:this.options.api,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,exclusions:this.options.exclusions,distanceUnit:this.options.distanceUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs};this.request=Yr.build(i),this.request?e.call(this,this.request):t.call(this,new ro(oo.getMessage("SERVICE_REQUEST_BUILD")))},aa.prototype.analyzeResponse=function(t,e){if(this.response){var i={distanceUnit:this.options.distanceUnit,response:this.response,outputFormat:this.options.outputFormat,api:this.options.api,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};ra.build(i)}else t.call(this,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))};const la=aa;function ca(t){if(!(this instanceof ca))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");switch(this.logger=no.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=t||{},this.id=this.options.id,this.location=this.options.position,this.srs=this.options.srs,this.graphName=this.options.graph,this.profileId=this.options.profileId||null,this.profileName=this.options.profileName||null,this.exclusions=this.options.exclusions,this.reverse=this.options.reverse,this.smoothing=this.options.smoothing,this.holes=this.options.holes,this.options.method){case"time":this.method="time",this.time=this.options.time;break;case"distance":this.method="distance",this.distance=this.options.distance;break;default:this.logger.warn("Par defaut, on calcule un isochrone !"),this.method="time"}}ca.CLASSNAME="ProcessIsoCurveParam",ca.prototype={constructor:ca,getLocation:function(){return this.location.x+","+this.location.y},getExclusions:function(){return this.exclusions.join(";")}},ca.prototype.getParams=function(){var t=[];return t.push({k:"location",v:this.getLocation()}),t.push({k:"smoothing",v:this.smoothing}),t.push({k:"holes",v:this.holes}),t.push({k:"reverse",v:this.reverse}),t.push({k:"method",v:this.method}),this.time&&t.push({k:"time",v:this.time}),this.distance&&t.push({k:"distance",v:this.distance}),t.push({k:"graphName",v:this.graphName}),this.exclusions&&t.push({k:"exclusions",v:this.getExclusions()}),this.srs&&t.push({k:"srs",v:this.srs}),t};const ha=ca;function ua(t){if(this.logger=no.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ua))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!t)throw new Error(oo.getMessage("PARAM_EMPTY","options"));this.settings=t,this.mode=this.settings.httpMethod||"GET"}ua.prototype={requestString:null,constructor:ua,template:{container:'<?xml version="1.0" encoding="UTF-8"?>\n<isochroneRequest>\n__ID__\t<location>\n\t\t<x>__X__</x>\n\t\t<y>__Y__</y>\n\t</location>\n\t<srs>__SRS__</srs>\n\t<graphName>__GRAPHNAME__</graphName>\n__PROFIL____EXCLUSIONS__\t<method>__METHOD__</method>\n__TIME____DISTANCE__\t<reverse>__REVERSE__</reverse>\n\t<smoothing>__SMOOTHING__</smoothing>\n\t<holes>__HOLES__</holes>\n</isochroneRequest>',id:"\t<id>__IDVALUE__</id>\n",profil:"\t<profileId>__PROFILID__</profileId>\n\t<profileName>__PROFILNAME__</profileName>\n",exclusions:{container:"\t<exclusions>\n__EXCLUSIONFEATURE__\n\t</exclusions>\n",feature:"\t\t<exclusion>__EXCLUSIONVALUE__</exclusion>"},time:"\t<time>__TIMEVALUE__</time>\n",distance:"\t<distance>__DISTANCEVALUE__</distance>\n"},processRequestString:function(){var t="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var i=new ha(this.settings).getParams();for(e=0;e<i.length;e++){var n=i[e];t&&(t+="&"),t+=n.k+"="+n.v}break;case"POST":if(this.logger.trace("Process POST Request"),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=this.template.container).replace(/__ID__/g,"")).replace(/__PROFIL__/g,"")).replace(/__X__/g,this.settings.position.x)).replace(/__Y__/g,this.settings.position.y)).replace(/__GRAPHNAME__/g,this.settings.graph)).replace(/__SRS__/g,this.settings.srs)).replace(/__SMOOTHING__/g,this.settings.smoothing)).replace(/__HOLES__/g,this.settings.holes)).replace(/__REVERSE__/g,this.settings.reverse),this.settings.exclusions){var o=this.template.exclusions.container,s=[];for(e=0;e<this.settings.exclusions.length;e++){var r=this.template.exclusions.feature;r=r.replace(/__EXCLUSIONVALUE__/,this.settings.exclusions[e]),s.push(r)}o=o.replace(/__EXCLUSIONFEATURE__/,s.join("\n")),t=t.replace(/__EXCLUSIONS__/g,o)}if(t=t.replace(/__EXCLUSIONS__/g,""),this.settings.distance){var a=this.template.distance;a=a.replace(/__DISTANCEVALUE__/g,this.settings.distance),t=(t=t.replace(/__DISTANCE__/g,a)).replace(/__METHOD__/g,"distance")}if(t=t.replace(/__DISTANCE__/g,""),this.settings.time){var l=this.template.time;l=l.replace(/__TIMEVALUE__/g,this.settings.time),t=(t=t.replace(/__TIME__/g,l)).replace(/__METHOD__/g,"time")}t=t.replace(/__TIME__/g,"");break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(t),this.requestString=t,this.requestString}};const da=ua;function pa(){if(!(this instanceof pa))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}pa.prototype={constructor:pa};const fa=pa;var ma={};function ga(t){var e,i="";return t.hasChildNodes()&&(e=t.firstChild)&&3===e.nodeType&&(i=e.nodeValue),i}ma.READERS={isochronResult:function(t){var e=new fa;if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++)i=n[o],ma.READERS[i.nodeName]&&ma.READERS[i.nodeName](i,e);if("error"===e.status){var s=oo.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new ro({message:s,type:ro.TYPE_SRVERR})}return e},message:function(t,e){e&&(e.message=ga(t))},status:function(t,e){var i=ga(t);"ERROR"!==i&&"error"!==i||e&&(e.status="error")},id:function(t,e){e&&(e.id=ga(t))},location:function(t,e){var i=ga(t);e&&e.location&&(e.location.x=parseFloat(i.split(",")[0]),e.location.y=parseFloat(i.split(",")[1]))},srs:function(t,e){e&&(e.srs=ga(t))},distance:function(t,e){e&&(e.distance=parseFloat(ga(t)))},time:function(t,e){e&&(e.time=parseFloat(ga(t)))},wktGeometry:function(t,e){if(e){var i=t.innerHTML;e.hasOwnProperty("geometry")&&Xr.toJson(i,(function(t){e.geometry=t}),(function(){var t=oo.getMessage("PARAM_FORMAT",["wktGeometry"]);throw new Error(t)}))}},serviceResult:function(t){var e={};if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++)i=n[o],ma.READERS[i.nodeName]&&ma.READERS[i.nodeName](i,e);return e},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var i,n=t.childNodes,o=0;o<n.length;o++)"Exception"===(i=n[o]).nodeName&&(e.exceptionReport=ma.READERS.Exception(i));return e},Exception:function(t){var e={},i=t.getAttribute("exceptionCode");i&&(e.exceptionCode=i);var n=t.firstChild;return n&&3===n.nodeType&&(e.exception=n.nodeValue),e}},ma.read=function(t){var e;if("isochronResult"===t.nodeName||"isochroneResult"===t.nodeName||"IsochroneResult"===t.nodeName)return e=ma.READERS.isochronResult(t);if("ExceptionReport"===t.nodeName)return e=ma.READERS[t.nodeName](t);if(ma.READERS[t.nodeName]){if("error"===(e=ma.READERS[t.nodeName](t)).status){var i=oo.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new ro({message:i,type:ro.TYPE_SRVERR})}return e}throw new ro({message:oo.getMessage("SERVICE_RESPONSE_ANALYSE",t.nodeName),type:ro.TYPE_UNKERR})};const _a=ma;const va={build:function(t){var e=no.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var i=null;if(t.response){if(t.rawResponse)e.trace("analyze response : raw"),i=t.response;else{switch(t.outputFormat){case"xml":e.trace("analyze response : xml");try{var n=new Oo({reader:_a});if("string"==typeof t.response?n.setXMLString(t.response):n.setXMLDoc(t.response),!(i=n.parse()))throw new Error(oo.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(e){var o=e.message;return o+="\n (raw response service : '"+t.response+"')",void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",o),status:200,type:ro.TYPE_SRVERR}))}break;case"json":e.trace("analyze response : json");var s=null;if(!(s="string"==typeof t.response?JSON.parse(t.response):t.response)||"OK"!==s.status&&"ok"!==s.status){if(s&&("ERROR"===s.status||"error"===s.status)){var r=s.message;return r+="\n (raw response service : '"+s+"')",void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EXCEPTION",r)))}}else{(i=new fa).time=s.time,i.distance=s.distance,i.message=s.message,i.id=s.id,i.srs=s.srs;if(i.hasOwnProperty("geometry")&&(Xr.toJson(s.wktGeometry,(function(t){i.geometry=t}),(function(){t.onError.call(t.scope,new ro({message:oo.getMessage("PARAM_FORMAT","wktGeometry")}))})),!i.geometry))return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_ANALYSE",t.response)));var a=s.location.split(",");i.location&&(i.location.x=a[0],i.location.y=a[1])}break;default:return void t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(i&&i.exceptionReport)return void t.onError.call(t.scope,new ro({message:oo.getMessage("SERVICE_RESPONSE_EXCEPTION",i.exceptionReport),type:ro.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,i)}else t.onError.call(t.scope,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))}};function ya(t){if(!(this instanceof ya))throw new TypeError(oo.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",yo.apply(this,arguments),this.logger=no.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!t.position)throw new Error(oo.getMessage("PARAM_MISSING","position"));if(null===t.position.x)throw new Error(oo.getMessage("PARAM_MISSING","position.x"));if(null===t.position.y)throw new Error(oo.getMessage("PARAM_MISSING","position.y"));if(!t.time&&!t.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!t.time&&t.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),t.time&&!t.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.exclusions=t.exclusions||null,this.options.graph=t.graph||"Voiture",this.options.reverse=t.reverse||!1,this.options.smoothing=t.smoothing||!1,this.options.holes=t.holes||!1,this.options.srs=t.srs||"EPSG:4326",this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"json",!this.options.serverUrl){var e=go.ProcessIsoCurve.url(this.options.apiKey),i=e["iso-"+this.options.outputFormat];if(!i)throw new Error("Url by default not found !");this.options.serverUrl=i,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}var n=this.options.serverUrl.lastIndexOf(".");if(-1!==n){var o=this.options.serverUrl.substring(n+1);if(o&&o.length<5)switch(this.logger.trace("Serveur Extension URL : "+o),o.toLowerCase()){case"json":case"xml":this.options.outputFormat=o.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}ya.prototype=Object.create(yo.prototype,{}),ya.prototype.constructor=ya,ya.prototype.buildRequest=function(t,e){try{var i=new da(this.options);if(!i.processRequestString())throw new Error(oo.getMessage("SERVICE_REQUEST_BUILD"));this.request=i.requestString}catch(e){return void t.call(this,new ro(e.message))}e.call(this,this.request)},ya.prototype.analyzeResponse=function(t,e){if(this.response){var i={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:t,scope:this};va.build(i)}else t.call(this,new ro(oo.getMessage("SERVICE_RESPONSE_EMPTY")))};const Ea=ya;const wa={getConfig:function(t){new Cs(t).call()},getAltitude:function(t){new Ho(t).call()},geocode:function(t){new _r(t).call()},reverseGeocode:function(t){new Sr(t).call()},autoComplete:function(t){new Dr(t).call()},route:function(t){new la(t).call()},isoCurve:function(t){new Ea(t).call()}},ba=_o.i8,xa=_o.hT;var La={};La.servicesVersion=ba,La.servicesDate=xa,La.Protocols={},La.Protocols.XHR=ho,La.Services=wa,La.Services.DefaultUrl=go,La.Services.AltiResponse=No,La.Services.Alti={},La.Services.Alti.Elevation=jo,La.Services.AutoCompleteResponse=Tr,La.Services.AutoComplete={},La.Services.AutoComplete.SuggestedLocation=Ir,La.Services.GetConfigResponse=Vo,La.Services.Config={},La.Services.Config.Constraint=Yo,La.Services.Config.Format=Ko,La.Services.Config.Layer=Qo,La.Services.Config.Legend=ts,La.Services.Config.Metadata=is,La.Services.Config.Originator=os,La.Services.Config.Service=rs,La.Services.Config.Style=ls,La.Services.Config.Territory=hs,La.Services.Config.Thematic=ds,La.Services.Config.TileMatrix=gs,La.Services.Config.TileMatrixLimit=vs,La.Services.Config.TileMatrixSet=fs,La.Services.GeocodeResponse=rr,La.Services.Geocode={},La.Services.Geocode.GeocodedLocation=lr,La.Services.Geocode.DirectGeocodedLocation=hr,La.Services.Geocode.ReverseGeocodedLocation=Er,La.Services.IsoCurveResponse=fa,La.Services.RouteResponse=Jr,La.Services.Route={},La.Services.Route.RouteInstruction=$r,La.Error=ro,La.Helper=ao;const Ca=La;var Pa=Xn.getLogger("config");const Sa={configuration:null,isConfigLoaded:function(){var t="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==i.g?i.g:{};return!(!t.Gp||!t.Gp.Config||0===Object.keys(t.Gp.Config).length)&&(this.configuration=t.Gp.Config,!0)},getLayerId:function(t,e){var i=null;if(this.configuration){var n=this.configuration.layers;for(var o in n)if(n.hasOwnProperty(o)){var s=o.split("$");if(t===s[0]&&s[1]){var r=s[1].split(":");if(s[1].split(";")[1]===e){i=o;break}if(r[2]===e){i=o;break}}}}return i||Pa.error("ERROR layer id (layer name: "+t+" / service: "+e+") was not found !?"),i},getLayerParams:function(t,e,i){var n={};if(this.configuration){var o=this.getLayerId(t,e);if(o){var s=this.configuration.layers[o],r=s.apiKeys[0];if(i&&i!==r)return void Pa.error("ERROR different keys ("+i+" !== "+r+") !?");i=i||r,n.key=i,n.url=s.getServerUrl(i),n.version=s.getServiceParams().version,n.styles=s.getDefaultStyle(),n.format=s.getDefaultFormat(),n.projection=s.getDefaultProjection(),n.minScale=s.getMinScaleDenominator(),n.maxScale=s.getMaxScaleDenominator(),n.extent=s.getBBOX(),n.legends=s.getLegends(),n.metadata=s.getMetadata(),n.originators=s.getOriginators(),n.title=s.getTitle(),n.description=s.getDescription(),n.quicklookUrl=s.getQuicklookUrl(),s.wmtsOptions&&(n.tileMatrixSetLimits=s.wmtsOptions.tileMatrixSetLimits);var a=s.getTMSID();if(a){n.TMSLink=a;var l=this.configuration.getTMSConf(a);n.matrixOrigin=l.getTopLeftCorner(),n.nativeResolutions=l.nativeResolutions,n.matrixIds=l.matrixIds,n.tileMatrices=l.tileMatrices}}}return n},getServiceParams:function(t,e,i){var n={};if(this.configuration){var o=this.getLayerId(t,e);if(o){var s=this.configuration.layers[o],r=s.apiKeys[0];if(i&&i!==r)return;i=i||r,n.key=i,n.url=s.getServerUrl(i),n.version=s.getServiceParams().version,n.extent=s.getBBOX(),n.title=s.getTitle(),n.description=s.getDescription()}}return n},getResolutions:function(){var t=[];return this.configuration&&(t=this.configuration.generalOptions.wgs84Resolutions),t},getTileMatrix:function(t){var e={};return this.configuration&&t&&(e=this.configuration.tileMatrixSets[t.toUpperCase()]),e},getGlobalConstraints:function(t){var e={};if(t){var i=this.configuration.layers[t];e.projection=i.getDefaultProjection(),e.minScale=i.getMinScaleDenominator(),e.maxScale=i.getMaxScaleDenominator(),e.extent=i.getBBOX()}return e}},Ma=function(t){var e=Xn.getLogger("checkrightmanagement");if(t){var i=t.key,n=t.resources||[],o=t.services||[];if(0!==n.length)if(0!==o.length){var s={};if(!i){if(!Sa.isConfigLoaded())return void e.warn("WARNING : The 'apiKey' parameter is missing, and the contract key configuration has not been loaded, so impossible to check yours rights !");i=Object.keys(Sa.configuration.generalOptions.apiKeys)[0],e.log(i)}if(i){if(Sa.isConfigLoaded()){for(var r=0;r<n.length;r++)for(var a=n[r],l=0;l<o.length;l++){var c=o[l],h=Sa.getServiceParams(a,c,i);h&&0!==Object.keys(h).length?(s[c]||(s[c]=[]),s[c].push(a)):e.warn("WARNING : The contract key configuration has no rights to load this geoportal resource ("+a+") for this service ("+c+") ")}return 0===Object.keys(s).length?void e.warn("WARNING : The contract key configuration has been loaded, and the 'apiKey' parameter has been set, but, there is a problem on the mapping between the contract and the key !"):(s.key=i,e.log("right management checked",s),s)}e.warn("WARNING : the contract key configuration has not been loaded, so be carefull !");for(var u={},d=0;d<o.length;d++){var p=o[d];u[p]=[];for(var f=0;f<n.length;f++){var m=n[f];u[p].push(m)}}return u.key=i,e.log("right management not checked",u),u}}else e.error("WARNING : no parameter 'services' specified !");else e.error("WARNING : no parameter 'resources' specified !")}else e.error("WARNING : no parameter specified !")};var Ta=Xn.getLogger("LocationSelectorDOM");const Aa={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.className=this._addUID("GPlocationPoint"),t.className+=" GPwidget",t},_createLocationPointElement:function(t,e){var i=document.createElement("div");return i.id=this._addUID("GPlocationPoint_"+t),i.className=e?"GPflexInput GPlocationStageFlexInput":"GPflexInput GPlocationStageFlexInputHidden",i.style.cssText="",i},_createLocationPointLabelElement:function(t,e){var i=this,n=document.createElement("label");return n.id=this._addUID("GPlocationOriginLabel_"+t),n.htmlFor="GPlocationOrigin_"+t,n.innerHTML=e,n.addEventListener("click",(function(t){for(var e=Jn.index(this.id),n=document.getElementsByClassName(i._addUID("GPlocationPoint")),o=0;o<n.length;o++){var s=n[o].childNodes[0].id,r=Jn.index(s);document.getElementById(i._addUID("GPlocationPoint_"+r)).style.cssText=""}document.getElementById(i._addUID("GPlocationOriginCoords_"+e)).value="",document.getElementById(i._addUID("GPlocationOrigin_"+e)).value="",document.getElementById(i._addUID("GPlocationPoint_"+e)).style.cssText="",document.getElementById(i._addUID("GPlocationOriginPointer_"+e)).checked=!1,document.getElementById(i._addUID("GPlocationOrigin_"+e)).className="GPlocationOriginVisible",document.getElementById(i._addUID("GPlocationOriginCoords_"+e)).className="GPlocationOriginHidden",document.getElementById(i._addUID("GPlocationStageRemove_"+e))&&(document.getElementById(i._addUID("GPlocationStageRemove_"+e)).className="GPlocationStageRemove"),document.getElementById(i._addUID("GPlocationStageAdd"))&&(document.getElementById(i._addUID("GPlocationStageAdd")).className=""),i.onLocationClearPointClick(t)})),n},_createLocationAutoCompleteteInputElement:function(t){var e=this,i=document.createElement("input");return i.id=this._addUID("GPlocationOrigin_"+t),i.className="GPlocationOriginVisible",i.type="text",i.placeholder="Saisir une adresse",i.autocomplete="off",i.addEventListener("keyup",(function(t){var i=t.which||t.keyCode;if(13!==i&&10!==i&&38!==i&&40!==i){var n=Jn.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+n)).value.length>2?document.getElementById(e._addUID("GPlocationAutoCompleteList_"+n)).style.display="block":document.getElementById(e._addUID("GPlocationAutoCompleteList_"+n)).style.display="none",e.onAutoCompleteSearchText(t)}})),i.addEventListener("keydown",(function(i){var n=i.which||i.keyCode,o=document.getElementById(e._addUID("GPlocationAutoCompleteList_"+t));if(o){var s=o.getElementsByClassName("GPautoCompleteProposal current"),r=o.getElementsByClassName("GPautoCompleteProposal"),a=r.length;if(a){var l=null;if(!s.length)return(l=r[0]).className="GPautoCompleteProposal current",l.style.color="#000000",void(l.style["background-color"]="#CEDBEF");l=s[0];var c=parseInt(Jn.index(l.id),10),h=c===a-1?r[0]:r[c+1],u=0===c?r[a-1]:r[c-1];switch(l.style["background-color"]="",l.style.color="",u.style["background-color"]="",u.style.color="",h.style["background-color"]="",h.style.color="",n){case 38:Ta.log("arrow up"),l.className="GPautoCompleteProposal",u.className="GPautoCompleteProposal current",u.style.color="#000000",u.style["background-color"]="#CEDBEF";break;case 40:Ta.log("arrow down"),l.className="GPautoCompleteProposal",h.className="GPautoCompleteProposal current",h.style.color="#000000",h.style["background-color"]="#CEDBEF";break;case 13:Ta.log("enter"),l.click(i)}l.focus()}}})),i},_createLocationCoordinateInputElement:function(t){var e=this,i=document.createElement("input");return i.id=this._addUID("GPlocationOriginCoords_"+t),i.className="GPlocationOriginHidden",i.type="text",i.disabled=!1,i.addEventListener("click",(function(){var t=Jn.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+t)).click()})),i},_createLocationPointerShowInputElement:function(t){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+t),e.type="checkbox",e},_createLocationPointerInputElement:function(t){var e=this,i=document.createElement("label");return i.id=this._addUID("GPlocationOriginPointerImg_"+t),i.htmlFor="GPlocationOriginPointer_"+t,i.className="GPlocationOriginPointerImg",i.title="Pointer un lieu sur la carte",i.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();var i,n,o,s=Jn.index(this.id),r=document.getElementsByClassName(e._addUID("GPlocationPoint"));for(i=0;i<r.length;i++)n=r[i].childNodes[0].id,s!==(o=Jn.index(n))&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+o)).checked=!1,"Pointer un lieu sur la carte"===document.getElementById(e._addUID("GPlocationOriginCoords_"+o)).value&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+o)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+o)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+o)).className="GPlocationOriginHidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+s)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).value="",i=0;i<r.length;i++)n=r[i].childNodes[0].id,o=Jn.index(n),document.getElementById(e._addUID("GPlocationPoint_"+o)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+s)).className="GPlocationStageRemove"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className=""),document.getElementById(e._addUID("GPlocationOriginPointer_"+s)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+s)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).className="GPlocationOriginHidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).value="Pointer un lieu sur la carte",i=0;i<r.length;i++)n=r[i].childNodes[0].id,s===(o=Jn.index(n))?document.getElementById(e._addUID("GPlocationPoint_"+o)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+o)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+s)).className="GPlocationOriginHidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationOriginHidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+s)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+s)).className="GPlocationOriginHidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).disabled=!0}e.onActivateMapPointClick(t)})),i},_createLocationRemovePointElement:function(t){var e=this,i=document.createElement("div");return i.id=this._addUID("GPlocationStageRemove_"+t),i.className="GPlocationStageRemove",i.title="Supprimer l'étape",i.addEventListener("click",(function(i){var n=document.getElementsByClassName(e._addUID("GPlocationPoint")),o=n.length-1,s=n[0].childNodes[0].id,r=n[o].childNodes[0].id,a=Jn.index(s),l=Jn.index(r);if(t!==a&&t!==l){var c=Jn.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+c)).className="GPflexInput GPlocationStageFlexInputHidden",document.getElementById(e._addUID("GPlocationOrigin_"+c)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+c)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+c)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+c)).className="GPlocationOriginHidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",e.onLocationRemovePointClick(i)}})),i},_createLocationAddPointElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPlocationStageAdd"),e.title="Ajouter une étape",e.addEventListener("click",(function(e){for(var i=1,n=0,o=document.getElementsByClassName(t._addUID("GPlocationPoint")),s=1;s<o.length-1;s++){var r=o[s].childNodes[0].id,a=Jn.index(r);document.getElementById(t._addUID("GPlocationPoint_"+a))&&("GPflexInput GPlocationStageFlexInputHidden"===document.getElementById(t._addUID("GPlocationPoint_"+a)).className?1===i&&(i=a):n++)}i<o.length&&(document.getElementById(t._addUID("GPlocationPoint_"+i)).className="GPflexInput GPlocationStageFlexInput"),4===n&&(document.getElementById(t._addUID("GPlocationStageAdd")).style.display="none"),t.onLocationAddPointClick(e)})),e},_createLocationAutoCompleteResultElement:function(t){var e=this,i=document.createElement("div");return i.id=this._addUID("GPlocationAutoCompleteList_"+t),i.className="GPadvancedAutoCompleteList",i.addEventListener?i.addEventListener("click",(function(i){e.onAutoCompletedResultsItemClick(i),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+t)).style.display="none"}),!1):i.attachEvent&&i.attachEvent("onclick",(function(i){e.onAutoCompletedResultsItemClick(i),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+t)).style.display="none"})),i},_createLocationAutoCompletedLocationElement:function(t,e,i){var n=document.getElementById(this._addUID("GPlocationAutoCompleteList_"+t)),o=document.createElement("div");o.id=this._addUID("AutoCompletedLocation_"+i),o.className="GPautoCompleteProposal",o.innerHTML=e.fullText,n.appendChild(o)},GPdisplayCoordinate:function(t){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),i=0;i<e.length;i++){var n=e[i].childNodes[0].id,o=Jn.index(n);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+o)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+o)).value=t,document.getElementById(this._addUID("GPlocationOriginCoords_"+o)).disabled=!1;for(var s=0;s<e.length;s++){n=e[s].childNodes[0].id;var r=Jn.index(n);document.getElementById(this._addUID("GPlocationPoint_"+r)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+r)).className="GPlocationStageRemove")}return document.getElementById(this._addUID("GPlocationOriginPointer_"+o)).checked=!1,void(document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className=""))}}}};const Ia={NORTH:"N",SOUTH:"S",EAST:"E",WEST:"O",digitSecond:2,digitDecimal:5,digitRadian:8,roundToDecimal:function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i},decimalToRadian:function(t){return this.roundToDecimal(.017453292519943295*t,this.digitRadian)},decimalToGrade:function(t){return this.roundToDecimal(1.1111111111111112*t,this.digitRadian)},decimalToDMS:function(t,e,i){t<0&&(t*=-1);var n=Math.floor(t),o=60*(t-n),s=Math.floor(o),r=60*(o-s),a=this.roundToDecimal(r,this.digitSecond),l=n+"° "+s+"' "+a+'" ';return e&&(l+=e),i?{d:n,m:s,s:a,direction:e}:l},decimalLatToDMS:function(t,e){var i=t<0?this.SOUTH:this.NORTH;return this.decimalToDMS(t,i,e)},decimalLonToDMS:function(t,e){var i=t<0?this.WEST:this.EAST;return this.decimalToDMS(t,i,e)},DMSToDecimal:function(t,e,i,n){var o=t+e/60+i/3600;return o=n===this.SOUTH||n===this.WEST?-1*o:o,this.roundToDecimal(o,this.digitDecimal)}};var ka=Xn.getLogger("icondefault");const Ra=Vn().Icon.Default.extend({images:{retina:{shadow:"data:image/png;base64,...",color:{blue:"data:image/png;base64,...",orange:"data:image/png;base64,...",red:"data:image/png;base64,...",green:"data:image/png;base64,..."}},shadow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=",color:{blue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",orange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAASAAAAEgARslrPgAABghJREFUWMOdl1uInGcdxn/feWa+mflmJmZbqVqKigewKK5goHgRSEm8EC88F6tBFLfgZbzJnVdRYWExrVBoXazWlAYL0dVisLBYzEUUSbeNjZQmxGZ3NjO7c57v/P69mNnD7MzuzvrCA8PM+/+e93n+h/cb7c9PzXKE9RHAG36+BXRPP3390CDtT3MHklSA7wKngVOWbaOhA5AkEUqpKnAFePHMM9eX9yeZrMQAzgHni14ln826ZLLu2KY0TfD7XXq9NoHffxX48Zmnr6+MkSyNK6kAl4ql8qlisYxpWagoJA16gIxs1E0bI1cAoNNuslFb94Env/jM9csj+0SEXaiIyN+9cuVU5dhxdEmI23XSoAOoIckOVBISt+vE7Q0KRY8H3v+BbM7Nv7w0Nzs3QrLHopdL5crHyqUKSbdB6ndA1BRIiVs1Mo5NySsD/GJpbvbkjpKds50rFL2T5VKZpNdAkmjiAzXDHOye8FvS2cC2LWZmHjAELv1xbrYyIFGCKKmIkvMlr4iK+0gaDe0ZQHcyWIUyVqGMmDZWvoRVKGO63sg+UMSdGq6bo+R5x0XJuYFdGqDxLa9UzJumQRp0R3y3ChU002Zjc5Pbd+6wGem8e/sO6+vrBGGIVagMTdmJScMepZIHGj/4ww8/a5jDevl63s2h4nAgfbhM1yOMQt67V+WjZ87y+VNPYmXzANz7x19YufQzilFIySsTt+vbcSrsYTlZnEymEgTBCV2U5EXJiUzGJg1aI9I1w6DZbPHoE+f5+Jee2iYAeGj2cR479zyNjo+SFN12xqzLZRxEyWld4EOWbRmIApVuJ1E3LaIwRLkzPPzYl8caUURwZz7Iw1/4Cq1WG8POjBSBCvvYtonAJ3URqeiaNlYpuuXg+wHlRz41kQBAKUX5w5+m1/PHKk7SBF0DEfFMgUjJMGnaro7WFGig0nhfAhEhjQI0TRuL1wwNFSkEfF2Ee3GSjp0kDXq4WZv7b19HJeNEWySrN/5G3nUQlezpJ4MkTRHhni4i1ThOuipNByfakhsHmIZGRnV565WLYyoA1t68RuONq3j5DKnfHiXRdKIoRkTuGl/9zIMCfC7rGJ/I5vOocGsQCoiQz7vc/8+/WH37BrnKgzjFY7RWb/Pu8mVWLv2UmUoOxzYGJFtxmobhZFmrd0hS9SPtpbOPApx0s/ZfH3moRNyujU5aO4eRcWl2AjZbPn6YYFsGXt6h4mUxDX0sxioep9kJeG+9ffVrz994fKsZX+v60bVuPzzhFo6RdHY1VtRDEp9S4RilgjPyMBX2iXu90dIbFsFm20fgJwCm7BTEzzda/u/zrjVspl2JVoq4vc40yyrO0OqGdPvxa9/41Y3XYfQ+udLshO8EQYyZK0454idAKTYafUTkwrblu0Z9KjBfb/pouvl/EZhuma4f0e7H//zm4htXt0n23HaL9VZQS5IU3c4emUTTNOoNH9hRsVcJAr7As7VWgJHJDTp4SpiFMv0oodGLbwm8MkoyescjIgtrm4GvlEI37SOo0Kk1AkTkwhOLK+keEtiDmggv1FshRrYwFYGRLRJEKfV2fFeEF/dW3F67tjB/txamIoKm65N37IJu2dRaEQLz3/71m9E4ybhdiMgtEVna7EQY+Qoial/oTo4oTqk2opqIPDepd/QDzjh/vxmDOtgq3cqy3ogQuPidF97qTiaZrAQRWW776bVOkGIW3jfZJidHqoTVRtwVkYX9psCkxO/GwnojRhvMlvGE2zmqzRgRfnn2Nzdb+5McnNbL9a56x48FI+vtSbaDaPDfjSQSmD9onh1kFyKSishCtZmgW/ZY2a5txojI4vd+e7N6CMmBdiHC4lojrcWpoDsuIGimhYhwp5amIlzgkKUf1gMgXZBnq40Ew8kNBmGuxHozAeSl7//u37cPJTmUYoCLdzdVJMNcgLDWFoTDVUxrFyJURVisNhVGzqPWVvQCWRJhZSqS4Qv3NFhYaw10rbUENC4MansaJYO/DtPgZi+QK7W20OrLsih5XZRMSTJdTrZHzWpzkIut76az62hrueXzHPDqUYL+B8XVKUzuUimfAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDEyLTA4LTE4VDE0OjUwOjU2KzAxOjAwFlCkXwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxMi0wOC0xOFQxNDo1MDo1NiswMTowMGcNHOMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAASAAAAEgARslrPgAABe5JREFUWMOdlWuIXGcZx3/nPbe5ZWbO2c0a8VIEpSq0io2QBT8FUlIFEbzfokUUKfgxIuSbn+JtYTEQqFQCQmkxVIiNFhcLwZoVtrFNt40ESrPEJju7s/eZM+f+Pn6Y2XVnZ3Zn0/fwcA7veZ/ze5//87zPMf56fJIHGB8Far3n20D79Nz1kU7GXw6G+MD3gdPAKdtxMJQFQJZEaK0bwBXg2Sfmrl87AHJi2LwJnAXOVf3xSrFcoVAuDyzKs4yw3SLY2iTqBC8BP31ibnZ+AHJ1MBIfeK7qeaeqno9l2+g4IQ86ILpvoXIczCMVAFob66wuLYXAmc/PXb/cB3nxsRN7AdfrY2MPe+Pj6Cjufnyk6Aa2XyfshLQ21glarae+8OrsxZ3N7JHoj3Xff9jzx8jWN8hbbdB6tOU5aXOVguNQ98YAfnv1+OTJHYgAPTt7pFY76Xk+2fo6kiSg8wEzLLMr25B32eoqjm0x8b5jpsBzLx6f9LsQARF8Ec7Vq1V0J0CSuM9ZFVxsr47t1RHHxq7XsL06Vq06AEqby5RLReq12lERzvbkEkC+VatWKpapyNtt6JERwfY9DMdmdW2NOwsLrCmDdxYWWFpaIopjbN/rarLLJw8C6rUqID/682MnTEsQgK9XSiV0nHQ17g2rViWOI95tLPOxJ89w4sx3sCvdarr3txnmf/kbqnFE3auTrqzu+OkgwC4WcAuuH0XRpBKhIsJkwbHJN9f79TcVG5tbPHruZ3z8qR/vAAA+8PgpPvf737Eehug8Rbn2gHQl10WE00rgw7ZtmdtVspMH2yKJY/TEBA996YsDVSsilD/0QR76ypfZ3GphFgp9AN3p4FgmAp9UIuIrQw2UpXJdwijGe+SRoQAArTXepz9FEEbdfOzylyxHddfWLEESLbpblrtPtM4AQafJvgARIY8iDMMY8DcM6a5BQiUY99I8H9hJHgSUHZvluVfRaToA2obc/8c/qbg2kqV9/oapyPIcwbinRKSRZnlb53l3R9vhRjGWAYV2i7cuXByIAmBx9l+sz8xQK7jkW1v9EKVI0hQRuWt+9dj7Bfhs0VSfKFZK6CDoq/lKucTya69x/+Y8pWPHcMd8Nu8s8M7lF5j/xa+ZKBVwTdWFbPsZBmaxwGIrINP6J8bzj34G4GTZcf7+kXqFtNns77SlMma5xEaUsBbGhFmGY5rUXBu/6GIpNeBjHz3KRpTw7lZ75ms3bzxudQXg5XaSzLbjZLI8Nka2srLrYLWRqEPdH6Pu2n0f050OaRD0l54yQIS1MELg5wDbEIBfrYbRCxW3MvDfkEyTLi+NavjdKMYn2Ixi2mn28jdu3nil1yCFnl3ZiNO3ozjtNb5DtPihbV+z2okRkfPDWn0uMLUSxhim9Z4AlufRThK20uzGN9/498wOhN0HUfSllShuZnmOKhXZ826kGYbBSicG0ed3S7g7EgRCgaebYYxZLvW/GWGW79HJM9bT7LbAn/oh/8/Jtk0vRkmotUY5zqGlMpSi2cvFt+dfz/dEYrDHmoLxh5Uwxjxy5FAAs1olynJWUn1XMJ7dW3FKGHpN3Y2yXEQwTDVSKuU6NKMEQaa+++brySBkUC5E5LaIXF2LE0zfR7Te11SpRJLlNJK8KSLPDDs76oA9Ti3H+UipVLHIUpggcOF7b73RHg4ZHgkicm0r17OtLMc6Oj5cpnKJXAv3U90Wken9uoAaUZzTS1GGIQxPeLFEI04RuPjkrfnN9wq5vKJ5OxTBrNb2JNtFFPw3lURg6qB+dpBciEguItONOEO5zkDZLoYpInLpB7fmGwdDRp/nS4sZzVQEVS6DCIZjIyIspOQC5xkx1O6/4D7WRuTpRpRhlkrdRlirsxRnIPL8D//z5p2RkH0O497rwt2cRBBUwQWExVwQZGQUPchAWxlmDcG41Eg0Zq1GM9EEoq4KxvyhIA/QaacXs+5z736+O3+YSEamZMduBaKuNFNhU9Q1EV6RwzEOnZOdxnk/7eZie+aQcj3QuLaJegZ46UGc/gcUeTtzDg/o4wAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMi0wOC0xOFQxNDo1MDo1NiswMTowMBZQpF8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTItMDgtMThUMTQ6NTA6NTYrMDE6MDBnDRzjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",green:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wJCgoDDgqHD/MAAAZVSURBVFjDpZZtiFxXGcd/c+69M7PzurvdTTZNGvxQTCJqFSok+MmFQPSDUlsQhBaxWNhorQlWPxSKTYqsFLYGA8VCISDESIpCILYQW4xJNtHGGBooZtl16UrKNrMvM7N3Xu6555zHD7OZ7OzsW/Be/nBnznnO/zzP83/OcxKPv/IOW32KXzj2KFBc/nm7cuvl8IOXD21ql3j8lT9vsOjxfuB7wCHgoAoUCV8BYJsWRGaBc8DpvzwxfnF9kl90kxQ+f9wDXgReyg9kc8VkH4Wg2DUvdpqyXqRcKxOH5l3gZ+89OX5rDZLzqwhe7QfOZAcyB4fSO0h6KbSNqNt6F0lSJcn4WQA+bcyycHehATzz3pPjb6+cp0SEe8jvOdYvsRvPDmQOPpLZjRXLYjRPzYSIuC5EtsliNE9ZL7ItvY2dD+/sSRaDs8Nn9o90kLQ92HvcA87mduT27Mw8QiWuUDMhVuymMC5mPpoj42UYyu0A+M3wmf3D90lEQATgxfT29PDDPTup6jKx08gar6+CNf8XhEW9QEqlGNw16AFnhs/s72+FC6Gw79V+4KXtPUPUbZ3IRR07DVSSQlCkEBRRCdX+zvn5Lq/mohKFoEh2KDO4LB4ULUe+mxpI5RSKMA5xIm0Ug16SKsknjTtMfTxFGIdMfTzFzOIMoVmiGPQCdNjUTY3B9HZEeO5rv9/v+YggwncK6QKxxB3qyQU5aibk7iclvv3YUzz91WfJ+wUALsy+w+sf/opGusFgahuLerFt17BN0l4PQc7v10vmgJ/f98sccCDjZ5mP5jpIvITHYljm+QNH+NaupzrGDg59nc/m9/KDC08TD8UEyqdhG+1xh8PP+eglc0jhZLeXUp4V2yFPPxFQNzWymWwXAYAg7M5+hm/s+yZzzRIpL91hXzc1kioAJ59TQH9C3WOXNlJeitCEfLH3S2sSAFgxPNb7ZXQl7rJ3IiRaCxd9caLFgXUGcdJeyDiDiKBdtC6BE6FhGygv0WUvnsOKRZw0FHDHRg6HdCzWtHXyQZ4bn17HrBKEFdNaAMel0l/xcz5WbOd5hcI4A3BHiWPWaReKuNYOjEOMw2hDggQudpyceL3DC9cqXsZLl7g+9Q8KQYEls9S2FePwEgrbsIhjxuvb+2tJDYx/RXJuXzbI0dRR+xBwypDtyXLrvx9yLbzC9vR2HkoO8J9wkrMzp/nt+Bv0DKbwVUCj0VxxeEAQJKneDRErz/siAk5ONueiJzI7MrAirroe4zJC70NFphem+PnkUWzkUH6CZG9A364iXsKjulTprK98nqV6Fde0F/72/Q8+8hGh8u+fvl/Y89rVWn/tQDaXI6wu3e8ZYYzxLflsjlymU2UN2yAO4zUbVXNeIyLHAHzuJ/w1XY7/mN7mWKUBJHZUy9UttehsMUtYD7EN8/6lZ69fBmiFCxDLuWhBT0b90aN+zm9r/0EfEdfywjLaddRXJ45aYCxa0PjKp53FB0CqN0mzGWFC88/Lz12/sKIzrpjn5FRzLioZZ/B6fMTxQFAkiBY04mS0szOuYKlOHG0g8mazFOGlFGJly0jmfXQ9Rpf1bUT+tG6PX87PiWg+aiDgpbyWpLeARKCIyjHA6JWRG3ZVjxdWojJxpAT8rjkX4We9LSU7KATYhiWu6Bng9OpxtVYCxTHWLEX2XmE6tzGUnyAqx4hj7MrIDd1FsjpcIkJl4oXbYuW8rhqSfUkkduvCSymsdkRzUUmsvLWWp2o9OYqTsWhRb6pcP+ujyzHi5OTVH/8rXJNkLU9EhOrUCxdNzVw1NUN6ILlmsv2MhxhHcy4KgRPr5awr8Z3ghC7r5Uru3oif8YgWNMAb135ys7I+yYbx4O24aiZt5Ej2JjsvGSkPBKJ5rRHGNlLfuuESESqTP7IiLW+UrxBLG0E+aFW3cOrakZuzG5JsHC4BOKUrpuRM64ojTlB+AhGhOa8tMLpZHanN1FOZ/GEIvBlXYvweBSIk+wJ0q7r/8PejN6c3JdnSCevkZLSgtdhWLsSBLmtYdRD+H+ESKlOHZ8XJqbgaExQC4iWD0+58Zerwra2RbM7B8qX8hK7EiBN0WSPC6OoOun5O2NpbnT78kdXunKlbbOQuVqcPX5YtsqgH636M6bIGYbTj/rN5Trb+VKdHLtqme6s6PfLug9j9D/FCc1g2qf7VAAAAAElFTkSuQmCC"}},initialize:function(t,e){Vn().Util.extend(this.options,e);var i=null,n=this.images;switch(t){case"red":i=n.color.red;break;case"green":i=n.color.green;break;case"orange":i=n.color.orange;break;case"blue":i=n.color.blue;break;default:i=n.color.blue}this.options.iconUrl=i,this.options.shadowUrl=n.shadow,Vn().Browser.retina&&(this.options.iconRetinaUrl=i,this.options.shadowRetinaUrl=n.shadow)},_getIconUrl:function(t){return ka.trace("OVERWRITTEN L.Icon.Default._getIconUrl("+t+")"),Vn().Icon.prototype._getIconUrl.call(this,t)}});var Da=Xn.getLogger("locationselector");const Oa=Vn().Control.extend({includes:Aa,options:{position:"topleft",tag:{id:0,unique:null,label:">",color:"blue",display:!0,addOption:!1,removeOption:!1},disableReverse:!1,displayInfo:!0,autocompleteOptions:{},reverseGeocodeOptions:{}},initialize:function(t){Vn().Util.setOptions(this,t),this._uid=this.options.tag.unique||null,this._activeDragAndDrop=!1,this._pressedKeyOnDragAndDrop=!1,this._map=null,this._inputsContainer=null,this._inputLabelContainer=null,this._inputAutoCompleteContainer=null,this._inputShowPointerContainer=null,this._inputCoordinateContainer=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedLocations=[],this._currentLocation=null,this._marker=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement(),this._container=this._uid?this._initLayout():null},onAdd:function(){this._uid=Jn.generate();var t=this._initLayout();return Vn().DomEvent.disableClickPropagation(t).disableScrollPropagation(t),t},onRemove:function(){},getCoordinate:function(){return this._coordinate},setCoordinate:function(t){this._displayResultOfCoordinate(t)},getCoordinateInverse:function(){if(this._coordinate)return{x:this._coordinate.y,y:this._coordinate.x}},setMap:function(t){this._map||(this._map=t)},clear:function(){this._setCursor(),this._setMarker(),this._clearResults(),this._inputLabelContainer.click()},dragging:function(t){this._marker&&(t?this._marker.dragging.enable():this._marker.dragging.disable())},_initLayout:function(){var t=this.options.tag.id,e=this._createMainContainerElement(),i=this._inputsContainer=this._createLocationPointElement(t,this.options.tag.display);e.appendChild(i);var n=this._inputLabelContainer=this._createLocationPointLabelElement(t,this.options.tag.label);i.appendChild(n);var o=this._inputAutoCompleteContainer=this._createLocationAutoCompleteteInputElement(t);i.appendChild(o);var s=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(t);i.appendChild(s);var r=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(t);i.appendChild(r);var a=this._createLocationPointerInputElement(t);if(i.appendChild(a),this.options.tag.addOption){var l=this._createLocationAddPointElement();i.appendChild(l)}if(this.options.tag.removeOption){var c=this._createLocationRemovePointElement(t);i.appendChild(c)}var h=this._suggestedContainer=this._createLocationAutoCompleteResultElement(t);return e.appendChild(h),e},_checkRightsManagement:function(){var t=null,e=[],i=null;i=this.options.reverseGeocodeOptions.apiKey,(e=(t=this.options.reverseGeocodeOptions.filterOptions)?t.type:[])&&0!==e.length||(e=["PositionOfInterest","StreetAddress"]);var n=Ma({key:i||this.options.apiKey,resources:e,services:["ReverseGeocode"]});i=this.options.autocompleteOptions.apiKey,(e=(t=this.options.autocompleteOptions.filterOptions)?t.type:[])&&0!==e.length||(e=["PositionOfInterest","StreetAddress"]);var o=Ma({key:i||this.options.apiKey,resources:e,services:["AutoCompletion"]});n||o||(this._noRightManagement=!0),o&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=o.AutoCompletion,this._resources.AutoCompletion.key=o.key),n&&(this._resources.ReverseGeocode={},this._resources.ReverseGeocode.resources=n.ReverseGeocode,this._resources.ReverseGeocode.key=n.key)},_setLabel:function(t){this._inputAutoCompleteContainer.value=t||""},_setCoordinate:function(t){this._coordinate={x:t.lng,y:t.lat};var e;e=Ia.roundToDecimal(t.lat,4);var i=Ia.roundToDecimal(t.lng,4)+" , "+e;this.GPdisplayCoordinate(i)},_setPosition:function(t){Da.log("_setPosition()",t),this._map.panTo(Vn().latLng(t.y,t.x))},_setMarker:function(t,e,i){if(Da.log("_setMarker()",t,e,i),!this._activeDragAndDrop){var n=this._map;if(null!=this._marker&&(this._marker.off("mousedown",this.onMouseDownMarker,this),this._marker.off("dragstart",this.onStartDragMarker,this),this._marker.off("drag",this.onDragMarker,this),this._marker.off("dragend",this.onEndDragMarker,this),n.removeLayer(this._marker),this._marker=null),t){var o={icon:new Ra(this.options.tag.color),draggable:!0,clickable:!0,zIndexOffset:1e3};if(this._marker=Vn().marker(Vn().latLng(t.y,t.x),o),this._marker.on("mousedown",this.onMouseDownMarker,this),this._marker.on("dragstart",this.onStartDragMarker,this),this._marker.on("drag",this.onDragMarker,this),this._marker.on("dragend",this.onEndDragMarker,this),this._marker.addTo(n),i){var s=null;if("string"!=typeof e)if(e.fields.fullText)s=e.fields.fullText;else{var r=[];r.push(e.fields.street||""),r.push(e.fields.postalCode||""),r.push(e.fields.commune||""),"PositionOfInterest"===e.type&&(r.push(e.fields.poi||""),r.push(e.fields.kind||"")),s=r.join(" - ")}else s=e;this._marker.bindPopup(s)}}}},_setCursor:function(t){var e=this._map.getContainer();e.style.cursor=t||null},_clearResults:function(){this._currentLocation=null,this._coordinate=null,this._clearSuggestedLocation()},_clearSuggestedLocation:function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},_requestAutoComplete:function(t){if(Da.log("_requestAutoComplete()",t),t&&0!==Object.keys(t).length&&t.text)if(Da.log(t),this._noRightManagement)Da.log("no rights for all service !?");else if(this._resources.AutoCompletion){var e=this._resources.AutoCompletion.resources;if(e&&0!==Object.keys(e).length){var i=this._resources.AutoCompletion.key,n={};Vn().Util.extend(n,this.options.autocompleteOptions),Vn().Util.extend(n,t),Vn().Util.extend(n,{apiKey:n.apiKey||this.options.apiKey||i}),Da.log(n),Ca.Services.autoComplete(n)}}else Da.log("no rights for this service !?")},_fillAutoCompletedLocationListContainer:function(t){if(Da.log("_fillAutoCompletedLocationListContainer()",t),t&&0!==t.length){var e=this._suggestedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);for(var i=0;i<t.length;i++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,t[i],i);this._suggestedLocations=t}},_requestReverseGeocode:function(t){if(Da.log("_requestReverseGeocode()",t),t&&0!==Object.keys(t).length&&t.position&&0!==Object.keys(t.position).length)if(this._noRightManagement)Da.log("no rights for all service !?");else if(this._resources.ReverseGeocode){var e=this._resources.ReverseGeocode.resources;if(e&&0!==Object.keys(e).length){var i=this._resources.ReverseGeocode.key,n={};Vn().Util.extend(n,this.options.reverseGeocodeOptions),Vn().Util.extend(n,t),Vn().Util.extend(n,{returnFreeForm:!0,filterOptions:{type:["StreetAddress"]}}),Vn().Util.extend(n,{apiKey:n.apiKey||this.options.apiKey||i}),Da.log(n),Ca.Services.reverseGeocode(n)}}else Da.log("no rights for this service !?")},_displayResultOfCoordinate:function(t){this._setCoordinate(t),this._setMarker({x:t.lng,y:t.lat},null,!1),Da.log(this.getCoordinate()),this.onActivateMapPointClick()},_displayResultOfLabel:function(t){var e=t.placeAttributes,i=e.number+" "+e.street+", "+e.postalCode+" "+e.commune;this._setCoordinate({lat:t.position.x,lng:t.position.y}),this._setLabel(i),this._setMarker({x:t.position.y,y:t.position.x},null,!1),this._inputShowPointerContainer.checked=!1,this._inputAutoCompleteContainer.className="GPlocationOriginVisible",this._inputCoordinateContainer.className="GPlocationOriginHidden",this.onActivateMapPointClick()},onAutoCompleteSearchText:function(t){Da.log("onAutoCompleteSearchText()",t);var e=t.target.value;if(e)if(this._noRightManagement)Da.log("no rights for this service !?");else if(this._currentLocation=e,!(e.length<3)){var i=this;this._requestAutoComplete({text:e,maximumResponses:5,onSuccess:function(t){if(Da.log(t),t){var e=t.suggestedLocations;i._fillAutoCompletedLocationListContainer(e)}},onFailure:function(t){i._clearSuggestedLocation(),Da.log(t.message)}})}},onAutoCompletedResultsItemClick:function(t){Da.log("onAutoCompletedResultsItemClick()",t);var e=Jn.index(t.target.id);if(Da.log(e),Da.log(this._suggestedLocations[e]),e){var i={x:this._suggestedLocations[e].position.x,y:this._suggestedLocations[e].position.y},n={type:this._suggestedLocations[e].type,fields:this._suggestedLocations[e]},o=this._suggestedLocations[e].fullText;this._setLabel(o),this._setPosition(i),this._setMarker(i,n,this.options.displayInfo),this._coordinate=i}},onActivateMapPointClick:function(t){Da.trace("onActivateMapPointClick()",t);var e=this._map;this._inputShowPointerContainer.checked?this._activeDragAndDrop||(e.on("click",this.onMouseMapClick,this),this._setCursor("crosshair"),this._setMarker(),this._clearResults()):this._activeDragAndDrop||(e.off("click",this.onMouseMapClick,this),this._setCursor())},onLocationClearPointClick:function(t){Da.log("onLocationClearPointClick",t),this._setCursor(),this._setMarker(),this._clearResults(),this._inputAutoCompleteContainer.focus()},onLocationRemovePointClick:function(t){Da.log("onLocationRemovePointClick",t),this._setCursor(),this._setMarker(),this._clearResults()},onLocationAddPointClick:function(t){Da.log("onLocationAddPointClick",t)},onMouseMapClick:function(t){Da.log("onMouseMapClick",t);var e=t.latlng;if(this.options.disableReverse||this._noRightManagement)this._displayResultOfCoordinate(e);else{var i=this;this._requestReverseGeocode({position:{x:e.lat,y:e.lng},srs:"EPSG:4326",onSuccess:function(t){if(Da.log(t),0!==t.locations.length){var n=t.locations[0];i._displayResultOfLabel(n)}else i._displayResultOfCoordinate(e)},onFailure:function(t){Da.log(t.message),i._displayResultOfCoordinate(e)}})}},onStartDragMarker:function(){this._marker&&(this._activeDragAndDrop=!0,this._inputShowPointerContainer.checked=!0,this._inputAutoCompleteContainer.className="GPlocationOriginHidden",this._inputCoordinateContainer.className="GPlocationOriginVisible",this._marker.unbindPopup(),this._setLabel(),this._clearResults())},onDragMarker:function(){if(this._marker){this._activeDragAndDrop=!1,this._inputShowPointerContainer.checked=!0;var t=this._marker.getLatLng();this._setCoordinate(t)}},onEndDragMarker:function(){if(this._marker){this._inputShowPointerContainer.checked=!0;var t=this._marker.getLatLng();this._pressedKeyOnDragAndDrop?this._setCoordinate(t):(Da.log("No key pressed, so autocomplete solution !"),this.onMouseMapClick({latlng:t})),this._activeDragAndDrop=!1,this._pressedKeyOnDragAndDrop=!1}},onMouseDownMarker:function(t){this._marker&&(this._pressedKeyOnDragAndDrop=t.originalEvent.ctrlKey)}});const Ga={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochron"),t.className="GPwidget",t},_createShowIsoElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowIsochron"),t.type="checkbox",t},_createShowIsoPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowIsochron"),e.title="Calculer une isochrone",e.addEventListener?e.addEventListener("click",(function(e){t.onShowIsoPanelClick(e)})):e.attachEvent&&e.attachEvent("onclick",(function(e){t.onShowIsoPanelClick(e)}));var i=document.createElement("span");return i.id=this._addUID("GPshowIsochronOpen"),i.className="GPshowAdvancedToolOpen",e.appendChild(i),e},_createIsoPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronPanel"),t.className="GPpanel",t},_createIsoPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var i=document.createElement("div");i.className="GPpanelTitle",i.innerHTML="Calcul d'isochrone",e.appendChild(i);var n=document.createElement("div");return n.id=this._addUID("GPisochronPanelClose"),n.className="GPpanelClose",n.title="Fermer le panneau",n.addEventListener?n.addEventListener("click",(function(){document.getElementById(t._addUID("GPshowIsochronPicto")).click()}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPshowIsochronPicto")).click()})),e.appendChild(n),e},_createIsoPanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.addEventListener("submit",(function(e){return e.preventDefault(),t.onIsoComputationSubmit(e),!1})),e},_createIsoWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPisochronCalcWaitingContainer"),t.className="GPisochronCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPisochronCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t},_createIsoPanelFormTypeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronChoice"),t},_createIsoPanelFormTypeChoiceChronElement:function(t){var e=this,i=document.createElement("div");i.className="GPisochronChoiceAlt";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltChron"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!t,n.addEventListener?n.addEventListener("change",(function(t){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueDist")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange(t)}),!1):n.attachEvent&&n.attachEvent("onchange",(function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueDist")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange()})),n.value="isochron",i.appendChild(n);var o=document.createElement("label");o.className="GPisochronChoiceAltImg",o.htmlFor=this._addUID("GPisochronChoiceAltChron"),i.appendChild(o);var s=document.createElement("span");return s.id=this._addUID("GPisochronChoiceAltChronTxt"),s.innerHTML="isochrone",s.addEventListener?s.addEventListener("click",(function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),!1):s.attachEvent&&s.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()})),i.appendChild(s),i},_createIsoPanelFormTypeChoiceDistElement:function(t){var e=this,i=document.createElement("div");i.className="GPisochronChoiceAlt";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltDist"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!t,n.addEventListener?n.addEventListener("change",(function(t){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueChron")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange(t)}),!1):n.attachEvent&&n.attachEvent("onchange",(function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueChron")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange()})),n.value="isodistance",i.appendChild(n);var o=document.createElement("label");o.className="GPisochronChoiceAltImg",o.htmlFor=this._addUID("GPisochronChoiceAltDist"),i.appendChild(o);var s=document.createElement("span");return s.id=this._addUID("GPisochronChoiceAltDistTxt"),s.innerHTML="isodistance",s.addEventListener?s.addEventListener("click",(function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),!1):s.attachEvent&&s.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()})),i.appendChild(s),i},_createIsoPanelFormValueIsochronElement:function(t){var e=this,i=document.createElement("div");i.id=this._addUID("GPisochronValueChron"),i.className=t?"GPflexInput":"GPisochronValueHidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueChronLabel"),n.htmlFor=this._addUID("GPisochronValueChronInput"),n.innerHTML="Temps",i.appendChild(n);var o=document.createElement("input");o.id=this._addUID("GPisochronValueChronInput1"),o.min="0",o.step="1",o.value="0",o.type="number",o.addEventListener?o.addEventListener("change",(function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeHourChange(t)})):o.attachEvent&&o.attachEvent("onchange",(function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeHourChange(t)})),i.appendChild(o);var s=document.createElement("label");s.innerHTML="h",i.appendChild(s);var r=document.createElement("input");r.id=this._addUID("GPisochronValueChronInput2"),r.min="0",r.max="59",r.step="1",r.value="0",r.type="number",r.addEventListener?r.addEventListener("change",(function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeMinuteChange(t)})):r.attachEvent&&r.attachEvent("onchange",(function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeMinuteChange(t)})),i.appendChild(r);var a=document.createElement("label");return a.innerHTML="min",i.appendChild(a),i},_createIsoPanelFormValueIsodistanceElement:function(t){var e=this,i=document.createElement("div");i.id=this._addUID("GPisochronValueDist"),i.className=t?"GPflexInput":"GPisochronValueHidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueDistLabel"),n.htmlFor=this._addUID("GPisochronValueDistInput"),n.innerHTML="Distance",i.appendChild(n);var o=document.createElement("input");o.id=this._addUID("GPisochronValueDistInput"),o.min="0",o.step="any",o.value="0",o.type="number",o.addEventListener?o.addEventListener("change",(function(t){"function"==typeof e.onIsoValueDistChange&&e.onIsoValueDistChange(t)})):o.attachEvent&&o.attachEvent("onchange",(function(t){"function"==typeof e.onIsoValueDistChange&&e.onIsoValueDistChange(t)})),i.appendChild(o);var s=document.createElement("label");return s.innerHTML="km",i.appendChild(s),i},_createIsoPanelFormModeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronModeChoice"),t},_createIsoPanelFormModeChoiceTransportElement:function(t){var e=this,i=document.createElement("div");i.id=this._addUID("GPisochronTransportChoice");var n=document.createElement("span");n.className="GPisochronModeLabel",n.innerHTML="Mode de transport",i.appendChild(n);for(var o=0;o<t.length;o++){var s=t[o];if("Voiture"===s){var r=document.createElement("input");r.id=this._addUID("GPisochronTransportCar"),r.type="radio",r.name="GPisochronTransport",0===o&&(r.checked=!0),r.addEventListener?r.addEventListener("change",(function(t){e.onIsoModeTransportChange(t)})):r.attachEvent&&r.attachEvent("onchange",(function(t){e.onIsoModeTransportChange(t)})),r.value="Voiture",i.appendChild(r);var a=document.createElement("label");a.className="GPisochronTransportImg",a.htmlFor=this._addUID("GPisochronTransportCar"),a.title="Voiture",i.appendChild(a)}if("Pieton"===s){var l=document.createElement("input");l.id=this._addUID("GPisochronTransportPedestrian"),l.type="radio",l.name="GPisochronTransport",0===o&&(l.checked=!0),l.addEventListener?l.addEventListener("change",(function(t){e.onIsoModeTransportChange(t)})):l.attachEvent&&l.attachEvent("onchange",(function(t){e.onIsoModeTransportChange(t)})),l.value="Pieton",i.appendChild(l);var c=document.createElement("label");c.className="GPisochronTransportImg",c.htmlFor=this._addUID("GPisochronTransportPedestrian"),c.title="Piéton",i.appendChild(c)}}return i},_createIsoPanelFormModeChoiceDirectionElement:function(t){var e=this,i=document.createElement("div");i.id=this._addUID("GPisochronDirectionChoice");var n=document.createElement("span");n.className="GPisochronModeLabel",n.innerHTML="Sens de parcours",i.appendChild(n);var o=document.createElement("select");o.id=this._addUID("GPisochronDirectionSelect"),o.className="GPinputSelect",o.addEventListener("change",(function(t){e.onIsoModeDirectionChange(t)}));for(var s=0;s<t.length;s++){var r=t[s];if("departure"===r.toLowerCase()){var a=document.createElement("option");0===s&&(a.selected="selected"),a.value="departure",a.text="Départ",o.appendChild(a)}if("arrival"===r.toLowerCase()){var l=document.createElement("option");0===s&&(l.selected="selected"),l.value="arrival",l.text="Arrivée",o.appendChild(l)}}return i.appendChild(o),i},_createShowIsoExclusionsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowIsoExclusions"),t.type="checkbox",t},_createShowIsoExclusionsPictoElement:function(){var t=document.createElement("label");return t.id=this._addUID("GPshowIsoExclusionsPicto"),t.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto",t.htmlFor=this._addUID("GPshowIsoExclusions"),t.title="Exclusions",t.style.top="240px",t},_createIsoPanelFormExclusionsElement:function(){var t=document.createElement("div");t.id=this._addUID("GPisoExclusions");var e=document.createElement("span");return e.className="GPisoExclusionsLabel",e.innerHTML="Passages autorisés",t.appendChild(e),t},_createIsoPanelFormExclusionOptionsElement:function(t){var e=this,i=document.createElement("div");for(var n in i.className="GPisoExclusionsOptions",t)if(t.hasOwnProperty(n)){var o=t[n];switch(n){case"toll":var s=document.createElement("input");s.id=this._addUID("GPisoExclusionsToll"),s.type="checkbox",s.checked=!o,s.addEventListener?s.addEventListener("change",(function(t){e.onIsoExclusionsChange(t)})):s.attachEvent&&s.attachEvent("onchange",(function(t){e.onIsoExclusionsChange(t)})),s.value="Toll",i.appendChild(s);var r=document.createElement("label");r.className="GPisoExclusionsOption",r.htmlFor=this._addUID("GPisoExclusionsToll"),r.innerHTML="Péages",i.appendChild(r);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GPisoExclusionsTunnel"),a.type="checkbox",a.checked=!o,a.addEventListener?a.addEventListener("change",(function(t){e.onIsoExclusionsChange(t)})):a.attachEvent&&a.attachEvent("onchange",(function(t){e.onIsoExclusionsChange(t)})),a.value="Tunnel",i.appendChild(a);var l=document.createElement("label");l.className="GPisoExclusionsOption",l.htmlFor=this._addUID("GPisoExclusionsTunnel"),l.innerHTML="Tunnels",i.appendChild(l);break;case"bridge":var c=document.createElement("input");c.id=this._addUID("GPisoExclusionsBridge"),c.type="checkbox",c.checked=!o,c.addEventListener?c.addEventListener("change",(function(t){e.onIsoExclusionsChange(t)})):c.attachEvent&&c.attachEvent("onchange",(function(t){e.onIsoExclusionsChange(t)})),c.value="Bridge",i.appendChild(c);var h=document.createElement("label");h.className="GPisoExclusionsOption",h.htmlFor=this._addUID("GPisoExclusionsBridge"),h.innerHTML="Ponts",i.appendChild(h)}}return i},_createIsoSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPisochronSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Calculer",t},_createIsoFormResetElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPisochronReset"),e.title="Réinitialiser les paramètres",e.addEventListener("click",(function(e){t.onIsoResetClick(e)})),e}};var Na=Xn.getLogger("Isocurve");const Ua=Vn().Control.extend({includes:Ga,options:{position:"topleft",collapsed:!0,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],disableReverse:!1,isocurveOptions:{},autocompleteOptions:{}},initialize:function(t){Vn().Util.setOptions(this,t),this._uid=Jn.generate(),this._isDesktop=this._detectSupport(),this._waitingContainer=null,this._showContainer=null,this._pictoContainer=null,this._formContainer=null,this._submitContainer=null,this._currentTransport=null,this._currentDirection=null,this._currentComputation=null,this._currentTimeHour=0,this._currentTimeMinute=0,this._currentDistance=0,this._currentExclusions=[],this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions(),this._currentPoint=null,this._geojsonIso=null,this._waiting=!1,this._timer=null,this._currentIsoResults=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},onAdd:function(t){var e=this._container=this._initLayout(t);return Vn().DomEvent.disableClickPropagation(e).disableScrollPropagation(e),e},onRemove:function(){},_initTransport:function(){this._currentTransport="Voiture";var t=this.options.graphs;t&&0!==t.length||(this.options.graphs=["Voiture","Pieton"]),Vn().Util.isArray(t)&&t.length&&("Voiture"!==t[0]&&"Pieton"!==t[0]||(this._currentTransport=t[0]));var e=this.options.isocurveOptions;e.graph&&(this._currentTransport=e.graph)},_initDirection:function(){this._currentDirection="departure";var t=this.options.directions;t&&0!==t.length||(this.options.directions=["departure","arrival"]),Vn().Util.isArray(t)&&t.length&&("departure"!==t[0]&&"arrival"!==t[0]||(this._currentDirection=t[0]));var e=this.options.isocurveOptions;e.reverse||(this._currentDirection="departure"),!0===e.reverse&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])},_initComputation:function(){this._currentComputation="time";var t=this.options.methods;t&&0!==t.length||(this.options.methods=["time","distance"]),Vn().Util.isArray(t)&&t.length&&("time"!==t[0]&&"distance"!==t[0]||(this._currentComputation=t[0]));var e=this.options.isocurveOptions;e.method&&(this._currentComputation=e.method),e.time&&(this._currentComputation="time"),e.distance&&(this._currentComputation="distance")},_initExclusions:function(){this._currentExclusions=[];var t=this.options.exclusions;if((!t||"object"==typeof t&&0===Object.keys(t).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),t&&"object"==typeof t&&Object.keys(t).length)for(var e in t)t.hasOwnProperty(e)&&t.k&&this._currentExclusions.push(e);var i=this.options.isocurveOptions;Array.isArray(i.exclusions)&&(this._currentExclusions=i.exclusions)},_checkRightsManagement:function(){var t=null,e=[],i=null;i=this.options.isocurveOptions.apiKey,(e=(t=this.options.isocurveOptions.filterOptions)?t.type:[])&&0!==e.length||(e=["Voiture","Pieton"]);var n=Ma({key:i||this.options.apiKey,resources:e,services:["Isochrone"]});Na.log("rightManagementIsochrone",n),i=this.options.autocompleteOptions.apiKey,(e=(t=this.options.autocompleteOptions.filterOptions)?t.type:[])&&0!==e.length||(e=["PositionOfInterest","StreetAddress"]);var o=Ma({key:i||this.options.apiKey,resources:e,services:["AutoCompletion"]});Na.log("rightManagementAutoComplete",o),n||o||(this._noRightManagement=!0),o&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=o.AutoCompletion,this._resources.AutoCompletion.key=o.key),n&&(this._resources.Isochrone={},this._resources.Isochrone.resources=n.Isochrone,this._resources.Isochrone.key=n.key)},_detectSupport:function(){var t=!0,e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("iphone")&&-1===e.indexOf("ipod")&&-1===e.indexOf("ipad")&&-1===e.indexOf("android")&&-1===e.indexOf("mobile")&&-1===e.indexOf("blackberry")&&-1===e.indexOf("tablet")&&-1===e.indexOf("phone")&&-1===e.indexOf("touch")||(t=!1),-1===e.indexOf("msie")&&-1===e.indexOf("trident")||(t=!0),t},_initLayout:function(t){var e=this._createMainContainerElement(),i=this._showContainer=this._createShowIsoElement();e.appendChild(i),this.options.collapsed||(i.checked=!0);var n=this._pictoContainer=this._createShowIsoPictoElement();e.appendChild(n);var o=this._createIsoPanelElement(),s=this._createIsoPanelHeaderElement();o.appendChild(s);var r=this._formContainer=this._createIsoPanelFormElement(),a=this._createIsoPanelFormPointElement(t);r.appendChild(a);for(var l=!1,c=!1,h=this._createIsoPanelFormTypeChoiceElement(),u=0;u<this.options.methods.length;u++)"time"===this.options.methods[u]&&(l=0===u,h.appendChild(this._createIsoPanelFormTypeChoiceChronElement(l))),"distance"===this.options.methods[u]&&(c=0===u,h.appendChild(this._createIsoPanelFormTypeChoiceDistElement(c)));r.appendChild(h),r.appendChild(this._createIsoPanelFormValueIsochronElement(l)),r.appendChild(this._createIsoPanelFormValueIsodistanceElement(c));var d=this._createIsoPanelFormModeChoiceElement();if(d.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),d.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),r.appendChild(d),this.options.exclusions&&"object"==typeof this.options.exclusions&&0!==Object.keys(this.options.exclusions).length){r.appendChild(this._createShowIsoExclusionsElement()),r.appendChild(this._createShowIsoExclusionsPictoElement());var p=this._createIsoPanelFormExclusionsElement();p.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),r.appendChild(p)}var f=this._createIsoFormResetElement();r.appendChild(f);var m=this._submitContainer=this._createIsoSubmitFormElement();r.appendChild(m),o.appendChild(r);var g=this._waitingContainer=this._createIsoWaitingElement();return o.appendChild(g),e.appendChild(o),e},_createIsoPanelFormPointElement:function(t){return this._currentPoint=new Oa({apiKey:this.options.apiKey||null,tag:{id:0,unique:this._uid,label:"Départ",color:"red",display:!0},displayInfo:!0,disableReverse:this.options.disableReverse,autocompleteOptions:this.options.autocompleteOptions||null}),this._currentPoint.setMap(t),this._currentPoint.getContainer()},onShowIsoPanelClick:function(t){Na.log("onShowIsoPanelClick",t)},onIsoResetClick:function(t){Na.log("onIsoResetClick",t),this._clear()},onIsoTypeChoiceChange:function(t){var e=t.target.value;e&&("isodistance"===e&&(this._currentComputation="distance"),"isochron"===e&&(this._currentComputation="time"))},onIsoModeTransportChange:function(t){var e=t.target.value;e&&(this._currentTransport=e)},onIsoModeDirectionChange:function(t){var e=t.target.value;e&&(this._currentDirection=e)},onIsoValueChronTimeHourChange:function(t){var e=t.target.value;this._timeHourContainer=t.target,e&&(this._currentTimeHour=e)},onIsoValueChronTimeMinuteChange:function(t){var e=t.target.value;this._timeMinuteContainer=t.target,e&&(this._currentTimeMinute=e)},onIsoValueDistChange:function(t){var e=t.target.value;this._distanceContainer=t.target,e&&(this._currentDistance=e)},onIsoExclusionsChange:function(t){var e=t.target.value,i=t.target.checked;if(e){for(var n=!1,o=null,s=0;s<this._currentExclusions.length;s++)this._currentExclusions[s]===e&&(o=s,n=!0);n||i||this._currentExclusions.push(e),n&&i&&this._currentExclusions.splice(o,1)}},onIsoComputationSubmit:function(){var t,e;if(this._currentPoint&&this._currentPoint.getCoordinate&&this._currentPoint.getCoordinate())if("time"===this._currentComputation.toLowerCase()&&(t=3600*this._currentTimeHour+60*this._currentTimeMinute,Na.log("time : ",t)),"distance"===this._currentComputation.toLowerCase()&&(e=1e3*this._currentDistance,Na.log("distance : ",e)),t||e){if(!this._noRightManagement){this._displayWaitingContainer();var i=this;this._requestIsoCurve({position:i._currentPoint.getCoordinate(),graph:i._currentTransport,exclusions:i._currentExclusions,method:i._currentComputation,reverse:"arrival"===i._currentDirection.toLowerCase(),time:t,distance:e,smoothing:!0,timeout:7e3,protocol:"XHR",onSuccess:function(t){Na.log(t),t&&i._drawIsoResults(t)},onFailure:function(t){i._hideWaitingContainer(),i._clearIsoResultsGeometry(),Na.log(t.message)}})}}else Na.log("Missing time or distance parameter")},_requestIsoCurve:function(t){if(t&&("object"!=typeof t||0!==Object.keys(t).length)&&t.position&&!this._noRightManagement){var e=this._resources.Isochrone;if(e){var i=e.resources;if(i&&("object"!=typeof i||0!==Object.keys(i).length)){var n={};Vn().Util.extend(n,t),Vn().Util.extend(n,this.options.isocurveOptions);for(var o=!1,s=0;s<i.length;s++)i[s]===n.graph&&(o=!0);if(o){var r=this._resources.Isochrone.key;n.apiKey=this.options.isocurveOptions.apiKey||this.options.apiKey||r,n.ssl=this.options.ssl,Na.log(n),Ca.Services.isoCurve(n)}else Na.log("no rights for this service !?")}}}},_drawIsoResults:function(t){if(this._clearIsoResultsGeometry(),this._currentIsoResults=t,t.geometry){var e=this._map,i=t.geometry;this._geojsonIso=Vn().geoJson(i,{style:{color:"#ff7800",weight:5,opacity:.65}}).addTo(e),this._hideWaitingContainer(),this._formContainer.className="GPisochroComponentHidden"}else this._hideWaitingContainer()},_clear:function(){this._initTransport(),this._initExclusions(),this._initComputation(),this._initDirection(),this._currentIsoResults=null,this._clearIsoResultsGeometry(),this._currentPoint.clear(),this._timeHourContainer&&(this._timeHourContainer.value=0),this._timeMinuteContainer&&(this._timeMinuteContainer.value=0),this._distanceContainer&&(this._distanceContainer.value=0)},_clearIsoResultsGeometry:function(){var t=this._map;null!=this._geojsonIso&&(t.removeLayer(this._geojsonIso),this._geojsonIso=null)},_displayWaitingContainer:function(){this._waitingContainer.className="GPisochronCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout((function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)}),16e3)},_hideWaitingContainer:function(){this._waiting&&(this._waitingContainer.className="GPisochronCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},compute:function(t,e,i){this._showContainer.checked||this._pictoContainer.click();var n=this._map;if(n){var o={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};if(Vn().Util.extend(o,i),this._currentPoint.setCoordinate(t),Vn().DomUtil.get("GPlocationOrigin_0-"+this._uid).value=t.lng+" , "+t.lat,this._currentTransport=o.transport,"Voiture"===o.transport?Vn().DomUtil.get("GPisochronTransportCar-"+this._uid).checked=!0:Vn().DomUtil.get("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=o.exclusions,this._currentComputation=o.method,"time"===o.method){var s=e.split(".");this._currentTimeHour=s[0]||0,Vn().DomUtil.get("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=s[1]||0,Vn().DomUtil.get("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,Vn().DomUtil.get("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=e,Vn().DomUtil.get("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,Vn().DomUtil.get("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=o.direction,Vn().DomUtil.get("GPisochronDirectionSelect-"+this._uid).selectedIndex="departure"===o.direction?0:1,this.onIsoComputationSubmit(),n.flyTo(t)}}});const ja={modulo:function(t,e){var i=t%e;return i*e<0?i+e:i},decimalToDMS:function(t,e,i){var n=this.modulo(t+180,360)-180,o=Math.abs(3600*n),s=i||0,r=Math.pow(10,s),a=Math.floor(o/3600),l=Math.floor((o-3600*a)/60),c=o-3600*a-60*l;return(c=Math.ceil(c*r)/r)>=60&&(c=0,l+=1),l>=60&&(l=0,a+=1),{d:a,m:l,s:c,direction:e.charAt(n<0?1:0)}},toInteger:function(t,e){var i=parseInt(t,e||10);return!isNaN(i)&&isFinite(i)?i:null},isInteger:function(t){if(isNaN(t))return!1;var e=parseFloat(t);return(0|e)===e},toFloat:function(t){var e=parseFloat(t);return!isNaN(e)&&isFinite(e)?e:null}};const Fa={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmousePosition"),t.className="GPwidget",t},_createShowMousePositionElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMousePosition"),t.type="checkbox",t},_createShowMousePositionPictoElement:function(t){var e=this,i=document.createElement("label");i.id=this._addUID("GPshowMousePositionPicto"),i.className="GPshowAdvancedToolPicto",i.htmlFor=this._addUID("GPshowMousePosition"),i.title="Afficher les coordonnées du curseur",i.addEventListener("click",(function(i){var n="";document.getElementById(e._addUID("GPshowMousePosition")).checked||t||(n="GPmapCenterVisible"),document.getElementById("GPmapCenter").className=n,e.onShowMousePositionClick(i)}));var n=document.createElement("span");return n.id=this._addUID("GPshowMousePositionOpen"),n.className="GPshowAdvancedToolOpen",i.appendChild(n),i},_createMousePositionPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmousePositionPanel"),t.className="GPpanel",t},_createMapCenter:function(){var t=document.createElement("div");return t.id="GPmapCenter",t.className="",t},_createMousePositionPanelHeaderElement:function(){var t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Coordonnées",t.appendChild(e);var i=document.createElement("div");i.id="GPmousePositionPanelClose",i.className="GPpanelClose",i.title="Fermer le panneau";var n=this;return i.addEventListener?i.addEventListener("click",(function(){document.getElementById(n._addUID("GPshowMousePositionPicto")).click()}),!1):i.attachEvent&&i.attachEvent("onclick",(function(){document.getElementById(n._addUID("GPshowMousePositionPicto")).click()})),t.appendChild(i),t},_createMousePositionPanelBasicElement:function(t,e,i,n){t=void 0===t||t,e=void 0===e||e,i=void 0!==i&&i;var o=document.createElement("div");return o.id=this._addUID("GPmousePositionBasicPanel"),o.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,i,n)),o.appendChild(this._createMousePositionPanelEditToolsElement(i)),o.appendChild(this._createMousePositionPanelBasicAltitudeElement(t)),o},_createCoordinateElement:function(t,e){var i=this;if(-1===["Lon","Lat"].indexOf(t))return[];var n=[],o=document.createElement("input");o.id=this._addUID("GPmousePosition"+t),o.title=!0===e?"Cliquer pour saisir des coordonnées":"",o.readOnly=!0,e&&(o.addEventListener("click",(function(){i.onMousePositionEditModeClick(!0)})),o.addEventListener("change",(function(e){this.classList.remove("error"),i.validateExtentCoordinate(t,this.value,e)?this.classList.remove("error"):this.classList.add("error")}))),n.push(o);var s=document.createElement("span");return s.className="GPmousePositionUnits",n.push(s),n},_createDMSCoordinateElement:function(t,e){if(-1===["Lon","Lat"].indexOf(t))return[];var i=this,n=[],o=document.createElement("input");o.id=this._addUID("GPmousePosition"+t+"Degrees"),o.className="GPSexagesimal",o.setAttribute("name","degrees"),o.title=!0===e?"Cliquer pour saisir des coordonnées":"",o.readOnly=!0,o.dataset.min=0,o.dataset.max="Lon"===t?180:90,e&&(o.addEventListener("click",(function(){i.onMousePositionEditModeClick(!0)})),o.addEventListener("change",(function(){this.classList.remove("error"),i._checkDMSDegrees(t,this)?this.classList.remove("error"):this.classList.add("error")}))),n.push(o);var s=document.createElement("span");s.className="GPmousePositionSexagesimalLabel",s.innerHTML="°",n.push(s);var r=document.createElement("input");r.id=this._addUID("GPmousePosition"+t+"Minutes"),r.className="GPSexagesimal",r.setAttribute("name","minutes"),r.title=!0===e?"Cliquer pour saisir des coordonnées":"",r.readOnly=!0,r.dataset.min=0,r.dataset.max=59,e&&(r.addEventListener("click",(function(){i.onMousePositionEditModeClick(!0)})),r.addEventListener("change",(function(){this.classList.remove("error"),i._checkDMSElement(this)?this.classList.remove("error"):this.classList.add("error")}))),n.push(r);var a=document.createElement("span");a.className="GPmousePositionSexagesimalLabel",a.innerHTML="'",n.push(a);var l=document.createElement("input");l.id=this._addUID("GPmousePosition"+t+"Seconds"),l.className="GPSexagesimalsec",l.setAttribute("name","seconds"),l.title=!0===e?"Cliquer pour saisir des coordonnées":"",l.readOnly=!0,l.dataset.min=0,l.dataset.max=59,e&&(l.addEventListener("click",(function(){i.onMousePositionEditModeClick(!0)})),l.addEventListener("change",(function(){this.classList.remove("error"),i._checkDMSElement(this,!0)?this.classList.remove("error"):this.classList.add("error")}))),n.push(l);var c=document.createElement("span");c.className="GPmousePositionSexagesimalLabel",c.innerHTML="''",n.push(c);var h=document.createElement("select");h.id=this._addUID("GPmousePosition"+t+"Direction"),h.className="GPmousePositionDirection",h.setAttribute("name","direction"),h.disabled=!0;var u=document.createElement("option");u.value="Lon"===t?"E":"N",u.innerHTML="Lon"===t?"E":"N",h.appendChild(u);var d=document.createElement("option");return d.value="Lon"===t?"O":"S",d.innerHTML="Lon"===t?"O":"S",h.appendChild(d),n.push(h),n},_createMousePositionPanelBasicCoordinateElement:function(t,e,i){var n=document.createElement("div");n.id=this._addUID("GPmousePositionCoordinate"),n.style.display=t?"block":"none";var o=document.createElement("div"),s=document.createElement("span");s.className="GPmousePositionLabel",s.id=this._addUID("GPmousePositionLatLabel"),s.innerHTML="Latitude : ",o.appendChild(s);var r,a=document.createElement("span");a.id=this._addUID("GPmousePositionLatCoordinate"),r="DMS"===i?this._createDMSCoordinateElement("Lat",e):this._createCoordinateElement("Lat",e);for(var l=0;l<r.length;l++)a.appendChild(r[l]);o.appendChild(a),n.appendChild(o);var c=document.createElement("div"),h=document.createElement("span");h.className="GPmousePositionLabel",h.id=this._addUID("GPmousePositionLonLabel"),h.innerHTML="Longitude : ",c.appendChild(h);var u,d=document.createElement("span");d.id=this._addUID("GPmousePositionLonCoordinate"),u="DMS"===i?this._createDMSCoordinateElement("Lon",e):this._createCoordinateElement("Lon",e);for(var p=0;p<u.length;p++)d.appendChild(u[p]);return c.appendChild(d),n.appendChild(c),n},_createMousePositionPanelBasicAltitudeElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.style.display=t?"block":"none";var i=document.createElement("span");i.className="GPmousePositionLabel",i.innerHTML="Altitude : ",e.appendChild(i);var n=document.createElement("span");n.className="GPmousePositionCoords",n.id=this._addUID("GPmousePositionAlt"),n.innerHTML="...",e.appendChild(n);var o=document.createElement("span");return o.className="GPmousePositionAltitudeUnits",o.innerHTML="m",e.appendChild(o),e},_createMousePositionPanelEditToolsElement:function(t){var e=this,i=document.createElement("div");i.className="GPmousePositionPanelEditTools",i.id=this._addUID("GPmousePositionPanelEditTools"),t||(i.style.display="none");var n=document.createElement("span");n.className="GPmousePositionEditTool",n.id=this._addUID("GPmousePositionLocate"),n.title=!0===t?"Cliquer pour saisir des coordonnées":"",t&&n.addEventListener("click",(function(){e.onMousePositionEditModeLocateClick()})),i.appendChild(n);var o=document.createElement("span");return o.className="GPmousePositionEditTool",o.id=this._addUID("GPmousePositionCloseEdit"),o.title="Quitter la saisie des coordonnées",o.style.display="none",t&&o.addEventListener("click",(function(){e.onMousePositionEditModeClick(!1)})),i.appendChild(o),i},_createShowMousePositionSettingsElement:function(t){var e=[],i=this,n=document.createElement("input");n.type="checkbox",n.id=this._addUID("GPshowMousePositionSettings");var o=document.createElement("label");return o.id=this._addUID("GPshowMousePositionSettingsPicto"),o.htmlFor=this._addUID("GPshowMousePositionSettings"),o.title="Réglages",o.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto",o.style.display=t?"block":"none",o.addEventListener?o.addEventListener("click",(function(t){"function"==typeof i.onShowMousePositionSettingsClick&&i.onShowMousePositionSettingsClick(t)}),!1):o.attachEvent&&o.attachEvent("onclick",(function(t){"function"==typeof i.onShowMousePositionSettingsClick&&i.onShowMousePositionSettingsClick(t)})),e.push(n),e.push(o),e},_createMousePositionSettingsElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=void 0===t||t?"block":"none";var i=document.createElement("span");return i.className="GPmousePositionSettingsLabel",i.innerHTML="Système de référence",e.appendChild(i),e},_createMousePositionSettingsSystemsElement:function(t){var e=this,i=document.createElement("select");i.id=this._addUID("GPmousePositionProjectionSystem"),i.className="GPinputSelect GPmousePositionSettingsSelect",i.addEventListener("change",(function(t){e.onMousePositionProjectionSystemChange(t)})),i.addEventListener("mouseover",(function(t){"OPTION"!==t.target.nodeName&&e.onMousePositionProjectionSystemMouseOver(t)}));for(var n=0;n<t.length;n++){var o=t[n],s=document.createElement("option");s.value=o.code,s.text=o.label||n,i.appendChild(s)}return i},_createMousePositionSettingsUnitsElement:function(t){var e=this,i=document.createElement("select");i.id=this._addUID("GPmousePositionProjectionUnits"),i.className="GPinputSelect GPmousePositionSettingsSelect",i.addEventListener("change",(function(t){e.onMousePositionProjectionUnitsChange(t)}));for(var n=0;n<t.length;n++){var o=t[n],s=document.createElement("option");s.value=o.code?o.code:n,s.text=o.label||n,i.appendChild(s)}return i},_resetLabelElements:function(t){document.getElementById(this._addUID("GPmousePositionLatLabel")).innerHTML="Geographical"===t?"Latitude :":"X :",document.getElementById(this._addUID("GPmousePositionLonLabel")).innerHTML="Geographical"===t?"Longitude :":"Y :"},_resetUnitElements:function(t){var e="";"M"!==t&&"KM"!==t||(e=t.toLowerCase());for(var i=document.getElementsByClassName("GPmousePositionUnits"),n=0;n<i.length;n++)i[n].innerHTML=e},_resetCoordinateElements:function(t,e,i){for(var n,o=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));o.firstChild;)o.removeChild(o.firstChild);n="DMS"===i?this._createDMSCoordinateElement("Lat",t):this._createCoordinateElement("Lat",t);for(var s=0;s<n.length;s++)o.appendChild(n[s]);for(var r,a=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));a.firstChild;)a.removeChild(a.firstChild);r="DMS"===i?this._createDMSCoordinateElement("Lon",t):this._createCoordinateElement("Lon",t);for(var l=0;l<r.length;l++)a.appendChild(r[l])},_setEditMode:function(t){document.getElementById(this._addUID("GPmousePositionLocate")).title=t?"Aller à la position ...":"Cliquer pour saisir des coordonnées",document.getElementById(this._addUID("GPmousePositionCloseEdit")).style.display=t?"inline-block":"none";for(var e="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",i=document.querySelectorAll(e+" input"),n=0;n<i.length;n++)i[n].readOnly=!t,t&&(i[n].value="",i[n].classList.remove("error"));for(var o=document.querySelectorAll(e+" select"),s=0;s<o.length;s++)o[s].disabled=!t},_checkDMSElement:function(t,e){var i=void 0!==e,n=t.value;if(i&&(n=n.replace(",",".")),isNaN(n))return!1;var o=parseFloat(n);if(!i&&(0|o)!==o)return!1;var s=Number(t.dataset.min),r=Number(t.dataset.max);return o>=s&&o<=r},_checkDMSDegrees:function(t,e){if(isNaN(e.value))return!1;var i=parseFloat(e.value);if((0|i)!==i)return!1;var n=Number(e.dataset.min),o=Number(e.dataset.max);if(i<n||i>o)return!1;var s=document.getElementById(this._addUID("GPmousePosition"+t+"Minutes")),r=document.getElementById(this._addUID("GPmousePosition"+t+"Seconds"));return i>=o?(s.dataset.max=0,r.dataset.max=0):(s.dataset.max=59,r.dataset.max=59.9999),!0},GPdisplayCoords:function(t){if(t){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),i=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(t.x||t.y?(i.innerHTML="X : ",e.innerHTML="Y : "):t.e||t.n?(i.innerHTML="E : ",e.innerHTML="N : "):(i.innerHTML="Latitude : ",e.innerHTML="Longitude : "),"object"==typeof t.lat&&"object"==typeof t.lng){var n={lng:"Lon",lat:"Lat"},o=["Degrees","Minutes","Seconds"];for(var s in n)for(var r=0;r<o.length;++r){var a="GPmousePosition"+n[s]+o[r],l=document.getElementById(this._addUID(a)),c=o[r].charAt(0).toLowerCase();l.value=t[s][c]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=t.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=t.lat.direction}else{var h=document.getElementById(this._addUID("GPmousePositionLat")),u=document.getElementById(this._addUID("GPmousePositionLon"));h.value=t.x||t.lat||t.e||"0",u.value=t.y||t.lng||t.lon||t.n||"0";for(var d=void 0===t.unit?"":t.unit,p=document.getElementsByClassName("GPmousePositionUnits"),f=0;f<p.length;++f)p[f].innerHTML=d}}},GPdisplayElevation:function(t,e,i,n){var o,s=this;e||(e=500),clearTimeout(o),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",null==i&&(i=-99999),null==n&&(n=99980);var r=i+n,a=i-n;t&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(o=setTimeout((function(){s.onRequestAltitude(t,(function(t){a<t&&t<r?s.GPresetElevation():document.getElementById(s._addUID("GPmousePositionAlt")).innerHTML=t}))}),e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}};var za=i(280),Ba=(i(751),{isLoaded:!1,get:function(t){if(""!==t&&null!=t){var e=t.split(":");if(2===e.length){var i=e[0],n=e[1];if(this.hasOwnProperty(i)&&this[i].hasOwnProperty(n))return this[i][n]}}},exist:function(t){if(""===t||null==t)return!1;var e=t.split(":");if(2!==e.length)return!1;var i=e[0],n=e[1];return!!this.hasOwnProperty(i)&&!!this[i].hasOwnProperty(n)},load:function(t){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],i=0;i<e.length;i++){var n=e[i],o=this[n];for(var s in o)if(o.hasOwnProperty(s)){var r=n+":"+s;t.defs(r,this.get(r))}}this.isLoaded=!0}},loadByDefault:function(t){var e={EPSG:{2154:Ba.EPSG[2154],27571:Ba.EPSG[27571],27572:Ba.EPSG[27572],27573:Ba.EPSG[27573],27574:Ba.EPSG[27574]},CRS:{84:Ba.CRS[84]},IGNF:{LAMB93:Ba.IGNF.LAMB93,LAMBE:Ba.IGNF.LAMBE,LAMB1:Ba.IGNF.LAMB1,LAMB2:Ba.IGNF.LAMB2,LAMB3:Ba.IGNF.LAMB3,LAMB4:Ba.IGNF.LAMB4,RGF93G:Ba.IGNF.RGF93G,WGS84G:Ba.IGNF.WGS84G}};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];for(var o in n)if(n.hasOwnProperty(o)){var s=i+":"+o;t.defs(s,n[o])}}},loadByName:function(t,e){if(!this.exist(e))return!1;try{t.defs(e,this.get(e))}catch(t){return!1}return!0},EPSG:{3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}});const qa=Ba;const Ha={instance:null,build:function(){if(!this.instance){var t=new(Vn().Proj.CRS)("EPSG:2154",qa.get("EPSG:2154"),{resolutions:this._getResolutions(),origin:this._getOrigin()});this.instance=t}return this.instance},_getResolutions:function(){var t=[];Sa.isConfigLoaded()&&(t=Sa.getTileMatrix("LAMB93").nativeResolutions);return t.length?t:[104579.22454989408,52277.53235379051,26135.487078595408,13066.891381800004,6533.228604113456,3266.5595244626675,1633.2660045974187,816.6295549860224,408.31391467683596,204.15674151090204,102.07831678324082,51.0391448966112,25.519569074269395,12.759783693647506,6.379891635966491,3.18994576530532,1.5949728694977277,.7974864315474559,.398743214900604,.19937160727567999,.099685803696052,.049842901818919996]},_getOrigin:function(){return[0,12e6]}};const Wa={instance:null,build:function(){if(!this.instance){var t=new(Vn().Proj.CRS)("EPSG:27572",qa.get("EPSG:27572"),{resolutions:this._getResolutions(),origin:this._getOrigin()});this.instance=t}return this.instance},_getResolutions:function(){var t=[];if(Sa.isConfigLoaded()){var e=Sa.getTileMatrix("LAMB2E");e&&Object.keys(e).length&&(t=e.nativeResolutions)}return t.length?t:[104579.22454989408,52277.53235379051,26135.487078595408,13066.891381800004,6533.228604113456,3266.5595244626675,1633.2660045974187,816.6295549860224,408.31391467683596,204.15674151090204,102.07831678324082,51.0391448966112,25.519569074269395,12.759783693647506,6.379891635966491,3.18994576530532,1.5949728694977277,.7974864315474559,.398743214900604,.19937160727567999,.099685803696052,.049842901818919996]},_getOrigin:function(){return[0,12e6]}};const Va={instance:null,build:function(){if(!this.instance){var t=new(Vn().Proj.CRS)("EPSG:4326",qa.get("EPSG:4326"),{resolutions:this._getResolutions(),origin:[-180,90]});this.instance=t}return this.instance},_getResolutions:function(){var t=[];return Sa.isConfigLoaded()&&(t=Sa.getResolutions()),t.length?t:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953126,858306884765628e-19,429153442382813e-19,214576721191407e-19,107288360595703e-19,536441802978517e-20,268220901489259e-20,13411045074463e-19,6.70552253723145e-7,3.3527612686157e-7]},_getOrigin:function(){}};qa.load(za.default);const Za={EPSG2154:function(){return Ha.build()},EPSG27572:function(){return Wa.build()},EPSG4326:function(){return Va.build()}};var Ya=Xn.getLogger("mouseposition");const Xa=Vn().Control.extend({includes:Fa,options:{position:"bottomleft",collapsed:!0,units:[],systems:[],displayAltitude:!0,displayCoordinates:!0,editCoordinates:!1,altitude:{triggerDelay:200,responseDelay:500,noDataValue:-99999,noDataValueTolerance:9e4,serviceOptions:{}}},initialize:function(t){Vn().Util.extend(this.options,t),this._uid=Jn.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=this._detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._projectionSystemsContainer=null,this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showContainer=null,this._pictoContainer=null,this._panelContainer=null,this._panelHeaderContainer=null,this.options.displayAltitude||this.options.displayCoordinates||(this.options.displayCoordinates=!0),this.options.displayCoordinates||(this.options.editCoordinates=!1),this._isEditing=!1,this._noRightManagement=!1,this.options.displayAltitude&&this._checkRightsManagement(),Vn().Util.setOptions(this,this.options)},onAdd:function(t){var e=this._container=this._initLayout();return this.options.collapsed||(this._isDesktop?t.on("mousemove",this.onMouseMove,this):t.on("move",this.onMapMove,this)),Vn().DomEvent.disableClickPropagation(e).disableScrollPropagation(e),Vn().DomEvent.addListener(e,"mousemove",Vn().DomEvent.stopPropagation).addListener(e,"mousemove",Vn().DomEvent.preventDefault),e},onRemove:function(t){t.off("mousemove",this.onMouseMove)},_initProjectionSystems:function(){for(var t=[{label:"Géographique",crs:Vn().CRS.Simple,type:"Geographical"},{label:"Web Mercator",crs:Vn().CRS.EPSG3395,type:"Metric"},{label:"Lambert 93",crs:Za.EPSG2154,type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:Za.EPSG27572,type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],e=this.options.systems,i=0;i<e.length;i++){var n=e[i];if(n.label)if(n.crs){n.type||(Ya.warn("type srs not defined, use 'Metric' by default !"),n.type="Metric"),this._projectionSystems.push(e[i]);for(var o=!1,s=0;s<t.length;s++){var r=t[s];n.crs===r.crs&&(o=!0,Ya.info("crs '{}' already configured by default",r.code))}o||Ya.info("crs '{}' not found, it's a new projection",n.code||n.label)}else Ya.error("crs not defined !");else Ya.error("not defined !")}0===this._projectionSystems.length&&(this._projectionSystems=t);for(var a=0;a<this._projectionSystems.length;++a)this._projectionSystems[a].code=a},_initProjectionUnits:function(){var t={Geographical:[{code:"DEC",label:"degrés décimaux",format:this._displayDEC},{code:"DMS",label:"degrés sexagésimaux",format:this._displayDMS},{code:"RAD",label:"radians",format:this._displayRAD},{code:"GON",label:"grades",format:this._displayGON}],Metric:[{code:"M",label:"mètres",format:this._displayMeter},{code:"KM",label:"kilomètres",format:this._displayKMeter}]},e=this.options.units;for(var i in t)if(t.hasOwnProperty(i)){for(var n=!1,o=0;o<t[i].length;o++)for(var s=t[i][o],r=0;r<e.length;r++){var a=e[r];s.code===a&&(n=!0,this._projectionUnits[i]||(this._projectionUnits[i]=[]),this._projectionUnits[i].push(s))}n||(this._projectionUnits[i]=t[i])}0===Object.keys(this._projectionUnits).length&&(this._projectionUnits=t)},_checkRightsManagement:function(){var t=Ma({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});this._noRightManagement=!t,this.options.apiKey||(this.options.apiKey=t?t.key:null)},_detectSupport:function(){var t=!0,e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("iphone")&&-1===e.indexOf("ipod")&&-1===e.indexOf("ipad")&&-1===e.indexOf("android")&&-1===e.indexOf("mobile")&&-1===e.indexOf("blackberry")&&-1===e.indexOf("tablet")&&-1===e.indexOf("phone")&&-1===e.indexOf("touch")||(t=!1),-1===e.indexOf("msie")&&-1===e.indexOf("trident")||(t=!0),t},_initLayout:function(){var t=this._createMainContainerElement(),e=this._showContainer=this._createShowMousePositionElement();t.appendChild(e),this.options.collapsed||(e.checked=!0);var i=this._pictoContainer=this._createShowMousePositionPictoElement(this._isDesktop);t.appendChild(i);var n=this._panelContainer=this._createMousePositionPanelElement(),o=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement();n.appendChild(o);var s=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates);n.appendChild(s);for(var r=this._createShowMousePositionSettingsElement(this.options.displayCoordinates),a=0;a<r.length;a++)n.appendChild(r[a]);var l=this._createMousePositionSettingsElement(),c=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),h=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);l.appendChild(c),l.appendChild(h),n.appendChild(l),t.appendChild(n);var u=this._createMapCenter();return this._map.getContainer().appendChild(u),t},_setElevationPanel:function(t){t||(Vn().DomUtil.get(this._addUID("GPmousePositionAltitude")).style.display="none"),t&&this._noRightManagement&&(Vn().DomUtil.get(this._addUID("GPmousePositionAlt")).innerHTML="no right !")},_setCoordinatePanel:function(t){t||(Vn().DomUtil.get(this._addUID("GPmousePositionCoordinate")).style.display="none")},_setSettingsPanel:function(t){if(!t){var e=Vn().DomUtil.get("GPshowMousePositionSettingsPicto"),i=Vn().DomUtil.get(this._addUID("GPmousePositionSettings"));e.style.display="none",i.style.display="none"}},_setTypeUnitsPanel:function(t){for(var e=this._projectionUnitsContainer;e.firstChild;)e.removeChild(e.firstChild);for(var i=this._projectionUnits[t],n=0;n<i.length;n++){var o=i[n],s=document.createElement("option");s.value=o.code?o.code:n,s.text=o.label||n,e.appendChild(s)}var r=this._projectionUnits[t][0].code;"DMS"!==this._currentProjectionUnits&&"DMS"!==r||(this._resetCoordinateElements(this.options.editCoordinates,t,r),this._setEditMode(this._isEditing)),this._currentProjectionType=t,this._resetLabelElements(t),this._resetUnitElements(r),this._currentProjectionUnits=this._projectionUnits[t][0].code},_displayDEC:function(t){var e={};return e.lat=Ia.roundToDecimal(t.lat,6),e.lng=Ia.roundToDecimal(t.lng,6),e.unit="°",e},_displayDMS:function(t){var e={};return e.lat=Ia.decimalLatToDMS(t.lat,!0),e.lng=Ia.decimalLonToDMS(t.lng,!0),e},_displayRAD:function(t){var e={};return e.lat=Ia.decimalToRadian(t.lat),e.lng=Ia.decimalToRadian(t.lng),e.unit="rad",e},_displayGON:function(t){var e={};return e.lat=Ia.decimalToGrade(t.lat),e.lng=Ia.decimalToGrade(t.lng),e.unit="gon",e},_displayMeter:function(t){var e={};return e.x=Vn().Util.formatNum(t.x,2),e.y=Vn().Util.formatNum(t.y,2),e.unit="m",e},_displayKMeter:function(t){var e={};return e.x=Vn().Util.formatNum(t.x/1e3,2),e.y=Vn().Util.formatNum(t.y/1e3,2),e.unit="km",e},_project:function(t,e){if("function"==typeof e&&(e=e()),"object"==typeof e){if(e===Vn().CRS.Simple)return t;if(e.projection&&"object"==typeof e.projection){var i=e.projection.project(t);return"Geographical"===this._currentProjectionType&&(i.lat=i.y,i.lng=i.x),i&&0!==Object.keys(i).length||Ya.error("Failed to project with crs code : "+e.code),i}Ya.error("projection is not an object !")}else Ya.log("crs is not an object !")},_unproject:function(t){var e=this._currentProjectionSystems.crs;if(e)if("function"==typeof e&&(e=e()),"object"==typeof e){if(e===Vn().CRS.Simple)return{lat:t.y,lng:t.x};if("Geographical"===this._currentProjectionType)return{lat:t.y,lng:t.x};if(e.projection&&"object"==typeof e.projection){var i=e.projection.unproject(t);return i&&0!==Object.keys(i).length||Ya.error("Failed to unproject coordinate"),i}Ya.error("projection is not an object !")}else Ya.log("crs is not an object !");else Ya.log("system crs not found")},_setCoordinate:function(t){for(var e=this._currentProjectionSystems.type,i=null,n=this._projectionUnits[e],o=0;o<n.length;o++)if(n[o].code===this._currentProjectionUnits){i=n[o].format;break}var s,r=this._currentProjectionSystems.crs;r?(s=i(this._project(t,r)))&&0!==Object.keys(s).length&&this.GPdisplayCoords(s):Ya.error("crs not found !")},_setElevation:function(t){var e=this.options.altitude.responseDelay,i=this.options.altitude.noDataValue,n=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(t,e,i,n)},onMoveStopped:function(t){this._noRightManagement||this._setElevation(t)},onMouseMove:function(t){var e=this,i=t.latlng;this._setCoordinate(i),clearTimeout(this._timer),this._timer=setTimeout((function(){e.onMoveStopped(i)}),this.options.altitude.triggerDelay)},onMapMove:function(){var t=this,e=this._map.getCenter();this._setCoordinate(e),clearTimeout(this._timer),this._timer=setTimeout((function(){t.onMoveStopped(e)}),this.options.altitude.triggerDelay)},onRequestAltitude:function(t,e){if(Ya.log("onRequestAltitude"),t&&0!==Object.keys(t).length&&this.options.displayAltitude&&!this._noRightManagement){Ya.log(t);var i={};Vn().Util.extend(i,this.options.altitude.serviceOptions),Vn().Util.extend(i,{zonly:!0,positions:[{lon:t.lon||t.lng,lat:t.lat}]}),Vn().Util.extend(i,{scope:this,onSuccess:function(t){Ya.log(t),t&&Object.keys(t).length&&e.call(this,t.elevations[0].z)},onFailure:function(t){Ya.error(t.message)}}),Vn().Util.extend(i,{apiKey:i.apiKey||this.options.apiKey}),Vn().Util.extend(i,{ssl:this.options.ssl}),Ya.log(i),Ca.Services.getAltitude(i)}},onShowMousePositionClick:function(t){Ya.log(t);var e=this._map;this._showContainer.checked?this._isDesktop?e.off("mousemove",this.onMouseMove,this):e.off("move",this.onMapMove,this):this._isDesktop?e.on("mousemove",this.onMouseMove,this):e.on("move",this.onMapMove,this),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatePanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)},onMousePositionEditModeClick:function(t){if(this.options.editCoordinates&&this._isEditing!==t){this._isEditing=t,this._setEditMode(this._isEditing);var e=this._map;this._isDesktop?this._isEditing?e.off("mousemove",this.onMouseMove,this):e.on("mousemove",this.onMouseMove,this):this._isEditing?e.off("move",this.onMapMove,this):e.on("move",this.onMapMove,this)}},_convertCoordinate:function(t,e){var i;if("DEC"===e||"DMS"===e)i=t;else if("M"===e)i=t;else if("KM"===e)i=1e3*t;else if("RAD"===e){i=(t*(180/Math.PI).toFixed(20)).toFixed(20)}else if("GON"===e){i=(t*.9.toFixed(20)).toFixed(20)}return i},validateExtentCoordinate:function(t,e,i){if(void 0!==i)return!0;if(-1===["Lon","Lat"].indexOf(t))return!1;var n=this._currentProjectionSystems.geoBBox;if(void 0===n)return!0;if(n){var o=[n.left,n.bottom,n.right,n.top],s=this._currentProjectionUnits,r=this._unproject({x:"Lon"===t?this._convertCoordinate(e,s):0,y:"Lat"===t?this._convertCoordinate(e,s):0});if("Lon"===t&&(r.lng<o[0]||r.lng>o[2]))return Ya.warn("coordinates (lon) out of extent !?"),!1;if("Lat"===t&&(r.lat<o[1]||r.lat>o[3]))return Ya.warn("coordinates (lat) out of extent !?"),!1}return!0},_getCoordinate:function(t){var e=Vn().DomUtil.get(this._addUID("GPmousePosition"+t+"Degrees")),i=e.value;if(!i)return null;if(i=i.replace(",","."),!ja.isInteger(i))return null;var n=ja.toInteger(i);if(n<Number(e.dataset.min)||n>Number(e.dataset.max))return null;var o=Vn().DomUtil.get(this._addUID("GPmousePosition"+t+"Direction")).value,s=Vn().DomUtil.get(this._addUID("GPmousePosition"+t+"Minutes")),r=s.value;if(r&&(r=r.replace(",","."),ja.isInteger(r))){var a=ja.toInteger(r);a>=Number(s.dataset.min)&&a<=Number(s.dataset.max)&&(n+=a/60)}var l=Vn().DomUtil.get(this._addUID("GPmousePosition"+t+"Seconds")),c=l.value;if(c){c=c.replace(",",".");var h=ja.toFloat(c);h&&h>=Number(l.dataset.min)&&h<=Number(l.dataset.max)&&(n+=h/3600)}return"O"!==o&&"S"!==o||(n=-n),n},_locateDMSCoordinates:function(){var t={lat:this._getCoordinate("Lat"),lng:this._getCoordinate("Lon")};this.validateExtentCoordinate("Lon",t.lng)&&(this.validateExtentCoordinate("Lat",t.lat)&&this._map.panTo(t))},_locateCoordinates:function(){var t=Vn().DomUtil.get(this._addUID("GPmousePositionLon")).value;if(t=t.replace(",","."),t=parseFloat(t),!isNaN(t)){var e=Vn().DomUtil.get(this._addUID("GPmousePositionLat")).value;if(e=e.replace(",","."),e=parseFloat(e),!isNaN(e)){var i=null,n=null,o=null,s=null;if("Geographical"===this._currentProjectionType?(i=t,n=e):(o=e,s=t),this.validateExtentCoordinate("Lon",i||o)&&this.validateExtentCoordinate("Lat",n||s)){var r=this._currentProjectionUnits,a=this._unproject({x:this._convertCoordinate(null!==i?i:o,r),y:this._convertCoordinate(null!==n?n:s,r)});this._map.panTo(a)}}}},onMousePositionEditModeLocateClick:function(){this.options.editCoordinates&&(this._isEditing?"DMS"===this._currentProjectionUnits?this._locateDMSCoordinates():this._locateCoordinates():this.onMousePositionEditModeClick(!0))},onMousePositionProjectionSystemChange:function(t){Ya.log("onMousePositionProjectionSystemChange",t);var e=t.target.selectedIndex,i=t.target.options[e].value,n=t.target.options[e].label;Ya.log(e,i,n),this._setCurrentSystem(i)},_setCurrentSystem:function(t){for(var e=null,i=0;i<this._projectionSystems.length;++i)if(this._projectionSystems[i].code===Number(t)){e=this._projectionSystems[i].type;break}e?(e!==this._currentProjectionType&&this._setTypeUnitsPanel(e),this._currentProjectionSystems=this._projectionSystems[Number(t)],this._isDesktop||this.onMapMove()):Ya.log("system not found in projection systems container")},onMousePositionProjectionSystemMouseOver:function(t){Ya.log("onMousePositionProjectionSystemMouseOver",t);var e=this._map;if(e){var i=Vn().DomUtil.get(this._addUID("GPmousePositionProjectionSystem"));i.innerHTML="";for(var n=0;n<this._projectionSystems.length;n++){var o=this._projectionSystems[n],s=null;o.geoBBox&&(e.getBounds()._southWest.lng>o.geoBBox.right||e.getBounds()._southWest.lat>o.geoBBox.top||e.getBounds()._northEast.lng<o.geoBBox.left||e.getBounds()._northEast.lat<o.geoBBox.bottom)?o===this._currentProjectionSystems&&((s=document.createElement("option")).value=o.code,s.text=o.label||n,s.setAttribute("selected","selected"),s.setAttribute("disabled","disabled"),i.appendChild(s)):((s=document.createElement("option")).value=o.code,s.text=o.label||n,o===this._currentProjectionSystems&&s.setAttribute("selected","selected"),i.appendChild(s))}}},onMousePositionProjectionUnitsChange:function(t){Ya.log("onMousePositionProjectionUnitsChange",t);var e=t.target.selectedIndex,i=t.target.options[e].value,n=t.target.options[e].label;Ya.log(e,i,n);var o=this._currentProjectionUnits,s=this._currentProjectionUnits=i,r=this._currentProjectionType;this._resetLabelElements(r),this._resetUnitElements(s),"DMS"!==o&&"DMS"!==s||(this._resetCoordinateElements(this.options.editCoordinates,r,s),this._setEditMode(this._isEditing)),this._isDesktop||this.onMapMove()},moveTo:function(t,e,i){this._showContainer.checked||this._pictoContainer.click();var n=this._map;n&&(this.onMouseMove({latlng:t}),n.flyTo(t,e||10,i||{}))}});i(787);const Ka={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocoding"),t.className="GPwidget",t},_createShowReverseGeocodingElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowReverseGeocoding"),t.type="checkbox",t},_createShowReverseGeocodingPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowReverseGeocoding"),e.title="Ouvrir la recherche inverse",e.addEventListener?e.addEventListener("click",(function(){t.onShowReverseGeocodingClick()})):e.attachEvent&&e.attachEvent("onclick",(function(){t.onShowReverseGeocodingClick()}));var i=document.createElement("span");return i.id=this._addUID("GPshowReverseGeocodingOpen"),i.className="GPshowAdvancedToolOpen",e.appendChild(i),e},_createReverseGeocodingWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),t.className="GPreverseGeocodingCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPreverseGeocodingCalcWaiting",e.innerHTML="Recherche en cours...",t.appendChild(e),t},_createReverseGeocodingResultsPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingResultsPanel"),t.className="GPpanel GPreverseGeocodingComponentHidden",t},_createReverseGeocodingResultsListElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingResultsList"),t},_createReverseGeocodingResultElement:function(t,e){var i=this,n=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),o=document.createElement("div");o.id=this._addUID("ReverseGeocodedLocation_"+e),o.className="GPautoCompleteProposal",o.innerHTML=t,o.title=t,o.addEventListener?(o.addEventListener("mouseover",(function(t){i.onReverseGeocodingResultMouseOver(t)})),o.addEventListener("mouseout",(function(t){i.onReverseGeocodingResultMouseOut(t)})),o.addEventListener("click",(function(t){"function"==typeof i.onReverseGeocodingResultClick&&i.onReverseGeocodingResultClick(t)}))):o.attachEvent&&(o.attachEvent("onmouseover",(function(t){i.onReverseGeocodingResultMouseOver(t)})),o.attachEvent("onmouseout",(function(t){i.onReverseGeocodingResultMouseOut(t)})),o.attachEvent("onclick",(function(t){"function"==typeof i.onReverseGeocodingResultClick&&i.onReverseGeocodingResultClick(t)}))),n.appendChild(o)},_createReverseGeocodingPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingPanel"),t.className="GPpanel",t},_createReverseGeocodingPanelHeaderElement:function(){var t=document.createElement("div");return t.className="GPpanelHeader",t},_createReverseGeocodingPanelReturnPictoElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreverseGeocodingReturnPictoHidden",e.addEventListener?e.addEventListener("click",(function(e){document.getElementById(t._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GPreverseGeocodingForm")).className="",document.getElementById(t._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(t._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",t.onGPreverseGeocodingReturnPictoClick(e)})):e.attachEvent&&e.attachEvent("onclick",(function(e){document.getElementById(t._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GPreverseGeocodingForm")).className="",document.getElementById(t._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(t._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",t.onGPreverseGeocodingReturnPictoClick(e)})),e},_createReverseGeocodingPanelTitleElement:function(){var t=document.createElement("div");return t.className="GPpanelTitle",t.id=this._addUID("GPreverseGeocodingHeaderTitle"),t.innerHTML="Recherche inverse",t},_createReverseGeocodingPanelCloseElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",(function(){document.getElementById(t._addUID("GPshowReverseGeocodingPicto")).click()}),!1):e.attachEvent&&e.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPshowReverseGeocodingPicto")).click()})),e},_createReverseGeocodingPanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.addEventListener?e.addEventListener("submit",(function(e){e.preventDefault(),t.onReverseGeocodingSubmit()})):e.attachEvent&&e.attachEvent("onsubmit",(function(e){e.preventDefault(),t.onReverseGeocodingSubmit()})),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(t){var e=this,i=document.createElement("div");i.className="GPflexInput";var n=document.createElement("label");n.className="GPreverseGeocodingCodeLabel",n.innerHTML="Recherche par",n.title="Recherche par",i.appendChild(n);var o=document.createElement("select");o.className="GPreverseGeocodingCode",o.addEventListener?o.addEventListener("change",(function(t){e.onReverseGeocodingTypeChange(t)})):o.attachEvent&&o.attachEvent("onchange",(function(t){e.onReverseGeocodingTypeChange(t)})),t&&Array.isArray(t)||(t=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var s=0;s<t.length;s++)switch(t[s]){case"PositionOfInterest":var r=document.createElement("option");r.value="PositionOfInterest",r.text="Lieux/toponymes",o.appendChild(r);break;case"StreetAddress":var a=document.createElement("option");a.value="StreetAddress",a.text="Adresses",o.appendChild(a);break;case"CadastralParcel":var l=document.createElement("option");l.value="CadastralParcel",l.text="Parcelles cadastrales",o.appendChild(l);break;case"Administratif":var c=document.createElement("option");c.value="Administratif",c.text="Unités administratives",o.appendChild(c)}return i.appendChild(o),i},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(t){var e=this,i=document.createElement("div");i.className="GPflexInput";var n=document.createElement("label");n.className="GPreverseGeocodingCodeLabel",n.innerHTML="Délimitation",n.title="Délimitation",i.appendChild(n);var o=document.createElement("select");o.className="GPreverseGeocodingCode",o.addEventListener?o.addEventListener("change",(function(t){e.onReverseGeocodingDelimitationChange(t)})):o.attachEvent&&o.attachEvent("onchange",(function(t){e.onReverseGeocodingDelimitationChange(t)})),t&&Array.isArray(t)||(t=["Point","Circle","Extent"]);for(var s=0;s<t.length;s++)switch(t[s].toLowerCase()){case"point":var r=document.createElement("option");r.value="point",r.text="Pointer un lieu",o.appendChild(r);break;case"circle":var a=document.createElement("option");a.value="circle",a.text="Dessiner un cercle",o.appendChild(a);break;case"extent":var l=document.createElement("option");l.value="extent",l.text="Dessiner une emprise",o.appendChild(l)}return i.appendChild(o),i},_createReverseGeocodingSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPreverseGeocodingSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Rechercher",t}};var Ja=Xn.getLogger("reversegeocoding");const Qa=Vn().Control.extend({includes:Ka,options:{position:"bottomleft",collapsed:!0,resources:["StreetAddress","PositionOfInterest"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{}},initialize:function(t){Vn().Util.extend(this.options,t),this._noRightManagement=!1,this._servicesRightManagement={},this._checkRightsManagement(),this._checkInputOptions(),this._uid=Jn.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeaturesLayer=null,this._inputResultsLayer=null,this._lastIdLayer=0,this._currentIdLayer=0,this._currentFeature=null,this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[]},onAdd:function(t){var e=this._container=this._initLayout();return Vn().DomEvent.disableClickPropagation(e).disableScrollPropagation(e),t&&(this.options.collapsed||this._activateMapInteraction(t)),e},onRemove:function(t){this._clearLocations(),this._clearLocationsFeature(t),this._clearInputRequest(),this._removeMapInteraction(t)},_checkRightsManagement:function(){var t,e,i=[];t=this.options.reverseGeocodeOptions.apiKey,(i=(e=this.options.reverseGeocodeOptions.filterOptions)?e.type:[])&&0!==i.length||(i=this.options.resources),i&&0!==i.length||(i=["StreetAddress","PositionOfInterest"]);var n=Ma({key:t||this.options.apiKey,resources:i,services:["Geocode"]});Ja.log("rightManagementGeocode",n),n?(this.options.apiKey||(this.options.apiKey=n.key),this._servicesRightManagement.Geocode=n.Geocode):this._noRightManagement=!0},_checkInputOptions:function(){var t;if(this.options.resources){var e=this.options.resources;if(Array.isArray(e)){var i=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<e.length;t++)-1===i.indexOf(e[t])&&Ja.log("[ReverseGeocoding] options.resources : "+e[t]+" is not a resource for reverse geocode")}else Ja.log("[ReverseGeocoding] 'options.resources' parameter should be an array"),e=null}if(this.options.delimitations){var n=this.options.delimitations;if(Array.isArray(n)){var o=["Circle","Point","Extent"];for(t=0;t<n.length;t++)-1===o.indexOf(n[t])&&Ja.log("[ReverseGeocoding] options.delimitations : "+n[t]+" is not a delimitation for reverse geocode")}else Ja.log("[ReverseGeocoding] 'options.delimitations' parameter should be an array"),n=null}},_initGeocodingType:function(){this._currentGeocodingType="StreetAddress";var t=this.options.resources;if(t&&0!==t.length||(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(t)&&t.length){for(var e=[],i=0;i<t.length;i++)this._servicesRightManagement.Geocode.indexOf(t[i])<0&&(e.push(i),Ja.log("[ReverseGeocode] no rights for options.resources : "+t[i]));if(0!==e.length)for(var n=0;n<e.length;n++)t.splice(e[n],1);"StreetAddress"!==t[0]&&"PositionOfInterest"!==t[0]&&"CadastralParcel"!==t[0]&&"Administratif"!==t[0]||(this._currentGeocodingType=t[0])}var o=this.options.reverseGeocodeOptions;o.filterOptions&&Array.isArray(o.filterOptions.type)&&0!==o.filterOptions.type.length&&(this._currentGeocodingType=o.filterOptions.type[0])},_initGeocodingDelimitation:function(){this._currentGeocodingDelimitation="Point";var t=this.options.delimitations;if(t&&0!==t.length||(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(t)&&t.length){var e=t[0].toLowerCase();"point"!==e&&"circle"!==e&&"extent"!==e||(this._currentGeocodingDelimitation=t[0])}},_initLayout:function(){var t=this._createMainContainerElement(),e=this._showReverseGeocodingContainer=this._createShowReverseGeocodingElement();t.appendChild(e),this.options.collapsed||(e.checked=!0);var i=this._createShowReverseGeocodingPictoElement();t.appendChild(i);var n=this._createReverseGeocodingPanelElement(),o=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),s=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();o.appendChild(s);var r=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();o.appendChild(r);var a=this._createReverseGeocodingPanelCloseElement();o.appendChild(a),n.appendChild(o);var l=this._formContainer=this._createReverseGeocodingPanelFormElement();l.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),l.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var c=this._createReverseGeocodingSubmitFormElement();l.appendChild(c),n.appendChild(l);var h=this._waitingContainer=this._createReverseGeocodingWaitingElement();n.appendChild(h);var u=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),d=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return u.appendChild(d),n.appendChild(u),t.appendChild(n),Ja.log(t),t},_activateMapInteraction:function(t){if(Ja.info("_activateMapInteraction()"),null===this._inputFeaturesLayer){this._inputFeaturesLayer=new(Vn().FeatureGroup),t.addLayer(this._inputFeaturesLayer);var e=this;t.on("draw:created",(function(t){var i=t.layer,n=t.layerType;Ja.trace("draw:created"),e._setFeaturePosition(i,n),e._currentIdLayer=Vn().Util.stamp(i),e._setFeatureLayer(i)})),t.on("draw:drawstart",(function(){Ja.trace("draw:drawstart"),e._removeFeatureLayer(e._lastIdLayer),e._lastIdLayer=e._currentIdLayer})),t.on("draw:drawstop",(function(){Ja.trace("draw:drawstop")}))}switch(this._currentGeocodingDelimitation.toLowerCase()){case"point":this._activatePointInteraction(t);break;case"circle":this._activateCircleInteraction(t);break;case"extent":this._activateBoxInteraction(t)}},_removeMapInteraction:function(t){t&&(null!==this._inputFeaturesLayer&&(t.off("draw:created"),t.off("draw:drawstart"),t.off("draw:drawstop"),t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null),this._lastIdLayer=this._currentIdLayer=0,this._currentFeature&&this._currentFeature.disable())},_activatePointInteraction:function(t){Ja.info("_activatePointInteraction()"),this._currentFeature&&this._currentFeature.disable(),Vn().drawLocal.draw.handlers.marker.tooltip.start="click map to place search point";this._currentFeature=new(Vn().Draw.Marker)(t,{repeatMode:!0}),this._currentFeature.enable()},_activateCircleInteraction:function(t){Ja.info("_activateCircleInteraction()"),this._currentFeature&&this._currentFeature.disable();this._currentFeature=new(Vn().Draw.Circle)(t,{repeatMode:!0}),this._currentFeature.enable()},_activateBoxInteraction:function(t){Ja.info("_activateBoxInteraction()"),this._currentFeature&&this._currentFeature.disable();this._currentFeature=new(Vn().Draw.Rectangle)(t,{repeatMode:!0}),this._currentFeature.enable()},_setFeaturePosition:function(t,e){var i=null;if("marker"===e)i=t.getLatLng(),this._requestPosition={x:i.lat,y:i.lng};else if("circle"===e)i=t.getLatLng(),this._requestPosition={x:i.lat,y:i.lng},this._requestCircleFilter={x:i.lat,y:i.lng,radius:t.getRadius()};else if("rectangle"===e){var n={lng:((i=t.getBounds()).getSouthWest().lng+i.getNorthEast().lng)/2,lat:(i.getSouthWest().lat+i.getNorthEast().lat)/2};this._requestPosition={x:n.lat,y:n.lng},this._requestBboxFilter={left:i.getSouthWest().lat,right:i.getNorthEast().lat,bottom:i.getSouthWest().lng,top:i.getNorthEast().lng}}else Ja.warn("type gemetric not defined !?");Ja.log(i)},_setFeatureLayer:function(t){this._inputFeaturesLayer&&this._inputFeaturesLayer.addLayer(t)},_removeFeatureLayer:function(t){this._inputFeaturesLayer&&0!==t&&(t?this._inputFeaturesLayer.removeLayer(t):this._inputFeaturesLayer.clearLayers())},_reverseGeocodingRequest:function(t){var e=this._map;this._removeMapInteraction(e);var i={};Vn().Util.extend(i,this.options.reverseGeocodeOptions),Vn().Util.extend(i,t),Vn().Util.extend(i,{apiKey:this.options.apiKey,ssl:this.options.ssl,srs:"EPSG:4326",returnFreeForm:!1,timeOut:3e4,protocol:"XHR"});var n=i.filterOptions.type;"circle"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestCircleFilter&&(this._requestCircleFilter.radius>1e3&&(Ja.log("INFO : initial circle radius ("+this._requestCircleFilter.radius+") limited to 1000m."),this._requestCircleFilter.radius=1e3),Vn().Util.extend(i,{filterOptions:{type:n,circle:this._requestCircleFilter}})),"extent"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestBboxFilter&&Vn().Util.extend(i,{filterOptions:{type:n,bbox:this._requestBboxFilter}}),Ja.log("reverseGeocode request options : ",i),this._displayWaitingContainer(),Ca.Services.reverseGeocode(i)},_displayGeocodedLocations:function(t){var e=this._map;this._clearLocations(),this._clearLocationsFeature(e),this._reverseGeocodingLocations=t,t&&0!==t.length?(this._formContainer.className="GPreverseGeocodingComponentHidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.className="",this._resultsContainer.className="GPpanel",this._fillGeocodedLocationListContainer(t),this._displayGeocodedLocationsOnMap(t),e.fitBounds(this._inputResultsLayer.getBounds())):this._clearInputRequest()},_fillGeocodedLocationListContainer:function(t){for(var e=0;e<t.length;e++){var i=t[e];Ja.log(i);var n=this._fillGeocodedLocationDescription(i);0!==n.length&&this._createReverseGeocodingResultElement(n,e)}},_fillGeocodedLocationDescription:function(t){if(t&&t.placeAttributes){var e=t.placeAttributes,i="";switch(t.type){case"StreetAddress":e.street&&(i+=e.number?e.number+" ":"",i+=e.street+", "),i+=e.postalCode+" "+e.commune;break;case"PositionOfInterest":"City"===t.matchType&&e.commune?(i+=e.commune,i+=e.postalCode?", "+e.postalCode:""):"Département"===t.matchType&&e.municipality?(i+=e.municipality,i+=e.postalCode?", "+e.postalCode:""):"Toponym"===t.matchType&&e.municipality?(i+=e.municipality,i+=e.postalCode?", "+e.postalCode:"",i+=e.commune?" "+e.commune:""):i+=e.municipality?e.municipality:"",i+=e.nature?" ("+e.nature+") ":"";break;case"CadastralParcel":i+=e.cadastralParcel?e.cadastralParcel:"",i+=e.municipality?" ("+e.municipality+")":"";break;case"Administratif":i+=e.municipality?e.municipality:"",e.inseeDepartment?i+="(Département)":e.inseeRegion&&(i+="(Région)");break;default:i+=e.municipality?e.municipality:""}return i}},_displayGeocodedLocationsOnMap:function(t){var e=this._map,i=this;function n(t){var e=t.target;e.setIcon(new Ra("red"));var n=Vn().DomUtil.get("ReverseGeocodedLocation_"+e.options.id+"-"+i._uid);Vn().DomUtil.addClass(n,"GPreverseGeocodedLocationHighlight"),n.scrollIntoView(!1)}function o(t){var e=t.target;e.setIcon(new Ra("green"));var n=Vn().DomUtil.get("ReverseGeocodedLocation_"+e.options.id+"-"+i._uid);Vn().DomUtil.removeClass(n,"GPreverseGeocodedLocationHighlight")}this._inputResultsLayer=new(Vn().FeatureGroup),e.addLayer(this._inputResultsLayer);for(var s=0;s<t.length;s++){var r=t[s];if(r){var a={id:s,icon:new Ra("green"),riseOnHover:!0,draggable:!1,clickable:!0,zIndexOffset:1e3},l=Vn().marker(Vn().latLng(r.position.x,r.position.y),a),c="<ul>",h=r.placeAttributes;for(var u in h)h.hasOwnProperty(u)&&"bbox"!==u&&(c+="<li>",c+='<span class="gp-attname-others-span">'+u.toUpperCase()+" : </span>",c+=h[u],c+=" </li>");c+=" </ul>",l.bindPopup(c),l.on("mouseover",n),l.on("mouseout",o),this._inputResultsLayer.addLayer(l)}}},onShowReverseGeocodingClick:function(){var t=this._map;this._showReverseGeocodingContainer.checked?this._removeMapInteraction(t):this._waiting||this._reverseGeocodingLocations.length||this._activateMapInteraction(t)},onReverseGeocodingTypeChange:function(t){var e=t.target.selectedIndex,i=t.target.options[e].value;i&&(Ja.log(i),this._currentGeocodingType=i)},onReverseGeocodingDelimitationChange:function(t){var e=t.target.selectedIndex,i=t.target.options[e].value;if(i){Ja.log(i),this._currentGeocodingDelimitation=i,this._clearInputRequest();var n=this._map;this._removeMapInteraction(n),this._activateMapInteraction(n)}},onGPreverseGeocodingReturnPictoClick:function(){var t=this._map;this._clearLocations(),this._clearLocationsFeature(t),this._clearInputRequest(),this._activateMapInteraction(t)},onReverseGeocodingSubmit:function(){if(this._requestPosition){if(!this._noRightManagement){var t=this._map,e=this;this._reverseGeocodingRequest({position:e._requestPosition,filterOptions:{type:[e._currentGeocodingType]},onSuccess:function(t){if(Ja.log(t),t){var i=t.locations;e._displayGeocodedLocations(i),e._hideWaitingContainer()}},onFailure:function(i){e._hideWaitingContainer(),e._clearLocations(),e._clearLocationsFeature(t),e._clearInputRequest(),Ja.log(i.message)}})}}else Ja.log("missing position")},onReverseGeocodingResultClick:function(t){Ja.log("onReverseGeocodingResultClick",t)},onReverseGeocodingResultMouseOver:function(t){var e=Jn.index(t.target.id);t.target.classList&&t.target.classList.add("GPreverseGeocodedLocationHighlight"),this._inputResultsLayer&&this._inputResultsLayer.eachLayer((function(t){t.options.id===parseInt(e,10)&&t.fire("mouseover")}))},onReverseGeocodingResultMouseOut:function(t){var e=Jn.index(t.target.id);t.target.classList&&t.target.classList.remove("GPreverseGeocodedLocationHighlight"),this._inputResultsLayer&&this._inputResultsLayer.eachLayer((function(t){t.options.id===parseInt(e,10)&&t.fire("mouseout")}))},_clearLocations:function(){if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild)},_clearLocationsFeature:function(t){null!==this._inputResultsLayer&&(t.removeLayer(this._inputResultsLayer),this._inputResultsLayer=null)},_clearInputRequest:function(){this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null},_displayWaitingContainer:function(){this._waitingContainer.className="GPreverseGeocodingCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout((function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)}),16e3)},_hideWaitingContainer:function(){this._waiting&&(this._waitingContainer.className="GPreverseGeocodingCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}});var $a=Xn.getLogger("RouteDOM");const tl={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProute"),t.className="GPwidget",t},_createShowRouteElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowRoute"),t.type="checkbox",t},_createShowRoutePictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowRoute"),e.title="Ouvrir le calcul d'itinéraire",e.addEventListener?e.addEventListener("click",(function(e){t.onShowRoutePanelClick(e)})):e.attachEvent&&e.attachEvent("onclick",(function(e){t.onShowRoutePanelClick(e)}));var i=document.createElement("span");return i.id=this._addUID("GPshowRouteOpen"),i.className="GPshowAdvancedToolOpen",e.appendChild(i),e},_createRoutePanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProutePanel"),t.className="GPpanel",t},_createRoutePanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var i=document.createElement("div");i.className="GPpanelTitle",i.innerHTML="Calcul d'itinéraire",e.appendChild(i);var n=document.createElement("div");return n.id=this._addUID("GProutePanelClose"),n.className="GPpanelClose",n.title="Masquer le panneau",n.addEventListener?n.addEventListener("click",(function(){document.getElementById(t._addUID("GPshowRoutePicto")).click()}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPshowRoutePicto")).click()})),e.appendChild(n),e},_createRoutePanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",(function(e){$a.log(e),e.preventDefault();var i,n=document.getElementsByClassName(t._addUID("GPlocationPoint")),o=n[0].childNodes[0].id,s=n[n.length-1].childNodes[0].id,r=Jn.index(o),a=Jn.index(s);if(""===document.getElementById(t._addUID("GPlocationOrigin_"+r)).value&&""===document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).value||""===document.getElementById(t._addUID("GPlocationOrigin_"+a)).value&&""===document.getElementById(t._addUID("GPlocationOriginCoords_"+a)).value)return!1;document.getElementById(t._addUID("GProuteResultsStages")).innerHTML="";for(var l=0;l<n.length;l++){var c=n[l].childNodes[0].id;if(i=Jn.index(c),"GPflexInput GPlocationStageFlexInput"===document.getElementById(t._addUID("GPlocationPoint_"+i)).className){var h=document.createElement("div");h.className="GProuteResultsStages";var u=document.createElement("div");u.className="GProuteResultStageLabel",u.innerHTML=document.getElementById(t._addUID("GPlocationOriginLabel_"+i)).innerHTML+" :",h.appendChild(u);var d=document.createElement("div");d.className="GProuteResultStageValue";var p=document.getElementById(t._addUID("GPlocationOriginCoords_"+i)),f=p.value,m="GPlocationOriginVisible"===p.className;d.innerHTML=null!==f&&""!==f&&m?f:document.getElementById(t._addUID("GPlocationOrigin_"+i)).value,h.appendChild(d),""!==d.innerHTML&&document.getElementById(t._addUID("GProuteResultsStages")).appendChild(h)}}var g=null;if(document.getElementById(t._addUID("GProuteComputationSelect"))){var _=document.getElementById(t._addUID("GProuteResultsComputationSelect"));_.selectedIndex=document.getElementById(t._addUID("GProuteComputationSelect")).selectedIndex,g=_.options[_.selectedIndex].value}var v=null;document.getElementById(t._addUID("GProuteTransportCar"))&&document.getElementById(t._addUID("GProuteTransportCar")).checked&&(v=document.getElementById(t._addUID("GProuteTransportCar")).value),document.getElementById(t._addUID("GProuteTransportPedestrian"))&&document.getElementById(t._addUID("GProuteTransportPedestrian")).checked&&(v=document.getElementById(t._addUID("GProuteTransportPedestrian")).value);for(var y=[],E=document.getElementsByClassName("GProuteExclusionsOption"),w=0;w<E.length;w++){i=E[w].htmlFor;var b=document.getElementById(i);b.checked||y.push(b.value)}return t.onRouteComputationSubmit({computation:g,transport:v,exclusions:y}),!1})),e},_createRoutePanelResultsElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteResultsPanel"),t.className="GProuteComponentHidden",t.appendChild(this._createRouteResultsStagesElement()),t.appendChild(this._createRouteResultsElement());var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",t.appendChild(e),t.appendChild(this._createRouteShowResultsDetailsElement());var i=document.createElement("label");i.htmlFor=this._addUID("GProuteResultsShowDetails"),i.innerHTML="Afficher le détail",t.appendChild(i);var n=document.createElement("label");n.htmlFor=this._addUID("GProuteResultsShowDetails"),n.innerHTML="Masquer le détail",t.appendChild(n);var o=document.createElement("div");return o.className="GPfakeBorder",t.appendChild(o),t.appendChild(this._createRouteResultsDetailsElement()),t},_createRouteWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteCalcWaitingContainer"),t.className="GProuteCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GProuteCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t},_createRouteResultsStagesElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteResultsStages"),t},_createRouteResultsElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var i=document.createElement("div");i.id=this._addUID("GProuteResultsValues"),e.appendChild(i);var n=document.createElement("div");n.id=this._addUID("GProuteResultsMode");var o=document.createElement("select");o.id=this._addUID("GProuteResultsComputationSelect"),o.className="GPinputSelect",o.addEventListener("change",(function(e){t.onRouteModeComputationChangeAndRun(e)}));for(var s=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],r=0;r<s.length;r++){var a=document.createElement("option");a.value=s[r].code,a.text=s[r].label,o.appendChild(a)}n.appendChild(o),e.appendChild(n);var l=document.createElement("div");return l.id=this._addUID("GProuteResultsNew"),l.title="Modifier le calcul",l.addEventListener("click",(function(e){document.getElementById(t._addUID("GProuteResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GProuteForm")).className="",t.onShowRouteResultsNewClick(e)})),e.appendChild(l),e},_addRouteResultsValuesElement:function(t,e,i){var n=document.getElementById(this._addUID("GProuteResultsValues"));if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);var o=document.createElement("div");o.className="GProuteResultsValue";var s=document.createElement("label");s.className="GProuteResultsValueLabel",s.innerHTML="Distance :",o.appendChild(s);var r=0;if(parseInt(t/1e3,10)){var a=Math.round(t);r=(a/=1e3)+" km"}else r=Math.round(t)+" m";var l=document.createElement("div");l.id=this._addUID("GProuteResultsValueDist"),l.innerHTML=r,o.appendChild(l),n.appendChild(o);var c=document.createElement("div");c.className="GProuteResultsValue";var h=document.createElement("label");h.className="GProuteResultsValueLabel",h.innerHTML="Durée :",c.appendChild(h);var u=document.createElement("div");return u.id=this._addUID("GProuteResultsValueDist"),u.innerHTML=i(e),c.appendChild(u),n.appendChild(c),n},_createRouteShowResultsDetailsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GProuteResultsShowDetails"),t.type="checkbox",t},_createRouteResultsDetailsElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteResultsDetails"),t},_addRouteResultsDetailsElement:function(t,e){var i=this,n=document.getElementById(this._addUID("GProuteResultsDetails"));if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);for(var o=0,s=0,r=0;r<t.length;r++){var a=r+1,l=t[r],c=document.createElement("div");c.className="GProuteResultsDetailsNumber",c.innerHTML=a+".",n.appendChild(c),s+=parseFloat(l.duration),o+=parseFloat(l.distance);var h=0;if(parseInt(o/1e3,10)){var u=Math.round(o);h=(u/=1e3)+" km"}else h=Math.round(o)+" m";var d=document.createElement("div");d.className="GProuteResultsDetailsInstruction",d.id=this._addUID("GProuteResultsDetailsInstruction_"+a),d.title="distance : "+h+" / temps : "+e(s),d.innerHTML=l.instruction,d.addEventListener("mouseover",(function(t){i.onRouteResultsDetailsMouseOver(t)})),d.addEventListener("mouseout",(function(t){i.onRouteResultsDetailsMouseOut(t)})),d.addEventListener("click",(function(t){"function"==typeof i.onRouteResultsDetailsClick&&i.onRouteResultsDetailsClick(t)})),n.appendChild(d)}return n},_createRoutePanelFormPointElement:function(t,e,i){var n=this,o=document.createElement("div");o.id="GProutePoint"+t,o.className=i?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var s=document.createElement("label");s.id="GProuteOriginLabel"+t,s.htmlFor="GProuteOrigin"+t,s.innerHTML=e,s.addEventListener("click",(function(){var t=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+t).value="";for(var e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+t).checked=!1,document.getElementById("GProuteOrigin"+t).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+t).className="GProuteOriginHidden"})),o.appendChild(s);var r=document.createElement("input");r.id="GProuteOrigin"+t,r.className="GProuteOriginVisible",r.type="text",r.placeholder="Saisir une adresse",r.addEventListener("keyup",(function(t){var e=t.which||t.keyCode;if(13!==e&&10!==e){var i=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+i).value.length>2?document.getElementById("GProuteAutoCompleteList"+i).style.display="block":document.getElementById("GProuteAutoCompleteList"+i).style.display="none",n.onAutoCompleteSearchText(t)}})),r.addEventListener("blur",(function(){var t=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+t).style.display="none"})),o.appendChild(r);var a=document.createElement("input");a.id="GProuteOriginCoords"+t,a.className="GProuteOriginHidden",a.type="text",a.disabled=!0,o.appendChild(a);var l=document.createElement("input");l.id="GProuteOriginPointer"+t,l.type="checkbox",o.appendChild(l);var c=document.createElement("label");return c.id="GProuteOriginPointerImg"+t,c.htmlFor="GProuteOriginPointer"+t,c.className="GProuteOriginPointerImg",c.title="Pointer un lieu sur la carte",c.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();var e,i=this.id.charAt(this.id.length-1);for(e=1;e<8;e++)i!==e&&(document.getElementById("GProuteOriginPointer"+e).checked=!1,"Pointer un lieu sur la carte"===document.getElementById("GProuteOriginCoords"+e).value&&(document.getElementById("GProuteOriginCoords"+e).value="",document.getElementById("GProuteOrigin"+e).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+e).className="GProuteOriginHidden"));if(document.getElementById("GProuteOriginPointer"+i).checked){for(document.getElementById("GProuteOriginCoords"+i).value="",e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+i).checked=!1,document.getElementById("GProuteOrigin"+i).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+i).className="GProuteOriginHidden"}else{for(document.getElementById("GProuteOriginCoords"+i).value="Pointer un lieu sur la carte",e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display=i===e?"flex":"none";document.getElementById("GProuteForm").className="GProuteFormMini",document.getElementById("GProuteOriginPointer"+i).checked=!0,document.getElementById("GProuteOrigin"+i).className="GProuteOriginHidden",document.getElementById("GProuteOriginCoords"+i).className="GProuteOriginVisible"}n.onRouteMapPointClick(t)})),o.appendChild(c),o},_createRoutePanelFormRemoveStageElement:function(t){var e=this,i=document.createElement("div");return i.id="GProuteStageRemove"+t,i.className="GProuteStageRemove",i.title="Supprimer l'étape",1!==t&&7!==t&&i.addEventListener("click",(function(t){var i=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+i).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+i).value="",document.getElementById("GProuteOrigin"+i).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+i).value="",document.getElementById("GProuteOriginCoords"+i).className="GProuteOriginHidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(t)})),i},_createRoutePanelFormAddStageElement:function(){var t=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",(function(e){for(var i=1,n=0,o=2;o<7;o++)"GPflexInput GProuteStageFlexInputHidden"===document.getElementById("GProutePoint"+o).className?1===i&&(i=o):n++;i<7&&(document.getElementById("GProutePoint"+i).className="GPflexInput GProuteStageFlexInput"),4===n&&(document.getElementById("GProuteStageAdd").style.display="none"),t.onRouteAddPointClick(e)})),e},_createRoutePanelFormAutoCompleteListElement:function(t){var e=this,i=document.createElement("div");return i.id="GProuteAutoCompleteList"+t,i.className="GPadvancedAutoCompleteList",i.addEventListener?i.addEventListener("click",(function(i){e.onAutoCompletedResultsItemClick(i),document.getElementById("GProuteAutoCompleteList"+t).style.display="none"}),!1):i.attachEvent&&i.attachEvent("onclick",(function(i){e.onAutoCompletedResultsItemClick(i),document.getElementById("GProuteAutoCompleteList"+t).style.display="none"})),i},_createRouteAutoCompletedLocationElement:function(t,e,i){var n=document.getElementById("GProuteAutoCompleteList"+e),o=document.createElement("div");o.id="AutoCompletedLocation"+i,o.className="GPautoCompleteProposal",o.innerHTML=t.fullText,n.appendChild(o)},_createRoutePanelFormModeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteModeChoice"),t},_createRoutePanelFormModeChoiceTransportElement:function(t){var e=this,i=document.createElement("div");i.id=this._addUID("GProuteTransportChoice");var n=document.createElement("span");n.className="GProuteModeLabel",n.innerHTML="Mode de transport",i.appendChild(n);for(var o=0;o<t.length;o++){var s=t[o];if("Voiture"===s){var r=document.createElement("input");r.id=this._addUID("GProuteTransportCar"),r.type="radio",r.name="GProuteTransport",r.value="Voiture",0===o&&(r.checked=!0),r.addEventListener?r.addEventListener("change",(function(t){e.onRouteModeTransportChange(t)})):r.attachEvent&&r.attachEvent("onchange",(function(t){e.onRouteModeTransportChange(t)})),i.appendChild(r);var a=document.createElement("label");a.className="GProuteTransportImg",a.htmlFor=this._addUID("GProuteTransportCar"),a.title="Voiture",i.appendChild(a)}if("Pieton"===s){var l=document.createElement("input");l.id=this._addUID("GProuteTransportPedestrian"),l.type="radio",l.name="GProuteTransport",l.value="Pieton",0===o&&(l.checked=!0),l.addEventListener?l.addEventListener("change",(function(t){e.onRouteModeTransportChange(t)})):l.attachEvent&&l.attachEvent("onchange",(function(t){e.onRouteModeTransportChange(t)})),i.appendChild(l);var c=document.createElement("label");c.className="GProuteTransportImg",c.htmlFor=this._addUID("GProuteTransportPedestrian"),c.title="Piéton",i.appendChild(c)}}return i},_createRoutePanelFormModeChoiceComputeElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice");var i=document.createElement("span");i.className="GProuteModeLabel",i.innerHTML="Mode de calcul",e.appendChild(i);var n=document.createElement("select");n.id=this._addUID("GProuteComputationSelect"),n.className="GPinputSelect",n.addEventListener("change",(function(e){t.onRouteModeComputationChange(e)}));for(var o=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],s=0;s<o.length;s++){var r=document.createElement("option");r.value=o[s].code,r.text=o[s].label,n.appendChild(r)}return e.appendChild(n),e},_createShowRouteExclusionsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowRouteExclusions"),t.type="checkbox",t},_createShowRouteExclusionsPictoElement:function(){var t=this,e=document.createElement("label");return e.id=this._addUID("GPshowRouteExclusionsPicto"),e.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto",e.htmlFor=this._addUID("GPshowRouteExclusions"),e.title="Exclusions",e.addEventListener?e.addEventListener("click",(function(e){t.onShowRouteExclusionsClick(e)})):e.attachEvent&&e.attachEvent("onclick",(function(e){t.onShowRouteExclusionsClick(e)})),e},_createRoutePanelFormExclusionsElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteExclusions");var e=document.createElement("span");return e.className="GProuteExclusionsLabel",e.innerHTML="Passages autorisés",t.appendChild(e),t},_createRoutePanelFormExclusionOptionsElement:function(t){var e=this,i=document.createElement("div");for(var n in i.className="GProuteExclusionsOptions",t)if(t.hasOwnProperty(n)){var o=t[n];switch(n){case"toll":var s=document.createElement("input");s.id=this._addUID("GProuteExclusionsToll"),s.type="checkbox",s.value="Toll",s.checked=!o,s.addEventListener?s.addEventListener("change",(function(t){e.onRouteExclusionsChange(t)})):s.attachEvent&&s.attachEvent("onchange",(function(t){e.onRouteExclusionsChange(t)})),i.appendChild(s);var r=document.createElement("label");r.className="GProuteExclusionsOption",r.htmlFor=this._addUID("GProuteExclusionsToll"),r.innerHTML="Péages",i.appendChild(r);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GProuteExclusionsTunnel"),a.type="checkbox",a.value="Tunnel",a.checked=!o,a.addEventListener?a.addEventListener("change",(function(t){e.onRouteExclusionsChange(t)})):a.attachEvent&&a.attachEvent("onchange",(function(t){e.onRouteExclusionsChange(t)})),i.appendChild(a);var l=document.createElement("label");l.className="GProuteExclusionsOption",l.htmlFor=this._addUID("GProuteExclusionsTunnel"),l.innerHTML="Tunnels",i.appendChild(l);break;case"bridge":var c=document.createElement("input");c.id=this._addUID("GProuteExclusionsBridge"),c.type="checkbox",c.value="Bridge",c.checked=!o,c.addEventListener?c.addEventListener("change",(function(t){e.onRouteExclusionsChange(t)})):c.attachEvent&&c.attachEvent("onchange",(function(t){e.onRouteExclusionsChange(t)})),i.appendChild(c);var h=document.createElement("label");h.className="GProuteExclusionsOption",h.htmlFor=this._addUID("GProuteExclusionsBridge"),h.innerHTML="Ponts",i.appendChild(h)}}return i},_createRouteSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GProuteSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Calculer",t},_createRouteFormResetElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.addEventListener("click",(function(e){t.onRouteResetClick(e)})),e}};var el=Xn.getLogger("route(plus)");const il=Vn().Control.extend({includes:tl,options:{position:"topleft",collapsed:!0,graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},disableReverse:!1,routeOptions:{},autocompleteOptions:{}},initialize:function(t){Vn().Util.setOptions(this,t),this._uid=Jn.generate(),this._initTransport(),this._initExclusions(),this._initComputation(),this._showRouteContainer=null,this._pictoRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._isDesktop=this._detectSupport(),this._currentPoints=[],this._currentTransport=null,this._currentComputation=null,this._currentExclusions=[],this._geojsonRoute=null,this._geojsonSections=null,this._waiting=!1,this._timer=null,this._currentRouteInformations=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},onAdd:function(t){var e=this._container=this._initLayout(t);return Vn().DomEvent.disableClickPropagation(e).disableScrollPropagation(e),e},onRemove:function(){},_initTransport:function(){this._currentTransport="Voiture";var t=this.options.graphs;t&&0!==t.length||(this.options.graphs=["Voiture","Pieton"]),Vn().Util.isArray(t)&&t.length&&("Voiture"!==t[0]&&"Pieton"!==t[0]||(this._currentTransport=t[0]));var e=this.options.routeOptions;e.graph&&(this._currentTransport=e.graph)},_initComputation:function(){this._currentComputation="fastest";var t=this.options.routeOptions;t.routePreference&&(this._currentComputation=t.routePreference)},_initExclusions:function(){this._currentExclusions=[];var t=this.options.exclusions;if(t&&0!==Object.keys(t).length||(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),t&&Object.keys(t).length)for(var e in t)t.hasOwnProperty(e)&&t.k&&this._currentExclusions.push(e);var i=this.options.routeOptions;Vn().Util.isArray(i.exclusions)&&(this._currentExclusions=i.exclusions)},_checkRightsManagement:function(){var t=null,e=[],i=null;i=this.options.routeOptions.apiKey,(e=(t=this.options.routeOptions.filterOptions)?t.type:[])&&0!==e.length||(e=["Voiture","Pieton"]);var n=Ma({key:i||this.options.apiKey,resources:e,services:["Itineraire"]});i=this.options.autocompleteOptions.apiKey,(e=(t=this.options.autocompleteOptions.filterOptions)?t.type:[])&&0!==e.length||(e=["StreetAddress","PositionOfInterest"]);var o=Ma({key:i||this.options.apiKey,resources:e,services:["AutoCompletion"]});n||o||(this._noRightManagement=!0),o&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=o.AutoCompletion,this._resources.AutoCompletion.key=o.key),n&&(this._resources.Itineraire={},this._resources.Itineraire.resources=n.Itineraire,this._resources.Itineraire.key=n.key)},_detectSupport:function(){var t=!0,e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("iphone")&&-1===e.indexOf("ipod")&&-1===e.indexOf("ipad")&&-1===e.indexOf("android")&&-1===e.indexOf("mobile")&&-1===e.indexOf("blackberry")&&-1===e.indexOf("tablet")&&-1===e.indexOf("phone")&&-1===e.indexOf("touch")||(t=!1),-1===e.indexOf("msie")&&-1===e.indexOf("trident")||(t=!0),t},_initLayout:function(t){var e=this._createMainContainerElement(),i=this._showRouteContainer=this._createShowRouteElement();e.appendChild(i),this.options.collapsed||(i.checked=!0);var n=this._pictoRouteContainer=this._createShowRoutePictoElement();e.appendChild(n);var o=this._createRoutePanelElement(),s=this._createRoutePanelHeaderElement();o.appendChild(s);for(var r=this._formRouteContainer=this._createRoutePanelFormElement(),a=this._createRoutePanelFormPointsElement(t),l=0;l<a.length;l++)r.appendChild(a[l]);var c=this._createRoutePanelFormModeChoiceElement();c.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs)),c.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),r.appendChild(c),r.appendChild(this._createShowRouteExclusionsElement()),r.appendChild(this._createShowRouteExclusionsPictoElement());var h=this._createRoutePanelFormExclusionsElement();h.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),r.appendChild(h);var u=this._createRouteSubmitFormElement();r.appendChild(u),o.appendChild(r);var d=this._resultsRouteContainer=this._createRoutePanelResultsElement();o.appendChild(d);var p=this._waitingContainer=this._createRouteWaitingElement();return o.appendChild(p),e.appendChild(o),e},_createRoutePanelFormPointsElement:function(t){var e=[],i=1,n=new Oa({apiKey:this.options.apiKey||null,tag:{id:i,unique:this._uid,label:"Départ",color:"blue",display:!0},disableReverse:this.options.disableReverse,autocompleteOptions:this.options.autocompleteOptions||null});n.setMap(t);var o=this.options.routeOptions;for(o.startPoint&&(n._inputAutoCompleteContainer.value=o.startPoint.x+" , "+o.startPoint.y,n.setCoordinate({lng:o.startPoint.x,lat:o.startPoint.y})),e.push(n.getContainer()),this._currentPoints.push(n),i=2;i<7;i++){var s=new Oa({apiKey:this.options.apiKey||null,tag:{id:i,unique:this._uid,label:"Etape",color:"green",display:!1,removeOption:!0},disableReverse:this.options.disableReverse,autocompleteOptions:this.options.autocompleteOptions||null});s.setMap(t),e.push(s.getContainer()),this._currentPoints.push(s)}var r=new Oa({apiKey:this.options.apiKey||null,tag:{id:i,unique:this._uid,label:"Arrivée",color:"red",display:!0,addOption:!0,removeOption:!1},disableReverse:this.options.disableReverse,autocompleteOptions:this.options.autocompleteOptions||null});return r.setMap(t),o.endPoint&&(r._inputAutoCompleteContainer.value=o.endPoint.x+" , "+o.endPoint.y,r.setCoordinate({lng:o.endPoint.x,lat:o.endPoint.y})),e.push(r.getContainer()),this._currentPoints.push(r),e},onShowRoutePanelClick:function(t){el.log("onShowRoutePanelClick",t),this._geojsonSections||this._clear()},onRouteModeComputationChange:function(t){el.log("onRouteModeComputationChange",t);var e=t.target.selectedIndex,i=t.target.options[e].value;i&&(el.log(i),this._currentComputation=i)},onRouteModeComputationChangeAndRun:function(t){el.log("onRouteModeComputationChangeAndRun",t),this.onRouteModeComputationChange(t),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})},onRouteModeTransportChange:function(t){el.log("onRouteModeTransportChange",t);var e=t.target.value;e&&(el.log(e),this._currentTransport=e)},onShowRouteExclusionsClick:function(t){el.log("onShowRouteExclusionsClick",t)},onRouteExclusionsChange:function(t){el.log("onRouteExclusionsChange",t);var e=t.target.value,i=t.target.checked;if(e){el.log(e,i);for(var n=!1,o=null,s=0;s<this._currentExclusions.length;s++)this._currentExclusions[s]===e&&(o=s,n=!0);!n&&i&&this._currentExclusions.push(e),n&&!i&&(this._currentExclusions[o]=null)}},onRouteComputationSubmit:function(t){el.log("onRouteComputationSubmit",t);var e=this._currentPoints,i=e[0].getCoordinate();e[0].dragging(!1),el.log("start",i);var n=e[e.length-1].getCoordinate();e[e.length-1].dragging(!1),el.log("end",n);for(var o=[],s=1;s<e.length-1;s++){var r=e[s].getCoordinate();e[s].dragging(!1),r&&(el.log("step",r),o.push(r))}if(!this._noRightManagement){this._currentTransport=t.transport,this._currentComputation=t.computation,this._currentExclusions=t.exclusions,this._displayWaitingContainer();var a=this;this._requestRouting({startPoint:i,endPoint:n,viaPoints:o,graph:this._currentTransport,routePreference:this._currentComputation,exclusions:this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",onSuccess:function(t){el.log(t),t&&a._fillRouteResultsDetails(t)},onFailure:function(t){a._hideWaitingContainer(),a._clearRouteResultsDetails(),el.log(t.message)}})}},onShowRouteResultsNewClick:function(t){el.log("onShowRouteResultsNewClick",t);for(var e=this._currentPoints,i=0;i<e.length;i++)e[i].dragging(!0);this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()},onRouteResultsDetailsMouseOver:function(t){el.log("onRouteResultsDetailsMouseOver",t);var e=Jn.index(t.target.id);this._isDesktop&&this._geojsonSections&&this._geojsonSections.eachLayer((function(t){t.feature.id===parseInt(e,10)&&t.setStyle({weight:10,color:"#0F9DE8",opacity:.5})}))},onRouteResultsDetailsMouseOut:function(t){el.log("onRouteResultsDetailsMouseOut",t);var e=Jn.index(t.target.id);this._isDesktop&&this._geojsonSections&&this._geojsonSections.eachLayer((function(t){t.feature.id===parseInt(e,10)&&t.setStyle({color:"#ED7F10",weight:5,opacity:.75})}))},onRouteResultsDetailsClick:function(t){el.log("onRouteResultsDetailsClick",t);var e=Jn.index(t.target.id),i=this;if(!this._isDesktop&&this._geojsonSections){var n=t.target.title,o=t.target.innerHTML;this._geojsonSections.eachLayer((function(i){i.feature.id===parseInt(e,10)&&(t.target.innerHTML=n,i.setStyle({weight:10,color:"#0F9DE8",opacity:.5}))})),clearTimeout(1e3),setTimeout((function(){i._geojsonSections.eachLayer((function(i){i.feature.id===parseInt(e,10)&&(t.target.innerHTML=o,i.setStyle({color:"#ED7F10",weight:5,opacity:.75}))}))}),1e3)}},_requestRouting:function(t){if(t&&0!==Object.keys(t).length&&t.startPoint&&t.endPoint)if(el.log(t),this._noRightManagement)el.log("no rights for all service !?");else if(this._resources.Itineraire){var e=this._resources.Itineraire.resources;if(e&&0!==Object.keys(e).length){var i=this._resources.Itineraire.key,n={};Vn().Util.extend(n,this.options.routeOptions),Vn().Util.extend(n,t);for(var o=!1,s=0;s<e.length;s++)e[s]===n.graph&&(o=!0);o?(Vn().Util.extend(n,{apiKey:this.options.routeOptions.apiKey||this.options.apiKey||i}),Vn().Util.extend(n,{ssl:this.options.ssl}),el.log(n),Ca.Services.route(n)):el.log("no rights for this service !?")}}else el.log("no rights for this service !?")},_fillRouteResultsDetails:function(t){var e=t.totalDistance,i=t.totalTime,n=this._simplifiedInstructions(t.routeInstructions);n&&this._fillRouteResultsDetailsContainer(e,i,n);var o=t.routeGeometry;o&&this._fillRouteResultsDetailsGeometry(o);var s=n&&Array.isArray(n)&&0!==n[0].geometry.length;n&&s&&this._fillRouteResultsDetailsFeatureGeometry(n);var r=t.bbox;if(r){var a=this._map,l=Vn().latLngBounds([r.bottom,r.left],[r.top,r.right]);a.fitBounds(l,{padding:[1,1]})}this._currentRouteInformations=t,this._formRouteContainer.className="GProuteComponentHidden",this._hideWaitingContainer(),this._resultsRouteContainer.className=""},_fillRouteResultsDetailsContainer:function(t,e,i){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(t,e,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(i,this._convertSecondsToTime)},_fillRouteResultsDetailsGeometry:function(t){this._clearRouteResultsGeometry();var e=this._map;this._geojsonRoute=Vn().geoJson(t,{style:{color:"#ff7800",weight:5,opacity:.65}}).addTo(e)},_fillRouteResultsDetailsFeatureGeometry:function(t){this._clearRouteResultsFeatureGeometry();for(var e=this._map,i={type:"FeatureCollection",features:[]},n=0;n<t.length;n++){var o=t[n],s=n+1;i.features.push({id:s,type:"Feature",geometry:o.geometry,properties:{popupContent:"("+s+") distance : "+this._convertDistance(o.distance)+" / temps : "+this._convertSecondsToTime(o.duration)}})}var r=this;function a(t){var e=t.target;r._geojsonSections.resetStyle(e);var i=Vn().DomUtil.get("GProuteResultsDetailsInstruction_"+e.feature.id+"-"+r._uid);Vn().DomUtil.removeClass(i,"GProuteResultsDetailsHighlight")}function l(t){var e=t.target;el.log(e),e.setStyle({weight:10,color:"#0F9DE8",opacity:.5});var i=Vn().DomUtil.get("GProuteResultsDetailsInstruction_"+e.feature.id+"-"+r._uid);Vn().DomUtil.addClass(i,"GProuteResultsDetailsHighlight")}this._geojsonSections=Vn().geoJson(i,{style:{color:"#ED7F10",weight:5,opacity:.75},onEachFeature:function(t,e){e.on({mouseover:l,mouseout:a}),e.bindPopup(t.properties.popupContent)}}).addTo(e)},_clear:function(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var t=0;t<this._currentPoints.length;t++)this._currentPoints[t].clear()},_clearRouteResultsDetails:function(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var t=this._resultsRouteDetailsContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}if(this._resultsRouteValuesContainer){var e=this._resultsRouteValuesContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}},_clearRouteResultsGeometry:function(){var t=this._map;null!=this._geojsonRoute&&(t.removeLayer(this._geojsonRoute),this._geojsonRoute=null)},_clearRouteResultsFeatureGeometry:function(){var t=this._map;null!=this._geojsonSections&&(t.removeLayer(this._geojsonSections),this._geojsonSections=null)},_displayWaitingContainer:function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout((function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)}),16e3)},_hideWaitingContainer:function(){this._waiting&&(this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},_simplifiedInstructions:function(t){var e=[],i=t[0];1===t.length&&e.push(i);for(var n=1;n<t.length;n++){var o=t[n];if(o.instruction===i.instruction){i.distance=(parseFloat(o.distance)+parseFloat(i.distance)).toString(),i.duration=(parseFloat(o.duration)+parseFloat(i.duration)).toString();for(var s=1;s<o.geometry.coordinates.length;s++)i.geometry.coordinates.push(o.geometry.coordinates[s]);n===t.length-1&&(e.push(i),i=null)}else e.push(i),i=o,n===t.length-1&&(e.push(o),i=null)}return el.log(e),e},_convertSecondsToTime:function(t){t=Math.round(t);var e=Math.floor(t/3600);e||(e="00");var i=t%3600,n=Math.floor(i/60);n||(n="00");var o=i%60,s=Math.ceil(o);return s||(s="00"),e+"h "+n+"m "+s+"s"},_convertDistance:function(t){var e=parseInt(t/1e3,10);return e?e+" km":parseInt(t,10)+" m"},compute:function(t,e){if(this._showRouteContainer.checked||this._pictoRouteContainer.click(),this._map){var i={computation:"fastest",transport:"Voiture",exclusions:[]};Vn().Util.extend(i,e);var n=this._currentPoints;n[0].setCoordinate(t[0]),Vn().DomUtil.get("GPlocationOrigin_1-"+this._uid).value=t[0].lng+" , "+t[0].lat;var o=t.length-1;n[6].setCoordinate(t[o]),Vn().DomUtil.get("GPlocationOrigin_7-"+this._uid).value=t[o].lng+" , "+t[o].lat;for(var s=1;s<t.length-1;s++){n[s].setCoordinate(t[s]),Vn().DomUtil.get("GPlocationOrigin_"+s+"-"+this._uid).value=t[s].lng+" , "+t[s].lat}"Voiture"===i.transport?Vn().DomUtil.get("GProuteTransportCar-"+this._uid).checked=!0:Vn().DomUtil.get("GProuteTransportPedestrian-"+this._uid).checked=!0,Vn().DomUtil.get("GProuteComputationSelect-"+this._uid).selectedIndex="fastest"===i.computation?0:1,this.onRouteComputationSubmit(i)}}});const nl={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"importance",title:"Importance"},{name:"nature",title:"Nature"},{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"Département"}],StreetAddress:[{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"Département"}],CadastralParcel:[{name:"department",title:"Département",description:"Numéro du département (ex: 01, 94)"},{name:"commune",title:"Code commune (INSEE)",description:"Code commune (INSEE) : 3 chiffres (ex: 067)"},{name:"absorbedCity",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"section",title:"Section",description:"Section : 2 caractères (ex: AA, 0D)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"}],Administratif:[{name:"prefecture",title:"Préfecture"},{name:"inseeRegion",title:"Code région (INSEE)"},{name:"inseeDepartment",title:"Code département (INSEE)"},{name:"municipality",title:"Ville"}]},zoomToResultsByDefault:function(t){var e=15,i=t.service,n=t.fields,o=t.type,s={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return"SuggestedLocation"===i&&"PositionOfInterest"===o&&(e=s[n.classification]),"DirectGeocodedLocation"===i&&"PositionOfInterest"===o&&(e=s[n.importance]||14),"StreetAddress"===o&&(e=17),"CadastralParcel"===o&&(e=17),"Administratif"===o&&(e=12),e}};const ol={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPsearchEngine"),t.className="GPwidget",t},_createShowSearchEngineElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowSearchEngine"),t.type="checkbox",t},_createShowSearchEnginePictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowSearchEnginePicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowSearchEngine"),e.title="Afficher/masquer la recherche par lieux",e.addEventListener("click",(function(){document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none";var e=document.getElementById(t._addUID("GPshowAdvancedSearch"));e&&(e.style.display=null,document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none");var i="#GPsearchInput-"+t._uid;document.querySelector(i+" input").disabled=!1,t.onShowSearchEngineClick()}));var i=document.createElement("span");return i.id=this._addUID("GPshowSearchEngineOpen"),i.className="GPshowAdvancedToolOpen",e.appendChild(i),e},_createSearchInputElement:function(t){var e=this,i=document.createElement("form");i.id=this._addUID("GPsearchInput"),i.addEventListener("submit",(function(t){return t.preventDefault(),document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="block",document.getElementById(e._addUID("GPautoCompleteList")).style.display="none",e.onGeocodingSearchSubmit(t),!1}));var n=document.createElement("input");n.id=this._addUID("GPsearchInputText"),n.type="text",n.placeholder=t,n.autocomplete="off",n.addEventListener("keyup",(function(t){var i=t.which||t.keyCode;13!==i&&10!==i&&38!==i&&40!==i&&(document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none",n.value.length>2?document.getElementById(e._addUID("GPautoCompleteList")).style.display="block":document.getElementById(e._addUID("GPautoCompleteList")).style.display="none",e.onAutoCompleteSearchText(t))})),n.addEventListener("keydown",(function(t){var i=t.which||t.keyCode,n=document.getElementById(e._addUID("GPautocompleteResults"));if(n){var o=n.getElementsByClassName("GPautoCompleteProposal current"),s=n.getElementsByClassName("GPautoCompleteProposal"),r=s.length;if(r){var a=null;if(!o.length)return(a=s[0]).className="GPautoCompleteProposal current",a.style.color="#000000",void(a.style["background-color"]="#CEDBEF");a=o[0];var l=parseInt(Jn.index(a.id),10),c=l===r-1?s[0]:s[l+1],h=0===l?s[r-1]:s[l-1];switch(a.style["background-color"]="",a.style.color="",h.style["background-color"]="",h.style.color="",c.style["background-color"]="",c.style.color="",i){case 38:a.className="GPautoCompleteProposal",h.className="GPautoCompleteProposal current",h.style.color="#000000",h.style["background-color"]="#CEDBEF";break;case 40:a.className="GPautoCompleteProposal",c.className="GPautoCompleteProposal current",c.style.color="#000000",c.style["background-color"]="#CEDBEF";break;case 13:t.preventDefault(),a.click(t)}a.focus()}}})),i.appendChild(n);var o=document.createElement("div");return o.id=this._addUID("GPsearchInputReset"),o.addEventListener("click",(function(){document.getElementById(e._addUID("GPsearchInputText")).value="",document.getElementById(e._addUID("GPautoCompleteList")).style.display="none",document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none",e.onSearchResetClick()})),i.appendChild(o),i},_createShowAdvancedSearchElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowAdvancedToolPicto",e.title="Ouvrir la recherche avancée",e.addEventListener("click",(function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!0,document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="none",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="inline-block"}));var i=document.createElement("span");return i.id=this._addUID("GPshowAdvancedSearchOpen"),i.className="GPshowAdvancedToolOpen",e.appendChild(i),e},_createAdvancedSearchPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPadvancedSearchPanel"),t.className="GPpanel",t.style.display="none",t},_createGeocodeResultsElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPgeocodeResultsList"),t.className="GPpanel",t.style.display="none",t.appendChild(this._createGeocodeResultsHeaderElement()),t},_createAutoCompleteElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPautoCompleteList"),t.className="GPautoCompleteList",t.style.display="none",t},_createAutoCompleteListElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.addEventListener?e.addEventListener("click",(function(e){t.onAutoCompletedResultsItemClick(e),document.getElementById(t._addUID("GPautoCompleteList")).style.display="none"}),!1):e.attachEvent&&e.attachEvent("onclick",(function(e){t.onAutoCompletedResultsItemClick(e),document.getElementById(t._addUID("GPautoCompleteList")).style.display="none"})),e},_createAutoCompletedLocationElement:function(t,e){var i=document.getElementById(this._addUID("GPautocompleteResults")),n=document.createElement("div");n.id=this._addUID("AutoCompletedLocation_"+e),n.className="GPautoCompleteProposal",n.innerHTML=t.fullText,n.addEventListener?n.addEventListener("click",(function(t){i.click(t)}),!1):n.attachEvent&&n.attachEvent("onclick",(function(t){i.click(t)})),i.appendChild(n)},_createAdvancedSearchPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var i=document.createElement("div");i.className="GPpanelTitle",i.innerHTML="Recherche avancée",e.appendChild(i);var n=document.createElement("div");return n.id=this._addUID("GPadvancedSearchClose"),n.className="GPpanelClose",n.title="Fermer la recherche avancée",n.addEventListener?n.addEventListener("click",(function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!1,document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none"}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!1,document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none"})),e.appendChild(n),e},_createAdvancedSearchPanelFormElement:function(t){var e=this,i=document.createElement("form");i.id=this._addUID("GPadvancedSearchForm"),i.addEventListener("submit",(function(t){t.preventDefault();for(var i=[],n="#GPadvancedSearchFilters-"+e._uid,o=document.querySelectorAll(n+" > div > div > input"),s=0;s<o.length;s++){var r=o[s];i.push({key:r.name,value:r.value})}return e.onGeocodingAdvancedSearchSubmit(t,i),document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="block",!1}));var n=document.createElement("div");n.className="GPflexInput";var o=document.createElement("label");o.className="GPadvancedSearchCodeLabel",o.innerHTML="Recherche par",n.appendChild(o);var s=this._createAdvancedSearchFormCodeElement(t);return n.appendChild(s),i.appendChild(n),i},_createAdvancedSearchFormCodeElement:function(t){var e=this,i=document.createElement("select");i.id=this._addUID("GPadvancedSearchCode"),i.className="GPadvancedSearchCode",i.addEventListener("change",(function(t){e.onGeocodingAdvancedSearchCodeChange(t)}),!1),t||(t=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"},{id:"Administratif",title:"Administratif"}]);for(var n=0;n<t.length;n++){var o=document.createElement("option");o.value=t[n].id,o.text=t[n].title,i.appendChild(o)}return i},_createAdvancedSearchFormInputElement:function(){var t=document.createElement("input");return t.type="submit",t.id=this._addUID("GPadvancedSearchSubmit"),t.className="GPinputSubmit",t.value="Chercher",t},_createAdvancedSearchFormFiltersElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPadvancedSearchFilters"),t},_createAdvancedSearchFiltersTableElement:function(t,e){var i=document.createElement("div");return i.id=this._addUID(t),e||(i.style.display="none"),i},_createAdvancedSearchFiltersAttributElement:function(t){var e=null,i=t.name,n=t.title,o=t.description,s=t.code,r=t.value,a=document.createElement("div");a.className="GPflexInput";var l=document.createElement("label");l.className="GPadvancedSearchFilterLabel",l.htmlFor=i,l.title=o||n,l.innerHTML=n,a.appendChild(l);var c=document.createElement("input");return c.id=i,c.className="GPadvancedSearchFilterInput",c.type="text",c.name=i,r&&(c.value=r),a.appendChild(c),(e=document.getElementById(this._addUID(s)))?e.appendChild(a):e=a,e},_createGeocodeResultsHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var i=document.createElement("div");i.className="GPpanelTitle",i.innerHTML="Résultats de la recherche",e.appendChild(i);var n=document.createElement("div");return n.id=this._addUID("GPgeocodeResultsClose"),n.className="GPpanelClose",n.title="Fermer la fenêtre de résultats",n.addEventListener?n.addEventListener("click",(function(){document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"})),e.appendChild(n),e},_createGeocodeResultsListElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.addEventListener?e.addEventListener("click",(function(e){e.ctrlKey||(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"),t.onGeocodedResultsItemClick(e)}),!1):e.attachEvent&&e.attachEvent("onclick",(function(e){e.ctrlKey||(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"),t.onGeocodedResultsItemClick(e)})),e},_createGeocodedLocationElement:function(t,e){var i=document.getElementById(this._addUID("GPgeocodeResults")),n=document.createElement("div");if(n.id=this._addUID("GeocodedLocation_"+e),n.className="GPautoCompleteProposal","string"==typeof t)n.innerHTML=t;else{var o=t.placeAttributes;o.freeform?n.innerHTML=o.freeform:o.postalCode?n.innerHTML=o.postalCode+" "+o.commune:o.cadastralParcel?n.innerHTML=o.cadastralParcel:n.innerHTML="..."}i.appendChild(n)}};var sl=Xn.getLogger("searchengine");const rl=Vn().Control.extend({includes:ol,options:{position:"topleft",collapsed:!0,displayInfo:!0,zoomTo:"",resources:[],placeholder:"Rechercher un lieu, une adresse",displayMarker:!0,markerStyle:"blue",displayAdvancedSearch:!0,advancedSearch:{},geocodeOptions:{},autocompleteOptions:{serviceOptions:{},triggerGeocode:!1,triggerDelay:1e3}},initialize:function(t){Vn().Util.setOptions(this,t),this._uid=Jn.generate(),this._showContainer=null,this._pictoContainer=null,this._inputContainer=null,this._suggestedContainer=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._advancedSearchCodes=[],this._marker=null,this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement(),this._triggerHandler=null},onAdd:function(){this._initAdvancedSearchCodes(),this._initAdvancedSearchFilters();var t=this._initLayout();return Vn().DomEvent.disableClickPropagation(t).disableScrollPropagation(t),t},onRemove:function(t){this._clearSuggestedLocation(),this._clearGeocodedLocation(),null!=this._marker&&(t.removeLayer(this._marker),this._marker=null)},_checkRightsManagement:function(){this.options.resources&&0!==this.options.resources.length||(this.options.resources=["StreetAddress","PositionOfInterest"]);var t=null,e=[],i=null;i=this.options.geocodeOptions.apiKey,(e=(t=this.options.geocodeOptions.filterOptions)?t.type:[])&&0!==e.length||(e=this.options.resources||["StreetAddress","PositionOfInterest"]);var n=Ma({key:i||this.options.apiKey,resources:e,services:["Geocode"]});i=this.options.autocompleteOptions.apiKey,(e=(t=this.options.autocompleteOptions.filterOptions)?t.type:[])&&0!==e.length||(e=this.options.resources||["StreetAddress","PositionOfInterest"]);var o=Ma({key:i||this.options.apiKey,resources:e,services:["AutoCompletion"]});if(n||o||(this._noRightManagement=!0),o&&(this._servicesRightManagement.AutoCompletion={},this._servicesRightManagement.AutoCompletion.resources=o.AutoCompletion,this._servicesRightManagement.AutoCompletion.key=o.key),n&&(this._servicesRightManagement.Geocode={},this._servicesRightManagement.Geocode.resources=n.Geocode,this._servicesRightManagement.Geocode.key=n.key),!this.options.advancedSearch||0===Object.keys(this.options.advancedSearch).length)for(var s=this._servicesRightManagement.Geocode.resources,r=0;r<s.length;r++){var a=s[r];this.options.advancedSearch[a]=[]}},_initLayout:function(){var t=this._createMainContainerElement(),e=this._showContainer=this._createShowSearchEngineElement();t.appendChild(e),this.options.collapsed||(e.checked="true");var i=this._pictoContainer=this._createShowSearchEnginePictoElement();t.appendChild(i);var n=this._createSearchInputElement(this.options.placeholder);if(t.appendChild(n),this.options.displayAdvancedSearch){var o=this._createShowAdvancedSearchElement();t.appendChild(o);var s=this._createAdvancedSearchPanelElement(),r=this._createAdvancedSearchPanelHeaderElement(),a=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),l=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var c=this._createAdvancedSearchFormInputElement();a.appendChild(l),a.appendChild(c),s.appendChild(r),s.appendChild(a),t.appendChild(s)}var h=this._createAutoCompleteElement(),u=this._suggestedContainer=this._createAutoCompleteListElement();h.appendChild(u),t.appendChild(h);var d=this._createGeocodeResultsElement(),p=this._geocodedContainer=this._createGeocodeResultsListElement();return d.appendChild(p),t.appendChild(d),t},_initAdvancedSearchCodes:function(){for(var t=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"},{id:"Administratif",title:"Administratif"}],e=Object.keys(this.options.advancedSearch),i=0;i<e.length;i++)for(var n=e[i],o=0;o<t.length;o++)t[o].id===n&&this._advancedSearchCodes.push(t[o]);0===this._advancedSearchCodes.length&&(this._advancedSearchCodes=t),sl.log("advancedSearchCodes",this._advancedSearchCodes)},_initAdvancedSearchFilters:function(){var t={PositionOfInterest:[{name:"city",title:"Ville",filter:!1,sep:!0},{name:"importance",title:"Importance",filter:!0},{name:"nature",title:"Nature",filter:!0},{name:"territory",title:"Territoire",filter:!0},{name:"insee",title:"Code commune (INSEE)",filter:!0},{name:"department",title:"Département",filter:!0}],StreetAddress:[{name:"number",title:"Numéro",filter:!1,sep:!0},{name:"street",title:"Rue",filter:!1,sep:!0},{name:"postalCode",title:"Code Postal",filter:!1,sep:!0},{name:"city",title:"Ville",filter:!1,sep:!0},{name:"territory",title:"Territoire",filter:!0},{name:"insee",title:"Code commune (INSEE)",filter:!0},{name:"department",title:"Département",filter:!0}],CadastralParcel:[{name:"department",title:"Département",filter:!1,sep:!1,value:"__"},{name:"commune",title:"Commune",filter:!1,sep:!1,value:"___"},{name:"absorbedCity",title:"Commune absorbée",filter:!1,sep:!1,value:"___"},{name:"section",title:"Section",filter:!1,sep:!1,value:"__"},{name:"number",title:"Numéro",filter:!1,sep:!1,value:"____"}],Administratif:[{name:"prefecture",title:"Préfecture",filter:!0},{name:"inseeRegion",title:"Code région (INSEE)",filter:!0},{name:"inseeDepartment",title:"Code département (INSEE)",filter:!0},{name:"city",title:"Ville",filter:!1,sep:!0}]},e=this.options.advancedSearch;for(var i in e)if(e.hasOwnProperty(i)){if(!e[i]||0===e[i].length){e[i]=t[i];continue}for(var n=e[i],o=0;o<n.length;o++){var s=n[o];s.hasOwnProperty("filter")||(s.filter="municipality"!==s.name)}}Vn().Util.extend(this._advancedSearchFilters,t,e),sl.log("advancedSearchFilters",this._advancedSearchFilters)},_setFilter:function(t){for(var e=this._filterContainer,i=!1,n=0;n<this._advancedSearchCodes.length;n++)if(this._advancedSearchCodes[n].id===t){i=!0;break}if(i){for(this._currentGeocodingCode=t;e.firstChild;)e.removeChild(e.firstChild);var o=this._advancedSearchFilters[t];if(o&&0!==o.length){for(var s=this._createAdvancedSearchFiltersTableElement(t,!0),r=0;r<o.length;r++){var a=this._createAdvancedSearchFiltersAttributElement(o[r]);s.appendChild(a)}return e.appendChild(s),e}}else for(;e.firstChild;)e.removeChild(e.firstChild)},_requestAutoComplete:function(t){if(t&&0!==Object.keys(t).length&&t.text)if(sl.log(t),this._noRightManagement)sl.log("no rights for all service !?");else if(this._servicesRightManagement.AutoCompletion){var e={};Vn().Util.extend(e,this.options.autocompleteOptions.serviceOptions),Vn().Util.extend(e,t);var i=this._servicesRightManagement.AutoCompletion.resources;if(i&&0!==Object.keys(i).length){Vn().Util.isArray(i)&&!e.filterOptions&&(e.filterOptions={},e.filterOptions.type=i);var n=this._servicesRightManagement.AutoCompletion.key;Vn().Util.extend(e,{apiKey:e.apiKey||this.options.apiKey||n}),Vn().Util.extend(e,{ssl:this.options.ssl}),sl.log(e),Ca.Services.autoComplete(e)}}else sl.log("no rights for this service !?")},_fillAutoCompletedLocationListContainer:function(t){if(t&&0!==t.length){var e=this._suggestedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);for(var i=0;i<t.length;i++)this._createAutoCompletedLocationElement(t[i],i)}},_requestGeocoding:function(t){if(t&&0!==Object.keys(t).length&&t.location)if(sl.log(t),this._noRightManagement)sl.log("no rights for all service !?");else if(this._servicesRightManagement.Geocode){var e={};Vn().Util.extend(e,this.options.geocodeOptions),Vn().Util.extend(e,t),e.hasOwnProperty("returnFreeForm")||Vn().Util.extend(e,{returnFreeForm:!0});var i=this._servicesRightManagement.Geocode.resources;if(i&&0!==Object.keys(i).length){Vn().Util.isArray(i)&&!e.filterOptions&&(e.filterOptions={},e.filterOptions.type=i);var n=this._servicesRightManagement.Geocode.key;Vn().Util.extend(e,{apiKey:e.apiKey||this.options.apiKey||n}),Vn().Util.extend(e,{ssl:this.options.ssl}),sl.log(e),Ca.Services.geocode(e)}}else sl.log("no rights for this service !?")},_fillGeocodedLocationListContainer:function(t){if(t&&0!==t.length){var e=this._geocodedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);for(var i=0;i<t.length;i++)sl.log(t[i]),this._createGeocodedLocationElement(t[i],i);this._geocodedLocations=t}else this._clearGeocodedLocation()},_getGeocodeCoordinatesFromFullText:function(t,e){var i=t.fullText,n=this;this._requestGeocoding({location:i,onSuccess:function(t){sl.log("request from Geocoding (coordinates null)",t),t.locations&&0!==t.locations.length&&t.locations[0].position&&n._suggestedLocations&&n._suggestedLocations[e]&&(n._suggestedLocations[e].position={x:t.locations[0].position.y,y:t.locations[0].position.x},n._locationsToBeDisplayed.unshift(n._suggestedLocations[e]),n._fillAutoCompletedLocationListContainer(n._locationsToBeDisplayed))},onFailure:function(){n._suggestedLocations&&n._suggestedLocations[e]&&n._createAutoCompletedLocationElement(n._suggestedLocations[e],e)}})},_setLabel:function(t){Vn().DomUtil.get("GPsearchInputText-"+this._uid).value=t||""},_setPosition:function(t,e){var i=this._map;i.setZoomAround(Vn().latLng(t.x,t.y),e,!0),i.panTo(Vn().latLng(t.x,t.y))},_getZoom:function(t){var e=this._map,i=this.options.zoomTo,n=null;if("function"==typeof i&&(sl.trace("zoom function"),n=i.call(this,t)),"number"==typeof i&&(sl.trace("zoom level"),n=i),"string"==typeof i)if("auto"===i)sl.trace("zoom auto"),n=nl.zoomToResultsByDefault(t);else{sl.trace("zoom level parsing");var o=parseInt(i,10);isNaN(o)||(sl.trace("zoom parsing"),n=o)}Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n&&""!==n&&Number.isInteger(n)||(sl.trace("zoom not found, current zoom..."),n=e.getZoom());var s=e.getMinZoom(),r=e.getMaxZoom();return n<s&&(sl.trace("zoom level min..."),n=s),n>r&&(sl.trace("zoom level max..."),n=r),sl.trace("zoom",n),n},_setMarker:function(t,e,i,n){var o=this._map;if(null!=this._marker&&(o.removeLayer(this._marker),this._marker=null),t){var s=null;"string"==typeof n?s=new Ra(n):n instanceof Vn().Icon?s=n:(s=new Ra("blue"),sl.log("Utilisation du marker par défaut !"));var r={clickable:!0,zIndexOffset:1e3,icon:s};if(this._marker=Vn().marker(Vn().latLng(t.x,t.y),r),this._marker.addTo(o),i){var a=null;if("string"!=typeof e){var l=[];if("DirectGeocodedLocation"===e.service)if(e.fields.freeform)a=e.fields.freeform;else{for(var c=this._advancedSearchFilters[e.type],h=0;h<c.length;h++){var u=c[h].name,d=e.fields[u];"string"!=typeof d&&"number"!=typeof d||l.push(d)}a=l.join(" - ")}else"SuggestedLocation"===e.service?e.fields.fullText?a=e.fields.fullText:(l.push(e.fields.street||""),l.push(e.fields.postalCode||""),l.push(e.fields.commune||""),"PositionOfInterest"===e.type&&(l.push(e.fields.poi||""),l.push(e.fields.kind||"")),a=l.join(" - ")):a="sans informations."}else a=e;this._marker.bindPopup(a)}}},_clearResults:function(){this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker()},_clearSuggestedLocation:function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},_clearGeocodedLocation:function(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)},onShowSearchEngineClick:function(){},onSearchResetClick:function(){this._clearResults()},onAutoCompleteSearchText:function(t){var e=t.target.value;if(e&&!(this._noRightManagement||(this._currentGeocodingLocation=e,e.length<3))){var i=this.options.autocompleteOptions.triggerGeocode,n=this.options.autocompleteOptions.triggerDelay,o=this;this._requestAutoComplete({text:e,onSuccess:function(t){if(sl.log("request from AutoComplete",t),t){if(o._suggestedLocations=t.suggestedLocations,o._locationsToBeDisplayed=[],o._servicesRightManagement.Geocode&&o._servicesRightManagement.Geocode.key)for(var e=0;e<o._suggestedLocations.length;e++){var i=o._suggestedLocations[e];i.position&&0===i.position.x&&0===i.position.y&&i.fullText?o._getGeocodeCoordinatesFromFullText(i,e):o._locationsToBeDisplayed.push(i)}else o._locationsToBeDisplayed=o._suggestedLocations;o._fillAutoCompletedLocationListContainer(o._locationsToBeDisplayed),o._triggerHandler&&(clearTimeout(o._triggerHandler),o._triggerHandler=null,sl.warn("Cancel a geocode request !"))}},onFailure:function(t){o._clearSuggestedLocation(),sl.log(t.message),"No suggestion matching the search"===t.message&&i&&(o._triggerHandler&&(clearTimeout(o._triggerHandler),sl.warn("Cancel the last geocode request !")),o._triggerHandler=setTimeout((function(){sl.warn("Launch a geocode request (code postal) !"),o._requestGeocoding({location:e,returnFreeForm:!0,onSuccess:function(t){if(sl.log("request from Geocoding",t),t){o._locationsToBeDisplayed=[];for(var e=t.locations,i=0;i<e.length;i++){var n=e[i];n.fullText=n.placeAttributes.freeform,n.position={x:n.position.y,y:n.position.x},o._locationsToBeDisplayed.push(n)}o._fillAutoCompletedLocationListContainer(e)}},onFailure:function(t){sl.log(t.message)}})}),n))}})}},onAutoCompletedResultsItemClick:function(t){var e=Jn.index(t.target.id),i=t.target.innerHTML;if(sl.log(e,i),sl.log(this._locationsToBeDisplayed[e]),e){var n={x:this._locationsToBeDisplayed[e].position.y,y:this._locationsToBeDisplayed[e].position.x},o={service:"SuggestedLocation",type:this._locationsToBeDisplayed[e].type,fields:this._locationsToBeDisplayed[e]},s=this._getZoom(o);this._setLabel(i),this._setPosition(n,s),this.options.displayMarker&&this._setMarker(n,o,this.options.displayInfo,this.options.markerStyle)}},onGeocodingSearchSubmit:function(t){sl.log(t);var e=t.target[0].value;if(e&&!this._noRightManagement){this._currentGeocodingLocation=e;var i=this;this._requestGeocoding({location:e,onSuccess:function(t){if(sl.log("request from Geocoding",t),t){var e=t.locations;i._fillGeocodedLocationListContainer(e)}},onFailure:function(t){i._clearGeocodedLocation(),sl.log(t.message)}})}},onGeocodedResultsItemClick:function(t){var e=Jn.index(t.target.id),i=t.target.innerHTML;if(sl.log(e,i),sl.log(this._geocodedLocations[e]),e){var n=this._geocodedLocations[e].position,o={service:"DirectGeocodedLocation",type:this._geocodedLocations[e].type,fields:this._geocodedLocations[e].placeAttributes},s=this._getZoom(o);this._setLabel(i),this._setPosition(n,s),this.options.displayMarker&&this._setMarker(n,o,this.options.displayInfo,this.options.markerStyle)}},onGeocodingAdvancedSearchCodeChange:function(t){sl.log(t);var e=t.target.selectedIndex,i=t.target.options[e].value;i&&this._setFilter(i)},onGeocodingAdvancedSearchSubmit:function(t,e){if(sl.log(e),e&&0!==e.length){var i={};i.type=[this._currentGeocodingCode];var n=this._currentGeocodingLocation||"";"CadastralParcel"===this._currentGeocodingCode&&(n="");for(var o=0;o<e.length;o++){var s=e[o];if(s.value)for(var r=this._advancedSearchFilters[this._currentGeocodingCode],a=0;a<r.length;a++){var l=r[a];if(l.name===s.key)if(l.filter)i[s.key]=s.value;else if(l.value){var c=s.value.length,h=l.value.length;if(h!==c){for(var u=h-c,d=l.value.charAt(0);d.length<u;)d+=d;var p=d.slice(0,u);s.value=s.value+p}n+=s.value}else"string"==typeof n&&(n={}),n[s.key]=s.value}}var f=this;this._requestGeocoding({location:n,filterOptions:i,onSuccess:function(t){if(sl.log(t),t){var e=t.locations;f._fillGeocodedLocationListContainer(e)}},onFailure:function(t){f._clearGeocodedLocation(),sl.log(t.message)}})}},setText:function(t,e,i){this._showContainer.checked||this._pictoContainer.click(),Vn().Util.extend(this.options,i);var n=Vn().DomUtil.get("GPsearchInputText-"+this._uid);(n.value=t,e)?Vn().DomUtil.get("GPsearchInput-"+this._uid).dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})):n.dispatchEvent(new KeyboardEvent("keyup"))}});const al={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPelevationPath"),t.className="GPwidget",t},_createShowElevationPathElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowElevationPath"),t.type="checkbox",t},_createShowElevationPathPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowElevationPath"),e.title="Calculer un profil",e.addEventListener?e.addEventListener("click",(function(e){t.onShowElevationPathClick(e)})):e.attachEvent&&e.attachEvent("onclick",(function(e){t.onShowElevationPathClick(e)}));var i=document.createElement("span");return i.id=this._addUID("GPshowElevationPathOpen"),i.className="GPshowAdvancedToolOpen",e.appendChild(i),e},_createElevationPathPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPelevationPathPanel"),t.className="GPpanel",t},_createElevationPathPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var i=document.createElement("div");i.id=this._addUID("GPelevationPathPanelInfo"),i.className="GPpanelInfo",i.title="Informations",i.addEventListener?i.addEventListener("click",(function(){t.onOpenElevationPathInfoClick()})):i.attachEvent&&i.attachEvent("onclick",(function(){t.onOpenElevationPathInfoClick()})),e.appendChild(i);var n=document.createElement("div");n.className="GPpanelTitle",n.innerHTML="Profil Altimétrique",e.appendChild(n);var o=document.createElement("div");o.id=this._addUID("GPelevationPathPanelReduce"),o.className="GPpanelReduce",o.title="Masquer le panneau",o.addEventListener?o.addEventListener("click",(function(){"function"==typeof t.onReduceElevationPathPanelClick&&(document.getElementById(t._addUID("GPshowElevationPath")).checked=!1,t.onReduceElevationPathPanelClick())}),!1):o.attachEvent&&o.attachEvent("onclick",(function(){"function"==typeof t.onReduceElevationPathPanelClick&&(document.getElementById(t._addUID("GPshowElevationPath")).checked=!1,t.onReduceElevationPathPanelClick())})),e.appendChild(o);var s=document.createElement("div");return s.id=this._addUID("GPelevationPathPanelClose"),s.className="GPpanelClose",s.title="Fermer le panneau",s.addEventListener?s.addEventListener("click",(function(){document.getElementById(t._addUID("GPshowElevationPathPicto")).click()}),!1):s.attachEvent&&s.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPshowElevationPathPicto")).click()})),e.appendChild(s),e},_createElevationPathPanelProfilElement:function(){var t=document.createElement("div");return t.id="GPelevationPathProfil",t},_createElevationPathWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPelevationPathCalcWaitingContainer"),t.className="GPelevationPathCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPelevationPathCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t},_createElevationPathInformationsElement:function(){var t=document.createElement("div");t.id=this._addUID("GPelevationPathInformationsContainer"),t.className="GPelevationPathInformationsContainerHidden";var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",t.appendChild(e),t},_addElevationPathInformationsItem:function(t){var e=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(e){var i=document.createElement("p");i.className="GPelevationPathInformations",i.innerHTML=t,e.appendChild(i)}return e}};const ll={_getCssProperty:function(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)},_getTextWidth:function(t,e,i=null){var n=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");return n.font=null===i?`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:i,n.measureText(t).width},_dataZToSvgY:function(t,e,i,n){return e-(t-i)*n-.5},_dataDistToSvgX:function(t,e,i,n){return e-i+t*n},_svgXToDataDist:function(t,e,i,n){return(t+i-e)/n},_arrayBisect:function(t,e){let i;if(0===t.length)return 0;for(i=0;i<t.length;i++)if(e<t[i].dist)return i;return i-1},displayProfileByDefault:function(t,e,i,n){var o=i;if(!e)return;if(!t)return;for(;e.firstChild;)e.removeChild(e.firstChild);const s=25,r=15,a=10,l=10;var c=o.options.displayProfileOptions,h=t.points,u=JSON.parse(JSON.stringify(h));u.sort((function(t,e){return t.z-e.z}));var d=u[0].z,p=u[u.length-1].z,f=t.distance;let m="m";const g=document.createElement("div");g.id="profileElevationByDefault",e.appendChild(g);const _=e.clientHeight-s-a,v=e.clientWidth-l-r,y=17,E=this._getTextWidth(Math.round(p).toLocaleString()+",88",e,"400 10 Verdana"),w=this._getTextWidth(Math.round(f).toLocaleString(),e),b=_-17-15,x=v-y-E,L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.id="profileElevationByDefaultSvg",L.setAttribute("style",`width: ${v}px; height: ${_}px; display: block; margin: auto; overflow: visible;`);const C=Math.floor(b/15);let P;P=p===d?.1:Math.pow(10,Math.ceil(Math.log((p-d)/C)/Math.log(10)))/2;let S=Math.floor(d/P)*P,M=Math.ceil(p/P)*P;M===p&&(M+=P),S=Math.round(100*S)/100,M=Math.round(100*M)/100;let T=Math.round((M-S)/P);T+1>C&&(P=Math.pow(10,Math.ceil(Math.log((p-d)/C)/Math.log(10))),S=Math.floor(d/P)*P,M=Math.ceil(p/P)*P,M===p&&(M+=P),S=Math.round(100*S)/100,M=Math.round(100*M)/100,T=Math.floor((M-S)/P)),T=Math.max(Math.round(T),1);const A=document.createElementNS("http://www.w3.org/2000/svg","g");A.setAttribute("class","profile-z-vertical");const I=document.createElementNS("http://www.w3.org/2000/svg","g"),k=b/T;let R,D,O,G,N,U,j=b/(M-S);j=p===d?b/.2:b/(M-S);for(let t=0;t<=T;t++)R=document.createElementNS("http://www.w3.org/2000/svg","text"),R.setAttribute("class","profile-z-graduation"),R.setAttribute("font-family","Verdana"),R.setAttribute("font-size","10px"),R.setAttribute("fill","#5E5E5E"),R.textContent=(Math.round(100*(S+t*P))/100).toLocaleString(),D=b-t*k,R.setAttribute("transform",`translate(${y+E-8}, ${D+5})`),R.setAttribute("text-anchor","end"),A.appendChild(R),O=Math.round(D)-.5,G=document.createElementNS("http://www.w3.org/2000/svg","g"),N=document.createElementNS("http://www.w3.org/2000/svg","path"),N.setAttribute("cs","100,100"),N.setAttribute("stroke-width","1"),0!==t?N.setAttribute("stroke-opacity","0.2"):N.setAttribute("stroke-opacity","1"),N.setAttribute("stroke","#000000"),N.setAttribute("fill","none"),N.setAttribute("d",`M${y+E},${O} L${x+y+E},${O}`),U=document.createElementNS("http://www.w3.org/2000/svg","path"),U.setAttribute("cs","100,100"),U.setAttribute("stroke-width","1"),U.setAttribute("stroke-opacity","1"),U.setAttribute("stroke","#000000"),U.setAttribute("fill","none"),U.setAttribute("d",`M${y+E},${O} L${y+E+5},${O}`),U.setAttribute("transform","translate(-5, 0)"),G.appendChild(U),G.appendChild(N),I.appendChild(G);var F=document.createElementNS("http://www.w3.org/2000/svg","text");F.setAttribute("class","profile-z-legend"),F.setAttribute("font-family","Verdana"),F.setAttribute("font-size","11px"),F.setAttribute("fill","#5E5E5E"),F.textContent="Altitude (m)",F.setAttribute("transform",`translate(9, ${Math.round(b/2)}) rotate(-90)`),F.setAttribute("text-anchor","middle"),A.appendChild(F),L.appendChild(A),L.appendChild(I),f>2e3&&(f/=1e3,m="km");const z=Math.floor(x/w);let B=Math.pow(10,Math.ceil(Math.log(f/z)/Math.log(10)))/2;const q=f;let H=Math.floor(q/B);H>z?(B=Math.pow(10,Math.ceil(Math.log(f/z)/Math.log(10))),H=Math.floor(q/B)):H<1&&(B=Math.pow(10,Math.ceil(Math.log(f/z)/Math.log(10))-1),H=Math.floor(q/B)),H=Math.max(H,1);const W=B*H,V=document.createElementNS("http://www.w3.org/2000/svg","g");V.setAttribute("class","profile-x-vertical");const Z=document.createElementNS("http://www.w3.org/2000/svg","g"),Y=x/q,X=(q-W)*Y,K=Math.round((x-X)/H);let J,Q,$,tt,et,it;for(let t=0;t<=H+1;t++)J=document.createElementNS("http://www.w3.org/2000/svg","text"),J.setAttribute("class","profile-x-graduation"),J.setAttribute("font-family","Verdana"),J.setAttribute("font-size","10px"),J.setAttribute("fill","#5E5E5E"),t!==H+1&&(J.textContent=(Math.round(100*t*B)/100).toLocaleString()),Q=y+E+t*K,t===H+1&&(Q=y+E+x),J.setAttribute("transform",`translate(${Q}, ${b+15+5})`),J.setAttribute("text-anchor","middle"),V.appendChild(J),$=Q-.5,tt=document.createElementNS("http://www.w3.org/2000/svg","g"),et=document.createElementNS("http://www.w3.org/2000/svg","path"),et.setAttribute("cs","100,100"),et.setAttribute("stroke-width","1"),0!==t?et.setAttribute("stroke-opacity","0.2"):et.setAttribute("stroke-opacity","1"),et.setAttribute("stroke","#000000"),et.setAttribute("fill","none"),et.setAttribute("d",`M${$},${b} L${$},0`),it=document.createElementNS("http://www.w3.org/2000/svg","path"),it.setAttribute("cs","100,100"),it.setAttribute("stroke-width","1"),it.setAttribute("stroke-opacity","1"),it.setAttribute("stroke","#000000"),it.setAttribute("fill","none"),it.setAttribute("d",`M${$},${b} L${$},${b-5}`),it.setAttribute("transform","translate(0, 5)"),tt.appendChild(it),tt.appendChild(et),Z.appendChild(tt);var nt=document.createElementNS("http://www.w3.org/2000/svg","text");nt.setAttribute("class","profile-x-legend"),nt.setAttribute("font-family","Verdana"),nt.setAttribute("font-size","11px"),nt.setAttribute("fill","#5E5E5E"),nt.textContent=`Distance (${m})`,nt.setAttribute("transform",`translate(${y+E+x/2}, ${b+15+17+3})`),nt.setAttribute("text-anchor","middle"),V.appendChild(nt),L.appendChild(V),L.appendChild(Z);const ot=document.createElementNS("http://www.w3.org/2000/svg","g");let st=1;"km"===m&&(st=1e3);let rt=this._dataDistToSvgX(h[0].dist/st,v,x,Y),at=this._dataZToSvgY(h[0].z,b,S,j),lt=`M${rt},${at}`;for(let t=1;t<h.length;t++)rt=this._dataDistToSvgX(h[t].dist/st,v,x,Y),at=this._dataZToSvgY(h[t].z,b,S,j),lt+=` L${rt},${at}`;const ct=document.createElementNS("http://www.w3.org/2000/svg","path");ct.setAttribute("cs","100,100"),ct.setAttribute("stroke-width","1"),ct.setAttribute("stroke-opacity","1"),ct.setAttribute("stroke","#0B6BA7"),ct.setAttribute("fill","none"),ct.setAttribute("d",lt),lt+=` L${rt},${b}`,lt+=` L${v-x},${b}`;const ht=document.createElementNS("http://www.w3.org/2000/svg","path");ht.setAttribute("cs","100,100"),ht.setAttribute("stroke-width","1"),ht.setAttribute("stroke-opacity","0"),ht.setAttribute("stroke","#000000"),ht.setAttribute("fill","#00B798"),ht.setAttribute("fill-opacity","0.4"),ht.setAttribute("d",lt),ot.appendChild(ct),ot.appendChild(ht),L.appendChild(ot);const ut=document.createElementNS("http://www.w3.org/2000/svg","g"),dt=document.createElementNS("http://www.w3.org/2000/svg","rect");dt.setAttribute("width",x),dt.setAttribute("height",b),dt.setAttribute("transform",`translate(${v-x},0)`),dt.setAttribute("visibility","hidden"),dt.setAttribute("pointer-events","all");const pt=JSON.parse(JSON.stringify(h));pt.sort((function(t,e){return t.dist-e.dist}));const ft=document.createElementNS("http://www.w3.org/2000/svg","line");ft.setAttribute("id","focusLineX"),ft.setAttribute("class","focusLine-default"),ft.setAttribute("fill","none"),ft.setAttribute("stroke","#F90"),ft.setAttribute("stroke-width","0.5px"),ft.setAttribute("visibility","hidden");const mt=document.createElementNS("http://www.w3.org/2000/svg","line");mt.setAttribute("id","focusLineY"),mt.setAttribute("class","focusLine-default"),mt.setAttribute("fill","none"),mt.setAttribute("stroke","#F90"),mt.setAttribute("stroke-width","0.5px"),mt.setAttribute("visibility","hidden");const gt=document.createElementNS("http://www.w3.org/2000/svg","circle");gt.setAttribute("id","focusCircle"),gt.setAttribute("r",4),gt.setAttribute("class","circle-default focusCircle-default"),gt.setAttribute("fill","#F90"),gt.setAttribute("visibility","hidden"),ut.appendChild(gt),ut.appendChild(ft),ut.appendChild(mt);const _t=document.createElement("div"),vt=document.createElement("span"),yt=document.createElement("br"),Et=document.createElement("span"),wt=document.createElement("br"),bt=document.createElement("span");_t.setAttribute("style","text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:Verdana; z-index:50;"),_t.style.pointerEvents="none",_t.style.position="fixed",_t.setAttribute("class","tooltipInit"),g.appendChild(_t),vt.setAttribute("class","altiPathValue"),Et.setAttribute("class","altiPathValue"),bt.setAttribute("class","altiPathCoords"),_t.appendChild(vt),_t.appendChild(yt),c.currentSlope&&(_t.appendChild(Et),_t.appendChild(wt)),_t.appendChild(bt);const xt=document.createElementNS("http://www.w3.org/2000/svg","g");ut.appendChild(xt);const Lt=document.createElementNS("http://www.w3.org/2000/svg","path");Lt.setAttribute("cs","100,100"),Lt.setAttribute("fill","#FFFFFF"),Lt.setAttribute("stroke","#CCCCCC"),Lt.setAttribute("fill-opacity","0.8"),Lt.setAttribute("stroke-width","1"),Lt.setAttribute("stroke-opacity","1");const Ct=document.createElementNS("http://www.w3.org/2000/svg","path");return Ct.setAttribute("cs","100,100"),Ct.setAttribute("fill","#FFFFFF"),Ct.setAttribute("stroke","#000000"),Ct.setAttribute("fill-opacity","0"),Ct.setAttribute("stroke-width","1"),Ct.setAttribute("stroke-opacity","0.4"),Ct.setAttribute("transform","translate(1,1)"),xt.appendChild(Ct),xt.appendChild(Lt),xt.setAttribute("class","tooltipInit"),xt.style.pointerEvents="none",dt.addEventListener("mouseover",(function(){ft.setAttribute("visibility","visible"),mt.setAttribute("visibility","visible"),gt.setAttribute("visibility","visible"),n.__createProfileMarker(o,h[0]),_t.setAttribute("class","tooltipFadeIn"),xt.setAttribute("class","tooltipFadeIn")})),dt.addEventListener("mouseout",(function(){ft.setAttribute("visibility","hidden"),mt.setAttribute("visibility","hidden"),gt.setAttribute("visibility","hidden"),n.__removeProfileMarker(o),_t.setAttribute("class","tooltipFadeOut"),xt.setAttribute("class","tooltipFadeOut")})),dt.addEventListener("mousemove",function(t){const e=L.createSVGPoint();e.x=t.clientX,e.y=t.clientY;const i=e.matrixTransform(L.getScreenCTM().inverse()),s=this._svgXToDataDist(i.x,v,x,Y)*st,r=Math.max(1,this._arrayBisect(pt,s)),a=h[r-1],l=h[r];let c=a;s-a.dist>l.dist-s&&(c=l);const u=this._dataDistToSvgX(c.dist/st,v,x,Y),d=this._dataZToSvgY(c.z,b,S,j);gt.setAttribute("cx",u),gt.setAttribute("cy",d),ft.setAttribute("x1",u),ft.setAttribute("y1",b),ft.setAttribute("x2",u),ft.setAttribute("y2",0),mt.setAttribute("x1",y+E),mt.setAttribute("y1",d),mt.setAttribute("x2",x+y+E),mt.setAttribute("y2",d),n.__updateProfileMarker(o,c);const p=`Altitude : ${c.z.toLocaleString()} m`,m=`Pente : ${c.slope} %`,g=`(lat : ${c.lat.toLocaleString()} / lon : ${c.lon.toLocaleString()})`;vt.innerHTML=p,Et.innerHTML=m,bt.innerHTML=g;const _=Math.max(this._getTextWidth(g,bt),this._getTextWidth(p,vt));let w=L.getBoundingClientRect().left+window.pageXOffset+u;const C=L.getBoundingClientRect().top+window.pageYOffset+d-19;let P;c.dist>f*st/2?(P=`M -0.5 -0.5 l -6 6 l 0 16 l -${_+10} 0 l 0 -44 l ${_+10} 0 l 0 16 l 6 6`,w-=_+12):c.dist<=f*st/2&&(P=`M -0.5 -0.5 l 6 6 l 0 16 l ${_+10} 0 l 0 -44 l -${_+10} 0 l 0 16 l -6 6`,w+=12),Lt.setAttribute("d",P),Ct.setAttribute("d",P),xt.setAttribute("transform",`translate(${u},${d})`),xt.style.transform=`translate(${u}px,${d}px)`,_t.style.left=`${w}px`,_t.style.top=`${C}px`}.bind(this)),ut.appendChild(dt),L.appendChild(ut),g.appendChild(L),e},displayProfileRaw:function(t,e,i,n){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var o=t&&t.points?t.points:{},s=document.createElement("textarea");return s.id="profilElevationResults",s.rows=10,s.cols=50,s.style.width="100%",s.innerHTML=JSON.stringify(o,void 0,4),s.addEventListener("mouseover",(function(t){n.__customRawProfileMouseOverEvent(i,t)})),e.appendChild(s),e}},displayProfileLibD3:function(t,e,i,n){var o=i;if(e&&t){for(;e.firstChild;)e.removeChild(e.firstChild);var s=t.points;if(t.distance>2e3){t.unit="km";for(let t=0;t<s.length;t++)s[t].dist/=1e3}var r=o.options.displayProfileOptions,a=20,l=20,c=30,h=40,u=e.clientWidth-h-l,d=e.clientHeight-a-c,p=d3.scale.linear().range([0,u]),f=d3.scale.linear().range([d,0]),m=d3.svg.axis().scale(p).orient("bottom").ticks(5),g=d3.svg.axis().scale(f).orient("left").ticks(5),_=d3.svg.line().interpolate("basis").x((function(t){return p(t.dist)})).y((function(t){return f(t.z)})),v=d3.svg.area().interpolate("basis").x((function(t){return p(t.dist)})).y0(d).y1((function(t){return f(t.z)})),y=d3.select(e).append("svg").attr("width",u+h+l).attr("height",d+a+c).append("g").attr("transform","translate("+h+","+a+")"),E=d3.extent(s,(function(t){return t.dist}));p.domain(E);var w=[0,d3.max(s,(function(t){return t.z}))];f.domain(w),y.append("path").datum(s).attr("class","area-d3").attr("d",v),y.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+d+")").call(m).append("text").attr("y",-15).attr("dy",".71em").attr("x",u).text("Distance ("+t.unit+")"),y.append("g").attr("class","y axis-d3").call(g).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),y.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+d+")").call(m.orient("bottom").tickSize(-d,0,0).tickFormat("")),y.append("g").attr("class","grid-d3 horizontal").call(g.orient("left").tickSize(-u,0,0).tickFormat("")),y.append("path").datum(s).attr("class","line-d3").attr("d",_),y.selectAll("circle").data(s).enter().append("circle").attr("cx",(function(t){return p(t.dist)})).attr("cy",(function(t){return f(t.z)})).attr("r",0).attr("class","circle-d3");var b=y.append("g").style("display","none");b.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),b.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),b.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var x=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),L=d3.bisector((function(t){return t.dist})).left;return y.append("rect").attr("class","overlay-d3").attr("width",u).attr("height",d).on("mouseover",(function(){b.style("display",null),n.__createProfileMarker(o,s[0])})).on("mouseout",(function(){b.style("display","none"),n.__removeProfileMarker(o),x.transition().duration(500).style("opacity",0)})).on("mousemove",(function(){var t=d3.mouse(this),e=p.invert(t[0]),i=Math.max(1,L(s,e)),a=s[i-1],l=s[i],c=e-a[0]>l[0]-e?l:a,h=p(c.dist),u=f(c.z);b.select("#focusCircle").attr("cx",h).attr("cy",u),b.select("#focusLineX").attr("x1",h).attr("y1",f(w[0])).attr("x2",h).attr("y2",f(w[1])),b.select("#focusLineY").attr("x1",p(E[0])).attr("y1",u).attr("x2",p(E[1])).attr("y2",u),n.__updateProfileMarker(o,c),x.transition().duration(200).style("opacity",.9);var d="";d+=" Altitude : "+c.z+" m",r.currentSlope&&(d+="<br/> Pente : "+c.slope+" %"),d+="<br/> (Lat : "+c.lat+"/ Lon : "+c.lon+")",x.html(d).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")})),y}},displayProfileLibAmCharts:function(t,e,i,n){var o=i;if(e&&t){var s=t.points,r="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>";if(o.options.displayProfileOptions.currentSlope&&(r+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),r+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler((function(){})),t.distance>2e3){t.unit="km";for(let t=0;t<s.length;t++)s[t].dist/=1e3}for(let t=0;t<s.length;t++){var a=s[t].dist,l=100;a>100?l=1:a>10&&(l=10),a=Math.round(a*l)/l,s[t].dist=a}var c={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+t.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:r,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:s},h=AmCharts.makeChart(e,c);return h.addListener("changed",(function(t){var e=t.chart.dataProvider[t.index];n.__updateProfileMarker(o,e)})),h}}};var cl=Xn.getLogger("ElevationPath"),hl=Vn().Control.extend({includes:al,options:{position:"topleft",active:!1,elevationPathOptions:{},stylesOptions:{},displayProfileOptions:{greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null}},initialize:function(t){Vn().Util.setOptions(this,t),this._uid=Jn.generate(),this._initDisplayProfileOptions(),this._showContainer=null,this._pictoContainer=null,this._panelContainer=null,this._profilContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._reducePanel=!1,this._featuresLayer=null,this._lastIdLayer=0,this._currentIdLayer=0,this._currentFeature=null,this._profile=null,this._marker=null,this._geometry=null,this._distance=0,this._data={},this._noRightManagement=!1,this._checkRightsManagement()},onAdd:function(t){var e=this._container=this._initLayout();return t&&this.options.active&&(null===this._profile&&(this._panelContainer.style.display="none"),this._activateMapInteraction(t)),Vn().DomEvent.disableClickPropagation(e).disableScrollPropagation(e),e},onRemove:function(){},_checkRightsManagement:function(){var t=Ma({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["ElevationLine"]});t||(this._noRightManagement=!0),this.options.apiKey||(this.options.apiKey=t.key)},_initDisplayProfileOptions:function(){var t=this.options.displayProfileOptions,e=t.apply;t.apply="function"==typeof e?e:hl.DISPLAY_PROFILE_BY_DEFAULT;var i=t.target;t.target=void 0!==i?i:null;var n=Object.getPrototypeOf(this.options);void 0===t.meanSlope&&(t.meanSlope=n.displayProfileOptions.meanSlope),void 0===t.greaterSlope&&(t.greaterSlope=n.displayProfileOptions.greaterSlope),void 0===t.ascendingElevation&&(t.ascendingElevation=n.displayProfileOptions.ascendingElevation),void 0===t.descendingElevation&&(t.descendingElevation=n.displayProfileOptions.descendingElevation),void 0===t.currentSlope&&(t.currentSlope=n.displayProfileOptions.currentSlope)},_initLayout:function(){var t=this._createMainContainerElement(),e=this._showContainer=this._createShowElevationPathElement();t.appendChild(e),this.options.active&&(this._showContainer.checked=!0);var i=this._pictoContainer=this._createShowElevationPathPictoElement();t.appendChild(i);var n=this._panelContainer=this._createElevationPathPanelElement(),o=this._createElevationPathPanelHeaderElement();n.appendChild(o);var s=this._profilContainer=this._createElevationPathPanelProfilElement();n.appendChild(s);var r=this._waitingContainer=this._createElevationPathWaitingElement();n.appendChild(r);var a=this._infoContainer=this._createElevationPathInformationsElement();return n.appendChild(a),t.appendChild(n),t},onShowElevationPathClick:function(t){cl.trace(t);var e=this._map;this._reducePanel?null!==this._profile&&(null===this.options.displayProfileOptions.target&&(this._pictoContainer.style.display="none"),this._panelContainer.style.display="block"):this._showContainer.checked?(this._pictoContainer.style.display="block",this._panelContainer.style.display="none",this._removeMapInteraction(e),this._clear()):(null===this._profile&&(this._panelContainer.style.display="none"),this._activateMapInteraction(e)),this._reducePanel=!1},onReduceElevationPathPanelClick:function(){this._reducePanel=!0,this._pictoContainer.style.display="block",this._panelContainer.style.display="none"},onOpenElevationPathInfoClick:function(){var t=this.options.displayProfileOptions.meanSlope,e=this.options.displayProfileOptions.greaterSlope,i=this.options.displayProfileOptions.ascendingElevation,n=this.options.displayProfileOptions.descendingElevation,o=this._infoContainer;if(o.childElementCount)for(;o.firstChild;)o.removeChild(o.firstChild);i&&this._addElevationPathInformationsItem("Dénivelé positif : "+this._data.ascendingElevation.toLocaleString()+" m"),n&&this._addElevationPathInformationsItem("Dénivelé négatif : "+this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : "+this._data.meanSlope.toLocaleString()+" %"),e&&this._addElevationPathInformationsItem("Plus forte pente : "+this._data.greaterSlope.toLocaleString()+" %"),"GPelevationPathInformationsContainerVisible"===o.className?(clearTimeout(this._timerHdlr),o.className="GPelevationPathInformationsContainerHidden"):o.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout((function(){o.className="GPelevationPathInformationsContainerHidden"}),4e3)},_activateMapInteraction:function(t){if(cl.info("_activateMapInteraction()"),null===this._featuresLayer){this._featuresLayer=new(Vn().FeatureGroup),t.addLayer(this._featuresLayer);var e=this;t.on("contextmenu",(function(){})),t.on("draw:created",(function(t){cl.trace("draw:created"),e._currentIdLayer=Vn().Util.stamp(t.layer),e._getFeatureGeometry(t.layer),e._addFeatureLayer(t.layer)})),t.on("draw:drawstart",(function(){cl.trace("draw:drawstart"),e._removeFeatureLayer(e._lastIdLayer),e._lastIdLayer=e._currentIdLayer})),t.on("draw:drawstop",(function(){cl.trace("draw:drawstop"),void 0===e.options.elevationPathOptions.onSuccess&&null===e.options.displayProfileOptions.target&&(e._pictoContainer.style.display="none",e._panelContainer.style.display="block"),e._altiRequest()}))}this._activatePolyLineInteraction(t)},_removeMapInteraction:function(t){t&&(null!==this._featuresLayer&&(t.off("draw:created"),t.off("draw:drawstart"),t.off("draw:drawstop"),t.removeLayer(this._featuresLayer),this._featuresLayer=null),this._lastIdLayer=this._currentIdLayer=0,this._currentFeature&&this._currentFeature.disable())},_activatePolyLineInteraction:function(t){this._currentFeature&&this._currentFeature.disable();var e=this.options.stylesOptions||{},i=0!==Object.keys(e).length?e:{stroke:!0,color:"#C77A04",weight:4,opacity:.5,fill:!1};this._currentFeature=new(Vn().Draw.Polyline)(t,{shapeOptions:i}),this._currentFeature.enable()},_getFeatureGeometry:function(t){cl.log(t.getLatLngs()),null!==this._geometry&&(this._geometry=null),this._geometry=[],this._distance=0;for(var e=t.getLatLngs(),i=0;i<e.length;i++){var n=e[i],o=e[i+1];this._geometry.push({lon:n.lng,lat:n.lat}),o&&(this._distance+=n.distanceTo(o))}cl.log("Geometry",this._geometry),cl.log("Distance",this._distance)},_addFeatureLayer:function(t){this._featuresLayer&&this._featuresLayer.addLayer(t)},_removeFeatureLayer:function(t){this._featuresLayer&&0!==t&&(t?this._featuresLayer.removeLayer(t):this._featuresLayer.clearLayers())},_altiRequest:function(){if(cl.log("_altiRequest"),this._geometry){if(!this._noRightManagement){var t={};Vn().Util.extend(t,this.options.elevationPathOptions),Vn().Util.extend(t,{apiKey:t.apiKey||this.options.apiKey}),Vn().Util.extend(t,{ssl:this.options.ssl});var e=t.sampling;if(!e){var i=this._currentFeature._measurementRunningTotal;cl.trace("length",i);var n=Math.floor(i)/5;e=n>=200?200:Math.floor(n)}var o=this;Vn().Util.extend(t,{sampling:e,onSuccess:this.options.elevationPathOptions.onSuccess||function(t){cl.log(t),t&&(null!==o.options.displayProfileOptions.target&&(o._pictoContainer.style.display="block",o._panelContainer.style.display="block"),o._displayProfil(t.elevations),o._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",o._waiting=!1)},onFailure:this.options.elevationPathOptions.onFailure||function(t){cl.log(t.message),o._pictoContainer.style.display="block",o._panelContainer.style.display="none",o._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",o._waiting=!1,o._clear()}});var s=this._geometry;Vn().Util.extend(t,{positions:s}),cl.log(t),this._waitingContainer.className="GPelevationPathCalcWaitingContainerVisible",Ca.Services.getAltitude(t)}}else cl.log("missing position")},_computeElevationMeasure:function(t){var e=function(t,e){var i=Ia.decimalToRadian(t[1]),n=Ia.decimalToRadian(e[1]),o=(n-i)/2,s=Ia.decimalToRadian(e[0]-t[0])/2,r=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(n);return 12756274*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))},i=t,n=this._geometry,o=0,s=0,r=n[1];i[0].dist=0,i[0].slope=0,i[0].lat=Math.round(1e4*i[0].lat)/1e4,i[0].lon=Math.round(1e4*i[0].lon)/1e4;for(var a=0,l=0,c=0,h=0,u=0,d=0,p=[],f=1;f<i.length;f++){var m=[i[f].lon,i[f].lat],g=s+e(m,[n[o].lon,n[o].lat]),_=g-u;m[0].toFixed(8)===r.lon.toFixed(8)&&m[1].toFixed(8)===r.lat.toFixed(8)&&(o++,s=g,f!==i.length-1&&(r=n[o+1]));var v=i[f].z,y=i[f-1].z;v<0&&(v=0),y<0&&(y=0);var E=v-y;E<0?(a+=_,h+=E):E>0&&(l+=_,c+=E),u=g,i[f].dist=g,p.push(g),d+=E?Math.abs(Math.round(E/_*100)):0,i[f].slope=E?Math.abs(Math.round(E/_*100)):0;var w=i[f].slope;i[f].color=w>15&&w<30?"#005b4c":w>30&&w<45?"#00362d":w>45?"#00120f":"#00B798",i[f].lat=Math.round(1e4*i[f].lat)/1e4,i[f].lon=Math.round(1e4*i[f].lon)/1e4}cl.trace("List Distances",p);for(var b=i[0].z,x=i[0].z,L=i[0].slope,C=0;C<i.length;C++){var P=i[C];P.z<-100&&(P.z=0),P.z>x&&(x=P.z),P.z<b&&(b=P.z),P.slope>L&&(L=P.slope)}return{greaterSlope:L,meanSlope:Math.round(d/i.length),distancePlus:l,distanceMinus:a,ascendingElevation:c,descendingElevation:h,altMin:b.toLocaleString(),altMax:x.toLocaleString(),distance:this._distance,unit:"m",points:i}},_displayProfil:function(t){this._map.off("contextmenu"),this._data&&(this._data={});var e=this._data=this._computeElevationMeasure(t),i=this.options.displayProfileOptions.target;i&&i.appendChild(this._panelContainer),i=this._profilContainer;var n=this.options.displayProfileOptions,o=n.apply;"undefined"!=typeof AmCharts&&"undefined"!=typeof d3&&cl.trace("Aucune lib. n'est presente !"),o.call(this,e,i,this);var s=Vn().DomUtil.get("GPelevationPathPanelInfo-"+this._uid);(n.greaterSlope||n.meanSlope||n.ascendingElevation||n.descendingElevation)&&(s.style.display="block")},_clear:function(){if(this._geometry=null,this._profile=null,this._profilContainer)for(;this._profilContainer.firstChild;)this._profilContainer.removeChild(this._profilContainer.firstChild);var t=this._map;this._marker&&(t.removeLayer(this._marker),this._marker=null)}});hl.__createProfileMarker=function(t,e){cl.log("__createProfileMarker");var i=t,n=i._map;i._marker=Vn().marker(Vn().latLng(e),{icon:new Ra("orange"),draggable:!1,clickable:!1,zIndexOffset:1e3}),i._marker.addTo(n)},hl.__updateProfileMarker=function(t,e){cl.log("__updateProfileMarker");var i=t,n=i._map;i._marker?(i._marker.setLatLng(Vn().latLng(e)),i._marker.update()):(i._marker=Vn().marker(Vn().latLng(e),{icon:new Ra("orange"),draggable:!1,clickable:!1,zIndexOffset:1e3}),i._marker.addTo(n))},hl.__removeProfileMarker=function(t){cl.log("__removeProfileMarker");var e=t,i=e._map;e._marker&&(i.removeLayer(e._marker),e._marker=null)},hl.__customRawProfileOperation=function(){cl.log("__customRawProfileOperation")},hl.__customRawProfileMouseOverEvent=function(t,e){cl.log("__customRawProfileMouseOverEvent",t,e)},hl.DISPLAY_PROFILE_BY_DEFAULT=function(t,e,i){cl.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var n=ll.displayProfileByDefault(t,e,i,hl);n&&(this._profile=n)},hl.DISPLAY_PROFILE_RAW=function(t,e,i){cl.trace("ElevationPath.DISPLAY_PROFILE_RAW");var n=ll.displayProfileRaw(t,e,i,hl);n&&(this._profile=n)},hl.DISPLAY_PROFILE_LIB_D3=function(t,e,i){if(cl.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),"undefined"!=typeof d3){var n=ll.displayProfileLibD3(t,e,i,hl);n&&(this._profile=n)}else cl.log("Lib. D3 is not loaded !")},hl.DISPLAY_PROFILE_LIB_AMCHARTS=function(t,e,i){if(cl.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),"undefined"!=typeof AmCharts){var n=ll.displayProfileLibAmCharts(t,e,i,hl);n&&(this._profile=n)}else cl.log("Lib. AmCharts is not loaded !")};const ul=hl;const dl=Vn().Control.extend({options:{position:"topright",picto:null,url:null,text:null,size:"30px"},initialize:function(t){Vn().setOptions(this,t)},onAdd:function(){var t=null;t=Vn().DomUtil.create("div","gp-control-logo",t);var e=!(!this.options.url&&!this.options.text),i=null;e&&((i=Vn().DomUtil.create("a","",t)).target="_blank",this.options.url&&(i.href=this.options.url,this.options.text&&(i.title=this.options.text))),e&&this.options.text&&(i.text=this.options.text);var n=null;return!!this.options.picto&&((n=e?Vn().DomUtil.create("img","",i):Vn().DomUtil.create("img","",t)).src=this.options.picto,"string"==typeof this.options.size?n.style.height=n.style.width=this.options.size:(n.style.height=this.options.size.height,n.style.width=this.options.size.width)),t}});const pl={LayerSwitcher:function(t){return new io(t)},Isocurve:function(t){return new Ua(t)},MousePosition:function(t){return new Xa(t)},ReverseGeocode:function(t){return new Qa(t)},Route:function(t){return new il(t)},SearchEngine:function(t){return new rl(t)},ElevationPath:function(t){return new ul(t)},Logo:function(t){return new dl(t)}};const fl={getZoomLevelFromScaleDenominator:function(t,e){var i={};switch(e){case"EPSG:2154":i={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:i={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424}}var n=28e-5*t;for(var o in i)if(i.hasOwnProperty(o)&&i[o]<=n)return o=parseInt(o,10);return 0},getAttributions:function(t){var e=t.zoom,i=[];if(null!=t.originators&&t.visibility)for(var n,o=0,s=t.originators.length;o<s;o++){n=!0;for(var r=t.originators[o],a=t.originators[o].constraints||[],l=0,c=a.length;l<c;l++){var h=a[l];n=!0;var u=this.getZoomLevelFromScaleDenominator(h.maxScaleDenominator,t.crs),d=this.getZoomLevelFromScaleDenominator(h.minScaleDenominator,t.crs)||21;u&&u>e&&(n=!1),n&&d&&d<e&&(n=!1);var p=h.bbox;if(n&&p){n=!1;var f=t.extent;if(f){var m=[p.top,p.left,p.bottom,p.right];if(this.intersects(f,m)){n=!0;break}}}}if(n){var g=r.logo,_=r.url,v=r.name?r.name:"",y=r.attribution,E=document.createElement("div");E.className="gp-control-attribution";var w=null;(w=document.createElement("a")).className="gp-control-attribution-link",w.target="_blank",E.appendChild(w),_&&(w.href=_);var b=null;!!g?(b=document.createElement("img"),w?(b.className="gp-control-attribution-image",w.appendChild(b)):(b.className="",E.appendChild(b)),b.src=g,b.title=y||v,b.style.height="30px",b.style.width="30px"):w.textContent=v||(y||(_||"")),i.push(E.innerHTML+" ")}}return i},intersects:function(t,e){var i=t[1]<=e[3]&&e[1]<=t[3],n=t[2]<=e[0]&&e[2]<=t[0];return i&&n}};var ml=Xn.getLogger("layer-config");const gl={get:function(t){var e={};if(Sa.isConfigLoaded()){if((e=Sa.getLayerParams(t.layer,t.service,t.key))&&0!==Object.keys(e).length)return e.minZoom=fl.getZoomLevelFromScaleDenominator(e.maxScale)||1,e.maxZoom=fl.getZoomLevelFromScaleDenominator(e.minScale)||21,e;ml.warn("WARNING AUTOCONF_FAILED : params not found ?!")}else ml.warn("WARNING AUTOCONF_MISSING : contract key configuration has to be loaded to load Geoportal layers !")}};var _l=Xn.getLogger("layer-event");const vl={_id:null,_attributions:[],_visibility:!0,_originators:[],isEnable:function(t){return!!t.attributionControl},setVisible:function(t){_l.log("visibility",t),this._visibility=t,this.fire("visibilitychange")},getVisible:function(){return this._visibility},_onRemoveLayer:function(t){_l.trace("onRemove event",t),t.layer._geoportal_id===this._geoportal_id&&this.setVisible(!1)},_onAddLayer:function(t){_l.trace("onAdd event",t),t.layer._geoportal_id===this._geoportal_id&&this.setVisible(!0)},_onMoveEndLayer:function(t){_l.trace("moveend event",t),this.updateAttributions(this._map,this)},updateAttributions:function(t){this.isEnable(t)&&(this.removeAttributions(t),this.addAttributions(t),this.fire("attributionchange"))},removeAttributions:function(t){if(_l.trace("removeAttributions...",this._geoportal_id),this.isEnable(t)){for(var e=0;e<this._attributions.length;e++)t.attributionControl.removeAttribution(this._attributions[e]);this._attributions=[]}},addAttributions:function(t){if(_l.trace("addAttributions...",this._geoportal_id),this.isEnable(t)){var e=t.getBounds().getNorthWest(),i=t.getBounds().getSouthEast(),n={extent:[e.lat,e.lng,i.lat,i.lng],zoom:t.getZoom(),originators:this._originators,visibility:this._visibility};_l.log(n);var o=fl.getAttributions(n);if(_l.log(o),o&&0!==o.length)for(var s=0;s<o.length;s++)this._attributions.push(o[s]),t.attributionControl.addAttribution(o[s])}}};var yl=Xn.getLogger("wms");const El=Vn().TileLayer.WMS.extend({includes:vl,initialize:function(t,e){var i={};Vn().Util.extend(i,e.paramsWms,e.paramsNative),Vn().TileLayer.WMS.prototype.initialize.call(this,Ca.Helper.normalyzeUrl(t,{"gp-leaflet-ext":Zn.leafletExtVersion||Zn.i8},!1),i),this._originators=e.originators,this._legends=e.legends,this._metadata=e.metadata,this._title=e.title,this._description=e.description,this._quicklookUrl=e.quicklookUrl,this._geoportal_id=0},onAdd:function(t){yl.trace("onAdd layer",this._geoportal_id),this._map=t,this._geoportal_id=Vn().stamp(this),Vn().TileLayer.WMS.prototype.onAdd.call(this,t),this.setVisible(!0),this.updateAttributions(t),t.on({overlayremove:this._onRemoveLayer,overlayadd:this._onAddLayer,layerremove:this._onRemoveLayer,layeradd:this._onAddLayer,moveend:this._onMoveEndLayer},this)},onRemove:function(t){yl.trace("onRemove layer",this._geoportal_id),this._map=t,Vn().TileLayer.prototype.onRemove.call(this,t),this.setVisible(!1),this.removeAttributions(t),t.off({overlayremove:this._onRemoveLayer,overlayadd:this._onAddLayer,layerremove:this._onRemoveLayer,layeradd:this._onAddLayer,moveend:this._onMoveEndLayer},this)},getTileUrl:function(t){var e=this._map,i=this.options.tileSize,n=t.multiplyBy(i),o=n.add([i,i]),s=this._crs.project(e.unproject(n,t.z)),r=this._crs.project(e.unproject(o,t.z)),a=this._wmsVersion>=1.3&&-1!==["EPSG:4326"].indexOf(this._crs.code)?[r.y,s.x,s.y,r.x].join(","):[s.x,r.y,r.x,s.y].join(","),l=Vn().Util.template(this._url,{s:this._getSubdomain(t)});return l+Vn().Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+a}});var wl=Xn.getLogger("wmts");const bl=Vn().TileLayer.extend({includes:vl,defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixset:"PM",format:"image/jpeg"},initialize:function(t,e){wl.log("initialize"),this._wmtsParams={},Vn().Util.extend(this._wmtsParams,this.defaultWmtsParams,e.paramsWmts),Vn().TileLayer.prototype.initialize.call(this,Ca.Helper.normalyzeUrl(t,{"gp-leaflet-ext":Zn.leafletExtVersion||Zn.i8},!1),e.paramsNative),this._originators=e.originators,this._legends=e.legends,this._metadata=e.metadata,this._title=e.title,this._description=e.description,this._quicklookUrl=e.quicklookUrl,this._geoportal_id=0},onAdd:function(t){wl.trace("onAdd layer",this._geoportal_id),this._map=t,this._geoportal_id=Vn().stamp(this),Vn().TileLayer.prototype.onAdd.call(this,t),this.setVisible(!0),this.updateAttributions(t),t.on({overlayremove:this._onRemoveLayer,overlayadd:this._onAddLayer,layerremove:this._onRemoveLayer,layeradd:this._onAddLayer,moveend:this._onMoveEndLayer},this)},onRemove:function(t){wl.trace("onRemove layer",this._geoportal_id),this._map=t,Vn().TileLayer.prototype.onRemove.call(this,t),this.setVisible(!1),this.removeAttributions(t),t.off({overlayremove:this._onRemoveLayer,overlayadd:this._onAddLayer,layerremove:this._onRemoveLayer,layeradd:this._onAddLayer,moveend:this._onMoveEndLayer},this)},getTileUrl:function(t){var e=this._getZoomForUrl(),i=Vn().Util.template(this._url,{s:this._getSubdomain(t)});return i+Vn().Util.getParamString(this._wmtsParams,i)+"&tilematrix="+e+"&tilerow="+t.y+"&tilecol="+t.x},setParams:function(t,e){return Vn().extend(this._wmtsParams,t),e||this.redraw(),this}});var xl=Xn.getLogger("layers");const Ll={options:{},params:{},protocol:null,serviceUrl:"http://localhost?no-rights-found-for=[{layer}]",_initOptions:function(){if(!this.options||0===Object.keys(this.options).length)throw new Error("PARAM_MISSING : options !");if(!this.options.layer)throw new Error("PARAM_MISSING : layer !");this.options.apiKey||xl.log("PARAM_MISSING : apiKey !"),void 0===this.options.ssl&&(this.options.ssl=!0)},_initContext:function(){this.protocol=!1===this.options.ssl?"http://":"https://"},_initParams:function(t){t||(t="WMTS"),this.params=gl.get({key:this.options.apiKey,layer:this.options.layer,service:t}),this.params&&0!==Object.keys(this.params).length||(this.params={},this.options.apiKey||xl.log("WARNING PARAM_MISSING : parameter 'apiKey' is mandatory if the contract key configuration has not been loaded !"))},WMS:function(t,e){var i=Xn.getLogger("layers-wms");this.options=t||{},this._initOptions(),this.settings=e||{},this._initContext(),this._initParams("WMS"),i.log(this.params);var n=null;n=this.params.key||this.options.apiKey?this.params.url||Vn().Util.template("https://wxs.ign.fr/{key}/geoportail/r/wms",{key:this.params.key||this.options.apiKey}):Vn().Util.template(this.serviceUrl,{layer:this.options.layer});var o={layers:this.options.layer,styles:this.params.styles||"normal",format:this.params.format||"image/jpeg",version:this.params.version||"1.3.0"},s={minZoom:this.params.minZoom||1,maxZoom:this.params.maxZoom||21};return Vn().Util.extend(s,this.settings),new El(n.replace(/(http|https):\/\//,this.protocol),{paramsNative:s,paramsWms:o,originators:this.params.originators||[],legends:this.params.legends||[],metadata:this.params.metadata||[],title:this.params.title||null,description:this.params.description||null,quicklookUrl:this.params.quicklookUrl||null})},WMTS:function(t,e){var i=Xn.getLogger("layers-wmts");this.options=t||{},this._initOptions(),this.settings=e||{},this._initContext(),this._initParams("WMTS"),i.log(this.params);var n=null;n=this.params.key||this.options.apiKey?this.params.url||Vn().Util.template("https://wxs.ign.fr/{key}/geoportail/wmts",{key:this.params.key||this.options.apiKey}):Vn().Util.template(this.serviceUrl,{layer:this.options.layer});var o={layer:this.options.layer,style:this.params.styles||"normal",format:this.params.format||"image/jpeg",version:this.params.version||"1.0.0",tilematrixset:this.params.TMSLink||"PM"},s={minZoom:this.params.minZoom||1,maxZoom:this.params.maxZoom||21};return Vn().Util.extend(s,this.settings),new bl(n.replace(/(http|https):\/\//,this.protocol),{paramsNative:s,paramsWmts:o,originators:this.params.originators||[],legends:this.params.legends||[],metadata:this.params.metadata||[],title:this.params.title||"",description:this.params.description||"",quicklookUrl:this.params.quicklookUrl||""})}};!function(){var t=document.getElementsByTagName("script"),e=t[t.length-1].getAttribute("data-key");if(e){var i=e.split(/;|,|\|/);if(i.length>1){for(var n=[],o=0;o<i.length;o++)n.push(i[o]);e=n}}var s=t[t.length-1].getAttribute("data-url"),r=t[t.length-1].getAttribute("data-timeout");if(e||s){var a={apiKey:e,onSuccess:function(){},onFailure:function(t){throw new Error("Configuration load failed : "+t.message)}};s&&(a.serverUrl=s,a.callbackSuffix=""),r&&(a.timeOut=r),Ca.Config||Ca.Services.getConfig(a)}}();var Cl=Ca.Services;Ca.Error,Ca.Helper,Ca.Protocols,Ca.servicesDate,Ca.servicesVersion;Zn.leafletExtVersion||Zn.i8,Zn.hT;function Pl(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Vn().geoportalLayer=Ll,Vn().geoportalControl=pl,Vn().geoportalControl.ElevationPath.DISPLAY_PROFILE_LIB_D3=ul.DISPLAY_PROFILE_LIB_D3,Vn().geoportalControl.ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS=ul.DISPLAY_PROFILE_LIB_AMCHARTS,Vn().geoportalControl.ElevationPath.DISPLAY_PROFILE_RAW=ul.DISPLAY_PROFILE_RAW,Vn().geoportalControl.ElevationPath.DISPLAY_PROFILE_BY_DEFAULT=ul.DISPLAY_PROFILE_BY_DEFAULT,Vn().geoportalCRS=Za,Vn().geoportalCRS.EPSG2154=Za.EPSG2154(),Vn().geoportalCRS.EPSG27572=Za.EPSG27572(),Vn().geoportalCRS.EPSG4326=Za.EPSG4326(),i(332),i(353),i(988),delete Vn().Icon.Default.prototype._getIconUrl,Vn().Icon.Default.mergeOptions({iconRetinaUrl:"/bundles/llecrudit/leaflet/images/marker-icon-2x.png",iconUrl:"/bundles/llecrudit/leaflet/images/marker-icon.png",shadowUrl:"/bundles/llecrudit/leaflet/images/marker-shadow.png"}),Cl.getConfig({apiKey:"2ngllojaqtakjcfeok0iuds5"}),window.addEventListener("load",(function(){document.querySelectorAll(".crudit-map").forEach((function(t){var e=[t.dataset.lat,t.dataset.lng],i=t.dataset.zoom,n=void 0!==t.dataset.editable&&"off"!==t.dataset.editable,o=Vn().map(t.id,{editable:n,center:e,zoom:i}),s=null,r=null,a={},l=null;("1"===t.dataset.with_marker&&(s=Vn().marker(e).addTo(o)),t.dataset.geojsons)&&JSON.parse(t.dataset.geojsons).forEach((function(t){var e;e=t.icon?new(Vn().GeoJSON.AJAX)(t.url,{pointToLayer:function(e,i){t.icon.className="mk-"+e.id;var n=Vn().icon(t.icon);return Vn().marker(i,{icon:n,title:e.title}).bindPopup('<iframe height="400px" src="'+t.popup_url+e.id+'"></iframe>').openPopup()}}):new(Vn().GeoJSON.AJAX)(t.url,{onEachFeature:function(e,i){i.bindPopup('<iframe height="400px" src="'+t.popup_url+e.id+'"></iframe>').openPopup()}}),a[t.libelle]=e,t.fitBounds&&e.on("data:loaded",(function(){l=e.getBounds(),o.fitBounds(e.getBounds())})),e.addTo(o)}));if(t.dataset.polyline){var c=JSON.parse(t.dataset.polyline);(r=Vn().geoJSON(c)).addTo(o)}Vn().easyButton("fa-map-marker",(function(){l?o.fitBounds(l,{animate:!0}):o.flyTo(e,i)})).addTo(o),n&&(Vn().easyButton("fa-edit",(function(){r&&r.getLayers().forEach((function(t){t.toggleEdit()})),s&&s.toggleEdit()})).addTo(o),o.on("editable:vertex:dragend",(function(e){var i=e.layer.toGeoJSON().geometry,n=t.dataset.edit_url,o=new FormData,s=Pl({},t.dataset.polyline_field,JSON.stringify(i));o.append("data",JSON.stringify(s)),fetch(n,{body:o,method:"post"})})),s&&s.on("editable:dragend",(function(e){var i,n=e.layer.toGeoJSON().geometry,o=t.dataset.edit_url,s=new FormData,r=(Pl(i={},t.dataset.lng_field,n.coordinates[0]),Pl(i,t.dataset.lat_field,n.coordinates[1]),i);s.append("data",JSON.stringify(r)),fetch(o,{body:s,method:"post"})})));var h=Vn().tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'}),u=Vn().tileLayer("http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),d=Vn().geoportalLayer.WMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS"});h.addTo(o);var p={OpenStreetMap:h,Satellite:u,IGN:d};Vn().control.layers(p,a).addTo(o),document.querySelectorAll('a[data-bs-toggle="tab"]').forEach((function(t){t.addEventListener("shown.bs.tab",(function(){setTimeout((function(){o.invalidateSize()}),100)}))})),document.querySelectorAll("[data-gotomap]").forEach((function(t){t.addEventListener("click",(function(){var e=t.dataset.gotomap,i=t.dataset.gotozoom;o.flyTo(e.split(","),i,{duration:.5})}))})),document.querySelectorAll("[data-gotomarker]").forEach((function(t){t.addEventListener("click",(function(){var e=t.dataset.gotomarker;document.querySelectorAll("img.leaflet-marker-icon").forEach((function(t){t.classList.remove("blinking"),t.classList.contains(e)&&t.classList.add("blinking")}))}))}))}))}));i(876),i(400),i(553);var Sl=i(183),Ml=i.n(Sl);window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".valuesetter").forEach((function(t){t.addEventListener("click",(function(t){document.getElementById(t.target.dataset.valueid).value=t.target.dataset.value,document.getElementById(t.target.dataset.valueid+"_icon").classList=t.target.querySelector("i").classList}))})),document.querySelectorAll(".entity-select").forEach((function(t){var e=t.dataset.url,i=JSON.parse(t.dataset.options);new(Ml())("#"+t.id,{valueField:"id",labelField:"text",searchField:"text",maxOptions:2e3,maxItems:t.dataset.maxitems,preload:!0,options:i,plugins:["virtual_scroll","remove_button"],onChange:function(e){var i=this,n=[];""!=e&&e.split(",").forEach((function(t){n.push({id:t,text:i.options[t].text})})),document.getElementById(t.id+"_items").value=JSON.stringify(n)},onItemAdd:function(){t.parentElement.querySelector(".ts-input > input").value="",t.parentElement.querySelector(".ts-dropdown").style.display="none"},firstUrl:function(t){return e+encodeURIComponent(t)+"&limit=20"},load:function(t,i){var n=this,o=this.getUrl(t);fetch(o).then((function(t){return t.json()})).then((function(o){if(o.next_offset<o.total_count){var s=e+encodeURIComponent(t)+"&limit=20&offset="+o.next_offset;n.setNextUrl(t,s)}i(o.items)})).catch((function(t){console.log("error",t),i()}))},render:{loading_more:function(){return'<div class="loading-more-results py-2 d-flex align-items-center"><div class="spinner"></div> Chargement en cours</div>'},no_more_results:function(){return""}}})}))}));i(194);window.addEventListener("load",(function(){document.getElementById("sidebarToggle").addEventListener("click",(function(){document.querySelector("body").classList.toggle("sidebar-toggled"),document.querySelector(".sidebar").classList.toggle("toggled")}));var t=window.location.hash,e=document.querySelector('ul.nav a[href="'+t+'"]');e&&e.click(),[].slice.call(document.querySelectorAll("ul.nav-tabs a")).forEach((function(t){t.addEventListener("click",(function(){window.location.hash=t.attributes.href.value}))}))}))},400:()=>{"use strict";window.addEventListener("load",(function(){var t=[];console.log("batch_controller");var e=document.querySelector(".crudit-batch-list");document.querySelectorAll(".crudit-batch-check").forEach((function(i){i.addEventListener("change",(function(n){if(n.currentTarget.checked)t.push(i.dataset.id),console.log(t);else{var o=t.indexOf(i.dataset.id);o>-1&&t.splice(o,1)}console.log(e),t.length>0?e.classList.remove("d-none"):e.classList.add("d-none")}))})),document.querySelectorAll(".crudit-batch-button").forEach((function(e){e.addEventListener("click",(function(e){e.currentTarget.href=e.currentTarget.href+"?ids="+t.join(",")}))}))}))},876:()=>{"use strict";window.addEventListener("load",(function(){function t(t,e,i){e=t.querySelector(".crudit-eip-input");var n=t.dataset.edit_url,o=new FormData,s="checkbox"===e.type?e.checked:e.value,r=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},t.dataset.field,s);o.append("data",JSON.stringify(r)),fetch(n,{body:o,method:"post"}),i&&("date"===e.type?i.textContent=new Date(e.value).toLocaleDateString():i.textContent=e.value,i.classList.toggle("d-none"));var a=t.querySelector("form");a&&a.classList.toggle("d-none")}document.querySelectorAll(".crudit-eip").forEach((function(e){var i=e.querySelector(".crudit-eip-value"),n=e.querySelector(".crudit-eip-submit"),o=e.querySelector(".crudit-eip-input"),s=e.querySelector(".crudit-eip-cancel"),r=e.querySelector("form");i&&i.addEventListener("click",(function(){i.classList.toggle("d-none"),r&&r.classList.toggle("d-none"),"text"!==o.type&&"TEXTAREA"!==o.tagName||(o.focus(),setTimeout((function(){o.selectionStart=o.selectionEnd=1e4}),0))})),s&&i&&s.addEventListener("click",(function(){i.classList.toggle("d-none"),e.querySelector("form").classList.toggle("d-none")})),r&&r.addEventListener("submit",(function(n){n.preventDefault(),t(e,o,i)})),n.addEventListener("click",(function(){return t(e,o,i)}))}))}))},194:()=>{"use strict";window.addEventListener("load",(function(){var t=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(t).forEach((function(t){t.addEventListener("submit",(function(e){t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")}),!1)}))}))},553:()=>{"use strict";window.addEventListener("load",(function(){document.querySelectorAll(".crudit-ip-format").forEach((function(t){t.addEventListener("keyup",(function(){if(t.value.match(/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/))t.classList.toggle("is-invalid",!1),t.classList.toggle("is-valid",!0);else{t.classList.toggle("is-invalid",!0);var e=t.value.match(/\./);if(e&&e<3){var i=t.value.match(/[0-9]+$/);i&&parseInt(i)>=26&&(t.value=t.value+".")}}}))})),document.querySelectorAll(".crudit-upper-format").forEach((function(t){t.addEventListener("keyup",(function(){t.value=t.value.toUpperCase()}))})),document.querySelectorAll(".crudit-lower-format").forEach((function(t){t.addEventListener("keyup",(function(){t.value=t.value.toLowerCase()}))})),document.querySelectorAll(".crudit-email-format").forEach((function(t){t.addEventListener("keyup",(function(){t.value=t.value.toLowerCase();/\S+@\S+\.\S+/.test(t.value)?(t.classList.toggle("is-invalid",!1),t.classList.toggle("is-valid",!0)):(t.classList.toggle("is-invalid",!0),t.classList.toggle("is-valid",!1))}))}))}))},702:function(t,e,i){t.exports=function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,s=void 0,r=void 0,a=function(t,e){E[o]=t,E[o+1]=e,2===(o+=2)&&(r?r(w):x())};function l(t){r=t}function c(t){a=t}var h="undefined"!=typeof window?window:void 0,u=h||{},d=u.MutationObserver||u.WebKitMutationObserver,p="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){return process.nextTick(w)}}function g(){return void 0!==s?function(){s(w)}:y()}function _(){var t=0,e=new d(w),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}function v(){var t=new MessageChannel;return t.port1.onmessage=w,function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(w,1)}}var E=new Array(1e3);function w(){for(var t=0;t<o;t+=2)(0,E[t])(E[t+1]),E[t]=void 0,E[t+1]=void 0;o=0}function b(){try{var t=Function("return this")().require("vertx");return s=t.runOnLoop||t.runOnContext,g()}catch(t){return y()}}var x=void 0;function L(t,e){var i=this,n=new this.constructor(S);void 0===n[P]&&Z(n);var o=i._state;if(o){var s=arguments[o-1];a((function(){return q(o,n,s,i._result)}))}else z(i,n,t,e);return n}function C(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var i=new e(S);return N(i,t),i}x=p?m():d?_():f?v():void 0===h?b():y();var P=Math.random().toString(36).substring(2);function S(){}var M=void 0,T=1,A=2;function I(){return new TypeError("You cannot resolve a promise with itself")}function k(){return new TypeError("A promises callback cannot return that same promise.")}function R(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}function D(t,e,i){a((function(t){var n=!1,o=R(i,e,(function(i){n||(n=!0,e!==i?N(t,i):j(t,i))}),(function(e){n||(n=!0,F(t,e))}),"Settle: "+(t._label||" unknown promise"));!n&&o&&(n=!0,F(t,o))}),t)}function O(t,e){e._state===T?j(t,e._result):e._state===A?F(t,e._result):z(e,void 0,(function(e){return N(t,e)}),(function(e){return F(t,e)}))}function G(t,i,n){i.constructor===t.constructor&&n===L&&i.constructor.resolve===C?O(t,i):void 0===n?j(t,i):e(n)?D(t,i,n):j(t,i)}function N(e,i){if(e===i)F(e,I());else if(t(i)){var n=void 0;try{n=i.then}catch(t){return void F(e,t)}G(e,i,n)}else j(e,i)}function U(t){t._onerror&&t._onerror(t._result),B(t)}function j(t,e){t._state===M&&(t._result=e,t._state=T,0!==t._subscribers.length&&a(B,t))}function F(t,e){t._state===M&&(t._state=A,t._result=e,a(U,t))}function z(t,e,i,n){var o=t._subscribers,s=o.length;t._onerror=null,o[s]=e,o[s+T]=i,o[s+A]=n,0===s&&t._state&&a(B,t)}function B(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,o=void 0,s=t._result,r=0;r<e.length;r+=3)n=e[r],o=e[r+i],n?q(i,n,o,s):o(s);t._subscribers.length=0}}function q(t,i,n,o){var s=e(n),r=void 0,a=void 0,l=!0;if(s){try{r=n(o)}catch(t){l=!1,a=t}if(i===r)return void F(i,k())}else r=o;i._state!==M||(s&&l?N(i,r):!1===l?F(i,a):t===T?j(i,r):t===A&&F(i,r))}function H(t,e){try{e((function(e){N(t,e)}),(function(e){F(t,e)}))}catch(e){F(t,e)}}var W=0;function V(){return W++}function Z(t){t[P]=W++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var X=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(S),this.promise[P]||Z(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&j(this.promise,this._result))):F(this.promise,Y())}return t.prototype._enumerate=function(t){for(var e=0;this._state===M&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===C){var o=void 0,s=void 0,r=!1;try{o=t.then}catch(t){r=!0,s=t}if(o===L&&t._state!==M)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(i===et){var a=new i(S);r?F(a,s):G(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new i((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===M&&(this._remaining--,t===A?F(n,i):this._result[e]=i),0===this._remaining&&j(n,this._result)},t.prototype._willSettleAt=function(t,e){var i=this;z(t,void 0,(function(t){return i._settledAt(T,e,t)}),(function(t){return i._settledAt(A,e,t)}))},t}();function K(t){return new X(this,t).promise}function J(t){var e=this;return n(t)?new e((function(i,n){for(var o=t.length,s=0;s<o;s++)e.resolve(t[s]).then(i,n)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))}function Q(t){var e=new this(S);return F(e,t),e}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function tt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var et=function(){function t(e){this[P]=V(),this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&$(),this instanceof t?H(this,e):tt())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var i=this,n=i.constructor;return e(t)?i.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):i.then(t,t)},t}();function it(){var t=void 0;if(void 0!==i.g)t=i.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=et}return et.prototype.then=L,et.all=K,et.race=J,et.resolve=C,et.reject=Q,et._setScheduler=l,et._setAsap=c,et._asap=a,et.polyfill=it,et.Promise=et,et}()},706:()=>{},755:function(t,e){var i;!function(e,i){"use strict";"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,(function(n,o){"use strict";var s=[],r=Object.getPrototypeOf,a=s.slice,l=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},c=s.push,h=s.indexOf,u={},d=u.toString,p=u.hasOwnProperty,f=p.toString,m=f.call(Object),g={},_=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},y=n.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,i){var n,o,s=(i=i||y).createElement("script");if(s.text=t,e)for(n in E)(o=e[n]||e.getAttribute&&e.getAttribute(n))&&s.setAttribute(n,o);i.head.appendChild(s).parentNode.removeChild(s)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[d.call(t)]||"object":typeof t}var x="3.6.0",L=function(t,e){return new L.fn.init(t,e)};function C(t){var e=!!t&&"length"in t&&t.length,i=b(t);return!_(t)&&!v(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}L.fn=L.prototype={jquery:x,constructor:L,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=L.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return L.each(this,t)},map:function(t){return this.pushStack(L.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(L.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(L.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:s.sort,splice:s.splice},L.extend=L.fn.extend=function(){var t,e,i,n,o,s,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||_(r)||(r={}),a===l&&(r=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&r!==n&&(c&&n&&(L.isPlainObject(n)||(o=Array.isArray(n)))?(i=r[e],s=o&&!Array.isArray(i)?[]:o||L.isPlainObject(i)?i:{},o=!1,r[e]=L.extend(c,s,n)):void 0!==n&&(r[e]=n));return r},L.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==d.call(t))&&(!(e=r(t))||"function"==typeof(i=p.call(e,"constructor")&&e.constructor)&&f.call(i)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){w(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(C(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(C(Object(t))?L.merge(i,"string"==typeof t?[t]:t):c.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:h.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,s=t.length,r=!i;o<s;o++)!e(t[o],o)!==r&&n.push(t[o]);return n},map:function(t,e,i){var n,o,s=0,r=[];if(C(t))for(n=t.length;s<n;s++)null!=(o=e(t[s],s,i))&&r.push(o);else for(s in t)null!=(o=e(t[s],s,i))&&r.push(o);return l(r)},guid:1,support:g}),"function"==typeof Symbol&&(L.fn[Symbol.iterator]=s[Symbol.iterator]),L.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){u["[object "+e+"]"]=e.toLowerCase()}));var P=function(t){var e,i,n,o,s,r,a,l,c,h,u,d,p,f,m,g,_,v,y,E="sizzle"+1*new Date,w=t.document,b=0,x=0,L=lt(),C=lt(),P=lt(),S=lt(),M=function(t,e){return t===e&&(u=!0),0},T={}.hasOwnProperty,A=[],I=A.pop,k=A.push,R=A.push,D=A.slice,O=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},G="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",U="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\[[\\x20\\t\\r\\n\\f]*("+U+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+N+"*\\]",F=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",z=new RegExp(N+"+","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),W=new RegExp(N+"|>"),V=new RegExp(F),Z=new RegExp("^"+U+"$"),Y={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+G+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){d()},rt=Et((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{R.apply(A=D.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(t){R={apply:A.length?function(t,e){k.apply(t,D.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function at(t,e,n,o){var s,a,c,h,u,f,_,v=e&&e.ownerDocument,w=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return n;if(!o&&(d(e),e=e||p,m)){if(11!==w&&(u=$.exec(t)))if(s=u[1]){if(9===w){if(!(c=e.getElementById(s)))return n;if(c.id===s)return n.push(c),n}else if(v&&(c=v.getElementById(s))&&y(e,c)&&c.id===s)return n.push(c),n}else{if(u[2])return R.apply(n,e.getElementsByTagName(t)),n;if((s=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return R.apply(n,e.getElementsByClassName(s)),n}if(i.qsa&&!S[t+" "]&&(!g||!g.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(_=t,v=e,1===w&&(W.test(t)||H.test(t))){for((v=tt.test(t)&&_t(e.parentNode)||e)===e&&i.scope||((h=e.getAttribute("id"))?h=h.replace(nt,ot):e.setAttribute("id",h=E)),a=(f=r(t)).length;a--;)f[a]=(h?"#"+h:":scope")+" "+yt(f[a]);_=f.join(",")}try{return R.apply(n,v.querySelectorAll(_)),n}catch(e){S(t,!0)}finally{h===E&&e.removeAttribute("id")}}}return l(t.replace(B,"$1"),e,n,o)}function lt(){var t=[];return function e(i,o){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=o}}function ct(t){return t[E]=!0,t}function ht(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=e}function dt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ct((function(e){return e=+e,ct((function(i,n){for(var o,s=t([],i.length,e),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))}))}))}function _t(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=at.support={},s=at.isXML=function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!X.test(e||i&&i.nodeName||"HTML")},d=at.setDocument=function(t){var e,o,r=t?t.ownerDocument||t:w;return r!=p&&9===r.nodeType&&r.documentElement?(f=(p=r).documentElement,m=!s(p),w!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",st,!1):o.attachEvent&&o.attachEvent("onunload",st)),i.scope=ht((function(t){return f.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.attributes=ht((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=ht((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(p.getElementsByClassName),i.getById=ht((function(t){return f.appendChild(t).id=E,!p.getElementsByName||!p.getElementsByName(E).length})),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var i,n,o,s=e.getElementById(t);if(s){if((i=s.getAttributeNode("id"))&&i.value===t)return[s];for(o=e.getElementsByName(t),n=0;s=o[n++];)if((i=s.getAttributeNode("id"))&&i.value===t)return[s]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},_=[],g=[],(i.qsa=Q.test(p.querySelectorAll))&&(ht((function(t){var e;f.appendChild(t).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+G+")"),t.querySelectorAll("[id~="+E+"-]").length||g.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+E+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ht((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=Q.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ht((function(t){i.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),_.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),_=_.length&&new RegExp(_.join("|")),e=Q.test(f.compareDocumentPosition),y=e||Q.test(f.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},M=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t==p||t.ownerDocument==w&&y(w,t)?-1:e==p||e.ownerDocument==w&&y(w,e)?1:h?O(h,t)-O(h,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,n=0,o=t.parentNode,s=e.parentNode,r=[t],a=[e];if(!o||!s)return t==p?-1:e==p?1:o?-1:s?1:h?O(h,t)-O(h,e):0;if(o===s)return dt(t,e);for(i=t;i=i.parentNode;)r.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;r[n]===a[n];)n++;return n?dt(r[n],a[n]):r[n]==w?-1:a[n]==w?1:0},p):p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),i.matchesSelector&&m&&!S[e+" "]&&(!_||!_.test(e))&&(!g||!g.test(e)))try{var n=v.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){S(e,!0)}return at(e,p,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&d(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&d(t);var o=n.attrHandle[e.toLowerCase()],s=o&&T.call(n.attrHandle,e.toLowerCase())?o(t,e,!m):void 0;return void 0!==s?s:i.attributes||!m?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},at.escape=function(t){return(t+"").replace(nt,ot)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],o=0,s=0;if(u=!i.detectDuplicates,h=!i.sortStable&&t.slice(0),t.sort(M),u){for(;e=t[s++];)e===t[s]&&(o=n.push(s));for(;o--;)t.splice(n[o],1)}return h=null,t},o=at.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(n=at.selectors={cacheLength:50,createPseudo:ct,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&V.test(i)&&(e=r(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=L[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+N+"|$)"))&&L(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var o=at.attr(n,t);return null==o?"!="===e:!e||(o+="","="===e?o===i:"!="===e?o!==i:"^="===e?i&&0===o.indexOf(i):"*="===e?i&&o.indexOf(i)>-1:"$="===e?i&&o.slice(-i.length)===i:"~="===e?(" "+o.replace(z," ")+" ").indexOf(i)>-1:"|="===e&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,o){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,d,p,f,m=s!==r?"nextSibling":"previousSibling",g=e.parentNode,_=a&&e.nodeName.toLowerCase(),v=!l&&!a,y=!1;if(g){if(s){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===_:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&v){for(y=(p=(c=(h=(u=(d=g)[E]||(d[E]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===b&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(y=p=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){h[t]=[b,p,y];break}}else if(v&&(y=p=(c=(h=(u=(d=e)[E]||(d[E]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===b&&c[1]),!1===y)for(;(d=++p&&d&&d[m]||(y=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==_:1!==d.nodeType)||!++y||(v&&((h=(u=d[E]||(d[E]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[b,y]),d!==e)););return(y-=o)===n||y%n==0&&y/n>=0}}},PSEUDO:function(t,e){var i,o=n.pseudos[t]||n.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return o[E]?o(e):o.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,i){for(var n,s=o(t,e),r=s.length;r--;)t[n=O(t,s[r])]=!(i[n]=s[r])})):function(t){return o(t,0,i)}):o}},pseudos:{not:ct((function(t){var e=[],i=[],n=a(t.replace(B,"$1"));return n[E]?ct((function(t,e,i,o){for(var s,r=n(t,null,o,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))})):function(t,o,s){return e[0]=t,n(e,null,s,i),e[0]=null,!i.pop()}})),has:ct((function(t){return function(e){return at(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,it),function(e){return(e.textContent||o(e)).indexOf(t)>-1}})),lang:ct((function(t){return Z.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,i){return[i<0?i+e:i]})),even:gt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:gt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:gt((function(t,e,i){for(var n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:gt((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ft(e);function vt(){}function yt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function Et(t,e,i){var n=e.dir,o=e.next,s=o||n,r=i&&"parentNode"===s,a=x++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o);return!1}:function(e,i,l){var c,h,u,d=[b,a];if(l){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||r)if(h=(u=e[E]||(e[E]={}))[e.uniqueID]||(u[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=h[s])&&c[0]===b&&c[1]===a)return d[2]=c[2];if(h[s]=d,d[2]=t(e,i,l))return!0}return!1}}function wt(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function bt(t,e,i,n,o){for(var s,r=[],a=0,l=t.length,c=null!=e;a<l;a++)(s=t[a])&&(i&&!i(s,n,o)||(r.push(s),c&&e.push(a)));return r}function xt(t,e,i,n,o,s){return n&&!n[E]&&(n=xt(n)),o&&!o[E]&&(o=xt(o,s)),ct((function(s,r,a,l){var c,h,u,d=[],p=[],f=r.length,m=s||function(t,e,i){for(var n=0,o=e.length;n<o;n++)at(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),g=!t||!s&&e?m:bt(m,d,t,a,l),_=i?o||(s?t:f||n)?[]:r:g;if(i&&i(g,_,a,l),n)for(c=bt(_,p),n(c,[],a,l),h=c.length;h--;)(u=c[h])&&(_[p[h]]=!(g[p[h]]=u));if(s){if(o||t){if(o){for(c=[],h=_.length;h--;)(u=_[h])&&c.push(g[h]=u);o(null,_=[],c,l)}for(h=_.length;h--;)(u=_[h])&&(c=o?O(s,u):d[h])>-1&&(s[c]=!(r[c]=u))}}else _=bt(_===r?_.splice(f,_.length):_),o?o(null,r,_,l):R.apply(r,_)}))}function Lt(t){for(var e,i,o,s=t.length,r=n.relative[t[0].type],a=r||n.relative[" "],l=r?1:0,h=Et((function(t){return t===e}),a,!0),u=Et((function(t){return O(e,t)>-1}),a,!0),d=[function(t,i,n){var o=!r&&(n||i!==c)||((e=i).nodeType?h(t,i,n):u(t,i,n));return e=null,o}];l<s;l++)if(i=n.relative[t[l].type])d=[Et(wt(d),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[E]){for(o=++l;o<s&&!n.relative[t[o].type];o++);return xt(l>1&&wt(d),l>1&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(B,"$1"),i,l<o&&Lt(t.slice(l,o)),o<s&&Lt(t=t.slice(o)),o<s&&yt(t))}d.push(i)}return wt(d)}return vt.prototype=n.filters=n.pseudos,n.setFilters=new vt,r=at.tokenize=function(t,e){var i,o,s,r,a,l,c,h=C[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],c=n.preFilter;a;){for(r in i&&!(o=q.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),i=!1,(o=H.exec(a))&&(i=o.shift(),s.push({value:i,type:o[0].replace(B," ")}),a=a.slice(i.length)),n.filter)!(o=Y[r].exec(a))||c[r]&&!(o=c[r](o))||(i=o.shift(),s.push({value:i,type:r,matches:o}),a=a.slice(i.length));if(!i)break}return e?a.length:a?at.error(t):C(t,l).slice(0)},a=at.compile=function(t,e){var i,o=[],s=[],a=P[t+" "];if(!a){for(e||(e=r(t)),i=e.length;i--;)(a=Lt(e[i]))[E]?o.push(a):s.push(a);(a=P(t,function(t,e){var i=e.length>0,o=t.length>0,s=function(s,r,a,l,h){var u,f,g,_=0,v="0",y=s&&[],E=[],w=c,x=s||o&&n.find.TAG("*",h),L=b+=null==w?1:Math.random()||.1,C=x.length;for(h&&(c=r==p||r||h);v!==C&&null!=(u=x[v]);v++){if(o&&u){for(f=0,r||u.ownerDocument==p||(d(u),a=!m);g=t[f++];)if(g(u,r||p,a)){l.push(u);break}h&&(b=L)}i&&((u=!g&&u)&&_--,s&&y.push(u))}if(_+=v,i&&v!==_){for(f=0;g=e[f++];)g(y,E,r,a);if(s){if(_>0)for(;v--;)y[v]||E[v]||(E[v]=I.call(l));E=bt(E)}R.apply(l,E),h&&!s&&E.length>0&&_+e.length>1&&at.uniqueSort(l)}return h&&(b=L,c=w),y};return i?ct(s):s}(s,o))).selector=t}return a},l=at.select=function(t,e,i,o){var s,l,c,h,u,d="function"==typeof t&&t,p=!o&&r(t=d.selector||t);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&m&&n.relative[l[1].type]){if(!(e=(n.find.ID(c.matches[0].replace(et,it),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(s=Y.needsContext.test(t)?0:l.length;s--&&(c=l[s],!n.relative[h=c.type]);)if((u=n.find[h])&&(o=u(c.matches[0].replace(et,it),tt.test(l[0].type)&&_t(e.parentNode)||e))){if(l.splice(s,1),!(t=o.length&&yt(l)))return R.apply(i,o),i;break}}return(d||a(t,p))(o,e,!m,i,!e||tt.test(t)&&_t(e.parentNode)||e),i},i.sortStable=E.split("").sort(M).join("")===E,i.detectDuplicates=!!u,d(),i.sortDetached=ht((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ht((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&ht((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ht((function(t){return null==t.getAttribute("disabled")}))||ut(G,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),at}(n);L.find=P,L.expr=P.selectors,L.expr[":"]=L.expr.pseudos,L.uniqueSort=L.unique=P.uniqueSort,L.text=P.getText,L.isXMLDoc=P.isXML,L.contains=P.contains,L.escapeSelector=P.escape;var S=function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&L(t).is(i))break;n.push(t)}return n},M=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},T=L.expr.match.needsContext;function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(t,e,i){return _(e)?L.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?L.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?L.grep(t,(function(t){return h.call(e,t)>-1!==i})):L.filter(e,t,i)}L.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?L.find.matchesSelector(n,t)?[n]:[]:L.find.matches(t,L.grep(e,(function(t){return 1===t.nodeType})))},L.fn.extend({find:function(t){var e,i,n=this.length,o=this;if("string"!=typeof t)return this.pushStack(L(t).filter((function(){for(e=0;e<n;e++)if(L.contains(o[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)L.find(t,o[e],i);return n>1?L.uniqueSort(i):i},filter:function(t){return this.pushStack(k(this,t||[],!1))},not:function(t){return this.pushStack(k(this,t||[],!0))},is:function(t){return!!k(this,"string"==typeof t&&T.test(t)?L(t):t||[],!1).length}});var R,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(L.fn.init=function(t,e,i){var n,o;if(!t)return this;if(i=i||R,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:D.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof L?e[0]:e,L.merge(this,L.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),I.test(n[1])&&L.isPlainObject(e))for(n in e)_(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(o=y.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):_(t)?void 0!==i.ready?i.ready(t):t(L):L.makeArray(t,this)}).prototype=L.fn,R=L(y);var O=/^(?:parents|prev(?:Until|All))/,G={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}L.fn.extend({has:function(t){var e=L(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(L.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,o=this.length,s=[],r="string"!=typeof t&&L(t);if(!T.test(t))for(;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&L.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?L.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?h.call(L(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(L.uniqueSort(L.merge(this.get(),L(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),L.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,i){return S(t,"parentNode",i)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,i){return S(t,"nextSibling",i)},prevUntil:function(t,e,i){return S(t,"previousSibling",i)},siblings:function(t){return M((t.parentNode||{}).firstChild,t)},children:function(t){return M(t.firstChild)},contents:function(t){return null!=t.contentDocument&&r(t.contentDocument)?t.contentDocument:(A(t,"template")&&(t=t.content||t),L.merge([],t.childNodes))}},(function(t,e){L.fn[t]=function(i,n){var o=L.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=L.filter(n,o)),this.length>1&&(G[t]||L.uniqueSort(o),O.test(t)&&o.reverse()),this.pushStack(o)}}));var U=/[^\x20\t\r\n\f]+/g;function j(t){return t}function F(t){throw t}function z(t,e,i,n){var o;try{t&&_(o=t.promise)?o.call(t).done(e).fail(i):t&&_(o=t.then)?o.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}L.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return L.each(t.match(U)||[],(function(t,i){e[i]=!0})),e}(t):L.extend({},t);var e,i,n,o,s=[],r=[],a=-1,l=function(){for(o=o||t.once,n=e=!0;r.length;a=-1)for(i=r.shift();++a<s.length;)!1===s[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=s.length,i=!1);t.memory||(i=!1),e=!1,o&&(s=i?[]:"")},c={add:function(){return s&&(i&&!e&&(a=s.length-1,r.push(i)),function e(i){L.each(i,(function(i,n){_(n)?t.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==b(n)&&e(n)}))}(arguments),i&&!e&&l()),this},remove:function(){return L.each(arguments,(function(t,e){for(var i;(i=L.inArray(e,s,i))>-1;)s.splice(i,1),i<=a&&a--})),this},has:function(t){return t?L.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=r=[],s=i="",this},disabled:function(){return!s},lock:function(){return o=r=[],i||e||(s=i=""),this},locked:function(){return!!o},fireWith:function(t,i){return o||(i=[t,(i=i||[]).slice?i.slice():i],r.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},L.extend({Deferred:function(t){var e=[["notify","progress",L.Callbacks("memory"),L.Callbacks("memory"),2],["resolve","done",L.Callbacks("once memory"),L.Callbacks("once memory"),0,"resolved"],["reject","fail",L.Callbacks("once memory"),L.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return L.Deferred((function(i){L.each(e,(function(e,n){var o=_(t[n[4]])&&t[n[4]];s[n[1]]((function(){var t=o&&o.apply(this,arguments);t&&_(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[t]:arguments)}))})),t=null})).promise()},then:function(t,i,o){var s=0;function r(t,e,i,o){return function(){var a=this,l=arguments,c=function(){var n,c;if(!(t<s)){if((n=i.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,_(c)?o?c.call(n,r(s,e,j,o),r(s,e,F,o)):(s++,c.call(n,r(s,e,j,o),r(s,e,F,o),r(s,e,j,e.notifyWith))):(i!==j&&(a=void 0,l=[n]),(o||e.resolveWith)(a,l))}},h=o?c:function(){try{c()}catch(n){L.Deferred.exceptionHook&&L.Deferred.exceptionHook(n,h.stackTrace),t+1>=s&&(i!==F&&(a=void 0,l=[n]),e.rejectWith(a,l))}};t?h():(L.Deferred.getStackHook&&(h.stackTrace=L.Deferred.getStackHook()),n.setTimeout(h))}}return L.Deferred((function(n){e[0][3].add(r(0,n,_(o)?o:j,n.notifyWith)),e[1][3].add(r(0,n,_(t)?t:j)),e[2][3].add(r(0,n,_(i)?i:F))})).promise()},promise:function(t){return null!=t?L.extend(t,o):o}},s={};return L.each(e,(function(t,n){var r=n[2],a=n[5];o[n[1]]=r.add,a&&r.add((function(){i=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),r.add(n[3].fire),s[n[0]]=function(){return s[n[0]+"With"](this===s?void 0:this,arguments),this},s[n[0]+"With"]=r.fireWith})),o.promise(s),t&&t.call(s,s),s},when:function(t){var e=arguments.length,i=e,n=Array(i),o=a.call(arguments),s=L.Deferred(),r=function(t){return function(i){n[t]=this,o[t]=arguments.length>1?a.call(arguments):i,--e||s.resolveWith(n,o)}};if(e<=1&&(z(t,s.done(r(i)).resolve,s.reject,!e),"pending"===s.state()||_(o[i]&&o[i].then)))return s.then();for(;i--;)z(o[i],r(i),s.reject);return s.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;L.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&B.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},L.readyException=function(t){n.setTimeout((function(){throw t}))};var q=L.Deferred();function H(){y.removeEventListener("DOMContentLoaded",H),n.removeEventListener("load",H),L.ready()}L.fn.ready=function(t){return q.then(t).catch((function(t){L.readyException(t)})),this},L.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--L.readyWait:L.isReady)||(L.isReady=!0,!0!==t&&--L.readyWait>0||q.resolveWith(y,[L]))}}),L.ready.then=q.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?n.setTimeout(L.ready):(y.addEventListener("DOMContentLoaded",H),n.addEventListener("load",H));var W=function(t,e,i,n,o,s,r){var a=0,l=t.length,c=null==i;if("object"===b(i))for(a in o=!0,i)W(t,e,a,i[a],!0,s,r);else if(void 0!==n&&(o=!0,_(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(L(t),i)})),e))for(;a<l;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):s},V=/^-ms-/,Z=/-([a-z])/g;function Y(t,e){return e.toUpperCase()}function X(t){return t.replace(V,"ms-").replace(Z,Y)}var K=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function J(){this.expando=L.expando+J.uid++}J.uid=1,J.prototype={cache:function(t){var e=t[this.expando];return e||(e={},K(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[X(e)]=i;else for(n in e)o[X(n)]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(X):(e=X(e))in n?[e]:e.match(U)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||L.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!L.isEmptyObject(e)}};var Q=new J,$=new J,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function it(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(i)}catch(t){}$.set(t,e,i)}else i=void 0;return i}L.extend({hasData:function(t){return $.hasData(t)||Q.hasData(t)},data:function(t,e,i){return $.access(t,e,i)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,i){return Q.access(t,e,i)},_removeData:function(t,e){Q.remove(t,e)}}),L.fn.extend({data:function(t,e){var i,n,o,s=this[0],r=s&&s.attributes;if(void 0===t){if(this.length&&(o=$.get(s),1===s.nodeType&&!Q.get(s,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&0===(n=r[i].name).indexOf("data-")&&(n=X(n.slice(5)),it(s,n,o[n]));Q.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each((function(){$.set(this,t)})):W(this,(function(e){var i;if(s&&void 0===e)return void 0!==(i=$.get(s,t))||void 0!==(i=it(s,t))?i:void 0;this.each((function(){$.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){$.remove(this,t)}))}}),L.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Q.get(t,e),i&&(!n||Array.isArray(i)?n=Q.access(t,e,L.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=L.queue(t,e),n=i.length,o=i.shift(),s=L._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete s.stop,o.call(t,(function(){L.dequeue(t,e)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Q.get(t,i)||Q.access(t,i,{empty:L.Callbacks("once memory").add((function(){Q.remove(t,[e+"queue",i])}))})}}),L.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?L.queue(this[0],t):void 0===e?this:this.each((function(){var i=L.queue(this,t,e);L._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&L.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){L.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=L.Deferred(),s=this,r=this.length,a=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(i=Q.get(s[r],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),st=["Top","Right","Bottom","Left"],rt=y.documentElement,at=function(t){return L.contains(t.ownerDocument,t)},lt={composed:!0};rt.getRootNode&&(at=function(t){return L.contains(t.ownerDocument,t)||t.getRootNode(lt)===t.ownerDocument});var ct=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===L.css(t,"display")};function ht(t,e,i,n){var o,s,r=20,a=n?function(){return n.cur()}:function(){return L.css(t,e,"")},l=a(),c=i&&i[3]||(L.cssNumber[e]?"":"px"),h=t.nodeType&&(L.cssNumber[e]||"px"!==c&&+l)&&ot.exec(L.css(t,e));if(h&&h[3]!==c){for(l/=2,c=c||h[3],h=+l||1;r--;)L.style(t,e,h+c),(1-s)*(1-(s=a()/l||.5))<=0&&(r=0),h/=s;h*=2,L.style(t,e,h+c),i=i||[]}return i&&(h=+h||+l||0,o=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=o)),o}var ut={};function dt(t){var e,i=t.ownerDocument,n=t.nodeName,o=ut[n];return o||(e=i.body.appendChild(i.createElement(n)),o=L.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),ut[n]=o,o)}function pt(t,e){for(var i,n,o=[],s=0,r=t.length;s<r;s++)(n=t[s]).style&&(i=n.style.display,e?("none"===i&&(o[s]=Q.get(n,"display")||null,o[s]||(n.style.display="")),""===n.style.display&&ct(n)&&(o[s]=dt(n))):"none"!==i&&(o[s]="none",Q.set(n,"display",i)));for(s=0;s<r;s++)null!=o[s]&&(t[s].style.display=o[s]);return t}L.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ct(this)?L(this).show():L(this).hide()}))}});var ft,mt,gt=/^(?:checkbox|radio)$/i,_t=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i;ft=y.createDocumentFragment().appendChild(y.createElement("div")),(mt=y.createElement("input")).setAttribute("type","radio"),mt.setAttribute("checked","checked"),mt.setAttribute("name","t"),ft.appendChild(mt),g.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue,ft.innerHTML="<option></option>",g.option=!!ft.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Et(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&A(t,e)?L.merge([t],i):i}function wt(t,e){for(var i=0,n=t.length;i<n;i++)Q.set(t[i],"globalEval",!e||Q.get(e[i],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,g.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var bt=/<|&#?\w+;/;function xt(t,e,i,n,o){for(var s,r,a,l,c,h,u=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===b(s))L.merge(d,s.nodeType?[s]:s);else if(bt.test(s)){for(r=r||u.appendChild(e.createElement("div")),a=(_t.exec(s)||["",""])[1].toLowerCase(),l=yt[a]||yt._default,r.innerHTML=l[1]+L.htmlPrefilter(s)+l[2],h=l[0];h--;)r=r.lastChild;L.merge(d,r.childNodes),(r=u.firstChild).textContent=""}else d.push(e.createTextNode(s));for(u.textContent="",p=0;s=d[p++];)if(n&&L.inArray(s,n)>-1)o&&o.push(s);else if(c=at(s),r=Et(u.appendChild(s),"script"),c&&wt(r),i)for(h=0;s=r[h++];)vt.test(s.type||"")&&i.push(s);return u}var Lt=/^([^.]*)(?:\.(.+)|)/;function Ct(){return!0}function Pt(){return!1}function St(t,e){return t===function(){try{return y.activeElement}catch(t){}}()==("focus"===e)}function Mt(t,e,i,n,o,s){var r,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Mt(t,a,i,n,e[a],s);return t}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=Pt;else if(!o)return t;return 1===s&&(r=o,(o=function(t){return L().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=L.guid++)),t.each((function(){L.event.add(this,e,o,n,i)}))}function Tt(t,e,i){i?(Q.set(t,e,!1),L.event.add(t,e,{namespace:!1,handler:function(t){var n,o,s=Q.get(this,e);if(1&t.isTrigger&&this[e]){if(s.length)(L.event.special[e]||{}).delegateType&&t.stopPropagation();else if(s=a.call(arguments),Q.set(this,e,s),n=i(this,e),this[e](),s!==(o=Q.get(this,e))||n?Q.set(this,e,!1):o={},s!==o)return t.stopImmediatePropagation(),t.preventDefault(),o&&o.value}else s.length&&(Q.set(this,e,{value:L.event.trigger(L.extend(s[0],L.Event.prototype),s.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Q.get(t,e)&&L.event.add(t,e,Ct)}L.event={global:{},add:function(t,e,i,n,o){var s,r,a,l,c,h,u,d,p,f,m,g=Q.get(t);if(K(t))for(i.handler&&(i=(s=i).handler,o=s.selector),o&&L.find.matchesSelector(rt,o),i.guid||(i.guid=L.guid++),(l=g.events)||(l=g.events=Object.create(null)),(r=g.handle)||(r=g.handle=function(e){return void 0!==L&&L.event.triggered!==e.type?L.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(U)||[""]).length;c--;)p=m=(a=Lt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(u=L.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=L.event.special[p]||{},h=L.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&L.expr.match.needsContext.test(o),namespace:f.join(".")},s),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,f,r)||t.addEventListener&&t.addEventListener(p,r)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,h):d.push(h),L.event.global[p]=!0)},remove:function(t,e,i,n,o){var s,r,a,l,c,h,u,d,p,f,m,g=Q.hasData(t)&&Q.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(U)||[""]).length;c--;)if(p=m=(a=Lt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(u=L.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=d.length;s--;)h=d[s],!o&&m!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(s,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));r&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||L.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)L.event.remove(t,p+e[c],i,n,!0);L.isEmptyObject(l)&&Q.remove(t,"handle events")}},dispatch:function(t){var e,i,n,o,s,r,a=new Array(arguments.length),l=L.event.fix(t),c=(Q.get(this,"events")||Object.create(null))[l.type]||[],h=L.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,l)){for(r=L.event.handlers.call(this,l,c),e=0;(o=r[e++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(n=((L.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,n,o,s,r,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(s=[],r={},i=0;i<l;i++)void 0===r[o=(n=e[i]).selector+" "]&&(r[o]=n.needsContext?L(o,this).index(c)>-1:L.find(o,this,null,[c]).length),r[o]&&s.push(n);s.length&&a.push({elem:c,handlers:s})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(L.Event.prototype,t,{enumerable:!0,configurable:!0,get:_(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[L.expando]?t:new L.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&A(e,"input")&&Tt(e,"click",Ct),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&A(e,"input")&&Tt(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&A(e,"input")&&Q.get(e,"click")||A(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},L.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},L.Event=function(t,e){if(!(this instanceof L.Event))return new L.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ct:Pt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&L.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[L.expando]=!0},L.Event.prototype={constructor:L.Event,isDefaultPrevented:Pt,isPropagationStopped:Pt,isImmediatePropagationStopped:Pt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ct,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ct,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ct,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},L.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},L.event.addProp),L.each({focus:"focusin",blur:"focusout"},(function(t,e){L.event.special[t]={setup:function(){return Tt(this,t,St),!1},trigger:function(){return Tt(this,t),!0},_default:function(){return!0},delegateType:e}})),L.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){L.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,s=t.handleObj;return o&&(o===n||L.contains(n,o))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}})),L.fn.extend({on:function(t,e,i,n){return Mt(this,t,e,i,n)},one:function(t,e,i,n){return Mt(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,L(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Pt),this.each((function(){L.event.remove(this,t,i,e)}))}});var At=/<script|<style|<link/i,It=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Rt(t,e){return A(t,"table")&&A(11!==e.nodeType?e:e.firstChild,"tr")&&L(t).children("tbody")[0]||t}function Dt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ot(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Gt(t,e){var i,n,o,s,r,a;if(1===e.nodeType){if(Q.hasData(t)&&(a=Q.get(t).events))for(o in Q.remove(e,"handle events"),a)for(i=0,n=a[o].length;i<n;i++)L.event.add(e,o,a[o][i]);$.hasData(t)&&(s=$.access(t),r=L.extend({},s),$.set(e,r))}}function Nt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&gt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Ut(t,e,i,n){e=l(e);var o,s,r,a,c,h,u=0,d=t.length,p=d-1,f=e[0],m=_(f);if(m||d>1&&"string"==typeof f&&!g.checkClone&&It.test(f))return t.each((function(o){var s=t.eq(o);m&&(e[0]=f.call(this,o,s.html())),Ut(s,e,i,n)}));if(d&&(s=(o=xt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===o.childNodes.length&&(o=s),s||n)){for(a=(r=L.map(Et(o,"script"),Dt)).length;u<d;u++)c=o,u!==p&&(c=L.clone(c,!0,!0),a&&L.merge(r,Et(c,"script"))),i.call(t[u],c,u);if(a)for(h=r[r.length-1].ownerDocument,L.map(r,Ot),u=0;u<a;u++)c=r[u],vt.test(c.type||"")&&!Q.access(c,"globalEval")&&L.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?L._evalUrl&&!c.noModule&&L._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},h):w(c.textContent.replace(kt,""),c,h))}return t}function jt(t,e,i){for(var n,o=e?L.filter(e,t):t,s=0;null!=(n=o[s]);s++)i||1!==n.nodeType||L.cleanData(Et(n)),n.parentNode&&(i&&at(n)&&wt(Et(n,"script")),n.parentNode.removeChild(n));return t}L.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,o,s,r,a=t.cloneNode(!0),l=at(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||L.isXMLDoc(t)))for(r=Et(a),n=0,o=(s=Et(t)).length;n<o;n++)Nt(s[n],r[n]);if(e)if(i)for(s=s||Et(t),r=r||Et(a),n=0,o=s.length;n<o;n++)Gt(s[n],r[n]);else Gt(t,a);return(r=Et(a,"script")).length>0&&wt(r,!l&&Et(t,"script")),a},cleanData:function(t){for(var e,i,n,o=L.event.special,s=0;void 0!==(i=t[s]);s++)if(K(i)){if(e=i[Q.expando]){if(e.events)for(n in e.events)o[n]?L.event.remove(i,n):L.removeEvent(i,n,e.handle);i[Q.expando]=void 0}i[$.expando]&&(i[$.expando]=void 0)}}}),L.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return W(this,(function(t){return void 0===t?L.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ut(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Rt(this,t).appendChild(t)}))},prepend:function(){return Ut(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Rt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ut(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ut(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(L.cleanData(Et(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return L.clone(this,t,e)}))},html:function(t){return W(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!yt[(_t.exec(t)||["",""])[1].toLowerCase()]){t=L.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(L.cleanData(Et(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ut(this,arguments,(function(e){var i=this.parentNode;L.inArray(this,t)<0&&(L.cleanData(Et(this)),i&&i.replaceChild(e,this))}),t)}}),L.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){L.fn[t]=function(t){for(var i,n=[],o=L(t),s=o.length-1,r=0;r<=s;r++)i=r===s?this:this.clone(!0),L(o[r])[e](i),c.apply(n,i.get());return this.pushStack(n)}}));var Ft=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Bt=function(t,e,i){var n,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in n=i.call(t),e)t.style[o]=s[o];return n},qt=new RegExp(st.join("|"),"i");function Ht(t,e,i){var n,o,s,r,a=t.style;return(i=i||zt(t))&&(""!==(r=i.getPropertyValue(e)||i[e])||at(t)||(r=L.style(t,e)),!g.pixelBoxStyles()&&Ft.test(r)&&qt.test(e)&&(n=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=o,a.maxWidth=s)),void 0!==r?r+"":r}function Wt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(c).appendChild(h);var t=n.getComputedStyle(h);i="1%"!==t.top,l=12===e(t.marginLeft),h.style.right="60%",r=36===e(t.right),o=36===e(t.width),h.style.position="absolute",s=12===e(h.offsetWidth/3),rt.removeChild(c),h=null}}function e(t){return Math.round(parseFloat(t))}var i,o,s,r,a,l,c=y.createElement("div"),h=y.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===h.style.backgroundClip,L.extend(g,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,e,i,o;return null==a&&(t=y.createElement("table"),e=y.createElement("tr"),i=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",i.style.height="9px",i.style.display="block",rt.appendChild(t).appendChild(e).appendChild(i),o=n.getComputedStyle(e),a=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===e.offsetHeight,rt.removeChild(t)),a}}))}();var Vt=["Webkit","Moz","ms"],Zt=y.createElement("div").style,Yt={};function Xt(t){var e=L.cssProps[t]||Yt[t];return e||(t in Zt?t:Yt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Vt.length;i--;)if((t=Vt[i]+e)in Zt)return t}(t)||t)}var Kt=/^(none|table(?!-c[ea]).+)/,Jt=/^--/,Qt={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:"0",fontWeight:"400"};function te(t,e,i){var n=ot.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function ee(t,e,i,n,o,s){var r="width"===e?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;r<4;r+=2)"margin"===i&&(l+=L.css(t,i+st[r],!0,o)),n?("content"===i&&(l-=L.css(t,"padding"+st[r],!0,o)),"margin"!==i&&(l-=L.css(t,"border"+st[r]+"Width",!0,o))):(l+=L.css(t,"padding"+st[r],!0,o),"padding"!==i?l+=L.css(t,"border"+st[r]+"Width",!0,o):a+=L.css(t,"border"+st[r]+"Width",!0,o));return!n&&s>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-a-.5))||0),l}function ie(t,e,i){var n=zt(t),o=(!g.boxSizingReliable()||i)&&"border-box"===L.css(t,"boxSizing",!1,n),s=o,r=Ht(t,e,n),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ft.test(r)){if(!i)return r;r="auto"}return(!g.boxSizingReliable()&&o||!g.reliableTrDimensions()&&A(t,"tr")||"auto"===r||!parseFloat(r)&&"inline"===L.css(t,"display",!1,n))&&t.getClientRects().length&&(o="border-box"===L.css(t,"boxSizing",!1,n),(s=a in t)&&(r=t[a])),(r=parseFloat(r)||0)+ee(t,e,i||(o?"border":"content"),s,n,r)+"px"}function ne(t,e,i,n,o){return new ne.prototype.init(t,e,i,n,o)}L.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Ht(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,r,a=X(e),l=Jt.test(e),c=t.style;if(l||(e=Xt(a)),r=L.cssHooks[e]||L.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(o=r.get(t,!1,n))?o:c[e];"string"===(s=typeof i)&&(o=ot.exec(i))&&o[1]&&(i=ht(t,e,o),s="number"),null!=i&&i==i&&("number"!==s||l||(i+=o&&o[3]||(L.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var o,s,r,a=X(e);return Jt.test(e)||(e=Xt(a)),(r=L.cssHooks[e]||L.cssHooks[a])&&"get"in r&&(o=r.get(t,!0,i)),void 0===o&&(o=Ht(t,e,n)),"normal"===o&&e in $t&&(o=$t[e]),""===i||i?(s=parseFloat(o),!0===i||isFinite(s)?s||0:o):o}}),L.each(["height","width"],(function(t,e){L.cssHooks[e]={get:function(t,i,n){if(i)return!Kt.test(L.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ie(t,e,n):Bt(t,Qt,(function(){return ie(t,e,n)}))},set:function(t,i,n){var o,s=zt(t),r=!g.scrollboxSize()&&"absolute"===s.position,a=(r||n)&&"border-box"===L.css(t,"boxSizing",!1,s),l=n?ee(t,e,n,a,s):0;return a&&r&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-ee(t,e,"border",!1,s)-.5)),l&&(o=ot.exec(i))&&"px"!==(o[3]||"px")&&(t.style[e]=i,i=L.css(t,e)),te(0,i,l)}}})),L.cssHooks.marginLeft=Wt(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Ht(t,"marginLeft"))||t.getBoundingClientRect().left-Bt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),L.each({margin:"",padding:"",border:"Width"},(function(t,e){L.cssHooks[t+e]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+st[n]+e]=s[n]||s[n-2]||s[0];return o}},"margin"!==t&&(L.cssHooks[t+e].set=te)})),L.fn.extend({css:function(t,e){return W(this,(function(t,e,i){var n,o,s={},r=0;if(Array.isArray(e)){for(n=zt(t),o=e.length;r<o;r++)s[e[r]]=L.css(t,e[r],!1,n);return s}return void 0!==i?L.style(t,e,i):L.css(t,e)}),t,e,arguments.length>1)}}),L.Tween=ne,ne.prototype={constructor:ne,init:function(t,e,i,n,o,s){this.elem=t,this.prop=i,this.easing=o||L.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(L.cssNumber[i]?"":"px")},cur:function(){var t=ne.propHooks[this.prop];return t&&t.get?t.get(this):ne.propHooks._default.get(this)},run:function(t){var e,i=ne.propHooks[this.prop];return this.options.duration?this.pos=e=L.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ne.propHooks._default.set(this),this}},ne.prototype.init.prototype=ne.prototype,ne.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=L.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){L.fx.step[t.prop]?L.fx.step[t.prop](t):1!==t.elem.nodeType||!L.cssHooks[t.prop]&&null==t.elem.style[Xt(t.prop)]?t.elem[t.prop]=t.now:L.style(t.elem,t.prop,t.now+t.unit)}}},ne.propHooks.scrollTop=ne.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},L.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},L.fx=ne.prototype.init,L.fx.step={};var oe,se,re=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function le(){se&&(!1===y.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(le):n.setTimeout(le,L.fx.interval),L.fx.tick())}function ce(){return n.setTimeout((function(){oe=void 0})),oe=Date.now()}function he(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)o["margin"+(i=st[n])]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function ue(t,e,i){for(var n,o=(de.tweeners[e]||[]).concat(de.tweeners["*"]),s=0,r=o.length;s<r;s++)if(n=o[s].call(i,e,t))return n}function de(t,e,i){var n,o,s=0,r=de.prefilters.length,a=L.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var e=oe||ce(),i=Math.max(0,c.startTime+c.duration-e),n=1-(i/c.duration||0),s=0,r=c.tweens.length;s<r;s++)c.tweens[s].run(n);return a.notifyWith(t,[c,n,i]),n<1&&r?i:(r||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:L.extend({},e),opts:L.extend(!0,{specialEasing:{},easing:L.easing._default},i),originalProperties:e,originalOptions:i,startTime:oe||ce(),duration:i.duration,tweens:[],createTween:function(e,i){var n=L.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),h=c.props;for(!function(t,e){var i,n,o,s,r;for(i in t)if(o=e[n=X(i)],s=t[i],Array.isArray(s)&&(o=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),(r=L.cssHooks[n])&&"expand"in r)for(i in s=r.expand(s),delete t[n],s)i in t||(t[i]=s[i],e[i]=o);else e[n]=o}(h,c.opts.specialEasing);s<r;s++)if(n=de.prefilters[s].call(c,t,h,c.opts))return _(n.stop)&&(L._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return L.map(h,ue,c),_(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),L.fx.timer(L.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}L.Animation=L.extend(de,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return ht(i.elem,t,ot.exec(e),i),i}]},tweener:function(t,e){_(t)?(e=t,t=["*"]):t=t.match(U);for(var i,n=0,o=t.length;n<o;n++)i=t[n],de.tweeners[i]=de.tweeners[i]||[],de.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,o,s,r,a,l,c,h,u="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&ct(t),g=Q.get(t,"fxshow");for(n in i.queue||(null==(r=L._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,d.always((function(){d.always((function(){r.unqueued--,L.queue(t,"fx").length||r.empty.fire()}))}))),e)if(o=e[n],re.test(o)){if(delete e[n],s=s||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||L.style(t,n)}if((l=!L.isEmptyObject(e))||!L.isEmptyObject(p))for(n in u&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=Q.get(t,"display")),"none"===(h=L.css(t,"display"))&&(c?h=c:(pt([t],!0),c=t.style.display||c,h=L.css(t,"display"),pt([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===L.css(t,"float")&&(l||(d.done((function(){f.display=c})),null==c&&(h=f.display,c="none"===h?"":h)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(t,"fxshow",{display:c}),s&&(g.hidden=!m),m&&pt([t],!0),d.done((function(){for(n in m||pt([t]),Q.remove(t,"fxshow"),p)L.style(t,n,p[n])}))),l=ue(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),L.speed=function(t,e,i){var n=t&&"object"==typeof t?L.extend({},t):{complete:i||!i&&e||_(t)&&t,duration:t,easing:i&&e||e&&!_(e)&&e};return L.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in L.fx.speeds?n.duration=L.fx.speeds[n.duration]:n.duration=L.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){_(n.old)&&n.old.call(this),n.queue&&L.dequeue(this,n.queue)},n},L.fn.extend({fadeTo:function(t,e,i,n){return this.filter(ct).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=L.isEmptyObject(t),s=L.speed(e,i,n),r=function(){var e=de(this,L.extend({},t),s);(o||Q.get(this,"finish"))&&e.stop(!0)};return r.finish=r,o||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,o=null!=t&&t+"queueHooks",s=L.timers,r=Q.get(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&ae.test(o)&&n(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(i),e=!1,s.splice(o,1));!e&&i||L.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=Q.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],s=L.timers,r=n?n.length:0;for(i.finish=!0,L.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),L.each(["toggle","show","hide"],(function(t,e){var i=L.fn[e];L.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(he(e,!0),t,n,o)}})),L.each({slideDown:he("show"),slideUp:he("hide"),slideToggle:he("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){L.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),L.timers=[],L.fx.tick=function(){var t,e=0,i=L.timers;for(oe=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||L.fx.stop(),oe=void 0},L.fx.timer=function(t){L.timers.push(t),L.fx.start()},L.fx.interval=13,L.fx.start=function(){se||(se=!0,le())},L.fx.stop=function(){se=null},L.fx.speeds={slow:600,fast:200,_default:400},L.fn.delay=function(t,e){return t=L.fx&&L.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var o=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(o)}}))},function(){var t=y.createElement("input"),e=y.createElement("select").appendChild(y.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=y.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var pe,fe=L.expr.attrHandle;L.fn.extend({attr:function(t,e){return W(this,L.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){L.removeAttr(this,t)}))}}),L.extend({attr:function(t,e,i){var n,o,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?L.prop(t,e,i):(1===s&&L.isXMLDoc(t)||(o=L.attrHooks[e.toLowerCase()]||(L.expr.match.bool.test(e)?pe:void 0)),void 0!==i?null===i?void L.removeAttr(t,e):o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:null==(n=L.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&A(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,o=e&&e.match(U);if(o&&1===t.nodeType)for(;i=o[n++];)t.removeAttribute(i)}}),pe={set:function(t,e,i){return!1===e?L.removeAttr(t,i):t.setAttribute(i,i),i}},L.each(L.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=fe[e]||L.find.attr;fe[e]=function(t,e,n){var o,s,r=e.toLowerCase();return n||(s=fe[r],fe[r]=o,o=null!=i(t,e,n)?r:null,fe[r]=s),o}}));var me=/^(?:input|select|textarea|button)$/i,ge=/^(?:a|area)$/i;function _e(t){return(t.match(U)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function ye(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(U)||[]}L.fn.extend({prop:function(t,e){return W(this,L.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[L.propFix[t]||t]}))}}),L.extend({prop:function(t,e,i){var n,o,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&L.isXMLDoc(t)||(e=L.propFix[e]||e,o=L.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=L.find.attr(t,"tabindex");return e?parseInt(e,10):me.test(t.nodeName)||ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(L.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),L.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){L.propFix[this.toLowerCase()]=this})),L.fn.extend({addClass:function(t){var e,i,n,o,s,r,a,l=0;if(_(t))return this.each((function(e){L(this).addClass(t.call(this,e,ve(this)))}));if((e=ye(t)).length)for(;i=this[l++];)if(o=ve(i),n=1===i.nodeType&&" "+_e(o)+" "){for(r=0;s=e[r++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");o!==(a=_e(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,o,s,r,a,l=0;if(_(t))return this.each((function(e){L(this).removeClass(t.call(this,e,ve(this)))}));if(!arguments.length)return this.attr("class","");if((e=ye(t)).length)for(;i=this[l++];)if(o=ve(i),n=1===i.nodeType&&" "+_e(o)+" "){for(r=0;s=e[r++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");o!==(a=_e(n))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):_(t)?this.each((function(i){L(this).toggleClass(t.call(this,i,ve(this),e),e)})):this.each((function(){var e,o,s,r;if(n)for(o=0,s=L(this),r=ye(t);e=r[o++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==i||((e=ve(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Q.get(this,"__className__")||""))}))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+_e(ve(i))+" ").indexOf(e)>-1)return!0;return!1}});var Ee=/\r/g;L.fn.extend({val:function(t){var e,i,n,o=this[0];return arguments.length?(n=_(t),this.each((function(i){var o;1===this.nodeType&&(null==(o=n?t.call(this,i,L(this).val()):t)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=L.map(o,(function(t){return null==t?"":t+""}))),(e=L.valHooks[this.type]||L.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))}))):o?(e=L.valHooks[o.type]||L.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(Ee,""):null==i?"":i:void 0}}),L.extend({valHooks:{option:{get:function(t){var e=L.find.attr(t,"value");return null!=e?e:_e(L.text(t))}},select:{get:function(t){var e,i,n,o=t.options,s=t.selectedIndex,r="select-one"===t.type,a=r?null:[],l=r?s+1:o.length;for(n=s<0?l:r?s:0;n<l;n++)if(((i=o[n]).selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!A(i.parentNode,"optgroup"))){if(e=L(i).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var i,n,o=t.options,s=L.makeArray(e),r=o.length;r--;)((n=o[r]).selected=L.inArray(L.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),L.each(["radio","checkbox"],(function(){L.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=L.inArray(L(t).val(),e)>-1}},g.checkOn||(L.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),g.focusin="onfocusin"in n;var we=/^(?:focusinfocus|focusoutblur)$/,be=function(t){t.stopPropagation()};L.extend(L.event,{trigger:function(t,e,i,o){var s,r,a,l,c,h,u,d,f=[i||y],m=p.call(t,"type")?t.type:t,g=p.call(t,"namespace")?t.namespace.split("."):[];if(r=d=a=i=i||y,3!==i.nodeType&&8!==i.nodeType&&!we.test(m+L.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(t=t[L.expando]?t:new L.Event(m,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:L.makeArray(e,[t]),u=L.event.special[m]||{},o||!u.trigger||!1!==u.trigger.apply(i,e))){if(!o&&!u.noBubble&&!v(i)){for(l=u.delegateType||m,we.test(l+m)||(r=r.parentNode);r;r=r.parentNode)f.push(r),a=r;a===(i.ownerDocument||y)&&f.push(a.defaultView||a.parentWindow||n)}for(s=0;(r=f[s++])&&!t.isPropagationStopped();)d=r,t.type=s>1?l:u.bindType||m,(h=(Q.get(r,"events")||Object.create(null))[t.type]&&Q.get(r,"handle"))&&h.apply(r,e),(h=c&&r[c])&&h.apply&&K(r)&&(t.result=h.apply(r,e),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),e)||!K(i)||c&&_(i[m])&&!v(i)&&((a=i[c])&&(i[c]=null),L.event.triggered=m,t.isPropagationStopped()&&d.addEventListener(m,be),i[m](),t.isPropagationStopped()&&d.removeEventListener(m,be),L.event.triggered=void 0,a&&(i[c]=a)),t.result}},simulate:function(t,e,i){var n=L.extend(new L.Event,i,{type:t,isSimulated:!0});L.event.trigger(n,null,e)}}),L.fn.extend({trigger:function(t,e){return this.each((function(){L.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return L.event.trigger(t,e,i,!0)}}),g.focusin||L.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){L.event.simulate(e,t.target,L.event.fix(t))};L.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,o=Q.access(n,e);o||n.addEventListener(t,i,!0),Q.access(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,o=Q.access(n,e)-1;o?Q.access(n,e,o):(n.removeEventListener(t,i,!0),Q.remove(n,e))}}}));var xe=n.location,Le={guid:Date.now()},Ce=/\?/;L.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=e&&e.getElementsByTagName("parsererror")[0],e&&!i||L.error("Invalid XML: "+(i?L.map(i.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Pe=/\[\]$/,Se=/\r?\n/g,Me=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function Ae(t,e,i,n){var o;if(Array.isArray(e))L.each(e,(function(e,o){i||Pe.test(t)?n(t,o):Ae(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,i,n)}));else if(i||"object"!==b(e))n(t,e);else for(o in e)Ae(t+"["+o+"]",e[o],i,n)}L.param=function(t,e){var i,n=[],o=function(t,e){var i=_(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!L.isPlainObject(t))L.each(t,(function(){o(this.name,this.value)}));else for(i in t)Ae(i,t[i],e,o);return n.join("&")},L.fn.extend({serialize:function(){return L.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=L.prop(this,"elements");return t?L.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!L(this).is(":disabled")&&Te.test(this.nodeName)&&!Me.test(t)&&(this.checked||!gt.test(t))})).map((function(t,e){var i=L(this).val();return null==i?null:Array.isArray(i)?L.map(i,(function(t){return{name:e.name,value:t.replace(Se,"\r\n")}})):{name:e.name,value:i.replace(Se,"\r\n")}})).get()}});var Ie=/%20/g,ke=/#.*$/,Re=/([?&])_=[^&]*/,De=/^(.*?):[ \t]*([^\r\n]*)$/gm,Oe=/^(?:GET|HEAD)$/,Ge=/^\/\//,Ne={},Ue={},je="*/".concat("*"),Fe=y.createElement("a");function ze(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,s=e.toLowerCase().match(U)||[];if(_(i))for(;n=s[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Be(t,e,i,n){var o={},s=t===Ue;function r(a){var l;return o[a]=!0,L.each(t[a]||[],(function(t,a){var c=a(e,i,n);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)})),l}return r(e.dataTypes[0])||!o["*"]&&r("*")}function qe(t,e){var i,n,o=L.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&L.extend(!0,t,n),t}Fe.href=xe.href,L.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":L.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?qe(qe(t,L.ajaxSettings),e):qe(L.ajaxSettings,t)},ajaxPrefilter:ze(Ne),ajaxTransport:ze(Ue),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,s,r,a,l,c,h,u,d,p=L.ajaxSetup({},e),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?L(f):L.event,g=L.Deferred(),_=L.Callbacks("once memory"),v=p.statusCode||{},E={},w={},b="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(c){if(!r)for(r={};e=De.exec(s);)r[e[1].toLowerCase()+" "]=(r[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=r[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,E[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)x.always(t[x.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||b;return i&&i.abort(e),C(0,e),this}};if(g.promise(x),p.url=((t||p.url||xe.href)+"").replace(Ge,xe.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(U)||[""],null==p.crossDomain){l=y.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Fe.protocol+"//"+Fe.host!=l.protocol+"//"+l.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=L.param(p.data,p.traditional)),Be(Ne,p,e,x),c)return x;for(u in(h=L.event&&p.global)&&0==L.active++&&L.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Oe.test(p.type),o=p.url.replace(ke,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ie,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ce.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Re,"$1"),d=(Ce.test(o)?"&":"?")+"_="+Le.guid+++d),p.url=o+d),p.ifModified&&(L.lastModified[o]&&x.setRequestHeader("If-Modified-Since",L.lastModified[o]),L.etag[o]&&x.setRequestHeader("If-None-Match",L.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+je+"; q=0.01":""):p.accepts["*"]),p.headers)x.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(f,x,p)||c))return x.abort();if(b="abort",_.add(p.complete),x.done(p.success),x.fail(p.error),i=Be(Ue,p,e,x)){if(x.readyState=1,h&&m.trigger("ajaxSend",[x,p]),c)return x;p.async&&p.timeout>0&&(a=n.setTimeout((function(){x.abort("timeout")}),p.timeout));try{c=!1,i.send(E,C)}catch(t){if(c)throw t;C(-1,t)}}else C(-1,"No Transport");function C(t,e,r,l){var u,d,y,E,w,b=e;c||(c=!0,a&&n.clearTimeout(a),i=void 0,s=l||"",x.readyState=t>0?4:0,u=t>=200&&t<300||304===t,r&&(E=function(t,e,i){for(var n,o,s,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)s=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==l[0]&&l.unshift(s),i[s]}(p,x,r)),!u&&L.inArray("script",p.dataTypes)>-1&&L.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),E=function(t,e,i,n){var o,s,r,a,l,c={},h=t.dataTypes.slice();if(h[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(s=h.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=h.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(r=c[l+" "+s]||c["* "+s]))for(o in c)if((a=o.split(" "))[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[o]:!0!==c[o]&&(s=a[0],h.unshift(a[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(p,E,x,u),u?(p.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(L.lastModified[o]=w),(w=x.getResponseHeader("etag"))&&(L.etag[o]=w)),204===t||"HEAD"===p.type?b="nocontent":304===t?b="notmodified":(b=E.state,d=E.data,u=!(y=E.error))):(y=b,!t&&b||(b="error",t<0&&(t=0))),x.status=t,x.statusText=(e||b)+"",u?g.resolveWith(f,[d,b,x]):g.rejectWith(f,[x,b,y]),x.statusCode(v),v=void 0,h&&m.trigger(u?"ajaxSuccess":"ajaxError",[x,p,u?d:y]),_.fireWith(f,[x,b]),h&&(m.trigger("ajaxComplete",[x,p]),--L.active||L.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,i){return L.get(t,e,i,"json")},getScript:function(t,e){return L.get(t,void 0,e,"script")}}),L.each(["get","post"],(function(t,e){L[e]=function(t,i,n,o){return _(i)&&(o=o||n,n=i,i=void 0),L.ajax(L.extend({url:t,type:e,dataType:o,data:i,success:n},L.isPlainObject(t)&&t))}})),L.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),L._evalUrl=function(t,e,i){return L.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){L.globalEval(t,e,i)}})},L.fn.extend({wrapAll:function(t){var e;return this[0]&&(_(t)&&(t=t.call(this[0])),e=L(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return _(t)?this.each((function(e){L(this).wrapInner(t.call(this,e))})):this.each((function(){var e=L(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=_(t);return this.each((function(i){L(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){L(this).replaceWith(this.childNodes)})),this}}),L.expr.pseudos.hidden=function(t){return!L.expr.pseudos.visible(t)},L.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},L.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},We=L.ajaxSettings.xhr();g.cors=!!We&&"withCredentials"in We,g.ajax=We=!!We,L.ajaxTransport((function(t){var e,i;if(g.cors||We&&!t.crossDomain)return{send:function(o,s){var r,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)a[r]=t.xhrFields[r];for(r in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(r,o[r]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){e&&i()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),L.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),L.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return L.globalEval(t),t}}}),L.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),L.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,o){e=L("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&o("error"===t.type?404:200,t.type)}),y.head.appendChild(e[0])},abort:function(){i&&i()}}}));var Ve,Ze=[],Ye=/(=)\?(?=&|$)|\?\?/;L.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ze.pop()||L.expando+"_"+Le.guid++;return this[t]=!0,t}}),L.ajaxPrefilter("json jsonp",(function(t,e,i){var o,s,r,a=!1!==t.jsonp&&(Ye.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=_(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ye,"$1"+o):!1!==t.jsonp&&(t.url+=(Ce.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||L.error(o+" was not called"),r[0]},t.dataTypes[0]="json",s=n[o],n[o]=function(){r=arguments},i.always((function(){void 0===s?L(n).removeProp(o):n[o]=s,t[o]&&(t.jsonpCallback=e.jsonpCallback,Ze.push(o)),r&&_(s)&&s(r[0]),r=s=void 0})),"script"})),g.createHTMLDocument=((Ve=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ve.childNodes.length),L.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(g.createHTMLDocument?((n=(e=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,e.head.appendChild(n)):e=y),s=!i&&[],(o=I.exec(t))?[e.createElement(o[1])]:(o=xt([t],e,s),s&&s.length&&L(s).remove(),L.merge([],o.childNodes)));var n,o,s},L.fn.load=function(t,e,i){var n,o,s,r=this,a=t.indexOf(" ");return a>-1&&(n=_e(t.slice(a)),t=t.slice(0,a)),_(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),r.length>0&&L.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done((function(t){s=arguments,r.html(n?L("<div>").append(L.parseHTML(t)).find(n):t)})).always(i&&function(t,e){r.each((function(){i.apply(this,s||[t.responseText,e,t])}))}),this},L.expr.pseudos.animated=function(t){return L.grep(L.timers,(function(e){return t===e.elem})).length},L.offset={setOffset:function(t,e,i){var n,o,s,r,a,l,c=L.css(t,"position"),h=L(t),u={};"static"===c&&(t.style.position="relative"),a=h.offset(),s=L.css(t,"top"),l=L.css(t,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(r=(n=h.position()).top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),_(e)&&(e=e.call(t,i,L.extend({},a))),null!=e.top&&(u.top=e.top-a.top+r),null!=e.left&&(u.left=e.left-a.left+o),"using"in e?e.using.call(t,u):h.css(u)}},L.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){L.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],o={top:0,left:0};if("fixed"===L.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===L.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((o=L(t).offset()).top+=L.css(t,"borderTopWidth",!0),o.left+=L.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-L.css(n,"marginTop",!0),left:e.left-o.left-L.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===L.css(t,"position");)t=t.offsetParent;return t||rt}))}}),L.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;L.fn[t]=function(n){return W(this,(function(t,n,o){var s;if(v(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===o)return s?s[e]:t[n];s?s.scrollTo(i?s.pageXOffset:o,i?o:s.pageYOffset):t[n]=o}),t,n,arguments.length)}})),L.each(["top","left"],(function(t,e){L.cssHooks[e]=Wt(g.pixelPosition,(function(t,i){if(i)return i=Ht(t,e),Ft.test(i)?L(t).position()[e]+"px":i}))})),L.each({Height:"height",Width:"width"},(function(t,e){L.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){L.fn[n]=function(o,s){var r=arguments.length&&(i||"boolean"!=typeof o),a=i||(!0===o||!0===s?"margin":"border");return W(this,(function(e,i,o){var s;return v(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===o?L.css(e,i,a):L.style(e,i,o,a)}),e,r?o:void 0,r)}}))})),L.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){L.fn[e]=function(t){return this.on(e,t)}})),L.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),L.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){L.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var Xe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;L.proxy=function(t,e){var i,n,o;if("string"==typeof e&&(i=t[e],e=t,t=i),_(t))return n=a.call(arguments,2),(o=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||L.guid++,o},L.holdReady=function(t){t?L.readyWait++:L.ready(!0)},L.isArray=Array.isArray,L.parseJSON=JSON.parse,L.nodeName=A,L.isFunction=_,L.isWindow=v,L.camelCase=X,L.type=b,L.now=Date.now,L.isNumeric=function(t){var e=L.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},L.trim=function(t){return null==t?"":(t+"").replace(Xe,"")},void 0===(i=function(){return L}.apply(e,[]))||(t.exports=i);var Ke=n.jQuery,Je=n.$;return L.noConflict=function(t){return n.$===L&&(n.$=Je),t&&n.jQuery===L&&(n.jQuery=Ke),L},void 0===o&&(n.jQuery=n.$=L),L}))},353:(t,e,i)=>{!function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};e[r][0].call(c.exports,(function(t){var i=e[r][1][t];return o(i||t)}),c,c.exports,t,e,i,n)}return i[r].exports}for(var s=void 0,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){"use strict";function n(){}function o(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,t!==n&&l(this,t)}function s(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function r(t,e,i){h((function(){var n;try{n=e(i)}catch(e){return u.reject(t,e)}n===t?u.reject(t,new TypeError("Cannot resolve promise with itself")):u.resolve(t,n)}))}function a(t){var e=t&&t.then;return t&&"object"==typeof t&&"function"==typeof e?function(){e.apply(t,arguments)}:void 0}function l(t,e){function i(e){o||(o=!0,u.reject(t,e))}function n(e){o||(o=!0,u.resolve(t,e))}var o=!1,s=c((function(){e(n,i)}));"error"===s.status&&i(s.value)}function c(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}var h=t("immediate"),u={},d=["REJECTED"],p=["FULFILLED"],f=["PENDING"];e.exports=i=o,o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if("function"!=typeof t&&this.state===p||"function"!=typeof e&&this.state===d)return this;var i=new this.constructor(n);this.state!==f?r(i,this.state===p?t:e,this.outcome):this.queue.push(new s(i,t,e));return i},s.prototype.callFulfilled=function(t){u.resolve(this.promise,t)},s.prototype.otherCallFulfilled=function(t){r(this.promise,this.onFulfilled,t)},s.prototype.callRejected=function(t){u.reject(this.promise,t)},s.prototype.otherCallRejected=function(t){r(this.promise,this.onRejected,t)},u.resolve=function(t,e){var i=c(a,e);if("error"===i.status)return u.reject(t,i.value);var n=i.value;if(n)l(t,n);else{t.state=p,t.outcome=e;for(var o=-1,s=t.queue.length;++o<s;)t.queue[o].callFulfilled(e)}return t},u.reject=function(t,e){t.state=d,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},i.resolve=function(t){return t instanceof this?t:u.resolve(new this(n),t)},i.reject=function(t){var e=new this(n);return u.reject(e,t)},i.all=function(t){function e(t,e){i.resolve(t).then((function(t){r[e]=t,++a!==o||s||(s=!0,u.resolve(c,r))}),(function(t){s||(s=!0,u.reject(c,t))}))}var i=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,s=!1;if(!o)return this.resolve([]);for(var r=new Array(o),a=0,l=-1,c=new this(n);++l<o;)e(t[l],l);return c},i.race=function(t){function e(t){i.resolve(t).then((function(t){s||(s=!0,u.resolve(a,t))}),(function(t){s||(s=!0,u.reject(a,t))}))}var i=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,s=!1;if(!o)return this.resolve([]);for(var r=-1,a=new this(n);++r<o;)e(t[r]);return a}},{immediate:2}],2:[function(t,e,n){(function(t){"use strict";function i(){c=!0;for(var t,e,i=h.length;i;){for(e=h,h=[],t=-1;++t<i;)e[t]();i=h.length}c=!1}var n,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,r=new o(i),a=t.document.createTextNode("");r.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){i(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(i,0)};else{var l=new t.MessageChannel;l.port1.onmessage=i,n=function(){l.port2.postMessage(0)}}var c,h=[];e.exports=function(t){1!==h.push(t)||c||n()}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){(function(i){"use strict";var n=t("./jsonp"),o=t("lie");e.exports=function(t,e){if((e=e||{}).jsonp)return n(t,e);var s,r,a=new o((function(n,o){var a;r=o,void 0===i.XMLHttpRequest&&o("XMLHttpRequest is not supported"),(s=new i.XMLHttpRequest).open("GET",t),e.headers&&Object.keys(e.headers).forEach((function(t){s.setRequestHeader(t,e.headers[t])})),s.onreadystatechange=function(){4===s.readyState&&(s.status<400&&e.local||200===s.status?(i.JSON?a=JSON.parse(s.responseText):o(new Error("JSON is not supported")),n(a)):o(s.status?s.statusText:"Attempted cross origin request without CORS enabled"))},s.send()}));return a.catch((function(t){return s.abort(),t})),a.abort=r,a}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./jsonp":5,lie:1}],4:[function(t,e,n){(function(e){"use strict";var i=e.L||t("leaflet"),n=t("lie"),o=t("./ajax");i.GeoJSON.AJAX=i.GeoJSON.extend({defaultAJAXparams:{dataType:"json",callbackParam:"callback",local:!1,middleware:function(t){return t}},initialize:function(t,e){this.urls=[],t&&("string"==typeof t?this.urls.push(t):"function"==typeof t.pop?this.urls=this.urls.concat(t):(e=t,t=void 0));var o=i.Util.extend({},this.defaultAJAXparams);for(var s in e)this.defaultAJAXparams.hasOwnProperty(s)&&(o[s]=e[s]);this.ajaxParams=o,this._layers={},i.Util.setOptions(this,e),this.on("data:loaded",(function(){this.filter&&this.refilter(this.filter)}),this);var r=this;this.urls.length>0&&new n((function(t){t()})).then((function(){r.addUrl()}))},clearLayers:function(){return this.urls=[],i.GeoJSON.prototype.clearLayers.call(this),this},addUrl:function(t){var e=this;t&&("string"==typeof t?e.urls.push(t):"function"==typeof t.pop&&(e.urls=e.urls.concat(t)));var n=e.urls.length,s=0;e.fire("data:loading"),e.urls.forEach((function(t){"json"===e.ajaxParams.dataType.toLowerCase()?o(t,e.ajaxParams).then((function(t){var i=e.ajaxParams.middleware(t);e.addData(i),e.fire("data:progress",i)}),(function(t){e.fire("data:progress",{error:t})})):"jsonp"===e.ajaxParams.dataType.toLowerCase()&&i.Util.jsonp(t,e.ajaxParams).then((function(t){var i=e.ajaxParams.middleware(t);e.addData(i),e.fire("data:progress",i)}),(function(t){e.fire("data:progress",{error:t})}))})),e.on("data:progress",(function(){++s===n&&e.fire("data:loaded")}))},refresh:function(t){t=t||this.urls,this.clearLayers(),this.addUrl(t)},refilter:function(t){"function"!=typeof t?(this.filter=!1,this.eachLayer((function(t){t.setStyle({stroke:!0,clickable:!0})}))):(this.filter=t,this.eachLayer((function(e){t(e.feature)?e.setStyle({stroke:!0,clickable:!0}):e.setStyle({stroke:!1,clickable:!1})})))}}),i.Util.Promise=n,i.Util.ajax=o,i.Util.jsonp=t("./jsonp"),i.geoJson.ajax=function(t,e){return new i.GeoJSON.AJAX(t,e)}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax":3,"./jsonp":5,leaflet:void 0,lie:1}],5:[function(t,e,n){(function(i){"use strict";var n=i.L||t("leaflet"),o=t("lie");e.exports=function(t,e){e=e||{};var s,r,a,l,c=document.getElementsByTagName("head")[0],h=n.DomUtil.create("script","",c),u=new o((function(n,o){l=o;var u=e.cbParam||"callback";e.callbackName?s=e.callbackName:(a="_"+(""+Math.random()).slice(2),s="_leafletJSONPcallbacks."+a),h.type="text/javascript",a&&(i._leafletJSONPcallbacks||(i._leafletJSONPcallbacks={length:0}),i._leafletJSONPcallbacks.length++,i._leafletJSONPcallbacks[a]=function(t){c.removeChild(h),delete i._leafletJSONPcallbacks[a],i._leafletJSONPcallbacks.length--,i._leafletJSONPcallbacks.length||delete i._leafletJSONPcallbacks,n(t)}),r=-1===t.indexOf("?")?t+"?"+u+"="+s:t+"&"+u+"="+s,h.src=r})).then(null,(function(t){return c.removeChild(h),delete n.Util.ajax.cb[a],t}));return u.abort=l,u}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{leaflet:void 0,lie:1}]},{},[4])},787:()=>{var t,e;t=window,e=document,L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var i=L.version.split(".");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,i=e.getLatLngs(),n=i.splice(-1,1)[0];this._poly.setLatLngs(i),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(n,!1)}},addVertex:function(t){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);!this.options.allowIntersection&&e||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),i=this._map.layerPointToLatLng(e);this._currentLatLng=i,this._updateTooltip(i),this._updateGuide(e),this._mouseMarker.setLatLng(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,i=e.clientX,n=e.clientY;this._startPoint.call(this,i,n)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,i=e.clientX,n=e.clientY;this._endPoint.call(this,i,n,t),this._clickHandled=null},_endPoint:function(e,i,n){if(this._mouseDownOrigin){var o=L.point(e,i).distanceTo(this._mouseDownOrigin),s=this._calculateFinishDistance(n.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(n.latlng),this._finishShape()):s<10&&L.Browser.touch?this._finishShape():Math.abs(o)<9*(t.devicePixelRatio||1)&&this.addVertex(n.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,i,n=t.originalEvent;!n.touches||!n.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=n.touches[0].clientX,i=n.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,i),this._endPoint.call(this,e,i,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var i;if(this.type===L.Draw.Polyline.TYPE)i=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;i=this._markers[0]}var n=this._map.latLngToContainerPoint(i.getLatLng()),o=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),s=this._map.latLngToContainerPoint(o.getLatLng());e=n.distanceTo(s)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var i,n,o,s=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),r=this.options.guidelineDistance,a=this.options.maxGuideLineLength,l=s>a?s-a:r;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));l<s;l+=this.options.guidelineDistance)i=l/s,n={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},(o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,n)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,i=this._guidesContainer.childNodes.length;e<i;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,i=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=i?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var i,n,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(i=o-(e?2:1),n=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[i].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[i].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=n*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,i=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?i&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(i)*(this.options.factor||1):this._measurementRunningTotal||0:i&&e?this._measurementRunningTotal+this._map.distance(e,i)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(t=L.drawLocal.draw.handlers.polygon.tooltip.cont,e=this._getMeasurementString()):(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e="";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+="<br>"+L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var i;!this.options.allowIntersection&&this.options.showArea&&(i=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(i)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}(t.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,i,n=L.Draw.SimpleShape.prototype._getTooltipText.call(this),o=this._shape,s=this.options.showArea;return o&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),i=s?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:n.text,subtext:i}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){if(L.GeometryUtil.isVersion07x())var e=this._startLatLng.distanceTo(t);else e=this._map.distance(this._startLatLng,t);this._shape?this._shape.setRadius(e):(this._shape=new L.Circle(this._startLatLng,e,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,i=t.latlng,n=this.options.showRadius,o=this.options.metric;if(this._tooltip.updatePosition(i),this._isDrawing){this._drawShape(i),e=this._shape.getRadius().toFixed(1);var s="";n&&(s=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,o,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:s})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var i=parseInt(t.style.marginTop,10)-e,n=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=i+"px",t.style.marginLeft=n+"px"}}),L.Marker.addInitHook((function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())})),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler((function(t){t.addHooks()}))},removeHooks:function(){this._eachVertexHandler((function(t){t.removeHooks()}))},updateMarkers:function(){this._eachVertexHandler((function(t){t.updateMarkers()}))},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,i){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,i&&i.drawError&&(i.drawError=L.Util.extend({},this.options.drawError,i.drawError)),this._latlngs=e,L.setOptions(this,i)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(" ").forEach((function(t){L.DomUtil.removeClass(e,t)})),t.options.editing.className.split(" ").forEach((function(t){L.DomUtil.addClass(e,t)}))),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing&&t.options.editing.className&&(t.options.editing.className.split(" ").forEach((function(t){L.DomUtil.removeClass(e,t)})),t.options.original.className&&t.options.original.className.split(" ").forEach((function(t){L.DomUtil.addClass(e,t)}))),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,n,o,s,r=this._defaultShape();for(t=0,i=r.length;t<i;t++)(n=this._createMarker(r[t],t)).on("click",this._onMarkerClick,this),n.on("contextmenu",this._onContextMenu,this),this._markers.push(n);for(t=0,e=i-1;t<i;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(o=this._markers[e],s=this._markers[t],this._createMiddleMarker(o,s),this._updatePrevNext(o,s))},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(i),i},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,i=this._poly,n=L.LatLngUtil.cloneLatLng(e._origLatLng);if(L.extend(e._origLatLng,e._latlng),i.options.poly){var o=i._map._editTooltip;if(!i.options.poly.allowIntersection&&i.intersects()){L.extend(e._origLatLng,n),e.setLatLng(n);var s=i.options.color;i.setStyle({color:this.options.drawError.color}),o&&o.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout((function(){i.setStyle({color:s}),o&&o.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})}),1e3)}}e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var r=this._poly.getLatLngs();this._poly._convertLatLngs(r,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,i=t.target;this._defaultShape().length<e||(this._removeMarker(i),this._updatePrevNext(i._prev,i._next),i._middleLeft&&this._markerGroup.removeLayer(i._middleLeft),i._middleRight&&this._markerGroup.removeLayer(i._middleRight),i._prev&&i._next?this._createMiddleMarker(i._prev,i._next):i._prev?i._next||(i._prev._middleRight=null):i._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e),n=t.target;L.extend(n._origLatLng,i),n._middleLeft&&n._middleLeft.setLatLng(this._getMiddleLatLng(n._prev,n)),n._middleRight&&n._middleRight.setLatLng(this._getMiddleLatLng(n,n._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer((function(i){i._index>t&&(i._index+=e)}))},_createMiddleMarker:function(t,e){var i,n,o,s=this._getMiddleLatLng(t,e),r=this._createMarker(s);r.setOpacity(.6),t._middleRight=e._middleLeft=r,n=function(){r.off("touchmove",n,this);var o=e._index;r._index=o,r.off("click",i,this).on("click",this._onMarkerClick,this),s.lat=r.getLatLng().lat,s.lng=r.getLatLng().lng,this._spliceLatLngs(o,0,s),this._markers.splice(o,0,r),r.setOpacity(1),this._updateIndexes(o,1),e._index++,this._updatePrevNext(t,r),this._updatePrevNext(r,e),this._poly.fire("editstart")},o=function(){r.off("dragstart",n,this),r.off("dragend",o,this),r.off("touchmove",n,this),this._createMiddleMarker(t,r),this._createMiddleMarker(r,e)},i=function(){n.call(this),o.call(this),this._fireEdit()},r.on("click",i,this).on("dragstart",n,this).on("dragend",o,this).on("touchmove",n,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.project(t.getLatLng()),o=i.project(e.getLatLng());return i.unproject(n._add(o)._divideBy(2))}}),L.Polyline.addInitHook((function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",(function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()})),this.on("remove",(function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})))})),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,i=e.getLatLng();e===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),i=t.target,n=i._cornerIndex;i.setOpacity(0),this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,i=t.length;e<i;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),i=t.target._cornerIndex;this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)},_onMarkerDragEnd:function(t){var e,i=t.target;i===this._moveMarker&&(e=this._shape.getBounds().getCenter(),i.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),n=this._shape.getBounds().getCenter(),o=[],s=0,r=i.length;s<r;s++)e=[i[s].lat-n.lat,i[s].lng-n.lng],o.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(o),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook((function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())})),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook((function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",(function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()})),this.on("remove",(function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))})),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),i=this._map.project(t);return this._map.unproject([i.x+e,i.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e.distanceTo(t):radius=this._map.distance(e,t),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook((function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())})),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(t,e){var i={};if(void 0!==t.touches){if(!t.touches.length)return;i=t.touches[0]}else{if("touch"!==t.pointerType)return;if(i=t,!this._filterClick(t))return}var n=this._map.mouseEventToContainerPoint(i),o=this._map.mouseEventToLayerPoint(i),s=this._map.layerPointToLatLng(o);this._map.fire(e,{latlng:s,layerPoint:o,containerPoint:n,pageX:i.pageX,pageY:i.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,i=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){this._map._loaded&&this._touchEvent(t,"touchstart")},_onTouchEnd:function(t){this._map._loaded&&this._touchEvent(t,"touchend")},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){this._map._loaded&&this._touchEvent(t,"touchleave")},_onTouchMove:function(t){this._map._loaded&&this._touchEvent(t,"touchmove")},_detectIE:function(){var e=t.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var o=e.indexOf("Edge/");return o>0&&parseInt(e.substring(o+5,e.indexOf(".",o)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)L.DomEvent.on(t,e[i],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e=t.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var o=e.indexOf("Edge/");return o>0&&parseInt(e.substring(o+5,e.indexOf(".",o)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],i=0,n=t.length;i<n;i++)Array.isArray(t[i])?e.push(L.LatLngUtil.cloneLatLngs(t[i])):e.push(this.cloneLatLng(t[i]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},function(){var t={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,i,n=t.length,o=0,s=Math.PI/180;if(n>2){for(var r=0;r<n;r++)e=t[r],o+=((i=t[(r+1)%n]).lng-e.lng)*s*(2+Math.sin(e.lat*s)+Math.sin(i.lat*s));o=6378137*o*6378137/2}return Math.abs(o)},formattedNumber:function(t,e){var i=parseFloat(t).toFixed(e),n=L.drawLocal.format&&L.drawLocal.format.numeric,o=n&&n.delimiters,s=o&&o.thousands,r=o&&o.decimal;if(s||r){var a=i.split(".");i=s?a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+s):a[0],r=r||".",a.length>1&&(i=i+r+a[1])}return i},readableArea:function(e,i,n){var o,s;return n=L.Util.extend({},t,n),i?(s=["ha","m"],type=typeof i,"string"===type?s=[i]:"boolean"!==type&&(s=i),o=e>=1e6&&-1!==s.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*e,n.km)+" km²":e>=1e4&&-1!==s.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*e,n.ha)+" ha":L.GeometryUtil.formattedNumber(e,n.m)+" m²"):o=(e/=.836127)>=3097600?L.GeometryUtil.formattedNumber(e/3097600,n.mi)+" mi²":e>=4840?L.GeometryUtil.formattedNumber(e/4840,n.ac)+" acres":L.GeometryUtil.formattedNumber(e,n.yd)+" yd²",o},readableDistance:function(e,i,n,o,s){var r;switch(s=L.Util.extend({},t,s),i?"string"==typeof i?i:"metric":n?"feet":o?"nauticalMile":"yards"){case"metric":r=e>1e3?L.GeometryUtil.formattedNumber(e/1e3,s.km)+" km":L.GeometryUtil.formattedNumber(e,s.m)+" m";break;case"feet":e*=3.28083,r=L.GeometryUtil.formattedNumber(e,s.ft)+" ft";break;case"nauticalMile":e*=.53996,r=L.GeometryUtil.formattedNumber(e/1e3,s.nm)+" nm";break;case"yards":default:r=(e*=1.09361)>1760?L.GeometryUtil.formattedNumber(e/1760,s.mi)+" miles":L.GeometryUtil.formattedNumber(e,s.yd)+" yd"}return r},isVersion07x:function(){var t=L.version.split(".");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,i,n){return this._checkCounterclockwise(t,i,n)!==this._checkCounterclockwise(e,i,n)&&this._checkCounterclockwise(t,e,i)!==this._checkCounterclockwise(t,e,n)},_checkCounterclockwise:function(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,i,n=this._getProjectedPoints(),o=n?n.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;t>=3;t--)if(e=n[t-1],i=n[t],this._lineSegmentsIntersectsRange(e,i,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var i=this._getProjectedPoints(),n=i?i.length:0,o=i?i[n-1]:null,s=n-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(o,t,s,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),i=e?e.length:0;return!e||(i+=t||0)<=3},_lineSegmentsIntersectsRange:function(t,e,i,n){var o,s,r=this._getProjectedPoints();n=n||0;for(var a=i;a>n;a--)if(o=r[a-1],s=r[a],L.LineUtil.segmentsIntersect(t,e,o,s))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),i=0;i<e.length;i++)t.push(this._map.latLngToLayerPoint(e[i]));return t}}),L.Polygon.include({intersects:function(){var t,e,i,n,o=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=o.length,e=o[0],i=o[t-1],n=t-2,this._lineSegmentsIntersectsRange(i,e,n,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,i=L.DomUtil.create("div","leaflet-draw"),n=!1;for(var o in this._toolbars)this._toolbars.hasOwnProperty(o)&&(e=this._toolbars[o].addToolbar(t))&&(n||(L.DomUtil.hasClass(e,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(e.childNodes[0],"leaflet-draw-toolbar-top"),n=!0),i.appendChild(e));return i},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var i in this._toolbars)this._toolbars[i]!==e&&this._toolbars[i].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook((function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))})),L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(".");1===parseInt(e[0],10)&&parseInt(e[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,i=L.DomUtil.create("div","leaflet-draw-section"),n=0,o=this._toolbarClass||"",s=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<s.length;e++)s[e].enabled&&this._initModeHandler(s[e].handler,this._toolbarContainer,n++,o,s[e].title);if(n)return this._lastButtonIndex=--n,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),i.appendChild(this._toolbarContainer),i.appendChild(this._actionsContainer),i},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,i=this._actionButtons.length;e<i;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,i,n,o){var s=t.type;this._modes[s]={},this._modes[s].handler=t,this._modes[s].button=this._createButton({type:s,title:o,className:n+"-"+s,container:e,callback:this._modes[s].handler.enable,context:this._modes[s].handler}),this._modes[s].buttonIndex=i,this._modes[s].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),i=L.DomUtil.create("span","sr-only",t.container);e.href="#",e.appendChild(i),t.title&&(e.title=t.title,i.innerHTML=t.title),t.text&&(e.innerHTML=t.text,i.innerHTML=t.text);var n=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,n,t.callback,t.context),e},_disposeButton:function(t,e){var i=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,i,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,i,n,o,s=this._actionsContainer,r=this.getActions(t),a=r.length;for(i=0,n=this._actionButtons.length;i<n;i++)this._disposeButton(this._actionButtons[i].button,this._actionButtons[i].callback);for(this._actionButtons=[];s.firstChild;)s.removeChild(s.firstChild);for(var l=0;l<a;l++)"enabled"in r[l]&&!r[l].enabled||(e=L.DomUtil.create("li","",s),o=this._createButton({title:r[l].title,text:r[l].text,container:e,callback:r[l].callback,context:r[l].context}),this._actionButtons.push({button:o,callback:r[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,i=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=i+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),i=this._container;return this._container&&(this._visible&&(i.style.visibility="inherit"),L.DomUtil.setPosition(i,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var i=L.version.split(".");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer((function(t){this._revertLayer(t)}),this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer((function(e){e.edited&&(t.addLayer(e),e.edited=!1)})),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,i,n=t.layer||t.target||t;this._backupLayer(n),this.options.poly&&(i=L.Util.extend({},this.options.poly),n.options.poly=i),this.options.selectedPathOptions&&((e=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(e.color=n.options.color,e.fillColor=n.options.fillColor),n.options.original=L.extend({},n.options),n.options.editing=e),n instanceof L.Marker?(n.editing&&n.editing.enable(),n.dragging.enable(),n.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):n.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],i=this._map.mouseEventToLayerPoint(e),n=this._map.layerPointToLatLng(i);t.target.setLatLng(n)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var i=L.version.split(".");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer((function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})}),this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer((function(t){this._removeLayer({layer:t})}),this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})},332:()=>{!function(){function t(t,e){this.title=t.title,this.stateName=t.stateName?t.stateName:"unnamed-state",this.icon=L.DomUtil.create("span",""),L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.replace(/(^\s*|\s*$)/g,"")),this.icon.innerHTML=function(t){var e;t.match(/[&;=<>"']/)?e=t:(t=t.replace(/(^\s*|\s*$)/g,""),e=L.DomUtil.create("span",""),0===t.indexOf("fa-")?L.DomUtil.addClass(e,"fa "+t):0===t.indexOf("glyphicon-")?L.DomUtil.addClass(e,"glyphicon "+t):L.DomUtil.addClass(e,t),e=e.outerHTML);return e}(t.icon),this.onClick=L.Util.bind(t.onClick?t.onClick:function(){},e)}L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:!0},initialize:function(t,e){e&&L.Util.setOptions(this,e),this._buildContainer(),this._buttons=[];for(var i=0;i<t.length;i++)t[i]._bar=this,t[i]._container=t[i].button,this._buttons.push(t[i]),this.container.appendChild(t[i].button)},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div",""),this.options.leafletClasses&&L.DomUtil.addClass(this.container,"leaflet-bar easy-button-container leaflet-control"),this.options.id&&(this.container.id=this.options.id)},enable:function(){return L.DomUtil.addClass(this.container,"enabled"),L.DomUtil.removeClass(this.container,"disabled"),this.container.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.container,"disabled"),L.DomUtil.removeClass(this.container,"enabled"),this.container.setAttribute("aria-hidden","true"),this},onAdd:function(){return this.container},addTo:function(t){this._map=t;for(var e=0;e<this._buttons.length;e++)this._buttons[e]._map=t;var i=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];return L.DomUtil.addClass(i,"leaflet-control"),-1!==n.indexOf("bottom")?o.insertBefore(i,o.firstChild):o.appendChild(i),this}}),L.easyBar=function(){for(var t=[L.Control.EasyBar],e=0;e<arguments.length;e++)t.push(arguments[e]);return new(Function.prototype.bind.apply(L.Control.EasyBar,t))},L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:!0,tagName:"button"},initialize:function(e,i,n,o){this.options.states=[],null!=o&&(this.options.id=o),this.storage={},"object"==typeof arguments[arguments.length-1]&&L.Util.setOptions(this,arguments[arguments.length-1]),0===this.options.states.length&&"string"==typeof e&&"function"==typeof i&&this.options.states.push({icon:e,onClick:i,title:"string"==typeof n?n:""}),this._states=[];for(var s=0;s<this.options.states.length;s++)this._states.push(new t(this.options.states[s],this));this._buildButton(),this._activateState(this._states[0])},_buildButton:function(){if(this.button=L.DomUtil.create(this.options.tagName,""),"button"===this.options.tagName&&this.button.setAttribute("type","button"),this.options.id&&(this.button.id=this.options.id),this.options.leafletClasses&&L.DomUtil.addClass(this.button,"easy-button-button leaflet-bar-part leaflet-interactive"),L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mousedown",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mouseup",L.DomEvent.stop),L.DomEvent.addListener(this.button,"click",(function(t){L.DomEvent.stop(t),this._currentState.onClick(this,this._map?this._map:null),this._map&&this._map.getContainer().focus()}),this),"replace"==this.options.type)this.button.appendChild(this._currentState.icon);else for(var t=0;t<this._states.length;t++)this.button.appendChild(this._states[t].icon)},_currentState:{stateName:"unnamed",icon:document.createElement("span")},_states:null,state:function(t){return 0===arguments.length?this._currentState.stateName:("string"==typeof t?this._activateStateNamed(t):"number"==typeof t&&this._activateState(this._states[t]),this)},_activateStateNamed:function(t){for(var e=0;e<this._states.length;e++)this._states[e].stateName==t&&this._activateState(this._states[e])},_activateState:function(t){if(t!==this._currentState){"replace"==this.options.type&&(this.button.appendChild(t.icon),this.button.removeChild(this._currentState.icon)),t.title?this.button.title=t.title:this.button.removeAttribute("title");for(var e=0;e<this._states.length;e++)L.DomUtil.removeClass(this._states[e].icon,this._currentState.stateName+"-active"),L.DomUtil.addClass(this._states[e].icon,t.stateName+"-active");L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active"),L.DomUtil.addClass(this.button,t.stateName+"-active"),this._currentState=t}},enable:function(){return L.DomUtil.addClass(this.button,"enabled"),L.DomUtil.removeClass(this.button,"disabled"),this.button.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.button,"disabled"),L.DomUtil.removeClass(this.button,"enabled"),this.button.setAttribute("aria-hidden","true"),this},onAdd:function(t){var e=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});return this._anonymousBar=e,this._container=e.container,this._anonymousBar.container},removeFrom:function(t){return this._map===t&&this.remove(),this}}),L.easyButton=function(){var t=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new(Function.prototype.bind.apply(L.Control.EasyButton,t))}}()},243:function(t,e){!function(t){"use strict";var e="1.7.1";function i(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(e in o=arguments[i])t[e]=o[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function o(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var s=0;function r(t){return t._leaflet_id=t._leaflet_id||++s,t._leaflet_id}function a(t,e,i){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}}function l(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o}function c(){return!1}function h(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return u(t).split(/\s+/)}function p(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n}))}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function b(t){var e=+new Date,i=Math.max(0,16-(e-w));return w=e+i,window.setTimeout(t,i)}var x=window.requestAnimationFrame||E("RequestAnimationFrame")||b,C=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function P(t,e,i){if(!i||x!==b)return x.call(window,o(t,e));t.call(e)}function S(t){t&&C.call(window,t)}var M={extend:i,create:n,bind:o,lastId:s,stamp:r,throttle:a,wrapNum:l,falseFn:c,formatNum:h,trim:u,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:_,indexOf:v,emptyImageUrl:y,requestFn:x,cancelFn:C,requestAnimFrame:P,cancelAnimFrame:S};function T(){}function A(t){if("undefined"!=typeof L&&L&&L.Mixin){t=_(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}T.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,s=n(o);for(var r in s.constructor=e,e.prototype=s,this)Object.prototype.hasOwnProperty.call(this,r)&&"prototype"!==r&&"__super__"!==r&&(e[r]=this[r]);return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(A(t.includes),i.apply(null,[s].concat(t.includes)),delete t.includes),s.options&&(t.options=i(n(s.options),t.options)),i(s,t),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},e},T.include=function(t){return i(this.prototype,t),this},T.mergeOptions=function(t){return i(this.prototype.options,t),this},T.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var I={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,s=(t=d(t)).length;o<s;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,s=(t=d(t)).length;o<s;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var o={fn:e,ctx:i},s=n,r=0,a=s.length;r<a;r++)if(s[r].fn===e&&s[r].ctx===i)return;s.push(o)},_off:function(t,e,i){var n,o,s;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(o=0,s=n.length;o<s;o++){var r=n[o];if(r.ctx===i&&r.fn===e)return r.fn=c,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,s=n.length;o<s;o++)n[o].fn=c;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var l=s[r];l.fn.call(l.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var s=o((function(){this.off(t,e,i).off(t,s,i)}),this);return this.on(t,e,i).on(t,s,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[r(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[r(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var k=T.extend(I);function R(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var D=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function O(t,e,i){return t instanceof R?t:_(t)?new R(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new R(t.x,t.y):new R(t,e,i)}function G(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function N(t,e){return!t||t instanceof G?t:new G(t,e)}function U(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function j(t,e){return t instanceof U?t:new U(t,e)}function F(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function z(t,e,i){return t instanceof F?t:_(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,i)}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new R(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new R(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(t){var e=(t=O(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=O(t)).x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}},G.prototype={extend:function(t){return t=O(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new R(this.min.x,this.max.y)},getTopRight:function(){return new R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof R?O(t):N(t))instanceof G?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=N(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>=e.x&&n.x<=i.x,r=o.y>=e.y&&n.y<=i.y;return s&&r},overlaps:function(t){t=N(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>e.x&&n.x<i.x,r=o.y>e.y&&n.y<i.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},U.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof F)e=t,i=t;else{if(!(t instanceof U))return t?this.extend(z(t)||j(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new U(new F(e.lat-n,e.lng-o),new F(i.lat+n,i.lng+o))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof F||"lat"in t?z(t):j(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof U?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=j(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&n.lat<=i.lat,r=o.lng>=e.lng&&n.lng<=i.lng;return s&&r},overlaps:function(t){t=j(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>e.lat&&n.lat<i.lat,r=o.lng>e.lng&&n.lng<i.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=z(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+h(this.lat,t)+", "+h(this.lng,t)+")"},distanceTo:function(t){return H.distance(this,z(t))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var B,q={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new G(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var s=t.getSouthWest(),r=t.getNorthEast();return new U(new F(s.lat-n,s.lng-o),new F(r.lat-n,r.lng-o))}},H=i({},q,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin((e.lat-t.lat)*i/2),r=Math.sin((e.lng-t.lng)*i/2),a=s*s+Math.cos(n)*Math.cos(o)*r*r,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),W=6378137,V={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new R(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(B=W*Math.PI,new G([-B,-B],[B,B]))};function Z(t,e,i,n){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function Y(t,e,i,n){return new Z(t,e,i,n)}Z.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new R((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X=i({},H,{code:"EPSG:3857",projection:V,transformation:function(){var t=.5/(Math.PI*V.R);return Y(t,.5,-t,.5)}()}),K=i({},X,{code:"EPSG:900913"});function J(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var i,n,o,s,r,a,l="";for(i=0,o=t.length;i<o;i++){for(n=0,s=(r=t[i]).length;n<s;n++)l+=(n?"L":"M")+(a=r[n]).x+" "+a.y;l+=e?At?"z":"x":""}return l||"M0 0"}var $=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,it="msLaunchUri"in navigator&&!("documentMode"in document),nt=kt("webkit"),ot=kt("android"),st=kt("android 2")||kt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=ot&&kt("Google")&&rt<537&&!("AudioNode"in window),lt=!!window.opera,ct=!it&&kt("chrome"),ht=kt("gecko")&&!nt&&!lt&&!tt,ut=!ct&&kt("safari"),dt=kt("phantom"),pt="OTransition"in $,ft=0===navigator.platform.indexOf("Win"),mt=tt&&"transition"in $,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!st,_t="MozPerspective"in $,vt=!window.L_DISABLE_3D&&(mt||gt||_t)&&!pt&&!dt,yt="undefined"!=typeof orientation||kt("mobile"),Et=yt&&nt,wt=yt&&gt,bt=!window.PointerEvent&&window.MSPointerEvent,xt=!(!window.PointerEvent&&!bt),Lt=!window.L_NO_TOUCH&&(xt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Ct=yt&&lt,Pt=yt&&ht,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t}(),Tt=!!document.createElement("canvas").getContext,At=!(!document.createElementNS||!J("svg").createSVGRect),It=!At&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function kt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Rt={ie:tt,ielt9:et,edge:it,webkit:nt,android:ot,android23:st,androidStock:at,opera:lt,chrome:ct,gecko:ht,safari:ut,phantom:dt,opera12:pt,win:ft,ie3d:mt,webkit3d:gt,gecko3d:_t,any3d:vt,mobile:yt,mobileWebkit:Et,mobileWebkit3d:wt,msPointer:bt,pointer:xt,touch:Lt,mobileOpera:Ct,mobileGecko:Pt,retina:St,passiveEvents:Mt,canvas:Tt,svg:At,vml:It},Dt=bt?"MSPointerDown":"pointerdown",Ot=bt?"MSPointerMove":"pointermove",Gt=bt?"MSPointerUp":"pointerup",Nt=bt?"MSPointerCancel":"pointercancel",Ut={},jt=!1;function Ft(t,e,i,n){return"touchstart"===e?Bt(t,i,n):"touchmove"===e?Zt(t,i,n):"touchend"===e&&Yt(t,i,n),this}function zt(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(Dt,n,!1):"touchmove"===e?t.removeEventListener(Ot,n,!1):"touchend"===e&&(t.removeEventListener(Gt,n,!1),t.removeEventListener(Nt,n,!1)),this}function Bt(t,e,i){var n=o((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&He(t),Vt(t,e)}));t["_leaflet_touchstart"+i]=n,t.addEventListener(Dt,n,!1),jt||(document.addEventListener(Dt,qt,!0),document.addEventListener(Ot,Ht,!0),document.addEventListener(Gt,Wt,!0),document.addEventListener(Nt,Wt,!0),jt=!0)}function qt(t){Ut[t.pointerId]=t}function Ht(t){Ut[t.pointerId]&&(Ut[t.pointerId]=t)}function Wt(t){delete Ut[t.pointerId]}function Vt(t,e){for(var i in t.touches=[],Ut)t.touches.push(Ut[i]);t.changedTouches=[t],e(t)}function Zt(t,e,i){var n=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Vt(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(Ot,n,!1)}function Yt(t,e,i){var n=function(t){Vt(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(Gt,n,!1),t.addEventListener(Nt,n,!1)}var Xt=bt?"MSPointerDown":xt?"pointerdown":"touchstart",Kt=bt?"MSPointerUp":xt?"pointerup":"touchend",Jt="_leaflet_";function Qt(t,e,i){var n,o,s=!1,r=250;function a(t){if(xt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),i=e-(n||e);o=t.touches?t.touches[0]:t,s=i>0&&i<=r,n=e}function l(t){if(s&&!o.cancelBubble){if(xt){if("mouse"===t.pointerType)return;var i,r,a={};for(r in o)i=o[r],a[r]=i&&i.bind?i.bind(o):i;o=a}o.type="dblclick",o.button=0,e(o),n=null}}return t[Jt+Xt+i]=a,t[Jt+Kt+i]=l,t[Jt+"dblclick"+i]=e,t.addEventListener(Xt,a,!!Mt&&{passive:!1}),t.addEventListener(Kt,l,!!Mt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function $t(t,e){var i=t[Jt+Xt+e],n=t[Jt+Kt+e],o=t[Jt+"dblclick"+e];return t.removeEventListener(Xt,i,!!Mt&&{passive:!1}),t.removeEventListener(Kt,n,!!Mt&&{passive:!1}),t.removeEventListener("dblclick",o,!1),this}var te,ee,ie,ne,oe,se=be(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),re=be(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ae="webkitTransition"===re||"OTransition"===re?re+"End":"transitionend";function le(t){return"string"==typeof t?document.getElementById(t):t}function ce(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function he(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function ue(t){var e=t.parentNode;e&&e.removeChild(t)}function de(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function pe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function fe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function me(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=ye(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function ge(t,e){if(void 0!==t.classList)for(var i=d(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!me(t,e)){var s=ye(t);ve(t,(s?s+" ":"")+e)}}function _e(t,e){void 0!==t.classList?t.classList.remove(e):ve(t,u((" "+ye(t)+" ").replace(" "+e+" "," ")))}function ve(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ye(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function Ee(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&we(t,e)}function we(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}function be(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function xe(t,e,i){var n=e||new R(0,0);t.style[se]=(mt?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function Le(t,e){t._leaflet_pos=e,vt?xe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ce(t){return t._leaflet_pos||new R(0,0)}if("onselectstart"in document)te=function(){De(window,"selectstart",He)},ee=function(){Ge(window,"selectstart",He)};else{var Pe=be(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);te=function(){if(Pe){var t=document.documentElement.style;ie=t[Pe],t[Pe]="none"}},ee=function(){Pe&&(document.documentElement.style[Pe]=ie,ie=void 0)}}function Se(){De(window,"dragstart",He)}function Me(){Ge(window,"dragstart",He)}function Te(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ae(),ne=t,oe=t.style.outline,t.style.outline="none",De(window,"keydown",Ae))}function Ae(){ne&&(ne.style.outline=oe,ne=void 0,oe=void 0,Ge(window,"keydown",Ae))}function Ie(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function ke(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Re={TRANSFORM:se,TRANSITION:re,TRANSITION_END:ae,get:le,getStyle:ce,create:he,remove:ue,empty:de,toFront:pe,toBack:fe,hasClass:me,addClass:ge,removeClass:_e,setClass:ve,getClass:ye,setOpacity:Ee,testProp:be,setTransform:xe,setPosition:Le,getPosition:Ce,disableTextSelection:te,enableTextSelection:ee,disableImageDrag:Se,enableImageDrag:Me,preventOutline:Te,restoreOutline:Ae,getSizedParentNode:Ie,getScale:ke};function De(t,e,i,n){if("object"==typeof e)for(var o in e)je(t,o,e[o],i);else for(var s=0,r=(e=d(e)).length;s<r;s++)je(t,e[s],i,n);return this}var Oe="_leaflet_events";function Ge(t,e,i,n){if("object"==typeof e)for(var o in e)Fe(t,o,e[o],i);else if(e)for(var s=0,r=(e=d(e)).length;s<r;s++)Fe(t,e[s],i,n);else{for(var a in t[Oe])Fe(t,a,t[Oe][a]);delete t[Oe]}return this}function Ne(){if(xt)return!(it||ut)}var Ue={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function je(t,e,i,n){var o=e+r(i)+(n?"_"+r(n):"");if(t[Oe]&&t[Oe][o])return this;var s=function(e){return i.call(n||t,e||window.event)},a=s;xt&&0===e.indexOf("touch")?Ft(t,e,s,o):Lt&&"dblclick"===e&&!Ne()?Qt(t,s,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ue[e]||e,s,!!Mt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,Qe(t,e)&&a(e)},t.addEventListener(Ue[e],s,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[Oe]=t[Oe]||{},t[Oe][o]=s}function Fe(t,e,i,n){var o=e+r(i)+(n?"_"+r(n):""),s=t[Oe]&&t[Oe][o];if(!s)return this;xt&&0===e.indexOf("touch")?zt(t,e,o):Lt&&"dblclick"===e&&!Ne()?$t(t,o):"removeEventListener"in t?t.removeEventListener(Ue[e]||e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[Oe][o]=null}function ze(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Je(t),this}function Be(t){return je(t,"wheel",ze),this}function qe(t){return De(t,"mousedown touchstart dblclick",ze),je(t,"click",Ke),this}function He(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function We(t){return He(t),ze(t),this}function Ve(t,e){if(!e)return new R(t.clientX,t.clientY);var i=ke(e),n=i.boundingClientRect;return new R((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Ze=ft&&ct?2*window.devicePixelRatio:ht?window.devicePixelRatio:1;function Ye(t){return it?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ze:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Xe={};function Ke(t){Xe[t.type]=!0}function Je(t){var e=Xe[t.type];return Xe[t.type]=!1,e}function Qe(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var $e={on:De,off:Ge,stopPropagation:ze,disableScrollPropagation:Be,disableClickPropagation:qe,preventDefault:He,stop:We,getMousePosition:Ve,getWheelDelta:Ye,fakeStop:Ke,skipped:Je,isExternalTarget:Qe,addListener:De,removeListener:Ge},ti=k.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Ce(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=P(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Le(this._el,i),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ei=k.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=re&&vt&&!Ct&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),De(this._proxy,ae,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(z(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),s=(t instanceof R?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(s));return this.setView(r,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var i=O(e.paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var s=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(r.add(a).divideBy(2).add(s),o),zoom:o}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=O(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ti,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ge(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!vt)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),o=this.project(t),s=this.getSize(),r=this._zoom;t=z(t),e=void 0===e?r:e;var a=Math.max(s.x,s.y),l=a*this.getZoomScale(r,e),c=o.distanceTo(n)||1,h=1.42,u=h*h;function d(t){var e=(l*l-a*a+(t?-1:1)*u*u*c*c)/(2*(t?l:a)*u*c),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return p(t)/f(t)}var g=d(0);function _(t){return a*(f(g)/f(g+h*t))}function v(t){return a*(f(g)*m(g+h*t)-p(g))/u}function y(t){return 1-Math.pow(1-t,1.5)}var E=Date.now(),w=(d(1)-g)/h,b=i.duration?1e3*i.duration:1e3*w*.8;function x(){var i=(Date.now()-E)/b,s=y(i)*w;i<=1?(this._flyToFrame=P(x,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(v(s)/c)),r),this.getScaleZoom(a/_(s),r),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),x.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,j(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=O((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),s=this.project(o),r=this.project(t),a=this.getPixelBounds(),l=a.getSize().divideBy(2),c=N([a.min.add(i),a.max.subtract(n)]);if(!c.contains(r)){this._enforcingBounds=!0;var h=s.subtract(r),u=O(r.x+h.x,r.y+h.y);(r.x<c.min.x||r.x>c.max.x)&&(u.x=s.x-h.x,h.x>0?u.x+=l.x-i.x:u.x-=l.x-n.x),(r.y<c.min.y||r.y>c.max.y)&&(u.y=s.y-h.y,h.y>0?u.y+=l.y-i.y:u.y-=l.y-n.y),this.panTo(this.unproject(u),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),s=e.divideBy(2).round(),r=n.divideBy(2).round(),a=s.subtract(r);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o(this._handleGeolocationResponse,this),n=o(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new F(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(o,n.maxZoom):o)}var s={latlng:e,bounds:i,timestamp:t.timestamp};for(var r in t.coords)"number"==typeof t.coords[r]&&(s[r]=t.coords[r]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ue(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ue(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=he("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new U(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=j(t),i=O(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(i),c=N(this.project(a,n),this.project(r,n)).getSize(),h=vt?this.options.zoomSnap:1,u=l.x/c.x,d=l.y/c.y,p=e?Math.max(u,d):Math.min(u,d);return n=this.getScaleZoom(p,n),h&&(n=Math.round(n/(h/100))*(h/100),n=e?Math.ceil(n/h)*h:Math.floor(n/h)*h),Math.max(o,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new G(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(z(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){var e=O(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(z(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(z(t),z(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(O(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(t)))},mouseEventToContainerPoint:function(t){return Ve(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=le(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");De(e,"scroll",this._onScroll,this),this._containerId=r(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,ge(t,"leaflet-container"+(Lt?" leaflet-touch":"")+(St?" leaflet-retina":"")+(et?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ce(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Le(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(t.markerPane,"leaflet-zoom-hide"),ge(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Le(this._mapPane,new R(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Le(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[r(this._container)]=this;var e=t?Ge:De;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=P((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((i=this._targets[r(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(o&&!Qe(s,t))break;if(n.push(i),o)break}if(s===this._container)break;s=s.parentNode}return n.length||a||o||!Qe(s,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!Je(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Te(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=i({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var s=n[0];"contextmenu"===e&&s.listens(e,!0)&&He(t);var r={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=s.getLatLng&&(!s._radius||s._radius<=10);r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(e,r,!0),r.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ce(this._mapPane)||new R(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return N([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),s=new G(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,i,e);return r.round().equals([0,0])?t:this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new G(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=N(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),s=n.max.subtract(t.max);return new R(this._rebound(o.x,-s.x),this._rebound(o.y,-s.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=vt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=he("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=se,i=this._proxy.style[e];xe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ue(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();xe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o)||(P((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),P((function(){this._moveEnd(!0)}),this))}});function ii(t,e){return new ei(t,e)}var ni=T.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return ge(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ue(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),oi=function(t){return new ni(t)};ei.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=he("div",e+"control-container",this._container);function n(n,o){var s=e+n+" "+e+o;t[n+o]=he("div",s,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ue(this._controlCorners[t]);ue(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var si=ni.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ni.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(r(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):_e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=he("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),qe(e),Be(e);var n=this._section=he("section",t+"-list");i&&(this._map.on("click",this.collapse,this),ot||De(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=he("a",t+"-toggle",e);o.href="#",o.title="Layers",Lt?(De(o,"click",We),De(o,"click",this.expand,this)):De(o,"focus",this.expand,this),i||this.expand(),this._baseLayersList=he("div",t+"-base",n),this._separator=he("div",t+"-separator",n),this._overlaysList=he("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&r(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(o((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;de(this._baseLayersList),de(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(r(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+r(this),n),this._layerControlInputs.push(e),e.layerId=r(t.layer),De(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var s=document.createElement("div");return i.appendChild(s),s.appendChild(e),s.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var s=i.length-1;s>=0;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),ri=function(t,e,i){return new si(t,e,i)},ai=ni.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=he("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var s=he("a",i,n);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),qe(s),De(s,"click",We),De(s,"click",o,this),De(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";_e(this._zoomInButton,e),_e(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ge(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ge(this._zoomInButton,e)}});ei.mergeOptions({zoomControl:!0}),ei.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new ai,this.addControl(this.zoomControl))}));var li=function(t){return new ai(t)},ci=ni.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=he("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=he("div",e,i)),t.imperial&&(this._iScale=he("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),hi=function(t){return new ci(t)},ui=ni.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=he("div","leaflet-control-attribution"),qe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});ei.mergeOptions({attributionControl:!0}),ei.addInitHook((function(){this.options.attributionControl&&(new ui).addTo(this)}));var di=function(t){return new ui(t)};ni.Layers=si,ni.Zoom=ai,ni.Scale=ci,ni.Attribution=ui,oi.layers=ri,oi.zoom=li,oi.scale=hi,oi.attribution=di;var pi=T.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});pi.addTo=function(t,e){return t.addHandler(e,this),this};var fi,mi={Events:I},gi=Lt?"touchstart mousedown":"mousedown",_i={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},vi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},yi=k.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){p(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(De(this._dragStartTarget,gi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yi._dragging===this&&this.finishDrag(),Ge(this._dragStartTarget,gi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!me(this._element,"leaflet-zoom-anim")&&!(yi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(yi._dragging=this,this._preventOutline&&Te(this._element),Se(),te(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,i=Ie(this._element);this._startPoint=new R(e.clientX,e.clientY),this._parentScale=ke(i),De(document,vi[t.type],this._onMove,this),De(document,_i[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new R(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,He(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Ce(this._element).subtract(i),ge(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,S(this._animRequest),this._lastEvent=t,this._animRequest=P(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Le(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in _e(document.body,"leaflet-dragging"),this._lastTarget&&(_e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vi)Ge(document,vi[t],this._onMove,this),Ge(document,_i[t],this._onUp,this);Me(),ee(),this._moved&&this._moving&&(S(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,yi._dragging=!1}});function Ei(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=xi(t=Ci(t,i),i)}function wi(t,e,i){return Math.sqrt(Ai(t,e,i,!0))}function bi(t,e,i){return Ai(t,e,i)}function xi(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,Li(t,n,e,0,i-1);var o,s=[];for(o=0;o<i;o++)n[o]&&s.push(t[o]);return s}function Li(t,e,i,n,o){var s,r,a,l=0;for(r=n+1;r<=o-1;r++)(a=Ai(t[r],t[n],t[o],!0))>l&&(s=r,l=a);l>i&&(e[s]=1,Li(t,e,i,n,s),Li(t,e,i,s,o))}function Ci(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)Ti(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i}function Pi(t,e,i,n,o){var s,r,a,l=n?fi:Mi(t,i),c=Mi(e,i);for(fi=c;;){if(!(l|c))return[t,e];if(l&c)return!1;a=Mi(r=Si(t,e,s=l||c,i,o),i),s===l?(t=r,l=a):(e=r,c=a)}}function Si(t,e,i,n,o){var s,r,a=e.x-t.x,l=e.y-t.y,c=n.min,h=n.max;return 8&i?(s=t.x+a*(h.y-t.y)/l,r=h.y):4&i?(s=t.x+a*(c.y-t.y)/l,r=c.y):2&i?(s=h.x,r=t.y+l*(h.x-t.x)/a):1&i&&(s=c.x,r=t.y+l*(c.x-t.x)/a),new R(s,r,o)}function Mi(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Ti(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Ai(t,e,i,n){var o,s=e.x,r=e.y,a=i.x-s,l=i.y-r,c=a*a+l*l;return c>0&&((o=((t.x-s)*a+(t.y-r)*l)/c)>1?(s=i.x,r=i.y):o>0&&(s+=a*o,r+=l*o)),a=t.x-s,l=t.y-r,n?a*a+l*l:new R(s,r)}function Ii(t){return!_(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function ki(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ii(t)}var Ri={simplify:Ei,pointToSegmentDistance:wi,closestPointOnSegment:bi,clipSegment:Pi,_getEdgeIntersection:Si,_getBitCode:Mi,_sqClosestPointOnSegment:Ai,isFlat:Ii,_flat:ki};function Di(t,e,i){var n,o,s,r,a,l,c,h,u,d=[1,4,2,8];for(o=0,c=t.length;o<c;o++)t[o]._code=Mi(t[o],e);for(r=0;r<4;r++){for(h=d[r],n=[],o=0,s=(c=t.length)-1;o<c;s=o++)a=t[o],l=t[s],a._code&h?l._code&h||((u=Si(l,a,h,e,i))._code=Mi(u,e),n.push(u)):(l._code&h&&((u=Si(l,a,h,e,i))._code=Mi(u,e),n.push(u)),n.push(a));t=n}return t}var Oi={clipPolygon:Di},Gi={project:function(t){return new R(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new G([-180,-90],[180,90])},Ni={R:6378137,R_MINOR:6356752.314245179,bounds:new G([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,s=Math.sqrt(1-o*o),r=s*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),s/2);return n=-i*Math.log(Math.max(a,1e-10)),new R(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=s*Math.sin(a),e=Math.pow((1-e)/(1+e),s/2),a+=c=Math.PI/2-2*Math.atan(r*e)-a;return new F(a*i,t.x*i/n)}},Ui={LonLat:Gi,Mercator:Ni,SphericalMercator:V},ji=i({},H,{code:"EPSG:3395",projection:Ni,transformation:function(){var t=.5/(Math.PI*Ni.R);return Y(t,.5,-t,.5)}()}),Fi=i({},H,{code:"EPSG:4326",projection:Gi,transformation:Y(1/180,1,-1/180,.5)}),zi=i({},q,{projection:Gi,transformation:Y(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});q.Earth=H,q.EPSG3395=ji,q.EPSG3857=X,q.EPSG900913=K,q.EPSG4326=Fi,q.Simple=zi;var Bi=k.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[r(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[r(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});ei.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=r(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=r(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&r(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?_(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[r(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=r(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qi=Bi.extend({initialize:function(t,e){var i,n;if(p(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return r(t)}}),Hi=function(t,e){return new qi(t,e)},Wi=qi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),qi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),qi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new U;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Vi=function(t,e){return new Wi(t,e)},Zi=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=O(n),s=O("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return St&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Yi(t){return new Zi(t)}var Xi=Zi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Xi.imagePath||(Xi.imagePath=this._detectIconPath()),(this.options.imagePath||Xi.imagePath)+Zi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=he("div","leaflet-default-icon-path",document.body),e=ce(t,"background-image")||ce(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Ki=pi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new yi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=Ce(e._icon),r=i.getPixelBounds(),a=i.getPixelOrigin(),l=N(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));if(!l.contains(s)){var c=O((Math.max(l.max.x,s.x)-l.max.x)/(r.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(r.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(r.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(r.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Le(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=P(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=P(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=Ce(e._icon),o=e._map.layerPointToLatLng(n);i&&Le(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ji=Bi.extend({options:{icon:new Xi,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),ge(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&(ge(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ue(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ue(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Le(this._icon,t),this._shadow&&Le(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ki)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ki(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ee(this._icon,t),this._shadow&&Ee(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qi(t,e){return new Ji(t,e)}var $i=Bi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),tn=$i.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=z(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=z(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return $i.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new G(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function en(t,e){return new tn(t,e)}var nn=tn.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{radius:e})),p(this,e),this._latlng=z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new U(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:$i.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===H.distance){var o=Math.PI/180,s=this._mRadius/H.R/o,r=i.project([e+s,t]),a=i.project([e-s,t]),l=r.add(a).divideBy(2),c=i.unproject(l).lat,h=Math.acos((Math.cos(s*o)-Math.sin(e*o)*Math.sin(c*o))/(Math.cos(e*o)*Math.cos(c*o)))/o;(isNaN(h)||0===h)&&(h=s/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-i.project([c,t-h]).x,this._radiusY=l.y-r.y}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}});function on(t,e,i){return new nn(t,e,i)}var sn=$i.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,s=Ai,r=0,a=this._parts.length;r<a;r++)for(var l=this._parts[r],c=1,h=l.length;c<h;c++){var u=s(t,e=l[c-1],i=l[c],!0);u<n&&(n=u,o=s(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<l-1;t++)if(o=a[t],s=a[t+1],(n+=i=o.distanceTo(s))>e)return r=(n-e)/i,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new U,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ii(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Ii(t),n=0,o=t.length;n<o;n++)i?(e[n]=z(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new R(t,t);this._pxBounds=new G([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n,o,s=t[0]instanceof F,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,o,s,r,a,l=this._parts;for(e=0,n=0,o=this._rings.length;e<o;e++)for(i=0,s=(a=this._rings[e]).length;i<s-1;i++)(r=Pi(a[i],a[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(r[0]),r[1]===a[i+1]&&i!==s-2||(l[n].push(r[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=Ei(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,s,r,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(n=0,o=(r=(a=this._parts[i]).length)-1;n<r;o=n++)if((e||0!==n)&&wi(t,a[o],a[n])<=l)return!0;return!1}});function rn(t,e){return new sn(t,e)}sn._flat=ki;var an=sn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a,l,c=this._rings[0],h=c.length;if(!h)return null;for(s=r=a=0,t=0,e=h-1;t<h;e=t++)i=c[t],n=c[e],o=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*o,a+=(i.y+n.y)*o,s+=3*o;return l=0===s?c[0]:[r/s,a/s],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=sn.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof F&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){sn.prototype._setLatLngs.call(this,t),Ii(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ii(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new R(e,e);if(t=new G(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,s=this._rings.length;o<s;o++)(n=Di(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,s,r,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(l=(e=this._parts[o]).length)-1;s<l;r=s++)i=e[s],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||sn.prototype._containsPoint.call(this,t,!0)}});function ln(t,e){return new an(t,e)}var cn=Wi.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=_(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=hn(t,s);return r?(r.feature=_n(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function hn(t,e){var i,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,l=[],c=e&&e.pointToLayer,h=e&&e.coordsToLatLng||dn;if(!a&&!r)return null;switch(r.type){case"Point":return un(c,t,i=h(a),e);case"MultiPoint":for(o=0,s=a.length;o<s;o++)i=h(a[o]),l.push(un(c,t,i,e));return new Wi(l);case"LineString":case"MultiLineString":return n=pn(a,"LineString"===r.type?0:1,h),new sn(n,e);case"Polygon":case"MultiPolygon":return n=pn(a,"Polygon"===r.type?1:2,h),new an(n,e);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var u=hn({geometry:r.geometries[o],type:"Feature",properties:t.properties},e);u&&l.push(u)}return new Wi(l);default:throw new Error("Invalid GeoJSON object.")}}function un(t,e,i,n){return t?t(e,i):new Ji(i,n&&n.markersInheritOptions&&n)}function dn(t){return new F(t[1],t[0],t[2])}function pn(t,e,i){for(var n,o=[],s=0,r=t.length;s<r;s++)n=e?pn(t[s],e-1,i):(i||dn)(t[s]),o.push(n);return o}function fn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[h(t.lng,e),h(t.lat,e),h(t.alt,e)]:[h(t.lng,e),h(t.lat,e)]}function mn(t,e,i,n){for(var o=[],s=0,r=t.length;s<r;s++)o.push(e?mn(t[s],e-1,i,n):fn(t[s],n));return!e&&i&&o.push(o[0]),o}function gn(t,e){return t.feature?i({},t.feature,{geometry:e}):_n(e)}function _n(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var vn={toGeoJSON:function(t){return gn(this,{type:"Point",coordinates:fn(this.getLatLng(),t)})}};function yn(t,e){return new cn(t,e)}Ji.include(vn),nn.include(vn),tn.include(vn),sn.include({toGeoJSON:function(t){var e=!Ii(this._latlngs);return gn(this,{type:(e?"Multi":"")+"LineString",coordinates:mn(this._latlngs,e?1:0,!1,t)})}}),an.include({toGeoJSON:function(t){var e=!Ii(this._latlngs),i=e&&!Ii(this._latlngs[0]),n=mn(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),gn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),qi.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),gn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(i)n.push(o.geometry);else{var s=_n(o);"FeatureCollection"===s.type?n.push.apply(n,s.features):n.push(s)}}})),i?gn(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var En=yn,wn=Bi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=j(e),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ue(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&pe(this._image),this},bringToBack:function(){return this._map&&fe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:he("img");ge(e,"leaflet-image-layer"),this._zoomAnimated&&ge(e,"leaflet-zoom-animated"),this.options.className&&ge(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=o(this.fire,this,"load"),e.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;xe(this._image,i,e)},_reset:function(){var t=this._image,e=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Le(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){Ee(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),bn=function(t,e,i){return new wn(t,e,i)},xn=wn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:he("video");if(ge(e,"leaflet-image-layer"),this._zoomAnimated&&ge(e,"leaflet-zoom-animated"),this.options.className&&ge(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=o(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],s=0;s<i.length;s++)n.push(i[s].src);this._url=i.length>0?n:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var r=0;r<this._url.length;r++){var a=he("source");a.src=this._url[r],e.appendChild(a)}}}});function Ln(t,e,i){return new xn(t,e,i)}var Cn=wn.extend({_initImage:function(){var t=this._image=this._url;ge(t,"leaflet-image-layer"),this._zoomAnimated&&ge(t,"leaflet-zoom-animated"),this.options.className&&ge(t,this.options.className),t.onselectstart=c,t.onmousemove=c}});function Pn(t,e,i){return new Cn(t,e,i)}var Sn=Bi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ee(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ee(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(Ee(this._container,0),this._removeTimeout=setTimeout(o(ue,void 0,this._container),200)):ue(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pe(this._container),this},bringToBack:function(){return this._map&&fe(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof Bi||(i=e,e=t),e instanceof Wi)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=O(this.options.offset),i=this._getAnchor();this._zoomAnimated?Le(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),Mn=Sn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Sn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof $i||this._source.on("preclick",ze))},onRemove:function(t){Sn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof $i||this._source.off("preclick",ze))},getEvents:function(){var t=Sn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=he("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=he("div",t+"-content-wrapper",e);if(this._contentNode=he("div",t+"-content",i),qe(e),Be(this._contentNode),De(e,"contextmenu",ze),this._tipContainer=he("div",t+"-tip-container",e),this._tip=he("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=he("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",De(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&n>o?(e.height=o+"px",ge(t,s)):_e(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Le(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ce(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new R(this._containerLeft,-i-this._containerBottom);o._add(Ce(this._container));var s=t.layerPointToContainerPoint(o),r=O(this.options.autoPanPadding),a=O(this.options.autoPanPaddingTopLeft||r),l=O(this.options.autoPanPaddingBottomRight||r),c=t.getSize(),h=0,u=0;s.x+n+l.x>c.x&&(h=s.x+n-c.x+l.x),s.x-h-a.x<0&&(h=s.x-a.x),s.y+i+l.y>c.y&&(u=s.y+i-c.y+l.y),s.y-u-a.y<0&&(u=s.y-a.y),(h||u)&&t.fire("autopanstart").panBy([h,u])}},_onCloseButtonClick:function(t){this._close(),We(t)},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Tn=function(t,e){return new Mn(t,e)};ei.mergeOptions({closePopupOnClick:!0}),ei.include({openPopup:function(t,e,i){return t instanceof Mn||(t=new Mn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Bi.include({bindPopup:function(t,e){return t instanceof Mn?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Mn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(We(t),e instanceof $i?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var An=Sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Sn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Sn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Sn.prototype.getEvents.call(this);return Lt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=he("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,o=this._container,s=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(t),a=this.options.direction,l=o.offsetWidth,c=o.offsetHeight,h=O(this.options.offset),u=this._getAnchor();"top"===a?(e=l/2,i=c):"bottom"===a?(e=l/2,i=0):"center"===a?(e=l/2,i=c/2):"right"===a?(e=0,i=c/2):"left"===a?(e=l,i=c/2):r.x<s.x?(a="right",e=0,i=c/2):(a="left",e=l+2*(h.x+u.x),i=c/2),t=t.subtract(O(e,i,!0)).add(h).add(u),_e(o,"leaflet-tooltip-right"),_e(o,"leaflet-tooltip-left"),_e(o,"leaflet-tooltip-top"),_e(o,"leaflet-tooltip-bottom"),ge(o,"leaflet-tooltip-"+a),Le(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ee(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),In=function(t,e){return new An(t,e)};ei.include({openTooltip:function(t,e,i){return t instanceof An||(t=new An(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Bi.include({bindTooltip:function(t,e){return t instanceof An?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new An(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Lt&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ge(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(_e(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var kn=Zi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(de(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=O(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Rn(t){return new kn(t)}Zi.Default=Xi;var Dn=Bi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ue(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof R?t:new R(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,s=i.length;o<s;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et){Ee(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);Ee(o.el,s),s<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(S(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=he("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ue(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=he("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),c(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ue(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),s=Math.floor(e/2),r=i-1,a=new R(+o,+s);a.z=+r;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),r>n&&this._retainParent(o,s,r,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*e;s<2*e+2;s++){var r=new R(o,s);r.z=i+1;var a=this._tileCoordsToKey(r),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,s,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=Math.round(e);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();vt?xe(t.el,o,n):Le(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*n);return new G(o.subtract(s),o.add(s))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),r=[],a=this.options.keepBuffer,l=new G(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var h=this._tiles[c].coords;h.z===this._tileZoom&&l.contains(new R(h.x,h.y))||(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var u=o.min.y;u<=o.max.y;u++)for(var d=o.min.x;d<=o.max.x;d++){var p=new R(d,u);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:r.push(p)}}if(r.sort((function(t,e){return t.distanceTo(s)-e.distanceTo(s)})),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<r.length;d++)this._addTile(r[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new U(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new R(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ue(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ge(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,et&&this.options.opacity<1&&Ee(t,this.options.opacity),ot&&!st&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),o(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&P(o(this._tileReady,this,t,null,s)),Le(s,i),this._tiles[n]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(Ee(i.el,0),S(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(ge(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et||!this._map._fadeAnimated?P(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new R(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new G(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function On(t){return new Dn(t)}var Gn=Dn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&St&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),ot||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return De(i,"load",o(this._tileOnLoad,this,e,i)),De(i,"error",o(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:St?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return g(this._url,i(e,this.options))},_tileOnLoad:function(t,e){et?setTimeout(o(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=y,ue(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",y),Dn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==y))return Dn.prototype._tileReady.call(this,t,e,i)}});function Nn(t,e){return new Gn(t,e)}var Un=Gn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);var s=(e=p(this,e)).detectRetina&&St?2:1,r=this.getTileSize();n.width=r.x*s,n.height=r.y*s,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Gn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=N(i.project(e[0]),i.project(e[1])),o=n.min,s=n.max,r=(this._wmsVersion>=1.3&&this._crs===Fi?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(","),a=Gn.prototype.getTileUrl.call(this,t);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});function jn(t,e){return new Un(t,e)}Gn.WMS=Un,Nn.wms=jn;var Fn=Bi.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=Ce(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),r=this._map.project(t,e).subtract(s),a=o.multiplyBy(-i).add(n).add(o).subtract(r);vt?xe(this._container,a,i):Le(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new G(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zn=Fn.extend({getEvents:function(){var t=Fn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");De(t,"mousemove",this._onMouseMove,this),De(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),De(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,ue(this._container),Ge(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Fn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=St?2:1;Le(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",St&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Fn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[r(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[r(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),o=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||P(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,s,r=t._parts,a=r.length,l=this._ctx;if(a){for(l.beginPath(),i=0;i<a;i++){for(n=0,o=r[i].length;n<o;n++)s=r[i][n],l[n?"lineTo":"moveTo"](s.x,s.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(i=e);i&&(Ke(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(_e(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,s=this._drawFirst;s;s=s.next)(i=s.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(ge(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(o((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Bn(t){return Tt?new zn(t):null}var qn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Hn={_initContainer:function(){this._container=he("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=qn("shape");ge(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=qn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ue(e),t.removeInteractiveTarget(e),delete this._layers[r(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=qn("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=_(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=qn("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){pe(t._container)},_bringToBack:function(t){fe(t._container)}},Wn=It?qn:J,Vn=Fn.extend({getEvents:function(){var t=Fn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Wn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Wn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ue(this._container),Ge(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Fn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Le(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Wn("path");t.options.className&&ge(e,t.options.className),t.options.interactive&&ge(e,"leaflet-interactive"),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ue(t._path),t.removeInteractiveTarget(t._path),delete this._layers[r(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){pe(t._path)},_bringToBack:function(t){fe(t._path)}});function Zn(t){return At||It?new Vn(t):null}It&&Vn.include(Hn),ei.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Bn(t)||Zn(t)}});var Yn=an.extend({initialize:function(t,e){an.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Xn(t,e){return new Yn(t,e)}Vn.create=Wn,Vn.pointsToPath=Q,cn.geometryToLayer=hn,cn.coordsToLatLng=dn,cn.coordsToLatLngs=pn,cn.latLngToCoords=fn,cn.latLngsToCoords=mn,cn.getFeature=gn,cn.asFeature=_n,ei.mergeOptions({boxZoom:!0});var Kn=pi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ge(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ue(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),te(),Se(),this._startPoint=this._map.mouseEventToContainerPoint(t),De(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=he("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new G(this._point,this._startPoint),i=e.getSize();Le(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ue(this._box),_e(this._container,"leaflet-crosshair")),ee(),Me(),Ge(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var e=new U(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});ei.addInitHook("addHandler","boxZoom",Kn),ei.mergeOptions({doubleClickZoom:!0});var Jn=pi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});ei.addInitHook("addHandler","doubleClickZoom",Jn),ei.mergeOptions({dragging:!0,inertia:!st,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Qn=pi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new yi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_e(this._map._container,"leaflet-grab"),_e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=i.easeLinearity,a=o.multiplyBy(r/s),l=a.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),h=a.multiplyBy(c/l),u=c/(i.inertiaDeceleration*r),d=h.multiplyBy(-u/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),P((function(){e.panBy(d,{duration:u,easeLinearity:r,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});ei.addInitHook("addHandler","dragging",Qn),ei.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $n=pi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),De(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ge(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){De(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ge(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=O(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}We(t)}}});ei.addInitHook("addHandler","keyboard",$n),ei.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var to=pi.extend({addHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ge(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ye(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),n),We(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}});ei.addInitHook("addHandler","scrollWheelZoom",to),ei.mergeOptions({tap:!0,tapTolerance:15});var eo=pi.extend({addHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ge(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(He(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new R(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&ge(i,"leaflet-active"),this._holdTimeout=setTimeout(o((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),De(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ge(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&_e(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new R(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});!Lt||xt&&!ut||ei.addInitHook("addHandler","tap",eo),ei.mergeOptions({touchZoom:Lt&&!st,bounceAtZoomLimits:!0});var io=pi.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),Ge(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend",this._onTouchEnd,this),He(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),s=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var a=o(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=P(a,this,!0),He(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),Ge(document,"touchmove",this._onTouchMove,this),Ge(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});ei.addInitHook("addHandler","touchZoom",io),ei.BoxZoom=Kn,ei.DoubleClickZoom=Jn,ei.Drag=Qn,ei.Keyboard=$n,ei.ScrollWheelZoom=to,ei.Tap=eo,ei.TouchZoom=io,t.version=e,t.Control=ni,t.control=oi,t.Browser=Rt,t.Evented=k,t.Mixin=mi,t.Util=M,t.Class=T,t.Handler=pi,t.extend=i,t.bind=o,t.stamp=r,t.setOptions=p,t.DomEvent=$e,t.DomUtil=Re,t.PosAnimation=ti,t.Draggable=yi,t.LineUtil=Ri,t.PolyUtil=Oi,t.Point=R,t.point=O,t.Bounds=G,t.bounds=N,t.Transformation=Z,t.transformation=Y,t.Projection=Ui,t.LatLng=F,t.latLng=z,t.LatLngBounds=U,t.latLngBounds=j,t.CRS=q,t.GeoJSON=cn,t.geoJSON=yn,t.geoJson=En,t.Layer=Bi,t.LayerGroup=qi,t.layerGroup=Hi,t.FeatureGroup=Wi,t.featureGroup=Vi,t.ImageOverlay=wn,t.imageOverlay=bn,t.VideoOverlay=xn,t.videoOverlay=Ln,t.SVGOverlay=Cn,t.svgOverlay=Pn,t.DivOverlay=Sn,t.Popup=Mn,t.popup=Tn,t.Tooltip=An,t.tooltip=In,t.Icon=Zi,t.icon=Yi,t.DivIcon=kn,t.divIcon=Rn,t.Marker=Ji,t.marker=Qi,t.TileLayer=Gn,t.tileLayer=Nn,t.GridLayer=Dn,t.gridLayer=On,t.SVG=Vn,t.svg=Zn,t.Renderer=Fn,t.Canvas=zn,t.canvas=Bn,t.Path=$i,t.CircleMarker=tn,t.circleMarker=en,t.Circle=nn,t.circle=on,t.Polyline=sn,t.polyline=rn,t.Polygon=an,t.polygon=ln,t.Rectangle=Yn,t.rectangle=Xn,t.Map=ei,t.map=ii;var no=window.L;t.noConflict=function(){return window.L=no,this},window.L=t}(e)},43:function(t,e,i){var n,o;!function(s,r){"use strict";void 0===(o="function"==typeof(n=function(){var t=function(){},e="undefined",i=typeof window!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function o(t,e){var i=t[e];if("function"==typeof i.bind)return i.bind(t);try{return Function.prototype.bind.call(i,t)}catch(e){return function(){return Function.prototype.apply.apply(i,[t,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(n){return"debug"===n&&(n="log"),typeof console!==e&&("trace"===n&&i?s:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):t)}function a(e,i){for(var o=0;o<n.length;o++){var s=n[o];this[s]=o<e?t:this.methodFactory(s,e,i)}this.log=this.debug}function l(t,i,n){return function(){typeof console!==e&&(a.call(this,i,n),this[t].apply(this,arguments))}}function c(t,e,i){return r(t)||l.apply(this,arguments)}function h(t,i,o){var s,r=this,l="loglevel";function h(t){var i=(n[t]||"silent").toUpperCase();if(typeof window!==e){try{return void(window.localStorage[l]=i)}catch(t){}try{window.document.cookie=encodeURIComponent(l)+"="+i+";"}catch(t){}}}function u(){var t;if(typeof window!==e){try{t=window.localStorage[l]}catch(t){}if(typeof t===e)try{var i=window.document.cookie,n=i.indexOf(encodeURIComponent(l)+"=");-1!==n&&(t=/^([^;]+)/.exec(i.slice(n))[1])}catch(t){}return void 0===r.levels[t]&&(t=void 0),t}}t&&(l+=":"+t),r.name=t,r.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},r.methodFactory=o||c,r.getLevel=function(){return s},r.setLevel=function(i,n){if("string"==typeof i&&void 0!==r.levels[i.toUpperCase()]&&(i=r.levels[i.toUpperCase()]),!("number"==typeof i&&i>=0&&i<=r.levels.SILENT))throw"log.setLevel() called with invalid level: "+i;if(s=i,!1!==n&&h(i),a.call(r,i,t),typeof console===e&&i<r.levels.SILENT)return"No console available for logging"},r.setDefaultLevel=function(t){u()||r.setLevel(t,!1)},r.enableAll=function(t){r.setLevel(r.levels.TRACE,t)},r.disableAll=function(t){r.setLevel(r.levels.SILENT,t)};var d=u();null==d&&(d=null==i?"WARN":i),r.setLevel(d,!1)}var u=new h,d={};u.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=d[t];return e||(e=d[t]=new h(t,u.getLevel(),u.methodFactory)),e};var p=typeof window!==e?window.log:void 0;return u.noConflict=function(){return typeof window!==e&&window.log===u&&(window.log=p),u},u.getLoggers=function(){return d},u})?n.call(e,i,e,t):n)||(t.exports=o)}()},300:(t,e)=>{"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();t.exports=e=i.fetch,i.fetch&&(e.default=i.fetch.bind(i)),e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response},280:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>di});var n=6378137,o=.0066943799901413165,s=484813681109536e-20,r=Math.PI/2,a=1e-10,l=.017453292519943295,c=57.29577951308232,h=Math.PI/4,u=2*Math.PI,d=3.14159265359,p={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const f={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var m=/[\s_\-\/\(\)]/g;function g(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),o=e.toLowerCase().replace(m,""),s=-1;++s<n.length;)if((i=n[s]).toLowerCase().replace(m,"")===o)return t[i]}function _(t){var e,i,n,o={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),r={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*l},lat_1:function(t){o.lat1=t*l},lat_2:function(t){o.lat2=t*l},lat_ts:function(t){o.lat_ts=t*l},lon_0:function(t){o.long0=t*l},lon_1:function(t){o.long1=t*l},lon_2:function(t){o.long2=t*l},alpha:function(t){o.alpha=parseFloat(t)*l},lonc:function(t){o.longc=t*l},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(t){o.units=t;var e=g(f,t);e&&(o.to_meter=e.to_meter)},from_greenwich:function(t){o.from_greenwich=t*l},pm:function(t){var e=g(p,t);o.from_greenwich=(e||parseFloat(t))*l},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(o.axis=t)},approx:function(){o.approx=!0}};for(e in s)i=s[e],e in r?"function"==typeof(n=r[e])?n(i):o[n]=i:o[e]=i;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o}const v=function(t){return new L(t).output()};var y=/\s/,E=/[A-Za-z]/,w=/[A-Za-z84]/,b=/[,\]]/,x=/[\d\.E\-\+]/;function L(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function C(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,o=i.reduce((function(t,e){return P(e,t),t}),n);e&&(t[e]=o)}function P(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void P(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&P(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&P(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void C(e,i,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return P(t,e[i]);return C(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}L.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;y.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},L.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(b.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},L.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},L.prototype.number=function(t){if(!x.test(t)){if(b.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},L.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},L.prototype.keyword=function(t){if(w.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!b.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},L.prototype.neutral=function(t){if(E.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(x.test(t))return this.word=t,void(this.state=3);if(!b.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},L.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function S(t){return.017453292519943295*t}function M(t){var e=v(t),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var o={};return P(e,o),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,n=t.AXIS.length;i<n;++i){var o=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?e+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?e+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?e+="e":-1===o[0].indexOf("west")&&("x"!==o[0]&&"lon"!==o[0]||"west"!==o[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function r(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",S],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",S],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",S],["lat0","latitude_of_origin",S],["lat0","standard_parallel_1",S],["lat1","standard_parallel_1",S],["lat2","standard_parallel_2",S],["azimuth","Azimuth"],["alpha","azimuth",S],["srsCode","name"]].forEach((function(e){return function(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=S(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(o),o}function T(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?T[t]=_(arguments[1]):T[t]=M(arguments[1]):T[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?T.apply(e,t):T(t)}));if("string"==typeof t){if(t in T)return T[t]}else"EPSG"in t?T["EPSG:"+t.EPSG]=t:"ESRI"in t?T["ESRI:"+t.ESRI]=t:"IAU2000"in t?T["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(T);const A=T;var I=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var k=["3857","900913","3785","102113"];const R=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in A}(t))return A[t];if(function(t){return I.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=M(t);if(function(t){var e=g(t,"authority");if(e){var i=g(e,"epsg");return i&&k.indexOf(i)>-1}}(e))return A["EPSG:3857"];var i=function(t){var e=g(t,"extension");if(e)return g(e,"proj4")}(e);return i?_(i):e}return function(t){return"+"===t[0]}(t)?_(t):void 0};function D(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t}function O(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function G(t){return t<0?-1:1}function N(t){return Math.abs(t)<=d?t:t-G(t)*u}function U(t,e,i){var n=t*i,o=.5*t;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(r-e))/n}function j(t,e){for(var i,n,o=.5*t,s=r-2*Math.atan(e),a=0;a<=15;a++)if(i=t*Math.sin(s),s+=n=r-2*Math.atan(e*Math.pow((1-i)/(1+i),o))-s,Math.abs(n)<=1e-10)return s;return-9999}function F(t){return t}var z=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=O(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,o=t.y;if(o*c>90&&o*c<-90&&n*c>180&&n*c<-180)return null;if(Math.abs(Math.abs(o)-r)<=a)return null;if(this.sphere)e=this.x0+this.a*this.k0*N(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(h+.5*o));else{var s=Math.sin(o),l=U(this.e,o,s);e=this.x0+this.a*this.k0*N(n-this.long0),i=this.y0-this.a*this.k0*Math.log(l)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,o=t.y-this.y0;if(this.sphere)i=r-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var s=Math.exp(-o/(this.a*this.k0));if(-9999===(i=j(this.e,s)))return null}return e=N(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:F,inverse:F,names:["longlat","identity"]}],B={},q=[];function H(t,e){var i=q.length;return t.names?(q[i]=t,t.names.forEach((function(t){B[t.toLowerCase()]=i})),this):(console.log(e),!0)}const W={start:function(){z.forEach(H)},add:H,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==B[e]&&q[B[e]]?q[B[e]]:void 0}};var V={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Z=V.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};V.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Y={};Y.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Y.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Y.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Y.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Y.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Y.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Y.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Y.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},Y.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Y.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Y.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Y.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Y.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Y.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Y.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Y.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Y.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};const X=function(t,e,i,n,o,r,a){var l={};return l.datum_type=void 0===t||"none"===t?5:4,e&&(l.datum_params=e.map(parseFloat),0===l.datum_params[0]&&0===l.datum_params[1]&&0===l.datum_params[2]||(l.datum_type=1),l.datum_params.length>3&&(0===l.datum_params[3]&&0===l.datum_params[4]&&0===l.datum_params[5]&&0===l.datum_params[6]||(l.datum_type=2,l.datum_params[3]*=s,l.datum_params[4]*=s,l.datum_params[5]*=s,l.datum_params[6]=l.datum_params[6]/1e6+1))),a&&(l.datum_type=3,l.grids=a),l.a=i,l.b=n,l.es=o,l.ep2=r,l};var K={};function J(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:K[t]||null,isNull:!1}}function Q(t){return t/3600*Math.PI/180}function $(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function tt(t){return t.map((function(t){return[Q(t.longitudeShift),Q(t.latitudeShift)]}))}function et(t,e,i){return{name:$(t,e+8,e+16).trim(),parent:$(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function it(t,e,i,n){for(var o=e+176,s=[],r=0;r<i.gridNodeCount;r++){var a={latitudeShift:t.getFloat32(o+16*r,n),longitudeShift:t.getFloat32(o+16*r+4,n),latitudeAccuracy:t.getFloat32(o+16*r+8,n),longitudeAccuracy:t.getFloat32(o+16*r+12,n)};s.push(a)}return s}function nt(t,e){if(!(this instanceof nt))return new nt(t);e=e||function(t){if(t)throw t};var i=R(t);if("object"==typeof i){var n=nt.projections.get(i.projName);if(n){if(i.datumCode&&"none"!==i.datumCode){var o=g(Y,i.datumCode);o&&(i.datum_params=o.towgs84?o.towgs84.split(","):null,i.ellps=o.ellipse,i.datumName=o.datumName?o.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84";var s,r,l,c,h,u,d,p=function(t,e,i,n,o){if(!t){var s=g(V,n);s||(s=Z),t=s.a,e=s.b,i=s.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<a)&&(o=!0,e=t),{a:t,b:e,rf:i,sphere:o}}(i.a,i.b,i.rf,i.ellps,i.sphere),f=(s=p.a,r=p.b,p.rf,l=i.R_A,u=((c=s*s)-(h=r*r))/c,d=0,l?(c=(s*=1-u*(.16666666666666666+u*(.04722222222222222+.022156084656084655*u)))*s,u=0):d=Math.sqrt(u),{es:u,e:d,ep2:(c-h)/h}),m=function(t){return void 0===t?null:t.split(",").map(J)}(i.nadgrids),_=i.datum||X(i.datumCode,i.datum_params,p.a,p.b,f.es,f.ep2,m);D(this,i),D(this,n),this.a=p.a,this.b=p.b,this.rf=p.rf,this.sphere=p.sphere,this.es=f.es,this.e=f.e,this.ep2=f.ep2,this.datum=_,this.init(),e(null,this)}else e(t)}else e(t)}nt.projections=W,nt.projections.start();const ot=nt;function st(t,e,i){var n,o,s,a,l=t.x,c=t.y,h=t.z?t.z:0;if(c<-r&&c>-1.001*r)c=-r;else if(c>r&&c<1.001*r)c=r;else{if(c<-r)return{x:-1/0,y:-1/0,z:t.z};if(c>r)return{x:1/0,y:1/0,z:t.z}}return l>Math.PI&&(l-=2*Math.PI),o=Math.sin(c),a=Math.cos(c),s=o*o,{x:((n=i/Math.sqrt(1-e*s))+h)*a*Math.cos(l),y:(n+h)*a*Math.sin(l),z:(n*(1-e)+h)*o}}function rt(t,e,i,n){var o,s,a,l,c,h,u,d,p,f,m,g,_,v,y,E=1e-12,w=t.x,b=t.y,x=t.z?t.z:0;if(o=Math.sqrt(w*w+b*b),s=Math.sqrt(w*w+b*b+x*x),o/i<E){if(v=0,s/i<E)return r,y=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(b,w);a=x/s,d=(l=o/s)*(1-e)*(c=1/Math.sqrt(1-e*(2-e)*l*l)),p=a*c,_=0;do{_++,h=e*(u=i/Math.sqrt(1-e*p*p))/(u+(y=o*d+x*p-u*(1-e*p*p))),g=(m=a*(c=1/Math.sqrt(1-h*(2-h)*l*l)))*d-(f=l*(1-h)*c)*p,d=f,p=m}while(g*g>1e-24&&_<30);return{x:v,y:Math.atan(m/Math.abs(f)),z:y}}function at(t){return 1===t||2===t}function lt(t,e,i){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return i;if(5===t.datum_type||5===e.datum_type)return i;var s=t.a,r=t.es;if(3===t.datum_type){if(0!==ct(t,!1,i))return;s=n,r=o}var a=e.a,l=e.b,c=e.es;if(3===e.datum_type&&(a=n,l=6356752.314,c=o),r===c&&s===a&&!at(t.datum_type)&&!at(e.datum_type))return i;if((i=st(i,r,s),at(t.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(2===e){var n=i[0],o=i[1],s=i[2],r=i[3],a=i[4],l=i[5],c=i[6];return{x:c*(t.x-l*t.y+a*t.z)+n,y:c*(l*t.x+t.y-r*t.z)+o,z:c*(-a*t.x+r*t.y+t.z)+s}}}(i,t.datum_type,t.datum_params)),at(e.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(2===e){var n=i[0],o=i[1],s=i[2],r=i[3],a=i[4],l=i[5],c=i[6],h=(t.x-n)/c,u=(t.y-o)/c,d=(t.z-s)/c;return{x:h+l*u-a*d,y:-l*h+u+r*d,z:a*h-r*u+d}}}(i,e.datum_type,e.datum_params)),i=rt(i,c,a,l),3===e.datum_type)&&0!==ct(e,!0,i))return;return i}function ct(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},o={x:Number.NaN,y:Number.NaN},s=[],r=0;r<t.grids.length;r++){var a=t.grids[r];if(s.push(a.name),a.isNull){o=n;break}if(a.mandatory,null!==a.grid){var l=a.grid.subgrids[0],h=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,u=l.ll[0]-h,d=l.ll[1]-h,p=l.ll[0]+(l.lim[0]-1)*l.del[0]+h,f=l.ll[1]+(l.lim[1]-1)*l.del[1]+h;if(!(d>n.y||u>n.x||f<n.y||p<n.x||(o=ht(n,e,l),isNaN(o.x))))break}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*c+" "+n.y*c+" tried: '"+s+"'"),-1):(i.x=-o.x,i.y=o.y,0)}function ht(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var o={x:t.x,y:t.y};o.x-=i.ll[0],o.y-=i.ll[1],o.x=N(o.x-Math.PI)+Math.PI;var s=ut(o,i);if(e){if(isNaN(s.x))return n;s.x=o.x-s.x,s.y=o.y-s.y;var r,a,l=9;do{if(a=ut(s,i),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}r={x:o.x-(a.x+s.x),y:o.y-(a.y+s.y)},s.x+=r.x,s.y+=r.y}while(l--&&Math.abs(r.x)>1e-12&&Math.abs(r.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=N(s.x+i.ll[0]),n.y=s.y+i.ll[1]}else isNaN(s.x)||(n.x=t.x+s.x,n.y=t.y+s.y);return n}function ut(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},o=Math.floor(n.x),s=Math.floor(n.y),r=n.x-1*o,a=n.y-1*s,l={x:Number.NaN,y:Number.NaN};if(o<0||o>=e.lim[0])return l;if(s<0||s>=e.lim[1])return l;i=s*e.lim[0]+o;var c=e.cvs[i][0],h=e.cvs[i][1];i++;var u=e.cvs[i][0],d=e.cvs[i][1];i+=e.lim[0];var p=e.cvs[i][0],f=e.cvs[i][1];i--;var m=e.cvs[i][0],g=e.cvs[i][1],_=r*a,v=r*(1-a),y=(1-r)*(1-a),E=(1-r)*a;return l.x=y*c+v*u+E*m+_*p,l.y=y*h+v*d+E*g+_*f,l}function dt(t,e,i){var n,o,s,r=i.x,a=i.y,l=i.z||0,c={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==i.z)switch(0===s?(n=r,o=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(n=a,o=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(n=l,o="z"),t.axis[s]){case"e":c[o]=n;break;case"w":c[o]=-n;break;case"n":c[o]=n;break;case"s":c[o]=-n;break;case"u":void 0!==i[o]&&(c.z=n);break;case"d":void 0!==i[o]&&(c.z=-n);break;default:return null}return c}function pt(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function ft(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function mt(t,e,i){var n;if(Array.isArray(i)&&(i=pt(i)),function(t){ft(t.x),ft(t.y)}(i),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(i=mt(t,n=new ot("WGS84"),i),t=n),"enu"!==t.axis&&(i=dt(t,!1,i)),"longlat"===t.projName)i={x:i.x*l,y:i.y*l,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=lt(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*c,y:i.y*c,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),"enu"!==e.axis?dt(e,!0,i):i}var gt=ot("WGS84");function _t(t,e,i){var n,o,s;return Array.isArray(i)?(n=mt(t,e,i)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof n.z?[n.x,n.y,n.z].concat(i.splice(3)):[n.x,n.y,i[2]].concat(i.splice(3)):[n.x,n.y].concat(i.splice(2)):[n.x,n.y]):(o=mt(t,e,i),2===(s=Object.keys(i)).length||s.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;o[n]=i[n]})),o)}function vt(t){return t instanceof ot?t:t.oProj?t.oProj:ot(t)}const yt=function(t,e,i){t=vt(t);var n,o=!1;return void 0===e?(e=t,t=gt,o=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=gt,o=!0),e=vt(e),i?_t(t,e,i):(n={forward:function(i){return _t(t,e,i)},inverse:function(i){return _t(e,t,i)}},o&&(n.oProj=e),n)};var Et="AJSAJS",wt="AFAFAF",bt=65,xt=73,Lt=79,Ct=86,Pt=90;const St={forward:Mt,inverse:function(t){var e=kt(Ot(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Tt};function Mt(t,e){return e=e||5,function(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,f=t.northing,m=t.zoneNumber,g=Dt(m),_=Math.floor(p/1e5),v=Math.floor(f/1e5)%20,o=_,s=v,r=g,a=r-1,l=Et.charCodeAt(a),c=wt.charCodeAt(a),h=l+o-1,u=c+s,d=!1,h>Pt&&(h=h-Pt+bt-1,d=!0),(h===xt||l<xt&&h>xt||(h>xt||l<xt)&&d)&&h++,(h===Lt||l<Lt&&h>Lt||(h>Lt||l<Lt)&&d)&&++h===xt&&h++,h>Pt&&(h=h-Pt+bt-1),u>Ct?(u=u-Ct+bt-1,d=!0):d=!1,(u===xt||c<xt&&u>xt||(u>xt||c<xt)&&d)&&u++,(u===Lt||c<Lt&&u>Lt||(u>Lt||c<Lt)&&d)&&++u===xt&&u++,u>Ct&&(u=u-Ct+bt-1),String.fromCharCode(h)+String.fromCharCode(u))+i.substr(i.length-5,e)+n.substr(n.length-5,e);var o,s,r,a,l,c,h,u,d;var p,f,m,g,_,v}(function(t){var e,i,n,o,s,r,a,l,c=t.lat,h=t.lon,u=6378137,d=.00669438,p=.9996,f=At(c),m=At(h);l=Math.floor((h+180)/6)+1,180===h&&(l=60);c>=56&&c<64&&h>=3&&h<12&&(l=32);c>=72&&c<84&&(h>=0&&h<9?l=31:h>=9&&h<21?l=33:h>=21&&h<33?l=35:h>=33&&h<42&&(l=37));a=At(6*(l-1)-180+3),e=d/(1-d),i=u/Math.sqrt(1-d*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),o=e*Math.cos(f)*Math.cos(f),s=Math.cos(f)*(m-a),r=u*((1-d/4-3*d*d/64-5*d*d*d/256)*f-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*f)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*f)-35*d*d*d/3072*Math.sin(6*f));var g=p*i*(s+(1-n+o)*s*s*s/6+(5-18*n+n*n+72*o-58*e)*s*s*s*s*s/120)+5e5,_=p*(r+i*Math.tan(f)*(s*s/2+(5-n+9*o+4*o*o)*s*s*s*s/24+(61-58*n+n*n+600*o-330*e)*s*s*s*s*s*s/720));c<0&&(_+=1e7);return{northing:Math.round(_),easting:Math.round(g),zoneNumber:l,zoneLetter:Rt(c)}}({lat:t[1],lon:t[0]}),e)}function Tt(t){var e=kt(Ot(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function At(t){return t*(Math.PI/180)}function It(t){return t/Math.PI*180}function kt(t){var e=t.northing,i=t.easting,n=t.zoneLetter,o=t.zoneNumber;if(o<0||o>60)return null;var s,r,a,l,c,h,u,d,p,f=.9996,m=6378137,g=.00669438,_=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=i-5e5,y=e;n<"N"&&(y-=1e7),u=6*(o-1)-180+3,s=.006739496752268451,p=(d=y/f/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*d)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*d)+151*_*_*_/96*Math.sin(6*d),r=m/Math.sqrt(1-g*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),l=s*Math.cos(p)*Math.cos(p),c=.99330562*m/Math.pow(1-g*Math.sin(p)*Math.sin(p),1.5),h=v/(r*f);var E=p-r*Math.tan(p)/c*(h*h/2-(5+3*a+10*l-4*l*l-9*s)*h*h*h*h/24+(61+90*a+298*l+45*a*a-1.6983531815716497-3*l*l)*h*h*h*h*h*h/720);E=It(E);var w,b=(h-(1+2*a+l)*h*h*h/6+(5-2*l+28*a-3*l*l+8*s+24*a*a)*h*h*h*h*h/120)/Math.cos(p);if(b=u+It(b),t.accuracy){var x=kt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:x.lat,right:x.lon,bottom:E,left:b}}else w={lat:E,lon:b};return w}function Rt(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Dt(t){var e=t%6;return 0===e&&(e=6),e}function Ot(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,o="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,s++}var r=parseInt(o,10);if(0===s||s+3>i)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var l=Dt(r),c=function(t,e){var i=Et.charCodeAt(e-1),n=1e5,o=!1;for(;i!==t.charCodeAt(0);){if(++i===xt&&i++,i===Lt&&i++,i>Pt){if(o)throw"Bad character: "+t;i=bt,o=!0}n+=1e5}return n}(n.charAt(0),l),h=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var i=wt.charCodeAt(e-1),n=0,o=!1;for(;i!==t.charCodeAt(0);){if(++i===xt&&i++,i===Lt&&i++,i>Ct){if(o)throw"Bad character: "+t;i=bt,o=!0}n+=1e5}return n}(n.charAt(1),l);h<Gt(a);)h+=2e6;var u=i-s;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,p,f,m=u/2,g=0,_=0;return m>0&&(d=1e5/Math.pow(10,m),p=t.substring(s,s+m),g=parseFloat(p)*d,f=t.substring(s+m),_=parseFloat(f)*d),{easting:g+c,northing:_+h,zoneLetter:a,zoneNumber:r,accuracy:d}}function Gt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Nt(t,e,i){if(!(this instanceof Nt))return new Nt(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Nt.fromMGRS=function(t){return new Nt(Tt(t))},Nt.prototype.toMGRS=function(t){return Mt([this.x,this.y],t)};const Ut=Nt;var jt=.046875,Ft=.01953125,zt=.01068115234375;function Bt(t){var e=[];e[0]=1-t*(.25+t*(jt+t*(Ft+t*zt))),e[1]=t*(.75-t*(jt+t*(Ft+t*zt)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function qt(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}function Ht(t,e,i){for(var n=1/(1-e),o=t,s=20;s;--s){var r=Math.sin(o),l=1-e*r*r;if(o-=l=(qt(o,r,Math.cos(o),i)-t)*(l*Math.sqrt(l))*n,Math.abs(l)<a)return o}return o}const Wt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Bt(this.es),this.ml0=qt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,o=t.x,s=t.y,r=N(o-this.long0),l=Math.sin(s),c=Math.cos(s);if(this.es){var h=c*r,u=Math.pow(h,2),d=this.ep2*Math.pow(c,2),p=Math.pow(d,2),f=Math.abs(c)>a?Math.tan(s):0,m=Math.pow(f,2),g=Math.pow(m,2);e=1-this.es*Math.pow(l,2),h/=Math.sqrt(e);var _=qt(s,l,c,this.en);i=this.a*(this.k0*h*(1+u/6*(1-m+d+u/20*(5-18*m+g+14*d-58*m*d+u/42*(61+179*g-g*m-479*m)))))+this.x0,n=this.a*(this.k0*(_-this.ml0+l*r*h/2*(1+u/12*(5-m+9*d+4*p+u/30*(61+g-58*m+270*d-330*m*d+u/56*(1385+543*g-g*m-3111*m))))))+this.y0}else{var v=c*Math.sin(r);if(Math.abs(Math.abs(v)-1)<a)return 93;if(i=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=c*Math.cos(r)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>a)return 93;n=0}else n=Math.acos(n);s<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,o,s=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(i=Ht(e=this.ml0+l/this.k0,this.es,this.en),Math.abs(i)<r){var c=Math.sin(i),h=Math.cos(i),u=Math.abs(h)>a?Math.tan(i):0,d=this.ep2*Math.pow(h,2),p=Math.pow(d,2),f=Math.pow(u,2),m=Math.pow(f,2);e=1-this.es*Math.pow(c,2);var g=s*Math.sqrt(e)/this.k0,_=Math.pow(g,2);n=i-(e*=u)*_/(1-this.es)*.5*(1-_/12*(5+3*f-9*d*f+d-4*p-_/30*(61+90*f-252*d*f+45*m+46*d-_/56*(1385+3633*f+4095*m+1574*m*f)))),o=N(this.long0+g*(1-_/6*(1+2*f+d-_/20*(5+28*f+24*m+8*d*f+6*d-_/42*(61+662*f+1320*m+720*m*f))))/h)}else n=r*G(l),o=0;else{var v=Math.exp(s/this.k0),y=.5*(v-1/v),E=this.lat0+l/this.k0,w=Math.cos(E);e=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(y,2))),n=Math.asin(e),l<0&&(n=-n),o=0===y&&0===w?0:N(Math.atan2(y,w)+this.long0)}return t.x=o,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Vt(t){var e=Math.exp(t);return e=(e-1/e)/2}function Zt(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function Yt(t){var e=Math.abs(t);return e=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}(e*(1+e/(Zt(1,e)+1))),t<0?-e:e}function Xt(t,e){for(var i,n=2*Math.cos(2*e),o=t.length-1,s=t[o],r=0;--o>=0;)i=n*s-r+t[o],r=s,s=i;return e+i*Math.sin(2*e)}function Kt(t,e,i){for(var n,o,s=Math.sin(e),r=Math.cos(e),a=Vt(i),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(i),c=2*r*l,h=-2*s*a,u=t.length-1,d=t[u],p=0,f=0,m=0;--u>=0;)n=f,o=p,d=c*(f=d)-n-h*(p=m)+t[u],m=h*f-o+c*p;return[(c=s*l)*d-(h=r*a)*m,c*m+h*d]}const Jt={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Wt.init.apply(this),this.forward=Wt.forward,this.inverse=Wt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=Xt(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var i,n=2*Math.cos(e),o=t.length-1,s=t[o],r=0;--o>=0;)i=n*s-r+t[o],r=s,s=i;return Math.sin(e)*i}(this.gtu,2*n))},forward:function(t){var e=N(t.x-this.long0),i=t.y;i=Xt(this.cbg,i);var n=Math.sin(i),o=Math.cos(i),s=Math.sin(e),r=Math.cos(e);i=Math.atan2(n,r*o),e=Math.atan2(s*o,Zt(n,o*r)),e=Yt(Math.tan(e));var a,l,c=Kt(this.gtu,2*i,2*e);return i+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var s=Kt(this.utg,2*o,2*n);o+=s[0],n+=s[1],n=Math.atan(Vt(n));var r=Math.sin(o),a=Math.cos(o),l=Math.sin(n),c=Math.cos(n);o=Math.atan2(r*c,Zt(l,c*a)),e=N((n=Math.atan2(l,c*a))+this.long0),i=Xt(this.cgb,o)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};const Qt={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(N(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*l,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Jt.init.apply(this),this.forward=Jt.forward,this.inverse=Jt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function $t(t,e){return Math.pow((1-t)/(1+t),e)}const te={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+h)/(Math.pow(Math.tan(.5*this.lat0+h),this.C)*$t(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+h),this.C)*$t(this.e*Math.sin(i),this.ratexp))-r,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+h)/this.K,1/this.C),o=20;o>0&&(i=2*Math.atan(n*$t(this.e*Math.sin(t.y),-.5*this.e))-r,!(Math.abs(i-t.y)<1e-14));--o)t.y=i;return o?(t.x=e,t.y=i,t):null},names:["gauss"]};const ee={init:function(){te.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,o;return t.x=N(t.x-this.long0),te.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=o*i*Math.sin(t.x),t.y=o*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,o,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var r=2*Math.atan2(s,this.R2);e=Math.sin(r),i=Math.cos(r),o=Math.asin(i*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)}else o=this.phic0,n=0;return t.x=n,t.y=o,te.inverse.apply(this,[t]),t.x=N(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};const ie={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=a&&(this.k0=.5*(1+G(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=a&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=a&&(this.k0=.5*this.cons*O(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/U(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=O(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,o,s,l,c=t.x,h=t.y,u=Math.sin(h),d=Math.cos(h),p=N(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=a&&Math.abs(h+this.lat0)<=a?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*d*Math.cos(p)),t.x=this.a*e*d*Math.sin(p)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*d*Math.cos(p))+this.y0,t):(i=2*Math.atan(this.ssfn_(h,u,this.e))-r,o=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=a?(s=U(this.e,h*this.con,this.con*u),l=2*this.a*this.k0*s/this.cons,t.x=this.x0+l*Math.sin(c-this.long0),t.y=this.y0-this.con*l*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<a?(e=2*this.a*this.k0/(1+o*Math.cos(p)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(p))),t.y=e*(this.cosX0*n-this.sinX0*o*Math.cos(p))+this.y0),t.x=e*o*Math.sin(p)+this.x0,t))},inverse:function(t){var e,i,n,o,s;t.x-=this.x0,t.y-=this.y0;var l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,i=this.lat0,l<=a?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),e=Math.abs(this.coslat0)<a?this.lat0>0?N(this.long0+Math.atan2(t.x,-1*t.y)):N(this.long0+Math.atan2(t.x,t.y)):N(this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=a){if(l<=a)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=l*this.cons/(2*this.a*this.k0),i=this.con*j(this.e,n),e=this.con*N(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=a?s=this.X0:(s=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/l),e=N(this.long0+Math.atan2(t.x*Math.sin(o),l*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),i=-1*j(this.e,Math.tan(.5*(r+s)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(r+t))*Math.pow((1-e)/(1+e),.5*i)}};const ne={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),s=this.e=Math.sqrt(o);this.R=this.k0*i*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+s*e)/(1-s*e));this.K=r-this.alpha*a+this.alpha*s/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*r+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,o=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),r=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),a=this.lambda0+r/this.alpha,l=0,c=s,h=-1e3,u=0;Math.abs(c-h)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),h=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=c,t},names:["somerc"]};const oe={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),i=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var n,o,s=U(this.e,this.lat0,t),r=this.bl/e*Math.sqrt((1-this.es)/(1-i*i));if(r*r<1&&(r=1),isNaN(this.longc)){var a=U(this.e,this.lat1,Math.sin(this.lat1)),l=U(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(r+Math.sqrt(r*r-1))*Math.pow(s,this.bl):this.el=(r-Math.sqrt(r*r-1))*Math.pow(s,this.bl);var c=Math.pow(a,this.bl),h=Math.pow(l,this.bl);o=.5*((n=this.el/c)-1/n);var u=(this.el*this.el-h*c)/(this.el*this.el+h*c),d=(h-c)/(h+c),p=N(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(u*Math.tan(.5*this.bl*p)/d)/this.bl,this.long0=N(this.long0);var f=N(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*f)/o),this.alpha=Math.asin(r*Math.sin(this.gamma0))}else n=this.lat0>=0?r+Math.sqrt(r*r-1):r-Math.sqrt(r*r-1),this.el=n*Math.pow(s,this.bl),o=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/r),this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))},forward:function(t){var e,i,n,o=t.x,s=t.y,l=N(o-this.long0);if(Math.abs(Math.abs(s)-r)<=a)n=s>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(h+n*this.gamma0*.5)),e=-1*n*r*this.al/this.bl;else{var c=U(this.e,s,Math.sin(s)),u=this.el/Math.pow(c,this.bl),d=.5*(u-1/u),p=.5*(u+1/u),f=Math.sin(this.bl*l),m=(d*Math.sin(this.gamma0)-f*Math.cos(this.gamma0))/p;i=Math.abs(Math.abs(m)-1)<=a?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-m)/(1+m))/this.bl,e=Math.abs(Math.cos(this.bl*l))<=a?this.al*this.bl*l:this.al*Math.atan2(d*Math.cos(this.gamma0)+f*Math.sin(this.gamma0),Math.cos(this.bl*l))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+i):(e-=this.uc,t.x=this.x0+i*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-i*Math.sin(this.alpha)),t},inverse:function(t){var e,i;this.no_rot?(i=t.y-this.y0,e=t.x-this.x0):(i=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*i/this.al),o=.5*(n-1/n),s=.5*(n+1/n),l=Math.sin(this.bl*e/this.al),c=(l*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/s,h=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<a?(t.x=this.long0,t.y=r):Math.abs(c+1)<a?(t.x=this.long0,t.y=-1*r):(t.y=j(this.e,h),t.x=N(this.long0-Math.atan2(o*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};const se={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<a)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=O(this.e,e,i),o=U(this.e,this.lat1,e),s=Math.sin(this.lat2),r=Math.cos(this.lat2),l=O(this.e,s,r),c=U(this.e,this.lat2,s),h=U(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>a?this.ns=Math.log(n/l)/Math.log(o/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=a&&(i=G(i)*(r-2e-10));var n,o,s=Math.abs(Math.abs(i)-r);if(s>a)n=U(this.e,i,Math.sin(i)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((s=i*this.ns)<=0)return null;o=0}var l=this.ns*N(e-this.long0);return t.x=this.k0*(o*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(l))+this.y0,t},inverse:function(t){var e,i,n,o,s,a=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+l*l),i=1):(e=-Math.sqrt(a*a+l*l),i=-1);var c=0;if(0!==e&&(c=Math.atan2(i*a,i*l)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(o=j(this.e,n)))return null}else o=-r;return s=N(c/this.ns+this.long0),t.x=s,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};const re={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,o,s,r,a,l=t.x,c=t.y,h=N(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),n=-h*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),s=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(o)),r=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=a*Math.cos(r)/1,t.x=a*Math.sin(r)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,o,s,r,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),i=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(e)),t.x=this.long0-i/this.alfa,r=e,a=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(a=1),r=t.y,c+=1}while(0===a&&c<15);return c>=15?null:t},names:["Krovak","krovak"]};function ae(t,e,i,n,o){return t*o-e*Math.sin(2*o)+i*Math.sin(4*o)-n*Math.sin(6*o)}function le(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ce(t){return.375*t*(1+.25*t*(1+.46875*t))}function he(t){return.05859375*t*t*(1+.75*t)}function ue(t){return t*t*t*(35/3072)}function de(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function pe(t){return Math.abs(t)<r?t:t-G(t)*Math.PI}function fe(t,e,i,n,o){var s,r;s=t/e;for(var a=0;a<15;a++)if(s+=r=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-o*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*o*Math.cos(6*s)),Math.abs(r)<=1e-10)return s;return NaN}const me={init:function(){this.sphere||(this.e0=le(this.es),this.e1=ce(this.es),this.e2=he(this.es),this.e3=ue(this.es),this.ml0=this.a*ae(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,o=t.y;if(n=N(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var s=Math.sin(o),r=Math.cos(o),a=de(this.a,this.e,s),l=Math.tan(o)*Math.tan(o),c=n*Math.cos(o),h=c*c,u=this.es*r*r/(1-this.es);e=a*c*(1-h*l*(1/6-(8-l+8*u)*h/120)),i=this.a*ae(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*s/r*h*(.5+(5-l+6*u)*h/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,o=t.y/this.a;if(this.sphere){var s=o+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(s))}else{var l=fe(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-r)<=a)return t.x=this.long0,t.y=r,o<0&&(t.y*=-1),t;var c=de(this.a,this.e,Math.sin(l)),h=c*c*c/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(l),2),d=n*this.a/c,p=d*d;e=l-c*Math.tan(l)/h*d*d*(.5-(1+3*u)*d*d/24),i=d*(1-p*(u/3+(1+3*u)*u*p/15))/Math.cos(l)}return t.x=N(i+this.long0),t.y=pe(e),t},names:["Cassini","Cassini_Soldner","cass"]};function ge(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}var _e=.3333333333333333,ve=.17222222222222222,ye=.10257936507936508,Ee=.06388888888888888,we=.0664021164021164,be=.016415012942191543;const xe={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-r)<a?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<a?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=ge(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=t*_e,e=t*t,i[0]+=e*ve,i[1]=e*Ee,e*=t,i[0]+=e*ye,i[1]+=e*we,i[2]=e*be,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ge(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,o,s,l,c,u,d,p,f=t.x,m=t.y;if(f=N(f-this.long0),this.sphere){if(s=Math.sin(m),p=Math.cos(m),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+p*n:1+this.sinph0*s+this.cosph0*p*n)<=a)return null;e=(i=Math.sqrt(2/i))*p*Math.sin(f),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*p*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(m+this.lat0)<a)return null;i=h-.5*m,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(f),i*=n}}else{switch(c=0,u=0,d=0,n=Math.cos(f),o=Math.sin(f),s=Math.sin(m),l=ge(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=l/this.qp,u=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:d=1+this.sinb1*c+this.cosb1*u*n;break;case this.EQUIT:d=1+u*n;break;case this.N_POLE:d=r+m,l=this.qp-l;break;case this.S_POLE:d=m-r,l=this.qp+l}if(Math.abs(d)<a)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),i=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*c-this.sinb1*u*n):(d=Math.sqrt(2/(1+u*n)))*c*this.ymf,e=this.xmf*d*u*o;break;case this.N_POLE:case this.S_POLE:l>=0?(e=(d=Math.sqrt(l))*o,i=n*(this.mode===this.S_POLE?d:-d)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,o,s,l,c,h,u,d,p=t.x/this.a,f=t.y/this.a;if(this.sphere){var m,g=0,_=0;if((i=.5*(m=Math.sqrt(p*p+f*f)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(_=Math.sin(i),g=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(m)<=a?0:Math.asin(f*_/m),p*=_,f=g*m;break;case this.OBLIQ:i=Math.abs(m)<=a?this.lat0:Math.asin(g*this.sinph0+f*_*this.cosph0/m),p*=_*this.cosph0,f=(g-Math.sin(i)*this.sinph0)*m;break;case this.N_POLE:f=-f,i=r-i;break;case this.S_POLE:i-=r}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(p,f):0}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(p/=this.dd,f*=this.dd,(l=Math.sqrt(p*p+f*f))<a)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*l/this.rq),n=Math.cos(o),p*=o=Math.sin(o),this.mode===this.OBLIQ?(c=n*this.sinb1+f*o*this.cosb1/l,s=this.qp*c,f=l*this.cosb1*n-f*this.sinb1*o):(c=f*o/l,s=this.qp*c,f=l*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(s=p*p+f*f))return t.x=this.long0,t.y=this.lat0,t;c=1-s/this.qp,this.mode===this.S_POLE&&(c=-c)}e=Math.atan2(p,f),h=Math.asin(c),u=this.apa,d=h+h,i=h+u[0]*Math.sin(d)+u[1]*Math.sin(d+d)+u[2]*Math.sin(d+d+d)}return t.x=N(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Le(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Ce={init:function(){Math.abs(this.lat1+this.lat2)<a||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=O(this.e3,this.sin_po,this.cos_po),this.qs1=ge(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=O(this.e3,this.sin_po,this.cos_po),this.qs2=ge(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ge(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>a?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=ge(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*N(e-this.long0),r=o*Math.sin(s)+this.x0,a=this.rh-o*Math.cos(s)+this.y0;return t.x=r,t.y=a,t},inverse:function(t){var e,i,n,o,s,r;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),o=0,0!==e&&(o=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?r=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,r=this.phi1z(this.e3,i)),s=N(o/this.ns0+this.long0),t.x=s,t.y=r,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,o,s,r=Le(.5*e);if(t<a)return r;for(var l=t*t,c=1;c<=25;c++)if(r+=s=.5*(o=1-(n=t*(i=Math.sin(r)))*n)*o/Math.cos(r)*(e/(1-l)-i/o+.5/t*Math.log((1-n)/(1+n))),Math.abs(s)<=1e-7)return r;return null}};const Pe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,o,s,r,l,c=t.x,h=t.y;return n=N(c-this.long0),e=Math.sin(h),i=Math.cos(h),o=Math.cos(n),1,(s=this.sin_p14*e+this.cos_p14*i*o)>0||Math.abs(s)<=a?(r=this.x0+1*this.a*i*Math.sin(n)/s,l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*o)/s):(r=this.x0+this.infinity_dist*i*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*o)),t.x=r,t.y=l,t},inverse:function(t){var e,i,n,o,s,r;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),i=Math.sin(o),r=Le((n=Math.cos(o))*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),s=N(this.long0+s)):(r=this.phic0,s=0),t.x=s,t.y=r,t},names:["gnom"]};const Se={init:function(){this.sphere||(this.k0=O(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,o=t.y,s=N(n-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var r=ge(this.e,Math.sin(o));e=this.x0+this.a*this.k0*s,i=this.y0+this.a*r*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=N(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*r:r;for(var n,o,s,a,l=Math.asin(.5*e),c=0;c<30;c++)if(o=Math.sin(l),s=Math.cos(l),a=t*o,l+=n=Math.pow(1-a*a,2)/(2*s)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return l;return NaN}(this.e,2*t.y*this.k0/this.a),e=N(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]};const Me={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=N(e-this.long0),o=pe(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*o,t},inverse:function(t){var e=t.x,i=t.y;return t.x=N(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=pe(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};const Te={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=le(this.es),this.e1=ce(this.es),this.e2=he(this.es),this.e3=ue(this.es),this.ml0=this.a*ae(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,o=t.x,s=t.y,r=N(o-this.long0);if(n=r*Math.sin(s),this.sphere)Math.abs(s)<=a?(e=this.a*r,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(s),i=this.a*(pe(s-this.lat0)+(1-Math.cos(n))/Math.tan(s)));else if(Math.abs(s)<=a)e=this.a*r,i=-1*this.ml0;else{var l=de(this.a,this.e,Math.sin(s))/Math.tan(s);e=l*Math.sin(n),i=this.a*ae(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+l*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,o,s,r,l,c,h;if(n=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=a)e=N(n/this.a+this.long0),i=0;else{var u;for(r=this.lat0+o/this.a,l=n*n/this.a/this.a+r*r,c=r,s=20;s;--s)if(c+=h=-1*(r*(c*(u=Math.tan(c))+1)-c-.5*(c*c+l)*u)/((c-r)/u-1),Math.abs(h)<=a){i=c;break}e=N(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(i))}else if(Math.abs(o+this.ml0)<=a)i=0,e=N(this.long0+n/this.a);else{var d,p,f,m,g;for(r=(this.ml0+o)/this.a,l=n*n/this.a/this.a+r*r,c=r,s=20;s;--s)if(g=this.e*Math.sin(c),d=Math.sqrt(1-g*g)*Math.tan(c),p=this.a*ae(this.e0,this.e1,this.e2,this.e3,c),f=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),c-=h=(r*(d*(m=p/this.a)+1)-m-.5*d*(m*m+l))/(this.es*Math.sin(2*c)*(m*m+l-2*r*m)/(4*d)+(r-m)*(d*f-2/Math.sin(2*c))-f),Math.abs(h)<=a){i=c;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=N(this.long0+Math.asin(n*d/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]};const Ae={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,n=t.y-this.lat0,o=i-this.long0,r=n/s*1e-5,a=o,l=1,c=0;for(e=1;e<=10;e++)l*=r,c+=this.A[e]*l;var h,u=c,d=a,p=1,f=0,m=0,g=0;for(e=1;e<=6;e++)h=f*u+p*d,p=p*u-f*d,f=h,m=m+this.B_re[e]*p-this.B_im[e]*f,g=g+this.B_im[e]*p+this.B_re[e]*f;return t.x=g*this.a+this.x0,t.y=m*this.a+this.y0,t},inverse:function(t){var e,i,n=t.x,o=t.y,r=n-this.x0,a=(o-this.y0)/this.a,l=r/this.a,c=1,h=0,u=0,d=0;for(e=1;e<=6;e++)i=h*a+c*l,c=c*a-h*l,h=i,u=u+this.C_re[e]*c-this.C_im[e]*h,d=d+this.C_im[e]*c+this.C_re[e]*h;for(var p=0;p<this.iterations;p++){var f,m=u,g=d,_=a,v=l;for(e=2;e<=6;e++)f=g*u+m*d,m=m*u-g*d,g=f,_+=(e-1)*(this.B_re[e]*m-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*m+this.B_re[e]*g);m=1,g=0;var y=this.B_re[1],E=this.B_im[1];for(e=2;e<=6;e++)f=g*u+m*d,m=m*u-g*d,g=f,y+=e*(this.B_re[e]*m-this.B_im[e]*g),E+=e*(this.B_im[e]*m+this.B_re[e]*g);var w=y*y+E*E;u=(_*y+v*E)/w,d=(v*y-_*E)/w}var b=u,x=d,L=1,C=0;for(e=1;e<=9;e++)L*=b,C+=this.D[e]*L;var P=this.lat0+C*s*1e5,S=this.long0+x;return t.x=S,t.y=P,t},names:["New_Zealand_Map_Grid","nzmg"]};const Ie={init:function(){},forward:function(t){var e=t.x,i=t.y,n=N(e-this.long0),o=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=o,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=N(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]};const ke={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Bt(this.es)},forward:function(t){var e,i,n=t.x,o=t.y;if(n=N(n-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(o),r=20;r;--r){var l=(this.m*o+Math.sin(o)-s)/(this.m+Math.cos(o));if(o-=l,Math.abs(l)<a)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*n*(this.m+Math.cos(o)),i=this.a*this.C_y*o}else{var c=Math.sin(o),h=Math.cos(o);i=this.a*qt(o,c,h,this.en),e=this.a*n*h/Math.sqrt(1-this.es*c*c)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=Le((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Le(Math.sin(e)/this.n)),i=N(i+this.long0),e=pe(e)):(e=Ht(t.y/this.a,this.es,this.en),(n=Math.abs(e))<r?(n=Math.sin(e),i=N(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-a<r&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]};const Re={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=N(e-this.long0),o=i,s=Math.PI*Math.sin(i);;){var r=-(o+Math.sin(o)-s)/(1+Math.cos(o));if(o+=r,Math.abs(r)<a)break}o/=2,Math.PI/2-Math.abs(i)<a&&(n=0);var l=.900316316158*this.a*n*Math.cos(o)+this.x0,c=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=l,t.y=c,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=N(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var o=Math.asin(i);return t.x=n,t.y=o,t},names:["Mollweide","moll"]};const De={init:function(){Math.abs(this.lat1+this.lat2)<a||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=le(this.es),this.e1=ce(this.es),this.e2=he(this.es),this.e3=ue(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=O(this.e,this.sinphi,this.cosphi),this.ml1=ae(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<a?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=O(this.e,this.sinphi,this.cosphi),this.ml2=ae(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ae(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var o=ae(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-o)}var s=this.ns*N(i-this.long0),r=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=r,t.y=a,t},inverse:function(t){var e,i,n,o;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;return 0!==i&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere?(o=N(this.long0+s/this.ns),n=pe(this.g-i/this.a),t.x=o,t.y=n,t):(n=fe(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),o=N(this.long0+s/this.ns),t.x=o,t.y=n,t)},names:["Equidistant_Conic","eqdc"]};const Oe={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,o=t.y,s=N(n-this.long0);Math.abs(o)<=a&&(e=this.x0+this.R*s,i=this.y0);var l=Le(2*Math.abs(o/Math.PI));(Math.abs(s)<=a||Math.abs(Math.abs(o)-r)<=a)&&(e=this.x0,i=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/s-s/Math.PI),h=c*c,u=Math.sin(l),d=Math.cos(l),p=d/(u+d-1),f=p*p,m=p*(2/u-1),g=m*m,_=Math.PI*this.R*(c*(p-g)+Math.sqrt(h*(p-g)*(p-g)-(g+h)*(f-g)))/(g+h);s<0&&(_=-_),e=this.x0+_;var v=h+p;return _=Math.PI*this.R*(m*v-c*Math.sqrt((g+h)*(h+1)-v*v))/(g+h),i=o>=0?this.y0+_:this.y0-_,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,o,s,r,l,c,h,u,d,p;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,s=(n=t.x/d)*n+(o=t.y/d)*o,d=3*(o*o/(c=-2*(r=-Math.abs(o)*(1+s))+1+2*o*o+s*s)+(2*(l=r-2*o*o+n*n)*l*l/c/c/c-9*r*l/c/c)/27)/(h=(r-l*l/3/c)/c)/(u=2*Math.sqrt(-h/3)),Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,i=t.y>=0?(-u*Math.cos(p+Math.PI/3)-l/3/c)*Math.PI:-(-u*Math.cos(p+Math.PI/3)-l/3/c)*Math.PI,e=Math.abs(n)<a?this.long0:N(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-o*o)+s*s))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};const Ge={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,o,s,l,c,h,u,d,p,f,m,g,_,v,y,E,w,b,x,L,C=t.x,P=t.y,S=Math.sin(t.y),M=Math.cos(t.y),T=N(C-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=a?(t.x=this.x0+this.a*(r-P)*Math.sin(T),t.y=this.y0-this.a*(r-P)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=a?(t.x=this.x0+this.a*(r+P)*Math.sin(T),t.y=this.y0+this.a*(r+P)*Math.cos(T),t):(E=this.sin_p12*S+this.cos_p12*M*Math.cos(T),y=(v=Math.acos(E))?v/Math.sin(v):1,t.x=this.x0+this.a*y*M*Math.sin(T),t.y=this.y0+this.a*y*(this.cos_p12*S-this.sin_p12*M*Math.cos(T)),t):(e=le(this.es),i=ce(this.es),n=he(this.es),o=ue(this.es),Math.abs(this.sin_p12-1)<=a?(s=this.a*ae(e,i,n,o,r),l=this.a*ae(e,i,n,o,P),t.x=this.x0+(s-l)*Math.sin(T),t.y=this.y0-(s-l)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=a?(s=this.a*ae(e,i,n,o,r),l=this.a*ae(e,i,n,o,P),t.x=this.x0+(s+l)*Math.sin(T),t.y=this.y0+(s+l)*Math.cos(T),t):(c=S/M,h=de(this.a,this.e,this.sin_p12),u=de(this.a,this.e,S),d=Math.atan((1-this.es)*c+this.es*h*this.sin_p12/(u*M)),w=0===(p=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(d)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.abs(Math.abs(p)-Math.PI)<=a?-Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.asin(Math.sin(T)*Math.cos(d)/Math.sin(p)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),v=h*w*(1-(b=w*w)*(_=(m=this.e*this.cos_p12*Math.cos(p)/Math.sqrt(1-this.es))*m)*(1-_)/6+(x=b*w)/8*(g=f*m)*(1-2*_)+(L=x*w)/120*(_*(4-7*_)-3*f*f*(1-7*_))-L*w/48*g),t.x=this.x0+v*Math.sin(p),t.y=this.y0+v*Math.cos(p),t))},inverse:function(t){var e,i,n,o,s,l,c,h,u,d,p,f,m,g,_,v,y,E,w,b,x,L,C;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*r*this.a)return;return i=e/this.a,n=Math.sin(i),o=Math.cos(i),s=this.long0,Math.abs(e)<=a?l=this.lat0:(l=Le(o*this.sin_p12+t.y*n*this.cos_p12/e),c=Math.abs(this.lat0)-r,s=Math.abs(c)<=a?this.lat0>=0?N(this.long0+Math.atan2(t.x,-t.y)):N(this.long0-Math.atan2(-t.x,t.y)):N(this.long0+Math.atan2(t.x*n,e*this.cos_p12*o-t.y*this.sin_p12*n))),t.x=s,t.y=l,t}return h=le(this.es),u=ce(this.es),d=he(this.es),p=ue(this.es),Math.abs(this.sin_p12-1)<=a?(l=fe(((f=this.a*ae(h,u,d,p,r))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,u,d,p),s=N(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=l,t):Math.abs(this.sin_p12+1)<=a?(f=this.a*ae(h,u,d,p,r),l=fe(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,h,u,d,p),s=N(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=l,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),_=Math.atan2(t.x,t.y),m=de(this.a,this.e,this.sin_p12),v=Math.cos(_),E=-(y=this.e*this.cos_p12*v)*y/(1-this.es),w=3*this.es*(1-E)*this.sin_p12*this.cos_p12*v/(1-this.es),L=1-E*(x=(b=e/m)-E*(1+E)*Math.pow(b,3)/6-w*(1+3*E)*Math.pow(b,4)/24)*x/2-b*x*x*x/6,g=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*v),s=N(this.long0+Math.asin(Math.sin(_)*Math.sin(x)/Math.cos(g))),C=Math.sin(g),l=Math.atan2((C-this.es*L*this.sin_p12)*Math.tan(g),C*(1-this.es)),t.x=s,t.y=l,t)},names:["Azimuthal_Equidistant","aeqd"]};const Ne={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,o,s,r,l,c=t.x,h=t.y;return n=N(c-this.long0),e=Math.sin(h),i=Math.cos(h),o=Math.cos(n),1,((s=this.sin_p14*e+this.cos_p14*i*o)>0||Math.abs(s)<=a)&&(r=1*this.a*i*Math.sin(n),l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*o)),t.x=r,t.y=l,t},inverse:function(t){var e,i,n,o,s,l,c;return t.x-=this.x0,t.y-=this.y0,i=Le((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(i),o=Math.cos(i),l=this.long0,Math.abs(e)<=a?(c=this.lat0,t.x=l,t.y=c,t):(c=Le(o*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-r,Math.abs(s)<=a?(l=this.lat0>=0?N(this.long0+Math.atan2(t.x,-t.y)):N(this.long0-Math.atan2(-t.x,t.y)),t.x=l,t.y=c,t):(l=N(this.long0+Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n)),t.x=l,t.y=c,t))},names:["ortho"]};var Ue=1,je=2,Fe=3,ze=4,Be=5,qe=6,He=1,We=2,Ve=3,Ze=4;function Ye(t,e,i,n){var o;return t<a?(n.value=He,o=0):(o=Math.atan2(e,i),Math.abs(o)<=h?n.value=He:o>h&&o<=r+h?(n.value=We,o-=r):o>r+h||o<=-(r+h)?(n.value=Ve,o=o>=0?o-d:o+d):(n.value=Ze,o+=r)),o}function Xe(t,e){var i=t+e;return i<-d?i+=u:i>+d&&(i-=u),i}const Ke={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=r-h/2?this.face=Be:this.lat0<=-(r-h/2)?this.face=qe:Math.abs(this.long0)<=h?this.face=Ue:Math.abs(this.long0)<=r+h?this.face=this.long0>0?je:ze:this.face=Fe,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,o,s,a,l={x:0,y:0},c={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===Be)o=r-e,i>=h&&i<=r+h?(c.value=He,n=i-r):i>r+h||i<=-(r+h)?(c.value=We,n=i>0?i-d:i+d):i>-(r+h)&&i<=-h?(c.value=Ve,n=i+r):(c.value=Ze,n=i);else if(this.face===qe)o=r+e,i>=h&&i<=r+h?(c.value=He,n=-i+r):i<h&&i>=-h?(c.value=We,n=-i):i<-h&&i>=-(r+h)?(c.value=Ve,n=-i-r):(c.value=Ze,n=i>0?-i+d:-i-d);else{var u,p,f,m,g,_;this.face===je?i=Xe(i,+r):this.face===Fe?i=Xe(i,+d):this.face===ze&&(i=Xe(i,-r)),m=Math.sin(e),g=Math.cos(e),_=Math.sin(i),u=g*Math.cos(i),p=g*_,f=m,this.face===Ue?n=Ye(o=Math.acos(u),f,p,c):this.face===je?n=Ye(o=Math.acos(p),f,-u,c):this.face===Fe?n=Ye(o=Math.acos(-u),f,-p,c):this.face===ze?n=Ye(o=Math.acos(-p),f,u,c):(o=n=0,c.value=He)}return a=Math.atan(12/d*(n+Math.acos(Math.sin(n)*Math.cos(h))-r)),s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),c.value===We?a+=r:c.value===Ve?a+=d:c.value===Ze&&(a+=1.5*d),l.x=s*Math.cos(a),l.y=s*Math.sin(a),l.x=l.x*this.a+this.x0,l.y=l.y*this.a+this.y0,t.x=l.x,t.y=l.y,t},inverse:function(t){var e,i,n,o,s,a,l,c,h,u,p,f,m={lam:0,phi:0},g={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?g.value=He:t.y>=0&&t.y>=Math.abs(t.x)?(g.value=We,e-=r):t.x<0&&-t.x>=Math.abs(t.y)?(g.value=Ve,e=e<0?e+d:e-d):(g.value=Ze,e+=r),h=d/12*Math.tan(e),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),a=Math.atan(s),(l=1-(n=Math.cos(e))*n*(o=Math.tan(i))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?l=-1:l>1&&(l=1),this.face===Be)c=Math.acos(l),m.phi=r-c,g.value===He?m.lam=a+r:g.value===We?m.lam=a<0?a+d:a-d:g.value===Ve?m.lam=a-r:m.lam=a;else if(this.face===qe)c=Math.acos(l),m.phi=c-r,g.value===He?m.lam=-a+r:g.value===We?m.lam=-a:g.value===Ve?m.lam=-a-r:m.lam=a<0?-a-d:-a+d;else{var _,v,y;h=(_=l)*_,v=(h+=(y=h>=1?0:Math.sqrt(1-h)*Math.sin(a))*y)>=1?0:Math.sqrt(1-h),g.value===We?(h=v,v=-y,y=h):g.value===Ve?(v=-v,y=-y):g.value===Ze&&(h=v,v=y,y=-h),this.face===je?(h=_,_=-v,v=h):this.face===Fe?(_=-_,v=-v):this.face===ze&&(h=_,_=v,v=-h),m.phi=Math.acos(-y)-r,m.lam=Math.atan2(v,_),this.face===je?m.lam=Xe(m.lam,-r):this.face===Fe?m.lam=Xe(m.lam,-d):this.face===ze&&(m.lam=Xe(m.lam,+r))}return 0!==this.es&&(u=m.phi<0?1:0,p=Math.tan(m.phi),f=this.b/Math.sqrt(p*p+this.one_minus_f_squared),m.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),u&&(m.phi=-m.phi)),m.lam+=this.long0,t.x=m.lam,t.y=m.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var Je=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Qe=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],$e=.8487,ti=1.3523,ei=c/5,ii=18,ni=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const oi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=N(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*ei);n<0?n=0:n>=ii&&(n=17);var o={x:ni(Je[n],i=c*(i-.08726646259971647*n))*e,y:ni(Qe[n],i)};return t.y<0&&(o.y=-o.y),o.x=o.x*this.a*$e+this.x0,o.y=o.y*this.a*ti+this.y0,o},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*$e),y:Math.abs(t.y-this.y0)/(this.a*ti)};if(e.y>=1)e.x/=Je[18][0],e.y=t.y<0?-r:r;else{var i=Math.floor(e.y*ii);for(i<0?i=0:i>=ii&&(i=17);;)if(Qe[i][0]>e.y)--i;else{if(!(Qe[i+1][0]<=e.y))break;++i}var n=Qe[i],o=5*(e.y-n[0])/(Qe[i+1][0]-n[0]);o=function(t,e,i,n){for(var o=e;n;--n){var s=t(o);if(o-=s,Math.abs(s)<i)break}return o}((function(t){return(ni(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),o,a,100),e.x/=ni(Je[i],o),e.y=(5*i+o)*l,t.y<0&&(e.y=-e.y)}return e.x=N(e.x+this.long0),e},names:["Robinson","robin"]};const si={init:function(){this.name="geocent"},forward:function(t){return st(t,this.es,this.a)},inverse:function(t){return rt(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var ri=0,ai=1,li=2,ci=3,hi={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const ui={init:function(){if(Object.keys(hi).forEach(function(t){if(void 0===this[t])this[t]=hi[t].def;else{if(hi[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);hi[t].num&&(this[t]=parseFloat(this[t]))}hi[t].degrees&&(this[t]=this[t]*l)}.bind(this)),Math.abs(Math.abs(this.lat0)-r)<a?this.mode=this.lat0<0?ai:ri:Math.abs(this.lat0)<a?this.mode=li:(this.mode=ci,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,o,s=Math.sin(t.y),r=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case ci:i=this.sinph0*s+this.cosph0*r*a;break;case li:i=r*a;break;case ai:i=-s;break;case ri:i=s}switch(e=(i=this.pn1/(this.p-i))*r*Math.sin(t.x),this.mode){case ci:i*=this.cosph0*s-this.sinph0*r*a;break;case li:i*=s;break;case ri:i*=-r*a;break;case ai:i*=r*a}return o=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*o,i=n*o,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,n,o={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var s=Zt(t.x,t.y);if(Math.abs(s)<a)o.x=0,o.y=t.y;else{var r,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),r=Math.sqrt(1-l*l),this.mode){case ci:o.y=Math.asin(r*this.sinph0+t.y*l*this.cosph0/s),t.y=(r-this.sinph0*Math.sin(o.y))*s,t.x*=l*this.cosph0;break;case li:o.y=Math.asin(t.y*l/s),t.y=r*s,t.x*=l;break;case ri:o.y=Math.asin(r),t.y=-t.y;break;case ai:o.y=-Math.asin(r)}o.x=Math.atan2(t.x,t.y)}return t.x=o.x+this.long0,t.y=o.y,t},names:["Tilted_Perspective","tpers"]};yt.defaultDatum="WGS84",yt.Proj=ot,yt.WGS84=new yt.Proj("WGS84"),yt.Point=Ut,yt.toPoint=pt,yt.defs=A,yt.nadgrid=function(t,e){var i=new DataView(e),n=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(i),o=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:$(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,n);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s={header:o,subgrids:function(t,e,i){for(var n=176,o=[],s=0;s<e.nSubgrids;s++){var r=et(t,n,i),a=it(t,n,r,i),l=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),c=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);o.push({ll:[Q(r.lowerLongitude),Q(r.lowerLatitude)],del:[Q(r.longitudeInterval),Q(r.latitudeInterval)],lim:[l,c],count:r.gridNodeCount,cvs:tt(a)})}return o}(i,o,n)};return K[t]=s,s},yt.transform=mt,yt.mgrs=St,yt.version="__VERSION__",function(t){t.Proj.projections.add(Wt),t.Proj.projections.add(Jt),t.Proj.projections.add(Qt),t.Proj.projections.add(ee),t.Proj.projections.add(ie),t.Proj.projections.add(ne),t.Proj.projections.add(oe),t.Proj.projections.add(se),t.Proj.projections.add(re),t.Proj.projections.add(me),t.Proj.projections.add(xe),t.Proj.projections.add(Ce),t.Proj.projections.add(Pe),t.Proj.projections.add(Se),t.Proj.projections.add(Me),t.Proj.projections.add(Te),t.Proj.projections.add(Ae),t.Proj.projections.add(Ie),t.Proj.projections.add(ke),t.Proj.projections.add(Re),t.Proj.projections.add(De),t.Proj.projections.add(Oe),t.Proj.projections.add(Ge),t.Proj.projections.add(Ne),t.Proj.projections.add(Ke),t.Proj.projections.add(oi),t.Proj.projections.add(si),t.Proj.projections.add(ui)}(yt);const di=yt},751:(t,e,i)=>{var n,o,s;o=[i(243),i(280)],void 0===(s="function"==typeof(n=function(t,e){return e.__esModule&&e.default&&(e=e.default),t.Proj={},t.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},t.Proj.Projection=t.Class.extend({initialize:function(e,i,n){var o=t.Proj._isProj4Obj(e);this._proj=o?e:this._projFromCodeDef(e,i),this.bounds=o?i:n},project:function(e){var i=this._proj.forward([e.lng,e.lat]);return new t.Point(i[0],i[1])},unproject:function(e,i){var n=this._proj.inverse([e.x,e.y]);return new t.LatLng(n[1],n[0],i)},_projFromCodeDef:function(t,i){if(i)e.defs(t,i);else if(void 0===e.defs[t]){var n=t.split(":");if(n.length>3&&(t=n[n.length-3]+":"+n[n.length-1]),void 0===e.defs[t])throw"No projection definition for code "+t}return e(t)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(e,i,n){var o,s,r,a;if(t.Proj._isProj4Obj(e)?(o=(s=e).srsCode,a=i||{},this.projection=new t.Proj.Projection(s,a.bounds)):(o=e,r=i,a=n||{},this.projection=new t.Proj.Projection(o,r,a.bounds)),t.Util.setOptions(this,a),this.code=o,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var l=this.options.resolutions.length-1;l>=0;l--)this.options.resolutions[l]&&(this._scales[l]=1/this.options.resolutions[l])}this.infinite=!this.options.bounds},scale:function(t){var e,i=Math.floor(t);return t===i?this._scales[t]:(e=this._scales[i])+(this._scales[i+1]-e)*(t-i)},zoom:function(t){var e,i,n=this._closestElement(this._scales,t),o=this._scales.indexOf(n);return t===n?o:void 0===n?-1/0:(i=o+1,void 0===(e=this._scales[i])?1/0:(t-n)/(e-n)+o)},distance:t.CRS.Earth.distance,R:t.CRS.Earth.R,_closestElement:function(t,e){for(var i,n=t.length;n--;)t[n]<=e&&(void 0===i||i<t[n])&&(i=t[n]);return i}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(e,i){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,e,i)},addData:function(e){var i;e&&(e.crs&&"name"===e.crs.type?i=new t.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(i=new t.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==i&&(this.options.coordsToLatLng=function(e){var n=t.point(e[0],e[1]);return i.projection.unproject(n)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(e,i){return new t.Proj.GeoJSON(e,i)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(e,i,n){t.ImageOverlay.prototype.initialize.call(this,e,null,n),this._projectedBounds=i},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),n=t.point(this._projectedBounds.min.x,this._projectedBounds.max.y),o=this._projectedToNewLayerPoint(n,e.zoom,e.center);t.DomUtil.setTransform(this._image,o,i)},_reset:function(){var e=this._map.getZoom(),i=this._map.getPixelOrigin(),n=t.bounds(this._transform(this._projectedBounds.min,e)._subtract(i),this._transform(this._projectedBounds.max,e)._subtract(i)),o=n.getSize();t.DomUtil.setPosition(this._image,n.min),this._image.style.width=o.x+"px",this._image.style.height=o.y+"px"},_projectedToNewLayerPoint:function(t,e,i){var n=this._map.getSize()._divideBy(2),o=this._map.project(i,e)._subtract(n)._round().add(this._map._getMapPanePos());return this._transform(t,e)._subtract(o)},_transform:function(t,e){var i=this._map.options.crs,n=i.transformation,o=i.scale(e);return n.transform(t,o)}}),t.Proj.imageOverlay=function(e,i,n){return new t.Proj.ImageOverlay(e,i,n)},t.Proj})?n.apply(e,o):n)||(t.exports=s)},282:(t,e,i)=>{var n,o,s=i(755);!function(s){"use strict";void 0===(o="function"==typeof(n=s)?n.call(e,i,e,t):n)||(t.exports=o)}((function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,i,n,o,r,a,l,c,h,u,d,p,f,m,g,_,v,y,E,w,b,x,L,C,P,S=[],M=!1,T=!1,A=!1,I=[],k=!1,R=!1,D=[],O=/\s+/g,G="Sortable"+(new Date).getTime(),N=window,U=N.document,j=N.parseInt,F=N.setTimeout,z=s||N.Zepto,B=N.Polymer,q={capture:!1,passive:!1},H=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),W=!!navigator.userAgent.match(/Edge/i),V=!!navigator.userAgent.match(/firefox/i),Z=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),Y=!!navigator.userAgent.match(/iP(ad|od|hone)/i),X=W||H?"cssFloat":"float",K="draggable"in U.createElement("div"),J=function(){if(H)return!1;var t=U.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),Q=!1,$=!1,tt=Math.abs,et=Math.min,it=Math.max,nt=[],ot=function(t,e){var i=Lt(t),n=j(i.width)-j(i.paddingLeft)-j(i.paddingRight)-j(i.borderLeftWidth)-j(i.borderRightWidth),o=It(t,0,e),s=It(t,1,e),r=o&&Lt(o),a=s&&Lt(s),l=r&&j(r.marginLeft)+j(r.marginRight)+Bt(o).width,c=a&&j(a.marginLeft)+j(a.marginRight)+Bt(s).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&"none"!==r.float){var h="left"===r.float?"left":"right";return!s||"both"!==a.clear&&a.clear!==h?"horizontal":"vertical"}return o&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=n&&"none"===i[X]||s&&"none"===i[X]&&l+c>n)?"vertical":"horizontal"},st=function(t,e){if(!t||!t.getBoundingClientRect)return rt();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var o=Lt(i);if(i.clientWidth<i.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!i||!i.getBoundingClientRect||i===U.body)return rt();if(n||e)return i;n=!0}}}while(i=i.parentNode);return rt()},rt=function(){return H?U.documentElement:U.scrollingElement},at=function(t,e,i){t.scrollLeft+=e,t.scrollTop+=i},lt=Nt((function(t,e,i,n){if(e.scroll){var o=i?i[G]:window,s=e.scrollSensitivity,r=e.scrollSpeed,a=t.clientX,u=t.clientY,d=rt(),p=!1;c!==i&&(ct(),l=e.scroll,h=e.scrollFn,!0===l&&(l=st(i,!0),c=l));var f=0,m=l;do{var g,_,v,E,w,b,x,L,C,P=m,T=Bt(P),A=T.top,I=T.bottom,k=T.left,R=T.right,D=T.width,O=T.height;if(g=P.scrollWidth,_=P.scrollHeight,v=Lt(P),L=P.scrollLeft,C=P.scrollTop,P===d?(b=D<g&&("auto"===v.overflowX||"scroll"===v.overflowX||"visible"===v.overflowX),x=O<_&&("auto"===v.overflowY||"scroll"===v.overflowY||"visible"===v.overflowY)):(b=D<g&&("auto"===v.overflowX||"scroll"===v.overflowX),x=O<_&&("auto"===v.overflowY||"scroll"===v.overflowY)),E=b&&(tt(R-a)<=s&&L+D<g)-(tt(k-a)<=s&&!!L),w=x&&(tt(I-u)<=s&&C+O<_)-(tt(A-u)<=s&&!!C),!S[f])for(var N=0;N<=f;N++)S[N]||(S[N]={});S[f].vx==E&&S[f].vy==w&&S[f].el===P||(S[f].el=P,S[f].vx=E,S[f].vy=w,clearInterval(S[f].pid),!P||0==E&&0==w||(p=!0,S[f].pid=setInterval(function(){n&&0===this.layer&&(vt.active._emulateDragOver(!0),vt.active._onTouchMove(y,!0));var e=S[this.layer].vy?S[this.layer].vy*r:0,i=S[this.layer].vx?S[this.layer].vx*r:0;"function"==typeof h&&"continue"!==h.call(o,i,e,t,y,S[this.layer].el)||at(S[this.layer].el,i,e)}.bind({layer:f}),24))),f++}while(e.bubbleScroll&&m!==d&&(m=st(m,!1)));M=p}}),30),ct=function(){S.forEach((function(t){clearInterval(t.pid)})),S=[]},ht=function(t){function e(t,i){return function(n,o,s,r){var a=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==t&&(i||a))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(n,o,s,r),i)(n,o,s,r);var l=(i?n:o).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},n=t.group;n&&"object"==typeof n||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},ut=function(e){t&&t.parentNode&&t.parentNode[G]&&t.parentNode[G]._computeIsAligned(e)},dt=function(t,e){for(var i=e;!i[G];)i=i.parentNode;return t===i},pt=function(t,e,i){for(var n=t.parentNode;n&&!n[G];)n=n.parentNode;n&&n[G][i](Ut(e,{artificialBubble:!0}))},ft=function(){!J&&i&&Lt(i,"display","none")},mt=function(){!J&&i&&Lt(i,"display","")};U.addEventListener("click",(function(t){if(A)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),A=!1,!1}),!0);var gt,_t=function(e){if(e=e.touches?e.touches[0]:e,t){var i=function(t,e){for(var i=0;i<I.length;i++)if(!kt(I[i])){var n=Bt(I[i]),o=I[i][G].options.emptyInsertThreshold,s=t>=n.left-o&&t<=n.right+o,r=e>=n.top-o&&e<=n.bottom+o;if(s&&r)return I[i]}}(e.clientX,e.clientY);i&&i[G]._onDragOver({clientX:e.clientX,clientY:e.clientY,target:i,rootEl:i})}};function vt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Ut({},e),t[G]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ot(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:j(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==vt.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var n in i)!(n in e)&&(e[n]=i[n]);for(var o in ht(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&K,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?wt(t,"pointerdown",this._onTapStart):(wt(t,"mousedown",this._onTapStart),wt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(wt(t,"dragover",this),wt(t,"dragenter",this)),I.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[])}function yt(t,e,i,n){if(t){i=i||U;do{if(null!=e&&(">"===e[0]&&t.parentNode===i&&Gt(t,e.substring(1))||Gt(t,e))||n&&t===i)return t;if(t===i)break}while(t=Et(t))}return null}function Et(t){return t.host&&t!==U&&t.host.nodeType?t.host:t.parentNode}function wt(t,e,i){t.addEventListener(e,i,q)}function bt(t,e,i){t.removeEventListener(e,i,q)}function xt(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(O," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(O," ")}}function Lt(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return U.defaultView&&U.defaultView.getComputedStyle?i=U.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function Ct(t){var e="";do{var i=Lt(t,"transform");i&&"none"!==i&&(e=i+" "+e)}while(t=t.parentNode);return window.DOMMatrix?new DOMMatrix(e):window.WebKitCSSMatrix?new WebKitCSSMatrix(e):window.CSSMatrix?new CSSMatrix(e):void 0}function Pt(t,e,i){if(t){var n=t.getElementsByTagName(e),o=0,s=n.length;if(i)for(;o<s;o++)i(n[o],o);return n}return[]}function St(t,e,i,o,s,r,a,l,c){var h,u=(t=t||e[G]).options,d="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||H||W?(h=U.createEvent("Event")).initEvent(i,!0,!0):h=new CustomEvent(i,{bubbles:!0,cancelable:!0}),h.to=s||e,h.from=r||e,h.item=o||e,h.clone=n,h.oldIndex=a,h.newIndex=l,h.originalEvent=c,h.pullMode=f?f.lastPutMode:void 0,e&&e.dispatchEvent(h),u[d]&&u[d].call(t,h)}function Mt(t,e,i,n,o,s,r,a){var l,c,h=t[G],u=h.options.onMove;return!window.CustomEvent||H||W?(l=U.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=o||e,l.relatedRect=s||Bt(e),l.willInsertAfter=a,l.originalEvent=r,t.dispatchEvent(l),u&&(c=u.call(h,l,r)),c}function Tt(t){t.draggable=!1}function At(){Q=!1}function It(e,n,o){for(var s=0,r=0,a=e.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==i&&a[r]!==t&&yt(a[r],o.draggable,e,!1)){if(s===n)return a[r];s++}r++}return null}function kt(t){for(var e=t.lastElementChild;e&&(e===i||"none"===e.style.display);)e=e.previousElementSibling;return e||null}function Rt(e){return Ot(t)<Ot(e)?1:-1}function Dt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function Ot(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==n&&i++;return i}function Gt(t,e){if(t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}function Nt(t,e){return function(){if(!gt){var i=arguments,n=this;gt=F((function(){1===i.length?t.call(n,i[0]):t.apply(n,i),gt=void 0}),e)}}}function Ut(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function jt(t){return B&&B.dom?B.dom(t).cloneNode(!0):z?z(t).clone(!0)[0]:t.cloneNode(!0)}function Ft(t){return F(t,0)}function zt(t){return clearTimeout(t)}function Bt(t,e,i,n){if(t.getBoundingClientRect||t===N){var o,s,r,a,l,c,h;if(t!==N&&t!==rt()?(s=(o=t.getBoundingClientRect()).top,r=o.left,a=o.bottom,l=o.right,c=o.height,h=o.width):(s=0,r=0,a=window.innerHeight,l=window.innerWidth,c=window.innerHeight,h=window.innerWidth),n&&t!==N&&(i=i||t.parentNode,!H))do{if(i&&i.getBoundingClientRect&&"none"!==Lt(i,"transform")){var u=i.getBoundingClientRect();s-=u.top+j(Lt(i,"border-top-width")),r-=u.left+j(Lt(i,"border-left-width")),a=s+o.height,l=r+o.width;break}}while(i=i.parentNode);if(e&&t!==N){var d=Ct(i||t),p=d&&d.a,f=d&&d.d;d&&(a=(s/=f)+(c/=f),l=(r/=p)+(h/=p))}return{top:s,left:r,bottom:a,right:l,width:h,height:c}}}function qt(t,e){for(var i=st(t,!0),n=Bt(t)[e];i;){var o=Bt(i)[e];if(!("top"===e||"left"===e?n>=o:n<=o))return i;if(i===rt())break;i=st(i,!1)}return!1}function Ht(t){var e=0,i=0,n=rt();if(t)do{var o=Ct(t),s=o.a,r=o.d;e+=t.scrollLeft*s,i+=t.scrollTop*r}while(t!==n&&(t=t.parentNode));return[e,i]}return wt(U,"dragover",_t),wt(U,"mousemove",_t),wt(U,"touchmove",_t),vt.prototype={constructor:vt,_computeIsAligned:function(e){var n;if(i&&!J?(ft(),n=U.elementFromPoint(e.clientX,e.clientY),mt()):n=e.target,n=yt(n,this.options.draggable,this.el,!1),!$&&t&&t.parentNode===this.el){for(var o,s,r,a,l,c,h,u,d=this.el.children,p=0;p<d.length;p++)yt(d[p],this.options.draggable,this.el,!1)&&d[p]!==n&&(d[p].sortableMouseAligned=(o=e.clientX,s=e.clientY,r=d[p],a=this._getDirection(e,null),this.options,l=void 0,c=void 0,h=void 0,u=void 0,l=Bt(r),c="vertical"===a?l.left:l.top,h="vertical"===a?l.right:l.bottom,c<(u="vertical"===a?o:s)&&u<h));yt(n,this.options.draggable,this.el,!0)||(w=null),$=!0,F((function(){$=!1}),30)}},_getDirection:function(e,i){return"function"==typeof this.options.direction?this.options.direction.call(this,e,i,t):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i,n=this,o=this.el,s=this.options,r=s.preventOnFilter,l=e.type,c=e.touches&&e.touches[0],h=(c||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||h,d=s.filter;if(function(t){nt.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var n=e[i];n.checked&&nt.push(n)}}(o),(!H||e.artificialBubble||dt(o,h))&&!t&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||s.disabled||u.isContentEditable))if(h=yt(h,s.draggable,o,!1)){if(a!==h){if(i=Ot(h,s.draggable),"function"==typeof d){if(d.call(this,e,h,this))return St(n,u,"filter",h,o,o,i),void(r&&e.cancelable&&e.preventDefault())}else if(d&&(d=d.split(",").some((function(t){if(t=yt(u,t.trim(),o,!1))return St(n,t,"filter",h,o,o,i),!0}))))return void(r&&e.cancelable&&e.preventDefault());s.handle&&!yt(u,s.handle,o,!1)||this._prepareDragStart(e,c,h,i)}}else H&&pt(o,e,"_onTapStart")}},_handleAutoScroll:function(e,i){if(t&&this.options.scroll){var n=e.clientX,o=e.clientY,s=U.elementFromPoint(n,o),r=this;if(i||W||H||Z){lt(e,r.options,s,i);var a=st(s,!0);!M||m&&n===g&&o===_||(m&&clearInterval(m),m=setInterval((function(){if(t){var s=st(U.elementFromPoint(n,o),!0);s!==a&&(a=s,ct(),lt(e,r.options,a,i))}}),10),g=n,_=o)}else{if(!r.options.bubbleScroll||st(s,!0)===rt())return void ct();lt(e,r.options,st(s,!1),!1)}}},_prepareDragStart:function(i,n,s,l){var c,h=this,d=h.el,f=h.options,m=d.ownerDocument;s&&!t&&s.parentNode===d&&(o=d,e=(t=s).parentNode,r=t.nextSibling,a=s,p=f.group,u=l,v={target:t,clientX:(n||i).clientX,clientY:(n||i).clientY},this._lastX=(n||i).clientX,this._lastY=(n||i).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",c=function(){h._disableDelayedDragEvents(),!V&&h.nativeDraggable&&(t.draggable=!0),h._triggerDragStart(i,n),St(h,o,"choose",t,o,o,u),xt(t,f.chosenClass,!0)},f.ignore.split(",").forEach((function(e){Pt(t,e.trim(),Tt)})),f.supportPointer?wt(m,"pointerup",h._onDrop):(wt(m,"mouseup",h._onDrop),wt(m,"touchend",h._onDrop),wt(m,"touchcancel",h._onDrop)),V&&this.nativeDraggable&&(this.options.touchStartThreshold=4,t.draggable=!0),!f.delay||this.nativeDraggable&&(W||H)?c():(wt(m,"mouseup",h._disableDelayedDrag),wt(m,"touchend",h._disableDelayedDrag),wt(m,"touchcancel",h._disableDelayedDrag),wt(m,"mousemove",h._delayedDragTouchMoveHandler),wt(m,"touchmove",h._delayedDragTouchMoveHandler),f.supportPointer&&wt(m,"pointermove",h._delayedDragTouchMoveHandler),h._dragStartTimer=F(c,f.delay)))},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;it(tt(e.clientX-this._lastX),tt(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){t&&Tt(t),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;bt(t,"mouseup",this._disableDelayedDrag),bt(t,"touchend",this._disableDelayedDrag),bt(t,"touchcancel",this._disableDelayedDrag),bt(t,"mousemove",this._delayedDragTouchMoveHandler),bt(t,"touchmove",this._delayedDragTouchMoveHandler),bt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||("touch"==e.pointerType?e:null),!this.nativeDraggable||i?this.options.supportPointer?wt(U,"pointermove",this._onTouchMove):wt(U,i?"touchmove":"mousemove",this._onTouchMove):(wt(t,"dragend",this),wt(o,"dragstart",this._onDragStart));try{U.selection?Ft((function(){U.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(e,i){if(T=!1,o&&t){this.nativeDraggable&&(wt(U,"dragover",this._handleAutoScroll),wt(U,"dragover",ut));var n=this.options;!e&&xt(t,n.dragClass,!1),xt(t,n.ghostClass,!0),Lt(t,"transform",""),vt.active=this,e&&this._appendGhost(),St(this,o,"start",t,o,o,u,void 0,i)}else this._nulling()},_emulateDragOver:function(e){if(y){if(this._lastX===y.clientX&&this._lastY===y.clientY&&!e)return;this._lastX=y.clientX,this._lastY=y.clientY,ft();for(var i=U.elementFromPoint(y.clientX,y.clientY),n=i;i&&i.shadowRoot;)n=i=i.shadowRoot.elementFromPoint(y.clientX,y.clientY);if(n)do{if(n[G])if(n[G]._onDragOver({clientX:y.clientX,clientY:y.clientY,target:i,rootEl:n})&&!this.options.dragoverBubble)break;i=n}while(n=n.parentNode);t.parentNode[G]._computeIsAligned(y),mt()}},_onTouchMove:function(t,e){if(v){var n=this.options,o=n.fallbackTolerance,s=n.fallbackOffset,r=t.touches?t.touches[0]:t,a=i&&Ct(i),l=i&&a&&a.a,c=i&&a&&a.d,h=Y&&C&&Ht(C),u=(r.clientX-v.clientX+s.x)/(l||1)+(h?h[0]-D[0]:0)/(l||1),d=(r.clientY-v.clientY+s.y)/(c||1)+(h?h[1]-D[1]:0)/(c||1),p=t.touches?"translate3d("+u+"px,"+d+"px,0)":"translate("+u+"px,"+d+"px)";if(!vt.active&&!T){if(o&&et(tt(r.clientX-this._lastX),tt(r.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}!e&&this._handleAutoScroll(r,!0),E=!0,y=r,Lt(i,"webkitTransform",p),Lt(i,"mozTransform",p),Lt(i,"msTransform",p),Lt(i,"transform",p),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!i){var e=this.options.fallbackOnBody?U.body:o,n=Bt(t,!0,e,!Y),s=(Lt(t),this.options);if(Y){for(C=e;"static"===Lt(C,"position")&&"none"===Lt(C,"transform")&&C!==U;)C=C.parentNode;if(C!==U){var r=Bt(C,!0);n.top-=r.top,n.left-=r.left}C!==U.body&&C!==U.documentElement?(C===U&&(C=rt()),n.top+=C.scrollTop,n.left+=C.scrollLeft):C=rt(),D=Ht(C)}xt(i=t.cloneNode(!0),s.ghostClass,!1),xt(i,s.fallbackClass,!0),xt(i,s.dragClass,!0),Lt(i,"box-sizing","border-box"),Lt(i,"margin",0),Lt(i,"top",n.top),Lt(i,"left",n.left),Lt(i,"width",n.width),Lt(i,"height",n.height),Lt(i,"opacity","0.8"),Lt(i,"position",Y?"absolute":"fixed"),Lt(i,"zIndex","100000"),Lt(i,"pointerEvents","none"),e.appendChild(i)}},_onDragStart:function(e,i){var s=this,r=e.dataTransfer,a=s.options;(n=jt(t)).draggable=!1,n.style["will-change"]="",this._hideClone(),xt(n,s.options.chosenClass,!1),s._cloneId=Ft((function(){s.options.removeCloneOnHide||o.insertBefore(n,t),St(s,o,"clone",t)})),!i&&xt(t,a.dragClass,!0),i?(A=!0,s._loopId=setInterval(s._emulateDragOver,50)):(bt(U,"mouseup",s._onDrop),bt(U,"touchend",s._onDrop),bt(U,"touchcancel",s._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(s,r,t)),wt(U,"drop",s),Lt(t,"transform","translateZ(0)")),T=!0,s._dragStartId=Ft(s._dragStarted.bind(s,i,e)),wt(U,"selectstart",s),Z&&Lt(U.body,"user-select","none")},_onDragOver:function(i){var n,s,a,l=this.el,c=i.target,h=this.options,d=h.group,m=vt.active,g=p===d,_=h.sort,v=this;if(!Q&&(!H||i.rootEl||i.artificialBubble||dt(l,c))){if(void 0!==i.preventDefault&&i.cancelable&&i.preventDefault(),E=!0,c=yt(c,h.draggable,l,!0),yt(i.target,null,t,!0)||c.animated)return q(!1);if(c!==t&&(A=!1),m&&!h.disabled&&(g?_||(a=!o.contains(t)):f===this||(this.lastPutMode=p.checkPull(this,m,t,i))&&d.checkPut(this,m,t,i))){var y=this._getDirection(i,c);if(n=Bt(t),a)return this._hideClone(),e=o,r?o.insertBefore(t,r):o.appendChild(t),q(!0);var C=kt(l);if(!C||function(t,e,i){var n=Bt(kt(i)),o="vertical"===e?t.clientY:t.clientX,s="vertical"===e?t.clientX:t.clientY,r="vertical"===e?n.bottom:n.right,a="vertical"===e?n.left:n.top,l="vertical"===e?n.right:n.bottom,c=10;return"vertical"===e?s>l+c||s<=l&&o>r&&s>=a:o>r&&s>a||o<=r&&s>l+c}(i,y,l)&&!C.animated){if(C&&l===i.target&&(c=C),c&&(s=Bt(c)),g?m._hideClone():m._showClone(this),!1!==Mt(o,l,t,n,c,s,i,!!c))return l.appendChild(t),e=l,P=null,W(),q(!0)}else if(c&&c!==t&&c.parentNode===l){var S,M=0,T=c.sortableMouseAligned,I=t.parentNode!==l,D="vertical"===y?"top":"left",O=qt(c,"top")||qt(t,"top"),N=O?O.scrollTop:void 0;if(w!==c&&(x=null,S=Bt(c)[D],k=!1),function(e,i,n){var o=e===t&&P||Bt(e),s=i===t&&P||Bt(i),r="vertical"===n?o.left:o.top,a="vertical"===n?o.right:o.bottom,l="vertical"===n?o.width:o.height,c="vertical"===n?s.left:s.top,h="vertical"===n?s.right:s.bottom,u="vertical"===n?s.width:s.height;return r===c||a===h||r+l/2===c+u/2}(t,c,y)&&T||I||O||h.invertSwap||"insert"===x||"swap"===x?("swap"!==x&&(R=h.invertSwap||I),M=function(e,i,n,o,s,r,a){var l=Bt(i),c="vertical"===n?e.clientY:e.clientX,h="vertical"===n?l.height:l.width,u="vertical"===n?l.top:l.left,d="vertical"===n?l.bottom:l.right,p=Bt(t),f=!1;if(!r)if(a&&L<h*o)if(!k&&(1===b?c>u+h*s/2:c<d-h*s/2)&&(k=!0),k)f=!0;else{"vertical"===n?p.top:p.left,"vertical"===n?p.bottom:p.right;if(1===b?c<u+L:c>d-L)return-1*b}else if(c>u+h*(1-o)/2&&c<d-h*(1-o)/2)return Rt(i);if((f=f||r)&&(c<u+h*s/2||c>d-h*s/2))return c>u+h/2?1:-1;return 0}(i,c,y,h.swapThreshold,null==h.invertedSwapThreshold?h.swapThreshold:h.invertedSwapThreshold,R,w===c),x="swap"):(M=Rt(c),x="insert"),0===M)return q(!1);P=null,w=c,b=M,s=Bt(c);var j=c.nextElementSibling,z=!1,B=Mt(o,l,t,n,c,s,i,z=1===M);if(!1!==B)return 1!==B&&-1!==B||(z=1===B),Q=!0,F(At,30),g?m._hideClone():m._showClone(this),z&&!j?l.appendChild(t):c.parentNode.insertBefore(t,z?j:c),O&&at(O,0,N-O.scrollTop),e=t.parentNode,void 0===S||R||(L=tt(S-Bt(c)[D])),W(),q(!0)}if(l.contains(t))return q(!1)}return H&&!i.rootEl&&pt(l,i,"_onDragOver"),!1}function q(e){return e&&(g?m._hideClone():m._showClone(v),m&&(xt(t,f?f.options.ghostClass:m.options.ghostClass,!1),xt(t,h.ghostClass,!0)),f!==v&&v!==vt.active?f=v:v===vt.active&&(f=null),n&&v._animate(n,t),c&&s&&v._animate(s,c)),(c===t&&!t.animated||c===l&&!c.animated)&&(w=null),h.dragoverBubble||i.rootEl||c===U||(v._handleAutoScroll(i),t.parentNode[G]._computeIsAligned(i)),!h.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),!0}function W(){St(v,o,"change",c,l,o,u,Ot(t,h.draggable),i)}},_animate:function(e,i){var n=this.options.animation;if(n){var o=Bt(i);if(i===t&&(P=o),1===e.nodeType&&(e=Bt(e)),e.left+e.width/2!==o.left+o.width/2||e.top+e.height/2!==o.top+o.height/2){var s=Ct(this.el),r=s&&s.a,a=s&&s.d;Lt(i,"transition","none"),Lt(i,"transform","translate3d("+(e.left-o.left)/(r||1)+"px,"+(e.top-o.top)/(a||1)+"px,0)"),i.offsetWidth,Lt(i,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),Lt(i,"transform","translate3d(0,0,0)")}"number"==typeof i.animated&&clearTimeout(i.animated),i.animated=F((function(){Lt(i,"transition",""),Lt(i,"transform",""),i.animated=!1}),n)}},_offUpEvents:function(){var t=this.el.ownerDocument;bt(U,"touchmove",this._onTouchMove),bt(U,"pointermove",this._onTouchMove),bt(t,"mouseup",this._onDrop),bt(t,"touchend",this._onDrop),bt(t,"pointerup",this._onDrop),bt(t,"touchcancel",this._onDrop),bt(U,"selectstart",this)},_onDrop:function(s){var a=this.el,l=this.options;T=!1,M=!1,R=!1,k=!1,clearInterval(this._loopId),clearInterval(m),ct(),clearTimeout(gt),gt=void 0,clearTimeout(this._dragStartTimer),zt(this._cloneId),zt(this._dragStartId),bt(U,"mousemove",this._onTouchMove),this.nativeDraggable&&(bt(U,"drop",this),bt(a,"dragstart",this._onDragStart),bt(U,"dragover",this._handleAutoScroll),bt(U,"dragover",ut)),Z&&Lt(U.body,"user-select",""),this._offUpEvents(),s&&(E&&(s.cancelable&&s.preventDefault(),!l.dropBubble&&s.stopPropagation()),i&&i.parentNode&&i.parentNode.removeChild(i),(o===e||f&&"clone"!==f.lastPutMode)&&n&&n.parentNode&&n.parentNode.removeChild(n),t&&(this.nativeDraggable&&bt(t,"dragend",this),Tt(t),t.style["will-change"]="",xt(t,f?f.options.ghostClass:this.options.ghostClass,!1),xt(t,this.options.chosenClass,!1),St(this,o,"unchoose",t,e,o,u,null,s),o!==e?((d=Ot(t,l.draggable))>=0&&(St(null,e,"add",t,e,o,u,d,s),St(this,o,"remove",t,e,o,u,d,s),St(null,e,"sort",t,e,o,u,d,s),St(this,o,"sort",t,e,o,u,d,s)),f&&f.save()):t.nextSibling!==r&&(d=Ot(t,l.draggable))>=0&&(St(this,o,"update",t,e,o,u,d,s),St(this,o,"sort",t,e,o,u,d,s)),vt.active&&(null!=d&&-1!==d||(d=u),St(this,o,"end",t,e,o,u,d,s),this.save()))),this._nulling()},_nulling:function(){o=t=e=i=r=n=a=l=c=S.length=m=g=_=v=y=E=d=u=w=b=P=f=p=vt.active=null,nt.forEach((function(t){t.checked=!0})),nt.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":t&&(this._onDragOver(e),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,o=i.length,s=this.options;n<o;n++)yt(t=i[n],s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Dt(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach((function(t,n){var o=i.children[n];yt(o,this.options.draggable,i,!1)&&(e[t]=o)}),this),t.forEach((function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return yt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];i[t]=e,"group"===t&&ht(i)},destroy:function(){var t=this.el;t[G]=null,bt(t,"mousedown",this._onTapStart),bt(t,"touchstart",this._onTapStart),bt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(bt(t,"dragover",this),bt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),I.splice(I.indexOf(this.el),1),this.el=t=null},_hideClone:function(){n.cloneHidden||(Lt(n,"display","none"),n.cloneHidden=!0,n.parentNode&&this.options.removeCloneOnHide&&n.parentNode.removeChild(n))},_showClone:function(e){"clone"===e.lastPutMode?n.cloneHidden&&(o.contains(t)&&!this.options.group.revertClone?o.insertBefore(n,t):r?o.insertBefore(n,r):o.appendChild(n),this.options.group.revertClone&&this._animate(t,n),Lt(n,"display",""),n.cloneHidden=!1):this._hideClone()}},wt(U,"touchmove",(function(t){(vt.active||T)&&t.cancelable&&t.preventDefault()})),vt.utils={on:wt,off:bt,css:Lt,find:Pt,is:function(t,e){return!!yt(t,e,t,!1)},extend:Ut,throttle:Nt,closest:yt,toggleClass:xt,clone:jt,index:Ot,nextTick:Ft,cancelNextTick:zt,detectDirection:ot,getChild:It},vt.create=function(t,e){return new vt(t,e)},vt.version="1.8.4",vt}))},183:function(t,e,i){var n=i(755);t.exports=function(){"use strict";function t(t,e){t.split(/\s+/).forEach((t=>{e(t)}))}class e{constructor(){this._events={}}on(e,i){t(e,(t=>{this._events[t]=this._events[t]||[],this._events[t].push(i)}))}off(e,i){var n=arguments.length;0!==n?t(e,(t=>{if(1===n)return delete this._events[t];t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(i),1)})):this._events={}}trigger(e,...i){var n=this;t(e,(t=>{if(t in n._events!=0)for(let e of n._events[t])e.apply(n,i)}))}}function i(t){return t.plugins={},class extends t{constructor(...t){super(...t),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,i){t.plugins[e]={name:e,fn:i}}initializePlugins(t){var e,i,n;const o=this,s=[];if(Array.isArray(t))for(e=0,i=t.length;e<i;e++)"string"==typeof t[e]?s.push(t[e]):(o.plugins.settings[t[e].name]=t[e].options,s.push(t[e].name));else if(t)for(n in t)t.hasOwnProperty(n)&&(o.plugins.settings[n]=t[n],s.push(n));for(;s.length;)o.require(s.shift())}loadPlugin(e){var i=this,n=i.plugins,o=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');n.requested[e]=!0,n.loaded[e]=o.fn.apply(i,[i.plugins.settings[e]||{}]),n.names.push(e)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}var o=[[67,67],[160,160],[192,438],[452,652],[961,961],[1019,1019],[1083,1083],[1281,1289],[1984,1984],[5095,5095],[7429,7441],[7545,7549],[7680,7935],[8580,8580],[9398,9449],[11360,11391],[42792,42793],[42802,42851],[42873,42897],[42912,42922],[64256,64260],[65313,65338],[65345,65370]];function s(t){return t.normalize("NFD").replace(/[\u0300-\u036F]/g,"").normalize("NFKD").toLowerCase()}function r(){var t={l·:"l",ʼn:"n",æ:"ae",ø:"o",aʾ:"a",dž:"dz"},e={};return o.forEach((i=>{for(let n=i[0];n<=i[1];n++){let i=String.fromCharCode(n),o=i.normalize("NFD").replace(/[\u0300-\u036F]/g,"").normalize("NFKD");o!=i&&(o=o.toLowerCase(),o in t&&(o=t[o]),o in e||(e[o]=o+o.toUpperCase()),e[o]+=i)}})),e}var a=null;function l(t){null===a&&(a=r());for(let e in a)a.hasOwnProperty(e)&&(t=t.replace(new RegExp(e,"g"),"["+a[e]+"]"));return t}function c(t,e){if(t)return t[e]}function h(t,e){if(t){for(var i=e.split(".");i.length&&(t=t[i.shift()]););return t}}function u(t,e,i){var n,o;return t?-1===(o=(t+="").search(e.regex))?0:(n=e.string.length/t.length,0===o&&(n+=.5),n*i):0}function d(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function p(t,e){var i=t[e];i&&!Array.isArray(i)&&(t[e]=[i])}function f(t,e){if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)}function m(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=s(t+"").toLowerCase())>(e=s(e+"").toLowerCase())?1:e>t?-1:0}class g{constructor(t,e){this.items=void 0,this.settings=void 0,this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const n=[],o=t.split(/\s+/);var s;return i&&(s=new RegExp("^("+Object.keys(i).map(d).join("|")+"):(.*)$")),o.forEach((t=>{let i,o=null,r=null;s&&(i=t.match(s))&&(o=i[1],t=i[2]),t.length>0&&(r=d(t),this.settings.diacritics&&(r=l(r)),e&&(r="\\b"+r),r=new RegExp(r,"i")),n.push({string:t,regex:r,field:o})})),n}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const n=t.options.fields,o=t.weights,s=n.length,r=t.getAttrFn;if(!s)return function(){return 1};const a=1===s?function(t,e){const i=n[0].field;return u(r(e,i),t,o[i])}:function(t,e){var i=0;if(t.field){const n=r(e,t.field);!t.regex&&n?i+=1/s:i+=u(n,t,1)}else f(o,((n,o)=>{i+=u(r(e,o),t,n)}));return i/s};return 1===i?function(t){return a(e[0],t)}:"and"===t.options.conjunction?function(t){for(var n,o=0,s=0;o<i;o++){if((n=a(e[o],t))<=0)return 0;s+=n}return s/i}:function(t){var n=0;return f(e,(e=>{n+=a(e,t)})),n/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i,n,o,s,r;const a=this,l=t.options,c=!t.query&&l.sort_empty||l.sort,h=[],u=[],d=function(e,i){return"$score"===e?i.score:t.getAttrFn(a.items[i.id],e)};if(c)for(e=0,i=c.length;e<i;e++)(t.query||"$score"!==c[e].field)&&h.push(c[e]);if(t.query){for(r=!0,e=0,i=h.length;e<i;e++)if("$score"===h[e].field){r=!1;break}r&&h.unshift({field:"$score",direction:"desc"})}else for(e=0,i=h.length;e<i;e++)if("$score"===h[e].field){h.splice(e,1);break}for(e=0,i=h.length;e<i;e++)u.push("desc"===h[e].direction?-1:1);return(o=h.length)?1===o?(n=h[0].field,s=u[0],function(t,e){return s*m(d(n,t),d(n,e))}):function(t,e){var i,n,s;for(i=0;i<o;i++)if(s=h[i].field,n=u[i]*m(d(s,t),d(s,e)))return n;return 0}:null}prepareSearch(t,e){const i={};var n=Object.assign({},e);if(p(n,"sort"),p(n,"sort_empty"),n.fields){if(p(n,"fields"),Array.isArray(n.fields)&&"object"!=typeof n.fields[0]){var o=[];n.fields.forEach((t=>{o.push({field:t})})),n.fields=o}n.fields.forEach((t=>{i[t.field]="weight"in t?t.weight:1}))}return{options:n,query:t=s(t+"").toLowerCase().trim(),tokens:this.tokenize(t,n.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:n.nesting?h:c}}search(t,e){var i,n,o,s,r=this;return n=this.prepareSearch(t,e),e=n.options,t=n.query,s=e.score||r._getScoreFunction(n),t.length?f(r.items,((t,o)=>{i=s(t),(!1===e.filter||i>0)&&n.items.push({score:i,id:o})})):f(r.items,((t,e)=>{n.items.push({score:1,id:e})})),(o=r._getSortFunction(n))&&n.items.sort(o),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n}}const _=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(t.indexOf("<")>-1){let e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}return document.querySelector(t)},v=t=>t.replace(/['"\\]/g,"\\$&"),y=(t,e)=>{var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)},E=(t,e)=>{Object.assign(t.style,e)},w=(t,...e)=>{var i=x(e);(t=L(t)).map((t=>{i.map((e=>{t.classList.add(e)}))}))},b=(t,...e)=>{var i=x(e);(t=L(t)).map((t=>{i.map((e=>{t.classList.remove(e)}))}))},x=t=>{var e=[];for(let i of t)"string"==typeof i&&(i=i.trim().split(/[\11\12\14\15\40]/)),Array.isArray(i)&&(e=e.concat(i));return e.filter(Boolean)},L=t=>(Array.isArray(t)||(t=[t]),t),C=(t,e,i)=>{if(!i||i.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},P=(t,e=0)=>e>0?t[t.length-1]:t[0],S=t=>0===Object.keys(t).length,M=(t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i},T=(t,e)=>{for(const i in e){let n=e[i];null==n?t.removeAttribute(i):t.setAttribute(i,n)}},A=(t,e)=>{t.parentNode&&t.parentNode.replaceChild(e,t)},I=(t,e)=>{if(null===e)return;if("string"==typeof e){if(!e.length)return;e=new RegExp(e,"i")}const i=t=>{var i=t.data.match(e);if(i&&t.data.length>0){var n=document.createElement("span");n.className="highlight";var o=t.splitText(i.index);o.splitText(i[0].length);var s=o.cloneNode(!0);return n.appendChild(s),A(o,n),1}return 0},n=t=>{if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName))for(var e=0;e<t.childNodes.length;++e)e+=o(t.childNodes[e])},o=t=>3===t.nodeType?i(t):(n(t),0);o(t)},k=t=>{var e=t.querySelectorAll("span.highlight");Array.prototype.forEach.call(e,(function(t){var e=t.parentNode;e.replaceChild(t.firstChild,t),e.normalize()}))},R=65,D=13,O=27,G=37,N=38,U=39,j=40,F=8,z=46,B=9,q="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var H={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,closeAfterSelect:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-control",inputClass:"ts-input",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:null,copyClassesToDropdown:!0,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};const W=t=>null==t?null:V(t),V=t=>"boolean"==typeof t?t?"1":"0":t+"",Z=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Y=(t,e)=>{var i;return function(n,o){var s=this;i&&(s.loading=Math.max(s.loading-1,0),clearTimeout(i)),i=setTimeout((function(){i=null,s.loadedSearches[n]=!0,t.call(s,n,o)}),e)}},X=(t,e,i)=>{var n,o=t.trigger,s={};for(n in t.trigger=function(){var i=arguments[0];if(-1===e.indexOf(i))return o.apply(t,arguments);s[i]=arguments},i.apply(t,[]),t.trigger=o,s)o.apply(t,s[n])},K=t=>({start:t.selectionStart||0,length:(t.selectionEnd||0)-(t.selectionStart||0)}),J=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},Q=(t,e,i,n)=>{t.addEventListener(e,i,n)},$=(t,e)=>!!e&&!!e[t]&&1==(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0),tt=(t,e)=>{const i=t.getAttribute("id");return i||(t.setAttribute("id",e),e)},et=t=>t.replace(/[\\"']/g,"\\$&");function it(t,e){var i=Object.assign({},H,e),n=i.dataAttr,o=i.labelField,s=i.valueField,r=i.disabledField,a=i.optgroupField,l=i.optgroupLabelField,c=i.optgroupValueField,h=t.tagName.toLowerCase(),u=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!u&&!i.allowEmptyOption){let e=t.querySelector('option[value=""]');e&&(u=e.textContent)}var d={placeholder:u,options:[],optgroups:[],items:[],maxItems:null},p=()=>{var e,r,a=t.getAttribute(n);if(a){d.options=JSON.parse(a);for(const t of d.options)d.items.push(t[s])}else{var l=t.value.trim()||"";if(!i.allowEmptyOption&&!l.length)return;e=l.split(i.delimiter);for(const t of e)(r={})[o]=t,r[s]=t,d.options.push(r);d.items=e}};return"select"===h?(()=>{var e,h=d.options,u={},p=1,f=t=>{var e=Object.assign({},t.dataset),i=n&&e[n];return"string"==typeof i&&i.length&&(e=Object.assign(e,JSON.parse(i))),e},m=(t,e)=>{var n=W(t.value);if(null!=n&&(n||i.allowEmptyOption)){if(u.hasOwnProperty(n)){if(e){var l=u[n][a];l?Array.isArray(l)?l.push(e):u[n][a]=[l,e]:u[n][a]=e}}else{var c=f(t);c[o]=c[o]||t.textContent,c[s]=c[s]||n,c[r]=c[r]||t.disabled,c[a]=c[a]||e,c.$option=t,u[n]=c,h.push(c)}t.selected&&d.items.push(n)}},g=t=>{var e,i;(i=f(t))[l]=i[l]||t.getAttribute("label")||"",i[c]=i[c]||p++,i[r]=i[r]||t.disabled,d.optgroups.push(i),e=i[c];for(const i of t.children)m(i,e)};d.maxItems=t.hasAttribute("multiple")?null:1;for(const i of t.children)"optgroup"===(e=i.tagName.toLowerCase())?g(i):"option"===e&&m(i)})():p(),Object.assign({},H,d,e)}var nt=0;class ot extends(i(e)){constructor(t,e){var i;super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.tab_key=!1,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.hasOptions=!1,this.currentResults=null,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.renderCache={item:{},option:{}},nt++;var n=_(t);if(n.tomselect)throw new Error("Tom Select already initialized on this element");n.tomselect=this,i=(window.getComputedStyle&&window.getComputedStyle(n,null)).getPropertyValue("direction"),this.settings=it(n,e),this.input=n,this.tabIndex=n.tabIndex||0,this.is_select_tag="select"===n.tagName.toLowerCase(),this.rtl=/rtl/i.test(i),this.inputId=tt(n,"tomselect-"+nt),this.isRequired=n.required,this.sifter=new g(this.options,{diacritics:this.settings.diacritics}),this.setupOptions(this.settings.options,this.settings.optgroups),delete this.settings.optgroups,delete this.settings.options,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),"boolean"!=typeof this.settings.hidePlaceholder&&(this.settings.hidePlaceholder="multi"!==this.settings.mode);var o=this.settings.createFilter;"function"!=typeof o&&("string"==typeof o&&(o=new RegExp(o)),o instanceof RegExp?this.settings.createFilter=t=>o.test(t):this.settings.createFilter=()=>!0),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()}setup(){var t,e,i,n,o,s,r,a,l,c=this,h=c.settings,u=c.input;const p={passive:!0},f=c.inputId+"-ts-dropdown";if(s=c.settings.mode,r=u.getAttribute("class")||"",t=_("<div>"),w(t,h.wrapperClass,r,s),e=_('<div class="items">'),w(e,h.inputClass),t.append(e),n=c._render("dropdown"),w(n,h.dropdownClass,s),o=_(`<div role="listbox" id="${f}" tabindex="-1">`),w(o,h.dropdownContentClass),n.append(o),_(h.dropdownParent||t).appendChild(n),h.controlInput)i=_(h.controlInput);else{i=_('<input type="text" autocomplete="off" size="1" />');var m=["autocorrect","autocapitalize","autocomplete"];for(const t of m)u.getAttribute(t)&&T(i,{[t]:u.getAttribute(t)})}h.controlInput||(i.tabIndex=u.disabled?-1:c.tabIndex,e.appendChild(i)),T(i,{role:"combobox",haspopup:"listbox","aria-expanded":"false","aria-controls":f}),l=tt(i,c.inputId+"-tomselected");let g="label[for='"+v(c.inputId)+"']",y=document.querySelector(g);if(y){T(y,{for:l});let t=tt(y,c.inputId+"-ts-label");T(o,{"aria-labelledby":t})}c.settings.copyClassesToDropdown&&w(n,r),t.style.width=u.style.width,c.plugins.names.length&&(a="plugin-"+c.plugins.names.join(" plugin-"),w([t,n],a)),(null===h.maxItems||h.maxItems>1)&&c.is_select_tag&&T(u,{multiple:"multiple"}),c.settings.placeholder&&T(i,{placeholder:h.placeholder}),!c.settings.splitOn&&c.settings.delimiter&&(c.settings.splitOn=new RegExp("\\s*"+d(c.settings.delimiter)+"+\\s*")),this.settings.load&&this.settings.loadThrottle&&(this.settings.load=Y(this.settings.load,this.settings.loadThrottle)),c.control=e,c.control_input=i,c.wrapper=t,c.dropdown=n,c.dropdown_content=o,c.control_input.type=u.type,Q(n,"click",(t=>{const e=C(t.target,"[data-selectable]");e&&(c.onOptionSelect(t,e),J(t,!0))})),Q(e,"click",(t=>{var n=C(t.target,"."+c.settings.itemClass,e);n&&c.onItemSelect(t,n)?J(t,!0):""==i.value&&(c.onClick(),J(t,!0))})),Q(i,"mousedown",(t=>{""!==i.value&&t.stopPropagation()})),Q(i,"keydown",(t=>c.onKeyDown(t))),Q(i,"keyup",(t=>c.onKeyUp(t))),Q(i,"keypress",(t=>c.onKeyPress(t))),Q(i,"resize",(()=>c.positionDropdown()),p),Q(i,"blur",(()=>c.onBlur())),Q(i,"focus",(t=>c.onFocus(t))),Q(i,"paste",(t=>c.onPaste(t)));const E=e=>{if(!t.contains(e.target)&&!n.contains(e.target))return c.isFocused&&c.blur(),void c.inputState();J(e,!0)};var b=()=>{c.isOpen&&c.positionDropdown()};Q(document,"mousedown",(t=>E(t))),Q(window,"sroll",b,p),Q(window,"resize",b,p),c._destroy=()=>{document.removeEventListener("mousedown",E),window.removeEventListener("sroll",b),window.removeEventListener("resize",b)},this.revertSettings={innerHTML:u.innerHTML,tabIndex:u.tabIndex},u.tabIndex=-1,T(u,{hidden:"hidden"}),u.insertAdjacentElement("afterend",c.wrapper),c.setValue(h.items),h.items=[],Q(u,"invalid",(t=>{J(t),c.isInvalid||(c.isInvalid=!0,c.refreshState())})),c.updateOriginalInput(),c.refreshItems(),c.close(!1),c.inputState(),c.isSetup=!0,u.disabled&&c.disable(),c.on("change",this.onChange),w(u,"tomselected"),c.trigger("initialize"),!0===h.preload&&c.load("")}setupOptions(t=[],e=[]){for(const e of t)this.registerOption(e);for(const t of e)this.registerOptionGroup(t)}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,n={optgroup:t=>{let e=document.createElement("div");return e.className="optgroup",e.appendChild(t.options),e},optgroup_header:(t,e)=>'<div class="optgroup-header">'+e(t[i])+"</div>",option:(t,i)=>"<div>"+i(t[e])+"</div>",item:(t,i)=>"<div>"+i(t[e])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},n,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)(e=this.settings[i[t]])&&this.on(t,e)}onClick(){var t=this;if(t.activeItems.length>0)return t.clearActiveItems(),void t.focus();t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){y(this.input,"input"),y(this.input,"change")}onPaste(t){var e=this;e.isFull()||e.isInputHidden||e.isLocked?J(t):e.settings.splitOn&&setTimeout((()=>{var t=e.inputValue();if(t.match(e.settings.splitOn)){var i=t.trim().split(e.settings.splitOn);for(const t of i)e.createItem(t)}}),0)}onKeyPress(t){var e=this;if(!e.isLocked){var i=String.fromCharCode(t.keyCode||t.which);return e.settings.create&&"multi"===e.settings.mode&&i===e.settings.delimiter?(e.createItem(),void J(t)):void 0}J(t)}onKeyDown(t){var e=this;if(e.isLocked)t.keyCode!==B&&J(t);else{switch(t.keyCode){case R:if($(q,t))return void e.selectAll();break;case O:return e.isOpen&&(J(t,!0),e.close()),void e.clearActiveItems();case j:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let t=e.getAdjacent(e.activeOption,1);t&&e.setActiveOption(t)}return void J(t);case N:if(e.activeOption){let t=e.getAdjacent(e.activeOption,-1);t&&e.setActiveOption(t)}return void J(t);case D:return void(e.isOpen&&e.activeOption?(e.onOptionSelect(t,e.activeOption),J(t)):e.settings.create&&e.createItem()&&J(t));case G:return void e.advanceSelection(-1,t);case U:return void e.advanceSelection(1,t);case B:return void(e.settings.selectOnTab&&(e.isOpen&&e.activeOption&&(e.tab_key=!0,e.onOptionSelect(t,e.activeOption),J(t),e.tab_key=!1),e.settings.create&&e.createItem()&&J(t)));case F:case z:return void e.deleteSelection(t)}e.isInputHidden&&!$(q,t)&&J(t)}}onKeyUp(t){var e=this;if(e.isLocked)J(t);else{var i=e.inputValue();e.lastValue!==i&&(e.lastValue=i,e.settings.shouldLoad.call(e,i)&&e.load(i),e.refreshOptions(),e.trigger("type",i))}}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled)return e.blur(),void J(t);e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.load(""),i||e.trigger("focus"),e.activeItems.length||(e.showInput(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var e=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,!1,e):e()}}onOptionSelect(t,e){var i,n=this;e&&(e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?n.createItem(null,!0,(()=>{n.settings.closeAfterSelect&&n.close()})):void 0!==(i=e.dataset.value)&&(n.lastQuery=null,n.addItem(i),n.settings.closeAfterSelect&&n.close(),!n.settings.hideSelected&&t.type&&/click/.test(t.type)&&n.setActiveOption(e))))}onItemSelect(t,e){var i=this;return!i.isLocked&&"multi"===i.settings.mode&&(J(t),i.setActiveItem(e,t),!0)}canLoad(t){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(t)}load(t){const e=this;if(!e.canLoad(t))return;w(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||b(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}setTextboxValue(t=""){var e=this.control_input;e.value!==t&&(e.value=t,y(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){X(this,e?[]:["change"],(()=>{this.clear(e),this.addItems(t,e)}))}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i,n,o,s,r,a,l=this;if("single"!==l.settings.mode){if(!t)return l.clearActiveItems(),void(l.isFocused&&l.showInput());if("click"===(i=e&&e.type.toLowerCase())&&$("shiftKey",e)&&l.activeItems.length){for(a=l.getLastActive(),(o=Array.prototype.indexOf.call(l.control.children,a))>(s=Array.prototype.indexOf.call(l.control.children,t))&&(r=o,o=s,s=r),n=o;n<=s;n++)t=l.control.children[n],-1===l.activeItems.indexOf(t)&&l.setActiveItemClass(t);J(e)}else"click"===i&&$(q,e)||"keydown"===i&&$("shiftKey",e)?t.classList.contains("active")?l.removeActiveItem(t):l.setActiveItemClass(t):(l.clearActiveItems(),l.setActiveItemClass(t));l.hideInput(),l.isFocused||l.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&b(i,"last-active"),w(t,"active last-active"),e.trigger("item_select",t),-1==e.activeItems.indexOf(t)&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),b(t,"active")}clearActiveItems(){b(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,T(this.control_input,{"aria-activedescendant":t.getAttribute("id")}),T(t,{"aria-selected":"true"}),w(t,"active"),this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,n=i.clientHeight,o=i.scrollTop||0,s=t.offsetHeight,r=t.getBoundingClientRect().top-i.getBoundingClientRect().top+o;r+s>n+o?this.scroll(r-n+s,e):r<o&&this.scroll(r,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(b(this.activeOption,"active"),T(this.activeOption,{"aria-selected":null})),this.activeOption=null,T(this.control_input,{"aria-activedescendant":null})}selectAll(){"single"!==this.settings.mode&&(this.activeItems=this.controlChildren(),this.activeItems.length&&(w(this.activeItems,"active"),this.hideInput(),this.close()),this.focus())}inputState(){var t=this;t.settings.controlInput||(t.activeItems.length>0||!t.isFocused&&this.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0,w(t.wrapper,"input-hidden")):(t.isInputHidden=!1,b(t.wrapper,"input-hidden")))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.focus(),setTimeout((()=>{t.ignoreFocus=!1,t.onFocus()}),0))}blur(){this.control_input.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return"string"==typeof t.sortField&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,n,o=this,s=this.getSearchOptions();if(o.settings.score&&"function"!=typeof(n=o.settings.score.call(o,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(t!==o.lastQuery?(o.lastQuery=t,i=o.sifter.search(t,Object.assign(s,{score:n})),o.currentResults=i):i=Object.assign({},o.currentResults),o.settings.hideSelected)for(e=i.items.length-1;e>=0;e--){let t=W(i.items[e].id);t&&-1!==o.items.indexOf(t)&&i.items.splice(e,1)}return i}refreshOptions(t=!0){var e,i,n,o,s,r,a,l,c,h,u;const d={},p=[];var f=this,m=f.inputValue(),g=f.search(m),_=f.activeOption,v=f.settings.shouldOpen||!1,y=f.dropdown_content;for(_&&(c=_.dataset.value,h=_.closest("[data-group]")),o=g.items.length,"number"==typeof f.settings.maxOptions&&(o=Math.min(o,f.settings.maxOptions)),o>0&&(v=!0),e=0;e<o;e++){let t=f.options[g.items[e].id],o=V(t[f.settings.valueField]),a=f.getOption(o);for(a||(a=f._render("option",t)),f.settings.hideSelected||a.classList.toggle("selected",f.items.includes(o)),s=t[f.settings.optgroupField]||"",i=0,n=(r=Array.isArray(s)?s:[s])&&r.length;i<n;i++)s=r[i],f.optgroups.hasOwnProperty(s)||(s=""),d.hasOwnProperty(s)||(d[s]=document.createDocumentFragment(),p.push(s)),i>0&&(a=a.cloneNode(!0),T(a,{id:t.$id+"-clone-"+i,"aria-selected":null}),a.classList.add("ts-cloned"),b(a,"active")),c==o&&h&&h.dataset.group===s&&(_=a),d[s].appendChild(a)}for(s of(this.settings.lockOptgroupOrder&&p.sort(((t,e)=>(f.optgroups[t]&&f.optgroups[t].$order||0)-(f.optgroups[e]&&f.optgroups[e].$order||0))),a=document.createDocumentFragment(),p))if(f.optgroups.hasOwnProperty(s)&&d[s].children.length){let t=document.createDocumentFragment(),e=f.render("optgroup_header",f.optgroups[s]);e&&t.append(e),t.append(d[s]);let i=f.render("optgroup",{group:f.optgroups[s],options:t});a.append(i)}else a.append(d[s]);if(y.innerHTML="",y.append(a),f.settings.highlight&&(k(y),g.query.length&&g.tokens.length))for(const t of g.tokens)I(y,t.regex);var E=t=>{let e=f.render(t,{input:m});return e&&(v=!0,y.insertBefore(e,y.firstChild)),e};if(f.settings.shouldLoad.call(f,m)?f.loading?E("loading"):0===g.items.length&&E("no_results"):E("not_loading"),(l=f.canCreate(m))&&(u=E("option_create")),f.hasOptions=g.items.length>0||l,v){if(g.items.length>0){if(!y.contains(_)&&"single"===f.settings.mode&&f.items.length&&(_=f.getOption(f.items[0])),!y.contains(_)){let t=0;u&&!f.settings.addPrecedence&&(t=1),_=f.selectable()[t]}}else _=u;t&&!f.isOpen&&(f.open(),f.scrollToOption(_,"auto")),f.setActiveOption(_)}else f.clearActiveOption(),t&&f.isOpen&&f.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t){var e,i=this;if(Array.isArray(t))for(const e of t)i.addOption(e);else(e=i.registerOption(t))&&(i.userOptions[e]=!0,i.lastQuery=null,i.trigger("option_add",e,t))}registerOption(t){var e=W(t[this.settings.valueField]);return null!==e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,t.$id=this.inputId+"-opt-"+t.$order,this.options[e]=t,e)}registerOptionGroup(t){var e=W(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var n,o;const s=W(t);if(null===s)return;const r=W(e[i.settings.valueField]),a=i.getOption(s),l=i.getItem(s);if(i.options.hasOwnProperty(s)){if("string"!=typeof r)throw new Error("Value must be set in option data");if(e.$order=e.$order||i.options[s].$order,delete i.options[s],i.uncacheValue(r),i.uncacheValue(s,!1),i.options[r]=e,a){if(i.dropdown_content.contains(a)){const t=i._render("option",e);A(a,t),i.activeOption===a&&i.setActiveOption(t)}a.remove()}l&&(-1!==(o=i.items.indexOf(s))&&i.items.splice(o,1,r),n=i._render("item",e),l.classList.contains("active")&&w(n,"active"),A(l,n)),i.lastQuery=null}}removeOption(t,e){const i=this;t=V(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(){this.loadedSearches={},this.userOptions={},this.clearCache();var t={};for(let e in this.options)this.options.hasOwnProperty(e)&&this.items.indexOf(e)>=0&&(t[e]=this.options[e]);this.options=this.sifter.items=t,this.lastQuery=null,this.trigger("option_clear")}uncacheValue(t,e=!0){const i=this,n=i.renderCache.item,o=i.renderCache.option;if(n&&delete n[t],o&&delete o[t],e){const e=i.getOption(t);e&&e.remove()}}getOption(t){var e=W(t);return this.rendered("option",e)}getAdjacent(t,e,i="option"){var n,o=this;if(!t)return null;n="item"==i?o.controlChildren():o.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<n.length;i++)if(n[i]==t)return e>0?n[i+1]:n[i-1];return null}getItem(t){if("object"==typeof t)return t;var e=W(t);return e?this.control.querySelector(`[data-value="${et(e)}"]`):null}addItems(t,e){var i=this,n=Array.isArray(t)?t:[t];for(let t=0,o=(n=n.filter((t=>-1===i.items.indexOf(t)))).length;t<o;t++)i.isPending=t<o-1,i.addItem(n[t],e)}addItem(t,e){X(this,e?[]:["change"],(()=>{var i,n;const o=this,s=o.settings.mode,r=W(t);if((!r||-1===o.items.indexOf(r)||("single"===s&&o.close(),"single"!==s&&o.settings.duplicates))&&null!==r&&o.options.hasOwnProperty(r)&&("single"===s&&o.clear(e),"multi"!==s||!o.isFull())){if(i=o._render("item",o.options[r]),o.control.contains(i)&&(i=i.cloneNode(!0)),n=o.isFull(),o.items.splice(o.caretPos,0,r),o.insertAtCaret(i),o.isSetup){let t=o.selectable();if(!o.isPending&&o.settings.hideSelected){let t=o.getOption(r),e=o.getAdjacent(t,1);e&&o.setActiveOption(e)}o.isPending||o.refreshOptions(o.isFocused&&"single"!==s),!t.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",r,i),o.isPending||o.updateOriginalInput({silent:e})}(!o.isPending||!n&&o.isFull())&&o.refreshState()}}))}removeItem(t=null,e){const i=this;if(!(t=i.getItem(t)))return;var n,o;const s=t.dataset.value;n=M(t),t.remove(),t.classList.contains("active")&&(o=i.activeItems.indexOf(t),i.activeItems.splice(o,1),b(t,"active")),i.items.splice(n,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(s)&&i.removeOption(s,e),n<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",s,t)}createItem(t=null,e=!0,i=(()=>{})){var n,o=this,s=o.caretPos;if(t=t||o.inputValue(),!o.canCreate(t))return i(),!1;o.lock();var r=!1,a=t=>{if(o.unlock(),!t||"object"!=typeof t)return i();var n=W(t[o.settings.valueField]);if("string"!=typeof n)return i();o.setTextboxValue(),o.addOption(t),o.setCaret(s),o.addItem(n),o.refreshOptions(e&&"single"!==o.settings.mode),i(t),r=!0};return n="function"==typeof o.settings.create?o.settings.create.call(this,t,a):{[o.settings.labelField]:t,[o.settings.valueField]:t},r||a(n),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){var t=this;t.refreshValidityState();var e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);var n=t.control.classList;n.toggle("focus",t.isFocused),n.toggle("disabled",t.isDisabled),n.toggle("required",t.isRequired),n.toggle("invalid",t.isInvalid),n.toggle("locked",i),n.toggle("full",e),n.toggle("not-full",!e),n.toggle("input-active",t.isFocused&&!t.isInputHidden),n.toggle("dropdown-active",t.isOpen),n.toggle("has-options",S(t.options)),n.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;if(t.input.checkValidity){this.isRequired&&(t.input.required=!0);var e=!t.input.checkValidity();t.isInvalid=e,t.control_input.required=e,this.isRequired&&(t.input.required=!e)}}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,n,o,s;if(e.is_select_tag){const t=document.createDocumentFragment();function r(e,i,n){return e||(e=_('<option value="'+Z(i)+'">'+Z(n)+"</option>")),e.selected=!0,T(e,{selected:"true"}),t.append(e),e}if(e.input.querySelectorAll("option[selected]").forEach((t=>{T(t,{selected:null}),t.selected=!1})),0!=e.items.length||"single"!=e.settings.mode||e.isRequired)for(i=0;i<e.items.length;i++)n=e.items[i],s=(o=e.options[n])[e.settings.labelField]||"",t.contains(o.$option)?r(e.input.querySelector(`option[value="${et(n)}"]`),n,s):o.$option=r(o.$option,n,s);else r(e.input.querySelector('option[value=""]'),"","");e.input.prepend(t)}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.isOpen=!0,T(t.control_input,{"aria-expanded":"true"}),t.refreshState(),E(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),E(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.tab_key||e.blur())),e.isOpen=!1,T(e.control_input,{"aria-expanded":"false"}),E(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,n=e.left+window.scrollX;E(this.dropdown,{width:e.width+"px",top:i+"px",left:n+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();for(const t of i)t.remove();e.items=[],e.lastQuery=null,e.setCaret(0),e.clearActiveItems(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear")}}insertAtCaret(t){var e=this,i=Math.min(e.caretPos,e.items.length),n=e.control;0===i?n.insertBefore(t,n.firstChild):n.insertBefore(t,n.children[i]),e.setCaret(i+1)}deleteSelection(t){var e,i,n,o,s=this;e=t&&t.keyCode===F?-1:1,i=K(s.control_input);const r=[];if(s.activeItems.length){o=P(s.activeItems,e),n=M(o),e>0&&n++;for(const t of s.activeItems)r.push(t)}else if((s.isFocused||"single"===s.settings.mode)&&s.items.length){const t=s.controlChildren();e<0&&0===i.start&&0===i.length?r.push(t[s.caretPos-1]):e>0&&i.start===s.inputValue().length&&r.push(t[s.caretPos])}const a=r.map((t=>t.dataset.value));if(!a.length||"function"==typeof s.settings.onDelete&&!1===s.settings.onDelete.call(s,a,t))return!1;for(J(t,!0),void 0!==n&&s.setCaret(n);r.length;)s.removeItem(r.pop());return s.showInput(),s.positionDropdown(),s.refreshOptions(!1),!0}advanceSelection(t,e){var i,n,o,s=this;s.rtl&&(t*=-1),s.inputValue().length||($(q,e)||$("shiftKey",e)?(o=(n=s.getLastActive(t))?n.classList.contains("active")?s.getAdjacent(n,t,"item"):n:t>0?s.control_input.nextElementSibling:s.control_input.previousElementSibling)&&(o.classList.contains("active")&&s.removeActiveItem(n),s.setActiveItemClass(o)):s.isFocused&&!s.activeItems.length?s.setCaret(s.caretPos+t):(n=s.getLastActive(t))&&(i=M(n),s.setCaret(t>0?i+1:i),s.setActiveItem()))}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");return i?P(i,t):void 0}setCaret(t){var e=this;"single"===e.settings.mode||e.settings.controlInput?t=e.items.length:(t=Math.max(0,Math.min(e.items.length,t)))==e.caretPos||e.isPending||e.controlChildren().forEach(((i,n)=>{n<t?e.control_input.insertAdjacentElement("beforebegin",i):e.control.appendChild(i)})),e.caretPos=t}controlChildren(){return Array.from(this.control.getElementsByClassName(this.settings.itemClass))}lock(){this.close(),this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){var t=this;t.input.disabled=!0,t.control_input.disabled=!0,t.control_input.tabIndex=-1,t.isDisabled=!0,t.lock()}enable(){var t=this;t.input.disabled=!1,t.control_input.disabled=!1,t.control_input.tabIndex=t.tabIndex,t.isDisabled=!1,t.unlock()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,b(t.input,"tomselected"),T(t.input,{hidden:null}),t.input.required=this.isRequired,t._destroy(),delete t.input.tomselect}render(t,e){return"function"!=typeof this.settings.render[t]?null:this._render(t,e)}_render(t,e){var i,n,o;const s=this;return("option"===t||"item"===t)&&(i=V(e[s.settings.valueField]),o=s.rendered(t,i))?o:(o=s.settings.render[t].call(this,e,Z))?(o=_(o),"option"===t||"option_create"===t?e[s.settings.disabledField]?T(o,{"aria-disabled":"true"}):T(o,{"data-selectable":""}):"optgroup"===t&&(n=e.group[s.settings.optgroupValueField],T(o,{"data-group":n}),e.group[s.settings.disabledField]&&T(o,{"data-disabled":""})),"option"!==t&&"item"!==t||(T(o,{"data-value":i}),"item"===t?w(o,s.settings.itemClass):(w(o,s.settings.optionClass),T(o,{role:"option",id:e.$id})),s.renderCache[t][i]=o),o):o}rendered(t,e){return null!==e&&this.renderCache[t].hasOwnProperty(e)?this.renderCache[t][e]:null}clearCache(t){var e=this;for(let t in e.options){const i=e.getOption(t);i&&i.remove()}void 0===t?e.renderCache={item:{},option:{}}:e.renderCache[t]={}}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var n=this,o=n[e];n[e]=function(){var e,s;return"after"===t&&(e=o.apply(n,arguments)),s=i.apply(n,arguments),"instead"===t?s:("before"===t&&(e=o.apply(n,arguments)),e)}}}return ot.define("change_listener",(function(){const t=this,e=e=>e.join(t.settings.delimiter);Q(t.input,"change",(()=>{var i=it(t.input,{delimiter:t.settings.delimiter});e(t.items)!=e(i.items)&&(t.setupOptions(i.options,i.optgroups),t.setValue(i.items))}))})),ot.define("checkbox_options",(function(){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;var i=function(t){setTimeout((()=>{var e=t.querySelector("input");t.classList.contains("selected")?e.checked=!0:e.checked=!1}),1)};t.hook("after","setupTemplates",(()=>{var e=t.settings.render.option;t.settings.render.option=function(i){var n=_(e.apply(t,arguments)),o=document.createElement("input");o.addEventListener("click",(function(t){J(t)})),o.type="checkbox";const s=W(i[t.settings.valueField]);return s&&t.items.indexOf(s)>-1&&(o.checked=!0),n.prepend(o),n}})),t.on("item_remove",(e=>{var n=t.getOption(e);n&&(n.classList.remove("selected"),i(n))})),t.hook("instead","onOptionSelect",(function(n,o){if(o.classList.contains("selected"))return o.classList.remove("selected"),t.removeItem(o.dataset.value),t.refreshOptions(),void J(n,!0);e.apply(t,arguments),i(o)}))})),ot.define("clear_button",(function(t){var e=this;t=Object.assign({className:"clear-button",title:"Clear All",html:t=>`<div class="${t.className}" title="${t.title}">&times;</div>`},t),e.hook("after","setup",(()=>{var i=_(t.html(t));i.addEventListener("click",(t=>{e.clear(),t.preventDefault(),t.stopPropagation()})),e.control.appendChild(i)}))})),ot.define("drag_drop",(function(){var t=this;if(!n.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===t.settings.mode){var e=t.lock,i=t.unlock;t.hook("instead","lock",(function(){var i=n(t.control).data("sortable");return i&&i.disable(),e.apply(t,arguments)})),t.hook("instead","unlock",(function(){var e=n(t.control).data("sortable");return e&&e.enable(),i.apply(t,arguments)})),t.hook("after","setup",(()=>{var e=n(t.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:(t,i)=>{i.placeholder.css("width",i.helper.css("width")),e.css({overflow:"visible"})},stop:()=>{e.css({overflow:"hidden"});var i=[];e.children("[data-value]").each((function(){this.dataset.value&&i.push(this.dataset.value)})),t.setValue(i)}})}))}})),ot.define("dropdown_header",(function(t){var e=this;t=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:t=>'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a class="'+t.closeClass+'">&times;</a></div></div>'},t),e.hook("after","setup",(()=>{var i=_(t.html(t)),n=i.querySelector("."+t.closeClass);n&&n.addEventListener("click",(t=>{J(t,!0),e.close()})),e.dropdown.insertBefore(i,e.dropdown.firstChild)}))})),ot.define("dropdown_input",(function(){var t=this,e=t.settings.controlInput||'<input type="text" autocomplete="off" class="dropdown-input" />';e=_(e),t.settings.placeholder&&T(e,{placeholder:t.settings.placeholder}),t.settings.controlInput=e,t.settings.shouldOpen=!0,t.hook("after","setup",(()=>{T(t.wrapper,{tabindex:t.input.disabled?"-1":""+t.tabIndex}),Q(t.wrapper,"keypress",(e=>{if(!t.control.contains(e.target)&&!t.dropdown.contains(e.target))switch(e.keyCode){case D:return void t.onClick()}}));let i=_('<div class="dropdown-input-wrap">');i.appendChild(e),t.dropdown.insertBefore(i,t.dropdown.firstChild)}))})),ot.define("input_autogrow",(function(){var t=this;t.hook("after","setup",(()=>{var e=document.createElement("span"),i=t.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e);var n=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const t of n)e.style[t]=i.style[t];var o=()=>{t.items.length>0?(e.textContent=i.value,i.style.width=e.clientWidth+"px"):i.style.width=""};o(),t.on("update item_add item_remove",o),Q(i,"input",o),Q(i,"keyup",o),Q(i,"blur",o),Q(i,"update",o)}))})),ot.define("no_backspace_delete",(function(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",(function(){return!!t.activeItems.length&&e.apply(t,arguments)}))})),ot.define("no_active_items",(function(){this.hook("instead","setActiveItem",(()=>{})),this.hook("instead","selectAll",(()=>{}))})),ot.define("optgroup_columns",(function(){var t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",(function(i){var n,o,s,r;if(!t.isOpen||i.keyCode!==G&&i.keyCode!==U)return e.apply(t,arguments);r=C(t.activeOption,"[data-group]"),n=M(t.activeOption,"[data-selectable]"),(r=i.keyCode===G?r.previousSibling:r.nextSibling)&&(o=(s=r.querySelectorAll("[data-selectable]"))[Math.min(s.length-1,n)])&&t.setActiveOption(o)}))})),ot.define("remove_button",(function(t){t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+Z(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",(()=>{var t=e.settings.render.item;e.settings.render.item=function(){var n=_(t.apply(e,arguments)),o=_(i);return n.appendChild(o),Q(o,"mousedown",(t=>{J(t,!0)})),Q(o,"click",(t=>{if(J(t,!0),!e.isLocked){var i=n.dataset.value;e.removeItem(i),e.refreshOptions(!1)}})),n}}))}})),ot.define("restore_on_backspace",(function(t){var e=this;t.text=t.text||function(t){return t[e.settings.labelField]},e.on("item_remove",(function(i){if(""===e.control_input.value.trim()){var n=e.options[i];n&&e.setTextboxValue(t.text.call(e,n))}}))})),ot.define("virtual_scroll",(function(){const t=this,e=t.canLoad,i=t.clearActiveOption,n=t.loadCallback;var o,s={},r=!1;if(!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";function a(e){return!("number"==typeof t.settings.maxOptions&&o.children.length>=t.settings.maxOptions||!(e in s)||!s[e])}t.settings.sortField=[{field:"$order"},{field:"$score"}],t.setNextUrl=function(t,e){s[t]=e},t.getUrl=function(e){if(e in s){const t=s[e];return s[e]=!1,t}return s={},t.settings.firstUrl(e)},t.hook("instead","clearActiveOption",(()=>{if(!r)return i.call(t)})),t.hook("instead","canLoad",(i=>i in s?a(i):e.call(t,i))),t.hook("instead","loadCallback",((e,i,o)=>{r||t.clearOptions(),n.call(t,e,i,o),r=!1})),t.hook("after","refreshOptions",(()=>{const e=t.lastValue;var i;a(e)?(i=t.render("loading_more",{query:e}))&&i.setAttribute("data-selectable",""):e in s&&!o.querySelector(".no-results")&&(i=t.render("no_more_results",{query:e})),i&&(w(i,t.settings.optionClass),o.append(i))})),t.hook("after","setup",(()=>{o=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:function(){return'<div class="loading-more-results">Loading more results ... </div>'},no_more_results:function(){return'<div class="no-more-results">No more results</div>'}},t.settings.render),o.addEventListener("scroll",(function(){o.clientHeight/(o.scrollHeight-o.scrollTop)<.95||a(t.lastValue)&&(r||(r=!0,t.load.call(t,t.lastValue)))}))}))})),ot}()},150:(t,e,i)=>{function n(t){this.options=t||{locator:{}}}function o(){this.cdata=!1}function s(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function r(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function a(t,e,i){return"string"==typeof t?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}function l(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}n.prototype.parseFromString=function(t,e){var i=this.options,n=new c,s=i.domBuilder||new o,a=i.errorHandler,l=i.locator,h=i.xmlns||{},u={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&s.setDocumentLocator(l),n.errorHandler=function(t,e,i){if(!t){if(e instanceof o)return e;t=e}var n={},s=t instanceof Function;function a(e){var o=t[e];!o&&s&&(o=2==t.length?function(i){t(e,i)}:t),n[e]=o&&function(t){o("[xmldom "+e+"]\t"+t+r(i))}||function(){}}return i=i||{},a("warning"),a("error"),a("fatalError"),n}(a,s,l),n.domBuilder=i.domBuilder||s,/\/x?html?$/.test(e)&&(u.nbsp=" ",u.copy="©",h[""]="http://www.w3.org/1999/xhtml"),h.xml=h.xml||"http://www.w3.org/XML/1998/namespace",t?n.parse(t,h,u):n.errorHandler.error("invalid doc source"),s.doc},o.prototype={startDocument:function(){this.doc=(new h).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,i,n){var o=this.doc,r=o.createElementNS(t,i||e),a=n.length;l(this,r),this.currentElement=r,this.locator&&s(this.locator,r);for(var c=0;c<a;c++){t=n.getURI(c);var h=n.getValue(c),u=(i=n.getQName(c),o.createAttributeNS(t,i));this.locator&&s(n.getLocator(c),u),u.value=u.nodeValue=h,r.setAttributeNode(u)}},endElement:function(t,e,i){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var i=this.doc.createProcessingInstruction(t,e);this.locator&&s(this.locator,i),l(this,i)},ignorableWhitespace:function(t,e,i){},characters:function(t,e,i){if(t=a.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(t);else n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&s(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,i){t=a.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&s(this.locator,n),l(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var o=n.createDocumentType(t,e,i);this.locator&&s(this.locator,o),l(this,o)}},warning:function(t){console.warn("[xmldom warning]\t"+t,r(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,r(this.locator))},fatalError:function(t){throw console.error("[xmldom fatalError]\t"+t,r(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){o.prototype[t]=function(){return null}}));var c=i(147).G,h=i(541).DOMImplementation;i(541),e.a=n},541:(t,e)=>{function i(t,e){for(var i in t)e[i]=t[i]}function n(t,e){var n=t.prototype;if(Object.create){var o=Object.create(e.prototype);n.__proto__=o}if(!(n instanceof e)){function s(){}s.prototype=e.prototype,i(n,s=new s),t.prototype=n=s}n.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),n.constructor=t)}var o={},s=o.ELEMENT_NODE=1,r=o.ATTRIBUTE_NODE=2,a=o.TEXT_NODE=3,l=o.CDATA_SECTION_NODE=4,c=o.ENTITY_REFERENCE_NODE=5,h=o.ENTITY_NODE=6,u=o.PROCESSING_INSTRUCTION_NODE=7,d=o.COMMENT_NODE=8,p=o.DOCUMENT_NODE=9,f=o.DOCUMENT_TYPE_NODE=10,m=o.DOCUMENT_FRAGMENT_NODE=11,g=o.NOTATION_NODE=12,_={},v={},y=(_.INDEX_SIZE_ERR=(v[1]="Index size error",1),_.DOMSTRING_SIZE_ERR=(v[2]="DOMString size error",2),_.HIERARCHY_REQUEST_ERR=(v[3]="Hierarchy request error",3)),E=(_.WRONG_DOCUMENT_ERR=(v[4]="Wrong document",4),_.INVALID_CHARACTER_ERR=(v[5]="Invalid character",5),_.NO_DATA_ALLOWED_ERR=(v[6]="No data allowed",6),_.NO_MODIFICATION_ALLOWED_ERR=(v[7]="No modification allowed",7),_.NOT_FOUND_ERR=(v[8]="Not found",8)),w=(_.NOT_SUPPORTED_ERR=(v[9]="Not supported",9),_.INUSE_ATTRIBUTE_ERR=(v[10]="Attribute in use",10));_.INVALID_STATE_ERR=(v[11]="Invalid state",11),_.SYNTAX_ERR=(v[12]="Syntax error",12),_.INVALID_MODIFICATION_ERR=(v[13]="Invalid modification",13),_.NAMESPACE_ERR=(v[14]="Invalid namespace",14),_.INVALID_ACCESS_ERR=(v[15]="Invalid access",15);function b(t,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,v[t]),this.message=v[t],Error.captureStackTrace&&Error.captureStackTrace(this,b);return i.code=t,e&&(this.message=this.message+": "+e),i}function x(){}function L(t,e){this._node=t,this._refresh=e,C(this)}function C(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);nt(t,"length",n.length),i(n,t),t._inc=e}}function P(){}function S(t,e){for(var i=t.length;i--;)if(t[i]===e)return i}function M(t,e,i,n){if(n?e[S(e,n)]=i:e[e.length++]=i,t){i.ownerElement=t;var o=t.ownerDocument;o&&(n&&O(o,t,n),function(t,e,i){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&(e._nsMap[i.prefix?i.localName:""]=i.value)}(o,t,i))}}function T(t,e,i){var n=S(e,i);if(!(n>=0))throw b(E,new Error(t.tagName+"@"+i));for(var o=e.length-1;n<o;)e[n]=e[++n];if(e.length=o,t){var s=t.ownerDocument;s&&(O(s,t,i),i.ownerElement=null)}}function A(t){if(this._features={},t)for(var e in t)this._features=t[e]}function I(){}function k(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function R(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(R(t,e))return!0}while(t=t.nextSibling)}function D(){}function O(t,e,i,n){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&delete e._nsMap[i.prefix?i.localName:""]}function G(t,e,i){if(t&&t._inc){t._inc++;var n=e.childNodes;if(i)n[n.length++]=i;else{for(var o=e.firstChild,s=0;o;)n[s++]=o,o=o.nextSibling;n.length=s}}}function N(t,e){var i=e.previousSibling,n=e.nextSibling;return i?i.nextSibling=n:t.firstChild=n,n?n.previousSibling=i:t.lastChild=i,G(t.ownerDocument,t),e}function U(t,e,i){var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===m){var o=e.firstChild;if(null==o)return e;var s=e.lastChild}else o=s=e;var r=i?i.previousSibling:t.lastChild;o.previousSibling=r,s.nextSibling=i,r?r.nextSibling=o:t.firstChild=o,null==i?t.lastChild=s:i.previousSibling=s;do{o.parentNode=t}while(o!==s&&(o=o.nextSibling));return G(t.ownerDocument||t,t),e.nodeType==m&&(e.firstChild=e.lastChild=null),e}function j(){this._nsMap={}}function F(){}function z(){}function B(){}function q(){}function H(){}function W(){}function V(){}function Z(){}function Y(){}function X(){}function K(){}function J(){}function Q(t,e){var i=[],n=9==this.nodeType?this.documentElement:this,o=n.prefix,s=n.namespaceURI;if(s&&null==o&&null==(o=n.lookupPrefix(s)))var r=[{namespace:s,prefix:null}];return tt(this,i,t,e,r),i.join("")}function $(t,e,i){var n=t.prefix||"",o=t.namespaceURI;if(!n&&!o)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var s=i.length;s--;){var r=i[s];if(r.prefix==n)return r.namespace!=o}return!0}function tt(t,e,i,n,o){if(n){if(!(t=n(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case s:o||(o=[]);o.length;var h=t.attributes,g=h.length,_=t.firstChild,v=t.tagName;i="http://www.w3.org/1999/xhtml"===t.namespaceURI||i,e.push("<",v);for(var y=0;y<g;y++){"xmlns"==(E=h.item(y)).prefix?o.push({prefix:E.localName,namespace:E.value}):"xmlns"==E.nodeName&&o.push({prefix:"",namespace:E.value})}for(y=0;y<g;y++){var E;if($(E=h.item(y),0,o)){var w=E.prefix||"",b=E.namespaceURI,x=w?" xmlns:"+w:" xmlns";e.push(x,'="',b,'"'),o.push({prefix:w,namespace:b})}tt(E,e,i,n,o)}if($(t,0,o)){w=t.prefix||"",b=t.namespaceURI,x=w?" xmlns:"+w:" xmlns";e.push(x,'="',b,'"'),o.push({prefix:w,namespace:b})}if(_||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(v)){if(e.push(">"),i&&/^script$/i.test(v))for(;_;)_.data?e.push(_.data):tt(_,e,i,n,o),_=_.nextSibling;else for(;_;)tt(_,e,i,n,o),_=_.nextSibling;e.push("</",v,">")}else e.push("/>");return;case p:case m:for(_=t.firstChild;_;)tt(_,e,i,n,o),_=_.nextSibling;return;case r:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,k),'"');case a:return e.push(t.data.replace(/[<&]/g,k));case l:return e.push("<![CDATA[",t.data,"]]>");case d:return e.push("\x3c!--",t.data,"--\x3e");case f:var L=t.publicId,C=t.systemId;if(e.push("<!DOCTYPE ",t.name),L)e.push(' PUBLIC "',L),C&&"."!=C&&e.push('" "',C),e.push('">');else if(C&&"."!=C)e.push(' SYSTEM "',C,'">');else{var P=t.internalSubset;P&&e.push(" [",P,"]"),e.push(">")}return;case u:return e.push("<?",t.target," ",t.data,"?>");case c:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function et(t,e,i){var n;switch(e.nodeType){case s:(n=e.cloneNode(!1)).ownerDocument=t;case m:break;case r:i=!0}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,i)for(var o=e.firstChild;o;)n.appendChild(et(t,o,i)),o=o.nextSibling;return n}function it(t,e,i){var n=new e.constructor;for(var o in e){var a=e[o];"object"!=typeof a&&a!=n[o]&&(n[o]=a)}switch(e.childNodes&&(n.childNodes=new x),n.ownerDocument=t,n.nodeType){case s:var l=e.attributes,c=n.attributes=new P,h=l.length;c._ownerElement=n;for(var u=0;u<h;u++)n.setAttributeNode(it(t,l.item(u),!0));break;case r:i=!0}if(i)for(var d=e.firstChild;d;)n.appendChild(it(t,d,i)),d=d.nextSibling;return n}function nt(t,e,i){t[e]=i}b.prototype=Error.prototype,i(_,b),x.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var i=[],n=0;n<this.length;n++)tt(this[n],i,t,e);return i.join("")}},L.prototype.item=function(t){return C(this),this[t]},n(L,x),P.prototype={length:0,item:x.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==t)return i}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new b(w);var i=this.getNamedItem(t.nodeName);return M(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var e,i=t.ownerElement;if(i&&i!=this._ownerElement)throw new b(w);return e=this.getNamedItemNS(t.namespaceURI,t.localName),M(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return T(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);return T(this._ownerElement,this,i),i},getNamedItemNS:function(t,e){for(var i=this.length;i--;){var n=this[i];if(n.localName==e&&n.namespaceURI==t)return n}return null}},A.prototype={hasFeature:function(t,e){var i=this._features[t.toLowerCase()];return!(!i||e&&!(e in i))},createDocument:function(t,e,i){var n=new D;if(n.implementation=this,n.childNodes=new x,n.doctype=i,i&&n.appendChild(i),e){var o=n.createElementNS(t,e);n.appendChild(o)}return n},createDocumentType:function(t,e,i){var n=new W;return n.name=t,n.nodeName=t,n.publicId=e,n.systemId=i,n}},I.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return U(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return N(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return it(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==a&&t.nodeType==a?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i)for(var n in i)if(i[n]==t)return n;e=e.nodeType==r?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&t in i)return i[t];e=e.nodeType==r?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},i(o,I),i(o,I.prototype),D.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==m){for(var i=t.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,e),i=n}return t}return null==this.documentElement&&t.nodeType==s&&(this.documentElement=t),U(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),N(this,t)},importNode:function(t,e){return et(this,t,e)},getElementById:function(t){var e=null;return R(this.documentElement,(function(i){if(i.nodeType==s&&i.getAttribute("id")==t)return e=i,!0})),e},createElement:function(t){var e=new j;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new x,(e.attributes=new P)._ownerElement=e,e},createDocumentFragment:function(){var t=new X;return t.ownerDocument=this,t.childNodes=new x,t},createTextNode:function(t){var e=new B;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new q;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new H;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new K;return i.ownerDocument=this,i.tagName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){var e=new F;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Y;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var i=new j,n=e.split(":"),o=i.attributes=new P;return i.childNodes=new x,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=e,o._ownerElement=i,i},createAttributeNS:function(t,e){var i=new F,n=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=t,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=e,i}},n(D,I),j.prototype={nodeType:s,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===m?this.insertBefore(t,null):function(t,e){var i=e.parentNode;if(i){var n=t.lastChild;i.removeChild(e),n=t.lastChild}return n=t.lastChild,e.parentNode=t,e.previousSibling=n,e.nextSibling=null,n?n.nextSibling=e:t.firstChild=e,t.lastChild=e,G(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);return i&&i.value||""},setAttributeNS:function(t,e,i){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new L(this,(function(e){var i=[];return R(e,(function(n){n===e||n.nodeType!=s||"*"!==t&&n.tagName!=t||i.push(n)})),i}))},getElementsByTagNameNS:function(t,e){return new L(this,(function(i){var n=[];return R(i,(function(o){o===i||o.nodeType!==s||"*"!==t&&o.namespaceURI!==t||"*"!==e&&o.localName!=e||n.push(o)})),n}))}},D.prototype.getElementsByTagName=j.prototype.getElementsByTagName,D.prototype.getElementsByTagNameNS=j.prototype.getElementsByTagNameNS,n(j,I),F.prototype.nodeType=r,n(F,I),z.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(v[y])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){i=this.data.substring(0,t)+i+this.data.substring(t+e),this.nodeValue=this.data=i,this.length=i.length}},n(z,I),B.prototype={nodeName:"#text",nodeType:a,splitText:function(t){var e=this.data,i=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},n(B,z),q.prototype={nodeName:"#comment",nodeType:d},n(q,z),H.prototype={nodeName:"#cdata-section",nodeType:l},n(H,z),W.prototype.nodeType=f,n(W,I),V.prototype.nodeType=g,n(V,I),Z.prototype.nodeType=h,n(Z,I),Y.prototype.nodeType=c,n(Y,I),X.prototype.nodeName="#document-fragment",X.prototype.nodeType=m,n(X,I),K.prototype.nodeType=u,n(K,I),J.prototype.serializeToString=function(t,e,i){return Q.call(t,e,i)},I.prototype.toString=Q;try{if(Object.defineProperty){function ot(t){switch(t.nodeType){case s:case m:var e=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&e.push(ot(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}}Object.defineProperty(L.prototype,"length",{get:function(){return C(this),this.$$length}}),Object.defineProperty(I.prototype,"textContent",{get:function(){return ot(this)},set:function(t){switch(this.nodeType){case s:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),nt=function(t,e,i){t["$$"+e]=i}}}catch(t){}e.DOMImplementation=A},147:(t,e)=>{var i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+i.source+n.source+"*(?::"+i.source+n.source+"*)?$");function s(){}function r(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function a(t,e,i,n,o,s){for(var r,a=++e,l=0;;){var c=t.charAt(a);switch(c){case"=":if(1===l)r=t.slice(e,a),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(s.warning('attribute value must after "="'),r=t.slice(e,a)),e=a+1,!((a=t.indexOf(c,e))>0))throw new Error("attribute value no end '"+c+"' match");h=t.slice(e,a).replace(/&#?\w+;/g,o),i.add(r,h,e-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');h=t.slice(e,a).replace(/&#?\w+;/g,o),i.add(r,h,e),s.warning('attribute "'+r+'" missed start quot('+c+")!!"),e=a+1,l=5}break;case"/":switch(l){case 0:i.setTagName(t.slice(e,a));case 5:case 6:case 7:l=7,i.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),0==l&&i.setTagName(t.slice(e,a)),a;case">":switch(l){case 0:i.setTagName(t.slice(e,a));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=t.slice(e,a)).slice(-1)&&(i.closed=!0,h=h.slice(0,-1));case 2:2===l&&(h=r),4==l?(s.warning('attribute "'+h+'" missed quot(")!!'),i.add(r,h.replace(/&#?\w+;/g,o),e)):("http://www.w3.org/1999/xhtml"===n[""]&&h.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),i.add(h,h,e));break;case 3:throw new Error("attribute value missed!!")}return a;case"":c=" ";default:if(c<=" ")switch(l){case 0:i.setTagName(t.slice(e,a)),l=6;break;case 1:r=t.slice(e,a),l=2;break;case 4:var h=t.slice(e,a).replace(/&#?\w+;/g,o);s.warning('attribute "'+h+'" missed quot(")!!'),i.add(r,h,e);case 5:l=6}else switch(l){case 2:i.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&r.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+r+'" missed value!! "'+r+'" instead2!!'),i.add(r,r,e),e=a,l=1;break;case 5:s.warning('attribute space is required"'+r+'"!!');case 6:l=1,e=a;break;case 3:l=4,e=a;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}a++}}function l(t,e,i){for(var n=t.tagName,o=null,s=t.length;s--;){var r=t[s],a=r.qName,l=r.value;if((p=a.indexOf(":"))>0)var c=r.prefix=a.slice(0,p),h=a.slice(p+1),d="xmlns"===c&&h;else h=a,c=null,d="xmlns"===a&&"";r.localName=h,!1!==d&&(null==o&&(o={},u(i,i={})),i[d]=o[d]=l,r.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(d,l))}for(s=t.length;s--;){(c=(r=t[s]).prefix)&&("xml"===c&&(r.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(r.uri=i[c||""]))}var p;(p=n.indexOf(":"))>0?(c=t.prefix=n.slice(0,p),h=t.localName=n.slice(p+1)):(c=null,h=t.localName=n);var f=t.uri=i[c||""];if(e.startElement(f,h,n,t),!t.closed)return t.currentNSMap=i,t.localNSMap=o,!0;if(e.endElement(f,h,n),o)for(c in o)e.endPrefixMapping(c)}function c(t,e,i,n,o){if(/^(?:script|textarea)$/i.test(i)){var s=t.indexOf("</"+i+">",e),r=t.substring(e+1,s);if(/[&<]/.test(r))return/^script$/i.test(i)?(o.characters(r,0,r.length),s):(r=r.replace(/&#?\w+;/g,n),o.characters(r,0,r.length),s)}return e+1}function h(t,e,i,n){var o=n[i];return null==o&&((o=t.lastIndexOf("</"+i+">"))<e&&(o=t.lastIndexOf("</"+i)),n[i]=o),o<e}function u(t,e){for(var i in t)e[i]=t[i]}function d(t,e,i,n){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(o=t.indexOf("--\x3e",e+4))>e?(i.comment(t,e+4,o-e-4),o+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var o=t.indexOf("]]>",e+9);return i.startCDATA(),i.characters(t,e+9,o-e-9),i.endCDATA(),o+3}var s=function(t,e){var i,n=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;o.lastIndex=e,o.exec(t);for(;i=o.exec(t);)if(n.push(i),i[1])return n}(t,e),r=s.length;if(r>1&&/!doctype/i.test(s[0][0])){var a=s[1][0],l=r>3&&/^public$/i.test(s[2][0])&&s[3][0],c=r>4&&s[4][0],h=s[r-1];return i.startDTD(a,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),i.endDTD(),h.index+h[0].length}}return-1}function p(t,e,i){var n=t.indexOf("?>",e);if(n){var o=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return i.processingInstruction(o[1],o[2]),n+2}return-1}return-1}function f(t){}function m(t,e){return t.__proto__=e,t}s.prototype={parse:function(t,e,i){var n=this.domBuilder;n.startDocument(),u(e,e={}),function(t,e,i,n,o){function s(t){if(t>65535){var e=55296+((t-=65536)>>10),i=56320+(1023&t);return String.fromCharCode(e,i)}return String.fromCharCode(t)}function u(t){var e=t.slice(1,-1);return e in i?i[e]:"#"===e.charAt(0)?s(parseInt(e.substr(1).replace("x","0x"))):(o.error("entity not found:"+t),t)}function m(e){if(e>x){var i=t.substring(x,e).replace(/&#?\w+;/g,u);E&&g(x),n.characters(i,0,e-x),x=e}}function g(e,i){for(;e>=v&&(i=y.exec(t));)_=i.index,v=_+i[0].length,E.lineNumber++;E.columnNumber=e-_+1}var _=0,v=0,y=/.*(?:\r\n?|\n)|.*$/g,E=n.locator,w=[{currentNSMap:e}],b={},x=0;for(;;){try{var L=t.indexOf("<",x);if(L<0){if(!t.substr(x).match(/^\s*$/)){var C=n.doc,P=C.createTextNode(t.substr(x));C.appendChild(P),n.currentElement=P}return}switch(L>x&&m(L),t.charAt(L+1)){case"/":var S=t.indexOf(">",L+3),M=t.substring(L+2,S),T=w.pop();S<0?(M=t.substring(L+2).replace(/[\s<].*/,""),o.error("end tag name: "+M+" is not complete:"+T.tagName),S=L+1+M.length):M.match(/\s</)&&(M=M.replace(/[\s<].*/,""),o.error("end tag name: "+M+" maybe not complete"),S=L+1+M.length);var A=T.localNSMap,I=T.tagName==M;if(I||T.tagName&&T.tagName.toLowerCase()==M.toLowerCase()){if(n.endElement(T.uri,T.localName,M),A)for(var k in A)n.endPrefixMapping(k);I||o.fatalError("end tag name: "+M+" is not match the current start tagName:"+T.tagName)}else w.push(T);S++;break;case"?":E&&g(L),S=p(t,L,n);break;case"!":E&&g(L),S=d(t,L,n,o);break;default:E&&g(L);var R=new f,D=w[w.length-1].currentNSMap,O=(S=a(t,L,R,D,u,o),R.length);if(!R.closed&&h(t,S,R.tagName,b)&&(R.closed=!0,i.nbsp||o.warning("unclosed xml attribute")),E&&O){for(var G=r(E,{}),N=0;N<O;N++){var U=R[N];g(U.offset),U.locator=r(E,{})}n.locator=G,l(R,n,D)&&w.push(R),n.locator=E}else l(R,n,D)&&w.push(R);"http://www.w3.org/1999/xhtml"!==R.uri||R.closed?S++:S=c(t,S,R.tagName,u,n)}}catch(t){o.error("element parse error: "+t),S=-1}S>x?x=S:m(Math.max(L,x)+1)}}(t,e,i,n,this.errorHandler),n.endDocument()}},f.prototype={setTagName:function(t){if(!o.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,i){if(!o.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},m({},m.prototype)instanceof m||(m=function(t,e){function i(){}for(e in i.prototype=e,i=new i,t)i[e]=t[e];return i}),e.G=s}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};i(869)})();