{%- set display_preview = image_uri is defined and image_uri is not null and (image_uri matches '/.*\.(png|jpg|jpeg|gif|svg|webp)$/' or image_uri starts with '/') and filename is defined -%}

<div class="d-block {% if display_preview %}col-md-9{% else %}col-12{% endif %}">
    <div
        class="vich-file">
        {%- if errors|length > 0 -%}
            {%- set attr = attr|merge({class: (attr.class|default('') ~ ' is-invalid')|trim}) -%}
        {%- endif -%}
        {{- form_widget(form.file, {attr: attr}) -}}
    </div>

    {%- if download_uri and filename is defined -%}
        <div class="d-flex mt-1">
            <i class="fas fa-download mt-1 text-dark"></i>&nbsp;
            <a class="d-block text-nowrap"
               href="{{ asset_helper is same as(true) ? asset(download_uri) : download_uri }}" download>
                {{ translation_domain is same as(false) ? download_label : download_label|trans({}, translation_domain) }}
                &nbsp;:&nbsp;
                {{ filename|lower }}
            </a>
        </div>
    {%- endif -%}

    {%- if form.delete is defined -%}
        <div class="mt-1">
            {{- form_row(form.delete) -}}
        </div>
    {%- endif -%}
</div>

{%- if display_preview -%}
    <div class="col-md-3 d-block">
        <img class="col-12 mb-2" src="{{ image_uri }}" alt=""/>
    </div>
{%- endif -%}
