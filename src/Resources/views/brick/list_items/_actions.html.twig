<td>
    <div class="btn-group btn-group-sm" role="group">
        {% for action in view.config.actions %}
            {% if (action.path.role is null or is_granted(action.path.role)) and loop.index < 4 %}
                {% set params = { 'id': line.resource.id } %}
                {% do action.setResource(line.resource) %}
                {% if action.modal %}
                    {% include action.modal with {action: action, id: 'modal_' ~ action.id ~ line.resource.id } %}
                {% endif %}
                <span class="btn-wrapper" title="{{ action.title|trans }}">
                    <a class="{{ action.cssClass ?? 'btn btn-sm' }} {% if action.disabled %}disabled{% endif %}"
                            {% if action.modal %}
                                data-bs-toggle="modal" data-bs-target="#modal_{{ action.id ~ line.resource.id }}"
                            {% elseif not action.disabled %}
                                href="{{ path(action.path.route, action.path.params({'id': line.id})) }}"
                            {% endif %}
                    >
                        {% if action.icon %}<i class="{{ action.icon.cssClass }}"></i>{% endif %}
                        {% if not action.hideLabel and not action.icon %}{{ action.label|trans }}{% endif %}
                    </a>
                </span>
            {% endif %}
        {% endfor %}

        {% if view.config.actions|length > 3 %}
            <div class="dropdown dropdown--no-arrow">
                <button id="actions_{{ line.resource.id }}" class="btn dropdown-toggle py-1" data-bs-toggle="dropdown">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                <ul class="dropdown-menu" aria-labelledby="#actions_{{ line.resource.id }}">
                    {% for action in view.config.actions %}
                        {% if (action.path.role is null or is_granted(action.path.role)) and loop.index > 3 %}
                            <li>
                                <a class="dropdown-item {% if action.disabled %}disabled{% endif %}"
                                        {% if action.modal %}
                                            data-bs-toggle="modal" data-bs-target="#modal_{{ action.id ~ line.resource.id }}"
                                        {% elseif not action.disabled %}
                                            href="{{ path(action.path.route, action.path.params({'id': line.id})) }}"
                                        {% endif %}
                                >
                                    {% if action.icon %}<i class="{{ action.icon.cssClass }}"></i>{% endif %}
                                    {{ action.label|trans }}
                                </a>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>
</td>